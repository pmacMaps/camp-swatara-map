{"mappings":"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","sources":["node_modules/@arcgis/core/layers/StreamLayer.js","node_modules/@arcgis/core/layers/support/PurgeOptions.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import r from\"../PopupTemplate.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/PieChartRenderer.js\";import\"../renderers/Renderer.js\";import t from\"../renderers/SimpleRenderer.js\";import o from\"../renderers/UniqueValueRenderer.js\";import{read as i}from\"../renderers/support/jsonUtils.js\";import{rendererTypes as s,webSceneRendererTypes as p}from\"../renderers/support/types.js\";import n from\"../request.js\";import{symbolTypesRenderer as a}from\"../symbols.js\";import l from\"../core/Error.js\";import d from\"../core/Logger.js\";import{isSome as m}from\"../core/maybe.js\";import{MultiOriginJSONMixin as y}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as f}from\"../core/promiseUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import{reader as h}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as g}from\"../core/accessorSupport/decorators/subclass.js\";import{createTypeReader as j}from\"../core/accessorSupport/extensions/serializableProperty/reader.js\";import{featureGeometryTypeKebabDictionary as S}from\"../geometry/support/typeUtils.js\";import v from\"./Layer.js\";import{ArcGISService as b}from\"./mixins/ArcGISService.js\";import{BlendLayer as I}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{FeatureEffectLayer as x}from\"./mixins/FeatureEffectLayer.js\";import{OperationalLayer as R}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as P}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as F}from\"./mixins/TemporalLayer.js\";import{labelsVisible as U,legendEnabled as D,maxScale as E,minScale as O,popupEnabled as k,screenSizePerspectiveEnabled as N,url as _}from\"./support/commonProperties.js\";import{featureReductionProperty as J}from\"./support/featureReductionUtils.js\";import{defineFieldProperties as A}from\"./support/fieldProperties.js\";import{fixRendererFields as G,fixTimeInfoFields as q}from\"./support/fieldUtils.js\";import C from\"./support/LabelClass.js\";import{reader as V}from\"./support/labelingInfo.js\";import z from\"./support/PurgeOptions.js\";import{loadStyleRenderer as M}from\"../renderers/support/styleUtils.js\";import W from\"../rest/support/Query.js\";import{createPopupTemplate as B}from\"../support/popupUtils.js\";import Q from\"../symbols/support/ElevationInfo.js\";import H from\"../geometry/SpatialReference.js\";import K from\"../geometry/Extent.js\";const X=d.getLogger(\"esri.layers.StreamLayer\"),Y=A();let Z=class extends(x(I(F(L(P(b(R(T(y(w(v))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType=\"ArcGISStreamLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new z,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=H.WGS84,this.type=\"stream\",this.url=null,this.updateInterval=300,this.webSocketUrl=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){if(!(\"WebSocket\"in globalThis))return this.addResolvingPromise(Promise.reject(new l(\"stream-layer:websocket-unsupported\",\"WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service.\"))),Promise.resolve(this);const r=m(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Stream Service\",\"Feed\"]},e).catch(f).then((()=>this._fetchService(r)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){G(e,this.fieldsIndex),this._set(\"renderer\",e)}readRenderer(e,r,s){const p=(r=r.layerDefinition||r).drawingInfo&&r.drawingInfo.renderer||void 0;if(p){const e=i(p,r,s)||void 0;return e||X.error(\"Failed to create renderer\",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:s}),e}if(r.defaultSymbol)return r.types&&r.types.length?new o({defaultSymbol:$(r.defaultSymbol,r,s),field:r.typeIdField,uniqueValueInfos:r.types.map((e=>({id:e.id,symbol:$(e.symbol,e,s)})))}):new t({symbol:$(r.defaultSymbol,r,s)})}createPopupTemplate(e){return B(this,e)}createQuery(){const e=new W;return e.returnGeometry=!0,e.outFields=[\"*\"],e.where=this.definitionExpression||\"1=1\",e}getFieldDomain(e,r){if(!this.fields)return null;let t=null;return this.fields.some((r=>(r.name===e&&(t=r.domain),!!t))),t}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}async _fetchService(e){if(!!this.webSocketUrl){if(!this.timeInfo?.trackIdField)throw new l(\"stream-layer:missing-metadata\",\"The stream layer trackIdField must be specified.\");if(!this.objectIdField)throw new l(\"stream-layer:missing-metadata\",\"The stream layer objectIdField must be specified.\");if(!this.fields)throw new l(\"stream-layer:missing-metadata\",\"The stream layer fields must be specified.\");if(!this.geometryType)throw new l(\"stream-layer:missing-metadata\",\"The stream layer geometryType must be specified.\");this.url=this.webSocketUrl}else if(!this.sourceJSON){const{data:r}=await n(this.parsedUrl.path,{query:{f:\"json\",...this.customParameters,...this.parsedUrl.query},responseType:\"json\",signal:e});this.sourceJSON=r}return this.sourceJSON={...this.sourceJSON??{},objectIdField:\"__esri_stream_id__\"},this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl}),G(this.renderer,this.fieldsIndex),q(this.timeInfo,this.fieldsIndex),M(this,{origin:\"service\"})}};e([u({type:String})],Z.prototype,\"copyright\",void 0),e([u({readOnly:!0})],Z.prototype,\"defaultPopupTemplate\",null),e([u({type:String,json:{name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],Z.prototype,\"definitionExpression\",void 0),e([u({type:String})],Z.prototype,\"displayField\",void 0),e([u({type:Q})],Z.prototype,\"elevationInfo\",void 0),e([u(J)],Z.prototype,\"featureReduction\",void 0),e([u(Y.fields)],Z.prototype,\"fields\",void 0),e([u(Y.fieldsIndex)],Z.prototype,\"fieldsIndex\",void 0),e([u({type:K})],Z.prototype,\"geometryDefinition\",void 0),e([u({type:S.apiValues,json:{read:{reader:S.read}}})],Z.prototype,\"geometryType\",void 0),e([u(U)],Z.prototype,\"labelsVisible\",void 0),e([u({type:[C],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\",reader:V},write:{target:\"layerDefinition.drawingInfo.labelingInfo\"}}})],Z.prototype,\"labelingInfo\",void 0),e([u(D)],Z.prototype,\"legendEnabled\",void 0),e([u({type:[\"show\",\"hide\"]})],Z.prototype,\"listMode\",void 0),e([u({type:c})],Z.prototype,\"maxReconnectionAttempts\",void 0),e([u({type:c})],Z.prototype,\"maxReconnectionInterval\",void 0),e([u(E)],Z.prototype,\"maxScale\",void 0),e([u(O)],Z.prototype,\"minScale\",void 0),e([u({type:String})],Z.prototype,\"objectIdField\",void 0),e([u({value:\"ArcGISStreamLayer\",type:[\"ArcGISStreamLayer\"]})],Z.prototype,\"operationalLayerType\",void 0),e([u(k)],Z.prototype,\"popupEnabled\",void 0),e([u({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],Z.prototype,\"popupTemplate\",void 0),e([u({type:z})],Z.prototype,\"purgeOptions\",void 0),e([u({types:s,json:{origins:{service:{write:{target:\"drawingInfo.renderer\",enabled:!1}},\"web-scene\":{name:\"layerDefinition.drawingInfo.renderer\",types:p,write:!0}},write:{target:\"layerDefinition.drawingInfo.renderer\"}}})],Z.prototype,\"renderer\",null),e([h(\"service\",\"renderer\",[\"drawingInfo.renderer\",\"defaultSymbol\"]),h(\"renderer\",[\"layerDefinition.drawingInfo.renderer\",\"layerDefinition.defaultSymbol\"])],Z.prototype,\"readRenderer\",null),e([u(N)],Z.prototype,\"screenSizePerspectiveEnabled\",void 0),e([u()],Z.prototype,\"sourceJSON\",void 0),e([u({type:H,json:{origins:{service:{read:{source:\"spatialReference\"}}}}})],Z.prototype,\"spatialReference\",void 0),e([u({json:{read:!1}})],Z.prototype,\"type\",void 0),e([u(_)],Z.prototype,\"url\",void 0),e([u({type:Number})],Z.prototype,\"updateInterval\",void 0),e([u({type:String})],Z.prototype,\"webSocketUrl\",void 0),Z=e([g(\"esri.layers.StreamLayer\")],Z);const $=j({types:a}),ee=Z;export{ee as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var t;let i=t=class extends o{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new t({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};e([r({type:Number,json:{write:!0}})],i.prototype,\"age\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"ageReceived\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"displayCount\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"maxObservations\",void 0),i=t=e([s(\"esri.layers.support.PurgeOptions\")],i);const p=i;export{p as default};\n"],"names":["$7eJjO","parcelRequire","$b31c377bffe6b3cb$var$X","$jHOLN","default","getLogger","$b31c377bffe6b3cb$var$Y","$ko0sb","defineFieldProperties","$b31c377bffe6b3cb$var$Z","$6bOVn","FeatureEffectLayer","$gIXJ2","BlendLayer","$2t08e","TemporalLayer","$3GzOb","ScaleRangeLayer","$13Qxf","RefreshableLayer","$aLy89","ArcGISService","$5N5S1","OperationalLayer","$9bAYR","PortalLayer","$8NioF","MultiOriginJSONMixin","$cv2jJ","CustomParametersMixin","$4LDxK","normalizeCtorArgs","e","r","url","load","globalThis","this","addResolvingPromise","Promise","reject","$kyj08","resolve","$7qybv","isSome","signal","loadFromPortal","supportedTypes","catch","$10vEZ","throwIfAbortError","then","_fetchService","defaultPopupTemplate","createPopupTemplate","renderer","$7vTUY","fixRendererFields","fieldsIndex","_set","readRenderer","s","p","layerDefinition","drawingInfo","e1","$lubf9","read","error","rendererDefinition","layer","context","defaultSymbol","types","length","$aRUMT","$b31c377bffe6b3cb$var$$","field","typeIdField","uniqueValueInfos","map","id","symbol","$fPYaT","$37qRo","createQuery","$cRlei","returnGeometry","outFields","where","definitionExpression","getFieldDomain","fields","t","some","name","domain","getField","get","serviceSupportsSpatialReference","async","webSocketUrl","ref","timeInfo","trackIdField","objectIdField","geometryType","sourceJSON","data","$9pNSx","parsedUrl","path","query","f","customParameters","responseType","_sourceJSON","origin","fixTimeInfoFields","$2TQQP","loadStyleRenderer","constructor","super","copyright","displayField","elevationInfo","featureReduction","geometryDefinition","labelsVisible","labelingInfo","legendEnabled","maxReconnectionAttempts","maxReconnectionInterval","maxScale","minScale","operationalLayerType","popupEnabled","popupTemplate","purgeOptions","$hETxd","screenSizePerspectiveEnabled","spatialReference","$j40xv","WGS84","type","updateInterval","_","$iho5X","property","String","prototype","readOnly","json","write","enabled","allowNull","$h5vCg","$bkDoB","featureReductionProperty","$gINRd","$7LVgC","featureGeometryTypeKebabDictionary","apiValues","reader","$gRgX5","$aYrEX","source","$gtLRH","target","$iJAIC","Integer","value","$3MVX3","$9ulmN","rendererTypes","origins","service","webSceneRendererTypes","$eB8sj","Number","$fcwIv","subclass","$bVD6V","createTypeReader","$cM5QQ","symbolTypesRenderer","$b31c377bffe6b3cb$export$2e2bcd8739ae039","$cdb1402665a8c39c$var$t","$cdb1402665a8c39c$var$i","$1XAcN","JSONSupport","clone","age","ageReceived","displayCount","maxObservations","arguments","$cdb1402665a8c39c$export$2e2bcd8739ae039"],"version":3,"file":"StreamLayer.1f82afb5.js.map"}