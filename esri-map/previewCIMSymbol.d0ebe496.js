!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("3mI71",(function(a,n){t(a.exports,"previewCIMSymbol",(function(){return y}));var i=r("8TSCy"),o=r("2TvXO"),l=r("iXlXu"),s=r("1JCAU"),c=r("7sx0B"),u=r("cBxZc"),m=r("bFgGH"),f=new(0,s.CIMSymbolRasterizer)(null,!0),h=u.SymbolSizeDefaults.maxSize;function y(e){return p.apply(this,arguments)}function p(){return p=i.asyncToGenerator(e(o).mark((function t(r){var a,n,i,s,u,y,p,g,v,d,x,C,b,w,M,P,z,S,I,k,_,A,F=arguments;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.length>1&&void 0!==F[1]?F[1]:{},n=a.size,i=a.maxSize,s=a.node,u=a.opacity,y=a.cimOptions||a,p=y.feature,g=y.fieldMap,v=y.geometryType,d=y.style,x=(0,c.getCIMSymbolSize)(r),C="number"==typeof n?n:null,(b=Math.min(null!=C?C:x,null!=i?i:(0,l.px2pt)(h)))!==x&&(r=r.clone(),(0,c.scaleCIMSymbolTo)(r,b,{preserveOutlineWidth:!0})),w=3,r&&r.data&&r.data.symbol&&"CIMPointSymbol"!==r.data.symbol.type&&(w=1),e.next=7,f.rasterizeCIMSymbolAsync(r,p,g,v,{scaleFactor:w,style:d});case 7:return M=e.sent,(P=document.createElement("canvas")).width=M.imageData.width,P.height=M.imageData.height,P.getContext("2d").putImageData(M.imageData,0,0),z=P.width/w,S=P.height/w,null==n||null!=(null==a?void 0:a.scale)&&!(null==a?void 0:a.scale)||(z=(I=z/S)<=1?Math.ceil(b*I):b,S=I<=1?b:Math.ceil(b/I)),(k=new Image(z,S)).src=P.toDataURL(),null!=u&&(k.style.opacity="".concat(u)),_=k,null!=a.effectView&&(A={shape:{type:"image",x:0,y:0,width:z,height:S,src:k.src},fill:null,stroke:null,offset:[0,0]},_=(0,m.renderSymbol)([[A]],[z,S],{effectView:a.effectView})),e.abrupt("return",(s&&s.appendChild(_),_));case 18:case"end":return e.stop()}}),t)}))),p.apply(this,arguments)}})),r.register("1JCAU",(function(a,n){t(a.exports,"CIMSymbolRasterizer",(function(){return P}));var i,o,l=r("8TSCy"),s=r("2TvXO"),c=r("jgs9n"),u=r("9pNSx"),m=r("10vEZ"),f=r("iXlXu"),h=r("1TSdR"),y=r("79LpT"),p=r("aNOUb"),g=r("bdXyK"),v=r("8q1zr"),d=r("aGHsx"),x=r("1o7Kk"),C=r("7sx0B"),b=r("ibNqK");(o=i||(i={})).Legend="legend",o.Preview="preview";var w=function(e,t,r){if(e&&e.targetSize){var a;if(r){var n=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/(0,f.pt2px)(n)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}},P=function(){"use strict";function t(e,r){l.classCallCheck(this,t),this._spatialReference=e,this._avoidSDF=r,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new(0,d.TextRasterizer),this._cimResourceManager=new(0,g.default),this._rasterizer=new(0,v.default)(this._cimResourceManager)}return l.createClass(t,[{key:"rasterizeCIMSymbolAsync",value:function(t,r,a,n,i,o,c,u){var m=this;return l.asyncToGenerator(e(s).mark((function l(){var f;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||(r?null!=r.centroid?"esriGeometryPolygon":(0,y.getJsonType)(r.geometry):null)||S(t),e.next=3,m.analyzeCIMSymbol(t,r?z(r.attributes):null,a,n,u);case 3:return f=e.sent,e.abrupt("return",m.rasterizeCIMSymbol(f,r,n,i,o,c));case 5:case"end":return e.stop()}}),l)})))()}},{key:"analyzeCIMSymbol",value:function(t,r,a,n,i){var o=this;return l.asyncToGenerator(e(s).mark((function l(){var c,u,f,h,y,g,v,d,C;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],u=r?{geometryType:n,spatialReference:o._spatialReference,fields:r}:null,e.next=4,(0,p.analyzeCIMSymbol)(t.data,u,o._cimResourceManager,c,o._avoidSDF);case 4:for((0,m.throwIfAborted)(i),h=!0,y=!1,g=void 0,e.prev=6,v=c[Symbol.iterator]();!(h=(d=v.next()).done);h=!0)"CIMPictureMarker"!==(C=d.value).cim.type&&"CIMPictureFill"!==C.cim.type&&"CIMPictureStroke"!==C.cim.type||(f||(f=[]),f.push(o._fetchPictureMarkerResource(C,i))),a&&"text"===C.type&&"string"==typeof C.text&&C.text.indexOf("[")>-1&&(C.text=(0,x.createLabelOverrideFunction)(a,C.text,C.cim.textCase));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),y=!0,g=e.t0;case 14:e.prev=14,e.prev=15,h||null==v.return||v.return();case 17:if(e.prev=17,!y){e.next=20;break}throw g;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(e.t1=f,!e.t1){e.next=26;break}return e.next=26,Promise.all(f);case 26:return e.abrupt("return",(e.t1&&e.sent,c));case 27:case"end":return e.stop()}}),l,null,[[6,10,14,22],[15,,17,21]])})))()}},{key:"_fetchPictureMarkerResource",value:function(t,r){var a=this;return l.asyncToGenerator(e(s).mark((function n(){var i,o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.materialHash,a._pictureMarkerCache.get(i)){e.next=6;break}return e.next=4,(0,u.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:o=e.sent.data,a._pictureMarkerCache.set(i,o);case 6:case"end":return e.stop()}}),n)})))()}},{key:"rasterizeCIMSymbol",value:function(e,t,r,a,n,i){var o=[],l=!0,s=!1,c=void 0;try{for(var u,m=e[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var f=u.value;a&&"function"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,n,i));var h=this._getRasterizedResource(f,t,r,a,n,i);if(h){var y=0,p=h.anchorX||0,g=h.anchorY||0,v=!1,d=0,C=0;if("esriGeometryPoint"===r){var b=w(a,f,null);if(d=(0,x.evaluateValueOrFunction)(f.offsetX,t,n,i)*b||0,C=(0,x.evaluateValueOrFunction)(f.offsetY,t,n,i)*b||0,"marker"===f.type)y=(0,x.evaluateValueOrFunction)(f.rotation,t,n,i)||0,v=!!f.rotateClockwise&&f.rotateClockwise;else if("text"===f.type){if(y=(0,x.evaluateValueOrFunction)(f.angle,t,n,i)||0,void 0!==f.horizontalAlignment)switch(f.horizontalAlignment){case"left":p=-.5;break;case"right":p=.5;break;default:p=0}if(void 0!==f.verticalAlignment)switch(f.verticalAlignment){case"top":g=.5;break;case"bottom":g=-.5;break;case"baseline":g=-.25;break;default:g=0}}}null!=h&&o.push({angle:y,rotateClockWise:v,anchorX:p,anchorY:g,offsetX:d,offsetY:C,rasterizedResource:h})}}}catch(e){s=!0,c=e}finally{try{l||null==m.return||m.return()}finally{if(s)throw c}}return this.getSymbolImage(o)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=t.getContext("2d"),a=0,n=0,i=0,o=0,l=[],s=0;s<e.length;s++){var c=e[s],u=c.rasterizedResource;if(u){var m=u.size,h=c.offsetX,y=c.offsetY,p=c.anchorX,g=c.anchorY,v=c.rotateClockWise||!1,d=c.angle,x=(0,f.pt2px)(h)-m[0]*(.5+p),C=(0,f.pt2px)(y)-m[1]*(.5+g),w=x+m[0],M=C+m[1];if(d){v&&(d=-d);var P=Math.sin(d*Math.PI/180),z=Math.cos(d*Math.PI/180),S=x*z-C*P,I=x*P+C*z,k=x*z-M*P,_=x*P+M*z,A=w*z-M*P,F=w*P+M*z,T=w*z-C*P,R=w*P+C*z;x=Math.min(S,k,A,T),C=Math.min(I,_,F,R),w=Math.max(S,k,A,T),M=Math.max(I,_,F,R)}a=x<a?x:a,n=C<n?C:n,i=w>i?w:i,o=M>o?M:o;var O=r.createImageData(u.size[0],u.size[1]);O.data.set(new Uint8ClampedArray(u.image.buffer));var L={offsetX:h,offsetY:y,rotateClockwise:v,angle:d,rasterizedImage:O,anchorX:p,anchorY:g};l.push(L)}}t.width=i-a,t.height=o-n;for(var D=-a,V=o,X=0;X<l.length;X++){var H=l[X],Y=this._imageDataToCanvas(H.rasterizedImage),B=H.rasterizedImage.width,U=H.rasterizedImage.height,G=D-B*(.5+H.anchorX),q=V-U*(.5-H.anchorY);if(H.angle){var N=(360-H.angle)*Math.PI/180;r.save(),r.translate((0,f.pt2px)(H.offsetX),-(0,f.pt2px)(H.offsetY)),r.translate(D,V),r.rotate(N),r.translate(-D,-V),r.drawImage(Y,G,q),r.restore()}else r.drawImage(Y,G+(0,f.pt2px)(H.offsetX),q-(0,f.pt2px)(H.offsetY))}var E=new(0,b.Symbol3DAnchorPosition2D)({x:D/t.width-.5,y:V/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:E}}},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r,a){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var n=this._imageDataCanvas,i=n.getContext("2d");if(n.width=t,n.height=r,i.drawImage(e,0,0,t,r),a){i.save();var o=new(0,c.default)(a);i.fillStyle=o.toHex(),i.globalCompositeOperation="multiply",i.fillRect(0,0,t,r),i.globalCompositeOperation="destination-atop",i.drawImage(e,0,0,t,r),i.restore()}return new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,a,n,o){var l,s,c,u,m=null,f=null;if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r){var y=a&&a.style?a.style:i.Legend,p="esriGeometryPolyline"===r?M.stroke[y]:M.fill[y];if("line"===e.type){if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){var g=(0,x.evaluateValueOrFunction)(e.width,t,n,o),v=(0,x.evaluateValueOrFunction)(e.color,t,n,o),d=this._getPictureResource(e,g,v),b=d.image,P=d.width,z=d.height;return this._rasterizePictureResource(e,b,P,z,p,g)}return null}var S;l=(S=I(e,t,n,o)).analyzedCIM,c=S.hash,s=this._embedCIMLayerInVectorMarker(l,p)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type){var k=(0,x.evaluateValueOrFunction)(e.size,t,n,o),_=(0,x.evaluateValueOrFunction)(e.color,t,n,o),A=this._getPictureResource(e,k,_),F=A.image,T=A.width,R=A.height;return this._rasterizePictureResource(e,F,T,R,p,k)}if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=(0,x.evaluateValueOrFunction)(e.offsetX,t,n,o),e.cim.offsetY=(0,x.evaluateValueOrFunction)(e.offsetY,t,n,o),e.cim.rotation=(0,x.evaluateValueOrFunction)(e.rotation,t,n,o),e.cim.markerPlacement=e.markerPlacement,l=I(e,t,n,o).analyzedCIM,c=(0,h.numericHash)(JSON.stringify(l)).toString(),s=this._embedCIMLayerInVectorMarker(l,p),m=(0,x.evaluateValueOrFunction)(e.size,t,n,o),f=e.path}else{if("text"===e.type)return null;if("fill"===e.type){if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var O,L,D,V,X=e.cim.size||e.cim.height;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type)O=(V=this._getPictureResource(e,X,(0,x.evaluateValueOrFunction)(e.color,t,n,o))).image,L=V.width,D=V.height;else{var H;l=(H=I(e,t,n,o)).analyzedCIM,c=H.hash;var Y=this._rasterizer.rasterizeJSONResource({cim:l,type:e.type,url:e.url,mosaicHash:c,size:X,path:f},1,this._avoidSDF);O=Y.image,L=Y.size[0],D=Y.size[1]}return this._rasterizePictureResource(e,O,L,D,p,null)}if("CIMSolidFill"!==e.cim.type)return null;var B;l=(B=I(e,t,n,o)).analyzedCIM,c=B.hash,s=this._embedCIMLayerInVectorMarker(l,p)}}}else{if("text"===e.type)return u=this._rasterizeTextResource(e,t,a,n,o);var U;l=(U=I(e,t,n,o)).analyzedCIM,c=U.hash;var G=w(a,e,null);if("CIMPictureMarker"===e.cim.type){var q=(0,x.evaluateValueOrFunction)(e.size,t,n,o)*G,N=this._getPictureResource(e,q,(0,x.evaluateValueOrFunction)(e.color,t,n,o));return u={image:N.image,size:[N.width,N.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}(0,C.scaleCIMMarker)(l,G,{preserveOutlineWidth:!1}),s=l}c+=r,a&&(c+=JSON.stringify(a));var E=this._resourceCache;return E.has(c)?E.get(c):(u=this._rasterizer.rasterizeJSONResource({cim:s,type:e.type,url:e.url,mosaicHash:c,size:m,path:f},window.devicePixelRatio||1,this._avoidSDF),E.set(c,u),u)}},{key:"_rasterizeTextResource",value:function(e,t,r,a,n){var i=w(r,e,null),o=(0,x.evaluateValueOrFunction)(e.text,t,a,n);if(!o||0===o.length)return null;var l=(0,x.evaluateValueOrFunction)(e.fontName,t,a,n),s=(0,x.evaluateValueOrFunction)(e.style,t,a,n),c=(0,x.evaluateValueOrFunction)(e.weight,t,a,n),u=(0,x.evaluateValueOrFunction)(e.decoration,t,a,n),m=(0,x.evaluateValueOrFunction)(e.size,t,a,n)*i,f=(0,x.evaluateValueOrFunction)(e.horizontalAlignment,t,a,n),h=(0,x.evaluateValueOrFunction)(e.verticalAlignment,t,a,n),y=(0,x.colorToArray)((0,x.evaluateValueOrFunction)(e.color,t,a,n)),p=(0,x.colorToArray)((0,x.evaluateValueOrFunction)(e.outlineColor,t,a,n)),g={color:y,size:m,horizontalAlignment:f,verticalAlignment:h,font:{family:l,style:s,weight:c,decoration:u},halo:{size:(0,x.evaluateValueOrFunction)(e.outlineSize,t,a,n)||0,color:p,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,g)}},{key:"_rasterizePictureResource",value:function(e,t,r,a,n,i){var o=document.createElement("canvas"),l=o.getContext("2d");o.height=(0,f.pt2px)(Math.max(n.frame.ymax-n.frame.ymin,i)),o.width=(0,f.pt2px)(n.frame.xmax-n.frame.xmin);var s=l.createImageData(r,a);s.data.set(new Uint8ClampedArray(t.buffer));var c=this._imageDataToCanvas(s),u=l.createPattern(c,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),h=Math.sin((-e.cim.rotation||0)*Math.PI/180);u.setTransform({m11:m,m12:h,m21:-h,m22:m,m41:(0,f.pt2px)(e.cim.offsetX)||0,m42:(0,f.pt2px)(e.cim.offsetY)||0});var p,g,v,d=n.canvasPaths;(0,y.isPolygon)(d)?(p=d.rings,l.fillStyle=u,g=l.fill,v=["evenodd"]):(0,y.isPolyline)(d)&&(p=d.paths,l.strokeStyle=u,l.lineWidth=i,g=l.stroke,p[0][0][1]=o.height/2,p[0][1][1]=o.height/2),l.beginPath();var x=!0,C=!1,b=void 0;try{for(var w,M=p[Symbol.iterator]();!(x=(w=M.next()).done);x=!0){var P=w.value,z=P?P.length:0;if(z>1){var S=P[0];l.moveTo((0,f.pt2px)(S[0]),(0,f.pt2px)(S[1]));for(var I=1;I<z;++I)S=P[I],l.lineTo((0,f.pt2px)(S[0]),(0,f.pt2px)(S[1]));l.closePath()}}}catch(e){C=!0,b=e}finally{try{x||null==M.return||M.return()}finally{if(C)throw b}}g.apply(l,v);var k=l.getImageData(0,0,o.width,o.height),_=new Uint8Array(k.data);return{size:[o.width,o.height],image:new Uint32Array(_.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_getPictureResource",value:function(e,t,r){var a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;var n=a.height/a.width,i=t?n>1?(0,f.pt2px)(t):(0,f.pt2px)(t)/n:a.width,o=t?n>1?(0,f.pt2px)(t)*n:(0,f.pt2px)(t):a.height;return{image:this._imageTo32Array(a,i,o,r),width:i,height:o}}},{key:"_embedCIMLayerInVectorMarker",value:function(e,t){var r=(0,y.isPolygon)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",a=t.frame;return{type:"CIMVectorMarker",frame:a,size:a.ymax-a.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}]),t}();function z(e){return(e?Object.keys(e):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}))}function S(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function I(e,t,r,a){var n,i;return"function"==typeof e.materialHash?(n=(0,e.materialHash)(t,r,a),i=(0,p.analyzeCIMResource)(e.cim,e.materialOverrides)):(n=e.materialHash,i=e.cim),{analyzedCIM:i,hash:n}}})),r.register("8q1zr",(function(e,a){t(e.exports,"default",(function(){return c}));var n=r("8TSCy"),i=r("4FBKO"),o=r("i50K3"),l=r("8rAvb"),s=r("1o7Kk"),c=function(){"use strict";function e(t){n.classCallCheck(this,e),this._resourceManager=t}return n.createClass(e,[{key:"dispose",value:function(){this._rasterizationCanvas=null}},{key:"rasterizeJSONResource",value:function(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var a=n.slicedToArray(i.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t),3),s=a[0];return{size:[a[1],a[2]],image:new Uint32Array(s.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){var c,u;if("simple-line"===e.type||"esriSLS"===e.type)switch(c=(0,i.slsDashToTemplateArray)(e.style,e.cap),e.cap){case"butt":u="Butt";break;case"square":u="Square";break;default:u="Round"}else c=e.dashTemplate,u=e.cim.capStyle;var m=n.slicedToArray(i.SymbolHelper.rasterizeSimpleLine(c,u),3),f=m[0];return{size:[m[1],m[2]],image:new Uint32Array(f.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var h,y,p;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(h=i.CIMSymbolHelper.fromSimpleMarker(e),p=(0,l.getSDFInfo)(h)):e.cim&&"CIMHatchFill"===e.cim.type?(h=i.CIMSymbolHelper.fromCIMHatchFill(e.cim),y=new(0,o.default)(h.frame.xmin,-h.frame.ymax,h.frame.xmax-h.frame.xmin,h.frame.ymax-h.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(h=i.CIMSymbolHelper.fromCIMInsidePolygon(e.cim),y=new(0,o.default)(h.frame.xmin,-h.frame.ymax,h.frame.xmax-h.frame.xmin,h.frame.ymax-h.frame.ymin)):(h=e.cim,p=(0,l.getSDFInfo)(h)),p&&!r){var g=n.slicedToArray((0,l.buildSDF)(p),3),v=g[0],d=g[1],x=g[2];return v?{size:[d,x],image:new Uint32Array(v.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}var C=n.slicedToArray(i.CIMSymbolHelper.rasterize(this._rasterizationCanvas,h,y,this._resourceManager,!r),5),b=C[0],w=C[1],M=C[2],P=C[3],z=C[4];return b?{size:[w,M],image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1,anchorX:P,anchorY:z}:null}},{key:"rasterizeImageResource",value:function(e,t,r,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;var i=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px")),i.drawImage(r,0,0,e,t));var o,l=i.getImageData(0,0,e,t),c=new Uint8Array(l.data);if(a){var u=!0,m=!1,f=void 0;try{for(var h,y=a[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){var p=h.value;if(p&&p.oldColor&&4===p.oldColor.length&&p.newColor&&4===p.newColor.length){var g=n.slicedToArray(p.oldColor,4),v=g[0],d=g[1],x=g[2],C=g[3],b=n.slicedToArray(p.newColor,4),w=b[0],M=b[1],P=b[2],z=b[3];if(v===w&&d===M&&x===P&&C===z)continue;for(var S=0;S<c.length;S+=4)v===c[S]&&d===c[S+1]&&x===c[S+2]&&C===c[S+3]&&(c[S]=w,c[S+1]=M,c[S+2]=P,c[S+3]=z)}}}catch(e){m=!0,f=e}finally{try{u||null==y.return||y.return()}finally{if(m)throw f}}}for(var I=0;I<c.length;I+=4)o=c[I+3]/255,c[I]=c[I]*o,c[I+1]=c[I+1]*o,c[I+2]=c[I+2]*o;var k=c,_=e,A=t,F=512;if(_>=F||A>=F){var T=_/A;T>1?(_=F,A=Math.round(F/T)):(A=F,_=Math.round(F*T)),k=new Uint8Array(4*_*A);var R=new Uint8ClampedArray(k.buffer);(0,s.resampleHermite)(c,e,t,R,_,A,!1)}return{size:[_,A],image:new Uint32Array(k.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}]),e}()})),r.register("ibKgR",(function(e,a){t(e.exports,"toQuantizationTransform",(function(){return u})),t(e.exports,"quantizePoint",(function(){return x})),t(e.exports,"quantizeGeometry",(function(){return w})),t(e.exports,"unquantizeMultipoint",(function(){return M})),t(e.exports,"unquantizePoint",(function(){return P})),t(e.exports,"unquantizePolygon",(function(){return z})),t(e.exports,"unquantizePolyline",(function(){return S}));var n=r("8TSCy"),i=r("7qybv"),o=r("79LpT");var l=function(e,t,r){return[t,r]},s=function(e,t,r){return[t,r,e[2]]},c=function(e,t,r){return[t,r,e[2],e[3]]};function u(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,i.isSome)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function m(e,t){var r=e.scale,a=e.translate;return Math.round((t-a[0])/r[0])}function f(e,t){var r=e.scale,a=e.translate;return Math.round((a[1]-t)/r[1])}function h(e,t,r){for(var a,n,i,o,l=[],s=0;s<r.length;s++){var c=r[s];s>0?(i=m(e,c[0]),o=f(e,c[1]),i===a&&o===n||(l.push(t(c,i-a,o-n)),a=i,n=o)):(a=m(e,c[0]),n=f(e,c[1]),l.push(t(c,a,n)))}return l.length>0?l:null}function y(e,t){var r=e.scale,a=e.translate;return t*r[0]+a[0]}function p(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function g(e,t,r){var a=new Array(r.length);if(!r.length)return a;var i=n.slicedToArray(e.scale,2),o=i[0],l=i[1],s=y(e,r[0][0]),c=p(e,r[0][1]);a[0]=t(r[0],s,c);for(var u=1;u<r.length;u++){var m=r[u];s+=m[0]*o,c-=m[1]*l,a[u]=t(m,s,c)}return a}function v(e,t,r){for(var a=new Array(r.length),n=0;n<r.length;n++)a[n]=g(e,t,r[n]);return a}function d(e,t,r,a,n){return t.points=(i=e,o=r.points,u=n,h(i,a?u?c:s:u?s:l,o)),t;var i,o,u}function x(e,t,r,a,n){return t.x=m(e,r.x),t.y=f(e,r.y),t!==r&&(a&&(t.z=r.z),n&&(t.m=r.m)),t}function C(e,t,r,a,n){var i=function(e,t,r,a){for(var n=[],i=r?a?c:s:a?s:l,o=0;o<t.length;o++){var u=h(e,i,t[o]);u&&u.length>=3&&n.push(u)}return n.length?n:null}(e,r.rings,a,n);return i?(t.rings=i,t):null}function b(e,t,r,a,n){var i=function(e,t,r,a){for(var n=[],i=r?a?c:s:a?s:l,o=0;o<t.length;o++){var u=h(e,i,t[o]);u&&u.length>=2&&n.push(u)}return n.length?n:null}(e,r.paths,a,n);return i?(t.paths=i,t):null}function w(e,t){return e&&t?(0,o.isPoint)(t)?x(e,{},t,!1,!1):(0,o.isPolyline)(t)?b(e,{},t,!1,!1):(0,o.isPolygon)(t)?C(e,{},t,!1,!1):(0,o.isMultipoint)(t)?d(e,{},t,!1,!1):(0,o.isExtent)(t)?(i=!1,l=!1,(a={}).xmin=m(r=e,(n=t).xmin),a.ymin=f(r,n.ymin),a.xmax=m(r,n.xmax),a.ymax=f(r,n.ymax),a!==n&&(i&&(a.zmin=n.zmin,a.zmax=n.zmax),l&&(a.mmin=n.mmin,a.mmax=n.mmax)),a):null:null;var r,a,n,i,l}function M(e,t,r,a,n){return(0,i.isSome)(r)&&(t.points=(o=e,u=r.points,m=n,g(o,a?m?c:s:m?s:l,u))),t;var o,u,m}function P(e,t,r,a,n){return(0,i.isNone)(r)||(t.x=y(e,r.x),t.y=p(e,r.y),t!==r&&(a&&(t.z=r.z),n&&(t.m=r.m))),t}function z(e,t,r,a,n){return(0,i.isSome)(r)&&(t.rings=(o=e,u=r.rings,m=n,v(o,a?m?c:s:m?s:l,u))),t;var o,u,m}function S(e,t,r,a,n){return(0,i.isSome)(r)&&(t.paths=(o=e,u=r.paths,m=n,v(o,a?m?c:s:m?s:l,u))),t;var o,u,m}})),r.register("8lbQw",(function(e,r){t(e.exports,"u32to4Xu8",(function(){return n})),t(e.exports,"i1616to32",(function(){return i})),t(e.exports,"i8888to32",(function(){return o}));var a=new Float32Array(1);new Uint32Array(a.buffer);function n(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function o(e,t,r,a){return 255&e|(255&t)<<8|(255&r)<<16|a<<24}})),r.register("6S0qa",(function(e,r){var a,n,i,o;function l(e){switch(e){case"left":return a.Left;case"right":return a.Right;case"center":case"justify":return a.Center}}function s(e){switch(e){case"top":return n.Top;case"middle":return n.Center;case"baseline":return n.Baseline;case"bottom":return n.Bottom}}function c(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[a.Right,n.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[a.Center,n.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[a.Left,n.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[a.Right,n.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[a.Center,n.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[a.Left,n.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[a.Right,n.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[a.Center,n.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[a.Left,n.Top];default:return console.debug("Found invalid placement type ".concat(e)),[a.Center,n.Center]}}function u(e){switch(e){case a.Right:return-1;case a.Center:return 0;case a.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function m(e){switch(e){case n.Top:return 1;case n.Center:return 0;case n.Bottom:case n.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function f(e){switch(e){case"left":return a.Left;case"right":return a.Right;case"center":case"justify":return a.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}t(e.exports,"HAlign",(function(){return a})),t(e.exports,"VAlign",(function(){return n})),t(e.exports,"getXAnchorDirection",(function(){return l})),t(e.exports,"getYAnchorDirection",(function(){return s})),t(e.exports,"getAlignmentFromPlacement",(function(){return c})),t(e.exports,"getXDirection",(function(){return u})),t(e.exports,"getYDirection",(function(){return m})),t(e.exports,"getJustification",(function(){return f})),t(e.exports,"isMapAligned",(function(){return h})),(o=a||(a={}))[o.Left=-1]="Left",o[o.Center=0]="Center",o[o.Right=1]="Right",(i=n||(n={}))[i.Top=1]="Top",i[i.Center=0]="Center",i[i.Bottom=-1]="Bottom",i[i.Baseline=2]="Baseline"}))}();
//# sourceMappingURL=previewCIMSymbol.d0ebe496.js.map
