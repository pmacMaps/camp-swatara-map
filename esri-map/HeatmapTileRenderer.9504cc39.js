function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("bf69v",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return c}));var s=t("j6uz9");t("6TszD"),t("gHCNy"),t("aX9sh"),t("5HTPH"),t("bXKTN");var o=t("qA6zg"),a=t("4xw97"),u=t("4mYtk"),h=t("iuimx"),l=t("92mTS");let x=class extends h.default{createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if("heatmap"===e.type){const{minPixelIntensity:t,maxPixelIntensity:r}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=r,this._gradient=(0,a.generateGradient)(e.colorStops),this.tiles.forEach((e=>{const n=e.bitmap.source;n&&(n.minPixelIntensity=t,n.maxPixelIntensity=r,n.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&"heatmap"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const r=e.intensityInfo,{minPixelIntensity:n,maxPixelIntensity:i}=this._intensityInfo,s=t.bitmap.source||new(0,l.HeatmapSource);s.intensities=r&&r.matrix||null,s.minPixelIntensity=n,s.maxPixelIntensity=i,s.gradient=this._gradient,t.bitmap.source=s,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(e,t){return console.error(e),Promise.reject()}constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new(0,u.BitmapTileContainer)(e.tileInfoView)}};x=(0,s._)([(0,o.subclass)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],x);const c=x})),t.register("4xw97",(function(r,n){e(r.exports,"generateGradient",(function(){return s})),e(r.exports,"calculateHeatmapIntensityInfoReaders",(function(){return o})),e(r.exports,"drawHeatmap",(function(){return a}));var i=t("8TN87");const s=(()=>{if(!("document"in globalThis))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const n=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r)n.addColorStop(Math.max(e,.001),`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`);return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function o(e,t,r,n){const{blurRadius:i,fieldOffset:s,field:o}=t,a=new Float64Array(r*n),h=u(i),l=Math.round(3*i);let x,c=Number.NEGATIVE_INFINITY;const d=(y=s,null!=(p=o)?"string"==typeof y?e=>-1*+e.readAttribute(p):e=>+e.readAttribute(p)+y:e=>1),f=new Set;var p,y;for(const t of e){const e=t.getCursor();for(;e.next();){const t=e.getObjectId();if(f.has(t))continue;f.add(t);const i=e.readLegacyPointGeometry(),s=128;if(i.x<-s||i.x>=r+s||i.y<-s||i.y>n+s)continue;const o=+d(e),u=Math.round(i.x)-l,p=Math.round(i.y)-l,y=Math.max(0,u),g=Math.max(0,p),v=Math.min(n,Math.round(i.y)+l),m=Math.min(r,Math.round(i.x)+l);for(let e=g;e<v;e++){const t=h[e-p];for(let n=y;n<m;n++){const i=h[n-u];x=a[e*r+n]+=t*i*o,x>c&&(c=x)}}}}return{matrix:a.buffer,max:c}}function a(e,t,r,n,s,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const a=e.getImageData(0,0,t,t);r&&n&&a.data.set(new Uint8ClampedArray(function(e,t,r,n,s){const o=new Uint32Array(e*e),a="buffer"in t?t:new Float64Array(t),u="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),h=u.length/(s-n);for(let e=0;e<a.length;e++){const t=a[e],r=Math.floor((t-n)*h);o[e]=u[(0,i.clamp)(r,0,u.length-1)]}return o.buffer}(t,r,n,s,o))),e.putImageData(a,0,0)}function u(e){const t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1);for(let i=0;i<=n.length;i++)n[i]=Math.exp(-((i-t)**2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}})),t.register("4mYtk",(function(r,n){e(r.exports,"BitmapTileContainer",(function(){return h}));var i=t("19dbe"),s=t("iPWLM"),o=t("4ZNdX"),a=t("eyQUy"),u=t("htRPC");class h extends u.default{get requiresDedicatedFBO(){return this.children.some((e=>"additive"===e.bitmap.blendFunction))}createTile(e){const t=this._tileInfoView.getTileBounds((0,i.create)(),e),[r,n]=this._tileInfoView.tileInfo.size;return new(0,s.BitmapTile)(e,t[0],t[3],r,n)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[o.brushes.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:a.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===a.WGLDrawPhase.MAP&&super.doRender(e)}}})),t.register("iPWLM",(function(r,n){e(r.exports,"BitmapTile",(function(){return a}));var i=t("jsolS"),s=t("e4M5Q"),o=t("033AK");class a extends o.TiledDisplayObject{destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:(0,i.c)(),tileMat3:(0,i.c)()}}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}constructor(e,t,r,n,i,o=null){super(e,t,r,n,i),this.bitmap=new(0,s.Bitmap)(o,"standard",!1),this.bitmap.coordScale=[n,i],this.bitmap.once("isReady",(()=>this.ready()))}}})),t.register("e4M5Q",(function(r,n){e(r.exports,"Bitmap",(function(){return d}));var i=t("1CpCt"),s=t("52822"),o=t("jsolS"),a=t("gLni9"),u=t("5aS5k"),h=t("gOLoq"),l=t("l3QXd"),x=t("2HKUi");function c(e,t,r){const n={target:l.TextureType.TEXTURE_2D,pixelFormat:l.PixelFormat.RGBA,internalFormat:l.PixelFormat.RGBA,dataType:l.PixelType.UNSIGNED_BYTE,wrapMode:l.TextureWrapMode.CLAMP_TO_EDGE};return t&&r&&(n.width=t,n.height=r),new(0,x.Texture)(e,n)}class d extends u.DisplayObject{destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,o.c)()}}setTransform(e){const t=(0,s.b)(this.transforms.dvs),[r,n]=e.toScreenNoRotation([0,0],[this.x,this.y]),i=this.resolution/this.pixelRatio/e.resolution,o=i*this.width,u=i*this.height,h=Math.PI*this.rotation/180;(0,s.c)(t,t,(0,a.f)(r,n)),(0,s.c)(t,t,(0,a.f)(o/2,u/2)),(0,s.r)(t,t,-h),(0,s.c)(t,t,(0,a.f)(-o/2,-u/2)),(0,s.j)(t,t,(0,a.f)(o,u)),(0,s.m)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,t){this._texture&&e.bindTexture(this._texture,t)}updateTexture(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=c(e,this.sourceWidth,this.sourceHeight):this._texture=c(e));const r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(s=r)&&"render"in s)if(r instanceof h.default){const e=r.getRenderedRasterPixels();this._texture.setData((0,i.isSome)(e)?e.renderedRasterPixels:null)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(n=r)&&!("render"in n)&&this._texture.setData(r);this.ready()}else this._texture.setData(null);var n,s}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}constructor(e=null,t,r=!0){super(),this.requestRenderOnSourceChangedEnabled=r,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}}})),t.register("gOLoq",(function(r,n){e(r.exports,"default",(function(){return s}));var i=t("1CpCt");class s{get width(){return(0,i.isSome)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,i.isSome)(this.pixelBlock)?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if((0,i.isNone)(t))return;const r=this.filter({pixelBlock:t});if((0,i.isNone)(r.pixelBlock))return;const n=r.pixelBlock.getAsRGBA(),s=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);s.data.set(n),e.putImageData(s,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return(0,i.isNone)(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}constructor(e,t,r){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=r}}})),t.register("033AK",(function(r,n){e(r.exports,"TiledDisplayObject",(function(){return a}));var i=t("52822"),s=t("5aS5k"),o=t("fdGvv");class a extends s.DisplayObject{destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(e,t){const r=t/(e.resolution*e.pixelRatio),n=this.transforms.tileMat3,[s,o]=e.toScreenNoRotation([0,0],[this.x,this.y]),a=this.width/this.rangeX*r,u=this.height/this.rangeY*r;(0,i.s)(n,a,0,0,0,u,0,s,o,1),(0,i.m)(this.transforms.dvs,e.displayViewMat3,n)}constructor(e,t,r,n,i,s=n,a=i){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new(0,o.default)(e),this.x=t,this.y=r,this.width=n,this.height=i,this.rangeX=s,this.rangeY=a}}})),t.register("htRPC",(function(r,n){e(r.exports,"default",(function(){return l}));var i=t("5HTPH"),s=t("eyQUy"),o=t("eqJSJ"),a=t("c48sV"),u=t("bVXM2");const h=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;class l extends o.default{get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(h),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:t}=e,r=super.createRenderParams(e);return r.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,r.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),r}prepareRenderPasses(e){const t=super.prepareRenderPasses(e);return t.push(e.registerRenderPass({name:"stencil",brushes:[u.default],drawPhase:s.WGLDrawPhase.DEBUG|s.WGLDrawPhase.MAP|s.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,i.default)("esri-tiles-debug")&&t.push(e.registerRenderPass({name:"tileInfo",brushes:[a.default],drawPhase:s.WGLDrawPhase.DEBUG,target:()=>this.children})),t}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const r=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,r)}}setStencilReference(e){let t=1;for(const e of this.children)e.stencilRef=t++}constructor(e){super(),this._tileInfoView=e}}})),t.register("iuimx",(function(r,n){e(r.exports,"default",(function(){return h}));var i=t("j6uz9"),s=t("8Y9g8"),o=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var a=t("qA6zg");let u=class extends s.HandleOwner{destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",(()=>this.notifyChange("updating"))),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach((t=>{e=e&&t.isReady})),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}constructor(e){super(e),this.tiles=new Map}};(0,i._)([(0,o.property)()],u.prototype,"layer",void 0),(0,i._)([(0,o.property)()],u.prototype,"layerView",void 0),(0,i._)([(0,o.property)()],u.prototype,"tileInfoView",void 0),(0,i._)([(0,o.property)()],u.prototype,"updating",null),u=(0,i._)([(0,a.subclass)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],u);const h=u})),t.register("92mTS",(function(r,n){e(r.exports,"HeatmapSource",(function(){return s}));var i=t("4xw97");class s{render(e){(0,i.drawHeatmap)(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}constructor(){this.gradient=null,this.height=512,this.width=512}}})),t.register("c4cvq",(function(t,r){e(t.exports,"radToByte",(function(){return a})),e(t.exports,"degToByte",(function(){return u})),e(t.exports,"log2",(function(){return h})),e(t.exports,"between",(function(){return l}));Number.POSITIVE_INFINITY;const n=Math.PI,i=128/n,s=1/Math.LN2;function o(e,t){return(e%=t)>=0?e:e+t}function a(e){return o(e*i,256)}function u(e){return o(.7111111111111111*e,256)}function h(e){return Math.log(e)*s}function l(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}})),t.register("3Icya",(function(t,r){e(t.exports,"e",(function(){return o}));var n,i,s={exports:{}};n=s,void 0!==(i=function(){function e(e,i,s){s=s||2;var o,a,h,x,c,f,p,y=i&&i.length,g=y?i[0]*s:e.length,v=t(e,0,g,s,!0),m=[];if(!v||v.next===v.prev)return m;if(y&&(v=function(e,n,i,s){var o,a,h,x=[];for(o=0,a=n.length;o<a;o++)(h=t(e,n[o]*s,o<a-1?n[o+1]*s:e.length,s,!1))===h.next&&(h.steiner=!0),x.push(d(h));for(x.sort(u),o=0;o<x.length;o++)i=r(i=l(x[o],i),i.next);return i}(e,i,v,s)),e.length>80*s){o=h=e[0],a=x=e[1];for(var w=s;w<g;w+=s)(c=e[w])<o&&(o=c),(f=e[w+1])<a&&(a=f),c>h&&(h=c),f>x&&(x=f);p=0!==(p=Math.max(h-o,x-a))?1/p:0}return n(v,m,s,o,a,p),m}function t(e,t,r,n,i){var s,o;if(i===I(e,t,r,n)>0)for(s=t;s<r;s+=n)o=_(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=_(s,e[s],e[s+1],o);if(o&&y(o,o.next)){var a=o.next;T(o),o=a}return o}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!y(n,n.next)&&0!==p(n.prev,n,n.next))n=n.next;else{var i=n.prev;if(T(n),(n=t=i)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,u,h,l,x,d){if(e){!d&&x&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=c(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,s,o,a,u,h=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<h&&(a++,n=n.nextZ);t++);for(u=h;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,h*=2}while(o>1)}(i)}(e,h,l,x);for(var f,p,y=e;e.prev!==e.next;)if(f=e.prev,p=e.next,x?s(e,h,l,x):i(e))t.push(f.i/u),t.push(e.i/u),t.push(p.i/u),T(e),e=p.next,y=p.next;else if((e=p)===y){d?1===d?n(e=o(r(e),t,u),t,u,h,l,x,2):2===d&&a(e,t,u,h,l,x):n(r(e),t,u,h,l,x,1);break}}}function i(e){var t=e.prev,r=e,n=e.next;if(p(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(f(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&p(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(e,t,r,n){var i=e.prev,s=e,o=e.next;if(p(i,s,o)>=0)return!1;for(var a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,u=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,h=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,l=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,x=c(a,u,t,r,n),d=c(h,l,t,r,n),y=e.prevZ,g=e.nextZ;y&&y.z>=x&&g&&g.z<=d;){if(y!==e.prev&&y!==e.next&&f(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&p(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,g!==e.prev&&g!==e.next&&f(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&p(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;y&&y.z>=x;){if(y!==e.prev&&y!==e.next&&f(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&p(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;g&&g.z<=d;){if(g!==e.prev&&g!==e.next&&f(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&p(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function o(e,t,n){var i=e;do{var s=i.prev,o=i.next.next;!y(s,o)&&g(s,i,i.next,o)&&w(s,o)&&w(o,s)&&(t.push(s.i/n),t.push(i.i/n),t.push(o.i/n),T(i),T(i.next),i=e=o),i=i.next}while(i!==e);return r(i)}function a(e,t,i,s,o,a){var u,h,l=e;do{for(var x=l.next.next;x!==l.prev;){if(l.i!==x.i&&(h=x,(u=l).next.i!==h.i&&u.prev.i!==h.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&g(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(u,h)&&(w(u,h)&&w(h,u)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(u,h)&&(p(u.prev,u,h.prev)||p(u,h.prev,h))||y(u,h)&&p(u.prev,u,u.next)>0&&p(h.prev,h,h.next)>0))){var c=b(l,x);return l=r(l,l.next),c=r(c,c.next),n(l,t,i,s,o,a),void n(c,t,i,s,o,a)}x=x.next}l=l.next}while(l!==e)}function u(e,t){return e.x-t.x}function h(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function l(e,t){var n=function(e,t){var r,n=t,i=e.x,s=e.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o){if(o=a,a===i){if(s===n.y)return n;if(s===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r;var u,h=r,l=r.x,c=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&f(s<c?i:o,s,l,c,s<c?o:i,s,n.x,n.y)&&(u=Math.abs(s-n.y)/(i-n.x),w(n,e)&&(u<d||u===d&&(n.x>r.x||n.x===r.x&&x(r,n)))&&(r=n,d=u)),n=n.next}while(n!==h);return r}(e,t);if(!n)return t;var i=b(n,e),s=r(n,n.next);let o=h(i);return r(o,o.next),s=h(s),h(t===n?s:t)}function x(e,t){return p(e.prev,e,t.prev)<0&&p(t.next,e,e.next)<0}function c(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function f(e,t,r,n,i,s,o,a){return(i-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(n-a)-(r-o)*(t-a)>=0&&(r-o)*(s-a)-(i-o)*(n-a)>=0}function p(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,r,n){var i=m(p(e,t,r)),s=m(p(e,t,n)),o=m(p(r,n,e)),a=m(p(r,n,t));return i!==s&&o!==a||!(0!==i||!v(e,r,t))||!(0!==s||!v(e,n,t))||!(0!==o||!v(r,e,n))||!(0!==a||!v(r,t,n))}function v(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function m(e){return e>0?1:e<0?-1:0}function w(e,t){return p(e.prev,e,e.next)<0?p(e,t,e.next)>=0&&p(e,e.prev,t)>=0:p(e,t,e.prev)<0||p(e,e.next,t)<0}function b(e,t){var r=new R(e.i,e.x,e.y),n=new R(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function _(e,t,r,n){var i=new R(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}return e.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(I(e,0,s,r));if(i)for(var a=0,u=t.length;a<u;a++){var h=t[a]*r,l=a<u-1?t[a+1]*r:e.length;o-=Math.abs(I(e,h,l,r))}var x=0;for(a=0;a<n.length;a+=3){var c=n[a]*r,d=n[a+1]*r,f=n[a+2]*r;x+=Math.abs((e[c]-e[f])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[f+1]-e[c+1]))}return 0===o&&0===x?0:Math.abs((x-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e}())&&(n.exports=i);const o=s.exports})),t.register("iqtPh",(function(t,r){e(t.exports,"DECLUTTER_TILES",(function(){return n})),e(t.exports,"COLLISION_GRID_CELL_SIZE",(function(){return i})),e(t.exports,"DECLUTTER_BUDGET",(function(){return s})),e(t.exports,"FADE_DURATION",(function(){return o}));const n=!0,i=32,s=1.5,o=200}));
//# sourceMappingURL=HeatmapTileRenderer.9504cc39.js.map
