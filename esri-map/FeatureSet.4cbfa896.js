var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("gEU1A",(function(t,r){var o,n,i,s,l;o=t.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),n=t.exports,i="default",s=function(){return T},Object.defineProperty(n,i,{get:s,set:l,enumerable:!0,configurable:!0});var a=e("j6uz9"),p=e("ixrNB"),y=e("EvxpF"),u=e("4jlRt"),f=e("hO0an"),c=e("itGIg"),m=e("1CpCt"),d=e("hTI69");e("gHCNy");var h,g=e("bzBbJ"),v=e("qA6zg"),w=e("g9601"),x=e("jaaCV"),_=e("86d4E"),S=e("4VorL");const R=new(0,u.JSONMap)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let N=h=class extends f.JSONSupport{readFeatures(e,t){const r=x.default.fromJSON(t.spatialReference),o=[];for(let t=0;t<e.length;t++){const n=e[t],i=y.default.fromJSON(n),s=n.geometry&&n.geometry.spatialReference;(0,m.isSome)(i.geometry)&&!s&&(i.geometry.spatialReference=r);const l=n.aggregateGeometries,a=i.aggregateGeometries;if(l&&(0,m.isSome)(a))for(const e in a){const t=a[e],o=l[e],n=null==o?void 0:o.spatialReference;(0,m.isSome)(t)&&!n&&(t.spatialReference=r)}o.push(i)}return o}writeGeometryType(e,t,r,o){if(e)return void R.write(e,t,r,o);const{features:n}=this;if(n)for(const e of n)if(e&&(0,m.isSome)(e.geometry))return void R.write(e.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,_.fromJSON)(e);return!r&&t.spatialReference&&(o.spatialReference=x.default.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&(0,m.isSome)(e.geometry)&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new h(this.cloneProperties())}cloneProperties(){return(0,c.clone)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,n]}=e,i=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((n-e)/r)));for(let e=0,t=i.length;e<t;e++)s((0,m.unwrap)(i[e].geometry))||(i.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,n],scale:[i,s]}=r,l=this._getHydrationFunction(e,(e=>e*i+o),(e=>n-e*s));for(const{geometry:e}of t)(0,m.isSome)(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,n;const i=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(s>0){const e=t(l[0]),s=r(l[1]);e===o&&s===n||(i.push([e-o,s-n]),o=e,n=s)}else o=t(l[0]),n=r(l[1]),i.push([o,n])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,_.isPolygon)(e)?e.rings:e.paths,n=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],s=this._quantizePoints(i,t,r);s&&n.push(s)}return n.length>0?((0,_.isPolygon)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const o=(0,_.isPolygon)(e)?e.rings:e.paths;let n,i;for(let e=0,s=o.length;e<s;e++){const s=o[e];for(let e=0,o=s.length;e<o;e++){const o=s[e];e>0?(n+=o[0],i+=o[1]):(n=o[0],i=o[1]),o[0]=t(n),o[1]=r(i)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const o=e.points;let n,i;for(let e=0,s=o.length;e<s;e++){const s=o[e];e>0?(n+=s[0],i+=s[1]):(n=s[0],i=s[1]),s[0]=t(n),s[1]=r(i)}}:void 0}constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}};(0,a._)([(0,d.property)({type:String,json:{write:!0}})],N.prototype,"displayFieldName",void 0),(0,a._)([(0,d.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],N.prototype,"exceededTransferLimit",void 0),(0,a._)([(0,d.property)({type:[y.default],json:{write:!0}})],N.prototype,"features",void 0),(0,a._)([(0,g.reader)("features")],N.prototype,"readFeatures",null),(0,a._)([(0,d.property)({type:[S.default],json:{write:!0}})],N.prototype,"fields",void 0),(0,a._)([(0,d.property)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:R.read}}})],N.prototype,"geometryType",void 0),(0,a._)([(0,w.writer)("geometryType")],N.prototype,"writeGeometryType",null),(0,a._)([(0,d.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],N.prototype,"hasM",void 0),(0,a._)([(0,d.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],N.prototype,"hasZ",void 0),(0,a._)([(0,d.property)({types:p.geometryTypes,json:{write:!0}})],N.prototype,"queryGeometry",void 0),(0,a._)([(0,g.reader)("queryGeometry")],N.prototype,"readQueryGeometry",null),(0,a._)([(0,d.property)({type:x.default,json:{write:!0}})],N.prototype,"spatialReference",void 0),(0,a._)([(0,w.writer)("spatialReference")],N.prototype,"writeSpatialReference",null),(0,a._)([(0,d.property)({json:{write:!0}})],N.prototype,"transform",void 0),N=h=(0,a._)([(0,v.subclass)("esri.rest.support.FeatureSet")],N),N.prototype.toJSON.isDefaultToJSON=!0;const T=N}));
//# sourceMappingURL=FeatureSet.4cbfa896.js.map
