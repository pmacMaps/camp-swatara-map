var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("9koH3",(function(r,t){var n,a,l,i;n=r.exports,a="createLabelFunction",l=function(){return h},Object.defineProperty(n,a,{get:l,set:i,enumerable:!0,configurable:!0});var o=e("bPmsI"),u=e("6TszD"),s=e("eTz6p"),c=e("39Czw"),f=e("15IfA"),d=e("3BOKS"),p=e("QiKdE");const g=u.default.getLogger("esri.layers.support.labelFormatUtils"),b={type:"simple",evaluate:()=>null},y={getAttribute:(e,r)=>e.field(r)};async function h(r,t,n){if(!r||!r.symbol||!t)return b;const a=r.where,l=(0,d.getLabelExpression)(r),i=a?await e("h8EXn"):null;let u;if("arcade"===l.type){const e=await(0,p.createLabelExpression)(l.expression,n,t);if(null==e)return b;u={type:"arcade",evaluate(r){try{const t=e.evaluate({$feature:"attributes"in r?e.repurposeFeature(r):r},e.services);if(null!=t)return t.toString()}catch(e){g.error(new(0,o.default)("arcade-expression-error","Encountered an error when evaluating label expression for feature",{error:e,feature:r,expression:l}))}return null},needsHydrationToEvaluate:()=>null==(0,d.getSingleFieldArcadeExpression)(l.expression)}}else u={type:"simple",evaluate:e=>l.expression.replaceAll(/{[^}]*}/g,(r=>{const n=r.slice(1,-1),a=t.get(n);if(!a)return r;let l=null;return"attributes"in e?e&&e.attributes&&(l=e.attributes[a.name]):l=e.field(a.name),null==l?"":function(e,r){if(null==e)return"";const t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if("range"===t.type){const r=+e,n="range"in t?t.range[0]:t.minValue,a="range"in t?t.range[1]:t.maxValue;if(n<=r&&r<=a)return t.name}let n=e;return"date"===r.type||"esriFieldTypeDate"===r.type?n=(0,s.formatDate)(n,(0,s.convertDateFormatToIntlOptions)("short-date")):(0,f.isNumericField)(r)&&(n=(0,c.formatNumber)(+n)),n||""}(l,a)}))};if(a){let e;try{e=i.WhereClause.create(a,t)}catch(e){return g.error(new(0,o.default)("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:a,error:e})),b}const r=u.evaluate;u.evaluate=t=>{const n="attributes"in t?void 0:y;try{if(e.testFeature(t,n))return r(t)}catch(e){g.error(new(0,o.default)("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:a,feature:t,error:e}))}return null}}return u}})),e.register("h8EXn",(function(r,t){r.exports=import("./"+e("kyEFX").resolve("k1oiq")).then((()=>e("jKVXg")))}));
//# sourceMappingURL=labelFormatUtils.4d2dcc11.js.map
