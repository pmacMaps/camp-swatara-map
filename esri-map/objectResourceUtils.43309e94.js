!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("cUsSX",(function(t,n){e(t.exports,"t",(function(){return o})),e(t.exports,"s",(function(){return u})),e(t.exports,"a",(function(){return s}));var a=r("997M2");function o(e,t,r){if(e.count===t.count)for(var n=e.count,o=r[0],u=r[1],s=r[2],i=r[3],c=r[4],f=r[5],p=r[6],l=r[7],d=r[8],y=e.typedBuffer,v=e.typedBufferStride,h=t.typedBuffer,m=t.typedBufferStride,x=0;x<n;x++){var b=x*v,T=x*m,w=h[T],g=h[T+1],S=h[T+2],k=h[T+3];y[b]=o*w+i*g+p*S,y[b+1]=u*w+c*g+l*S,y[b+2]=s*w+f*g+d*S,y[b+3]=k}else a.mathLogger.error("source and destination buffers need to have the same number of elements")}function u(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,s=t.typedBufferStride,i=0;i<n;i++){var c=i*o,f=i*s;a[c]=r*u[f],a[c+1]=r*u[f+1],a[c+2]=r*u[f+2],a[c+3]=r*u[f+3]}}function s(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,s=t.typedBufferStride,i=0;i<n;i++){var c=i*o,f=i*s;a[c]=u[f]>>r,a[c+1]=u[f+1]>>r,a[c+2]=u[f+2]>>r,a[c+3]=u[f+3]>>r}}Object.freeze({__proto__:null,transformMat4:function(e,t,r){if(e.count===t.count)for(var n=e.count,o=r[0],u=r[1],s=r[2],i=r[3],c=r[4],f=r[5],p=r[6],l=r[7],d=r[8],y=r[9],v=r[10],h=r[11],m=r[12],x=r[13],b=r[14],T=r[15],w=e.typedBuffer,g=e.typedBufferStride,S=t.typedBuffer,k=t.typedBufferStride,_=0;_<n;_++){var A=_*g,I=_*k,C=S[I],B=S[I+1],O=S[I+2],E=S[I+3];w[A]=o*C+c*B+d*O+m*E,w[A+1]=u*C+f*B+y*O+x*E,w[A+2]=s*C+p*B+v*O+b*E,w[A+3]=i*C+l*B+h*O+T*E}else a.mathLogger.error("source and destination buffers need to have the same number of elements")},transformMat3:o,scale:u,shiftRight:s})})),r.register("eKMts",(function(t,n){e(t.exports,"createBuffer",(function(){return o}));var a=r("2TwbA");r("iX8bw"),r("6ynst"),r("l8Rt5"),r("fVcSp"),r("fxkX0"),r("6ma5C");function o(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,a.elementTypeSize)(e.ElementType)))}})),r.register("iX8bw",(function(e,t){Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=r?r.count:t.count,i=(r&&r.dstIndex?r.dstIndex:0)*a,c=(r&&r.srcIndex?r.srcIndex:0)*u,f=0;f<s;++f){for(var p=0;p<9;++p)n[i+p]=o[c+p];i+=a,c+=u}}})})),r.register("6ynst",(function(e,t){Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=r?r.count:t.count,i=(r&&r.dstIndex?r.dstIndex:0)*a,c=(r&&r.srcIndex?r.srcIndex:0)*u,f=0;f<s;++f){for(var p=0;p<16;++p)n[i+p]=o[c+p];i+=a,c+=u}}})})),r.register("l8Rt5",(function(t,r){function n(e,t){var r=e.count;t||(t=new e.TypedArrayConstructor(r));for(var n=0;n<r;n++)t[n]=e.get(n);return t}e(t.exports,"m",(function(){return n}));Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=r?r.count:t.count,i=(r&&r.dstIndex?r.dstIndex:0)*a,c=(r&&r.srcIndex?r.srcIndex:0)*u,f=0;f<s;++f)n[i]=o[c],i+=a,c+=u},makeDense:n})})),r.register("fVcSp",(function(t,n){e(t.exports,"n",(function(){return u})),e(t.exports,"f",(function(){return s}));var a=r("2TwbA");function o(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=r?r.count:t.count,i=(r&&r.dstIndex?r.dstIndex:0)*a,c=(r&&r.srcIndex?r.srcIndex:0)*u,f=0;f<s;++f)n[i]=o[c],n[i+1]=o[c+1],i+=a,c+=u}function u(e,t,r){var n=e.typedBuffer,u=e.typedBufferStride,s=t.typedBuffer,i=t.typedBufferStride,c=r?r.count:t.count,f=(r&&r.dstIndex?r.dstIndex:0)*u,p=(r&&r.srcIndex?r.srcIndex:0)*i;if((0,a.isInteger)(t.elementType)){var l=(0,a.maximumValue)(t.elementType);if((0,a.isSigned)(t.elementType))for(var d=0;d<c;++d)n[f]=Math.max(s[p]/l,-1),n[f+1]=Math.max(s[p+1]/l,-1),f+=u,p+=i;else for(var y=0;y<c;++y)n[f]=s[p]/l,n[f+1]=s[p+1]/l,f+=u,p+=i}else o(e,t,r);return e}function s(e,t,r,n){for(var a,o,u=e.typedBuffer,s=e.typedBufferStride,i=null!=(a=null==n?void 0:n.count)?a:e.count,c=(null!=(o=null==n?void 0:n.dstIndex)?o:0)*s,f=0;f<i;++f)u[c]=t,u[c+1]=r,c+=s}Object.freeze({__proto__:null,copy:o,normalizeIntegerBuffer:u,fill:s})})),r.register("6ma5C",(function(t,r){function n(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=r?r.count:t.count,i=(r&&r.dstIndex?r.dstIndex:0)*a,c=(r&&r.srcIndex?r.srcIndex:0)*u,f=0;f<s;++f)n[i]=o[c],n[i+1]=o[c+1],n[i+2]=o[c+2],n[i+3]=o[c+3],i+=a,c+=u}function a(e,t,r,n,a,o){for(var u,s,i=e.typedBuffer,c=e.typedBufferStride,f=null!=(u=null==o?void 0:o.count)?u:e.count,p=(null!=(s=null==o?void 0:o.dstIndex)?s:0)*c,l=0;l<f;++l)i[p]=t,i[p+1]=r,i[p+2]=n,i[p+3]=a,p+=c}e(t.exports,"c",(function(){return n})),e(t.exports,"f",(function(){return a}));Object.freeze({__proto__:null,copy:n,fill:a})})),r.register("cZCWI",(function(n,a){e(n.exports,"DefaultLoadingContext",(function(){return d}));var o=r("8TSCy"),u=r("2TvXO"),s=r("9pNSx"),i=r("dqkq5"),c=r("kyj08"),f=r("7qybv"),p=r("10vEZ"),l=r("kYueh"),d=function(){"use strict";function e(t){o.classCallCheck(this,e),this.streamDataRequester=t}return o.createClass(e,[{key:"loadJSON",value:function(e,r){var n=this;return o.asyncToGenerator(t(u).mark((function a(){return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n._load("json",e,r));case 1:case"end":return t.stop()}}),a)})))()}},{key:"loadBinary",value:function(e,r){var n=this;return o.asyncToGenerator(t(u).mark((function a(){return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.isDataProtocol)(e)?((0,p.throwIfAborted)(r),(0,l.dataToArrayBuffer)(e)):n._load("binary",e,r));case 1:case"end":return t.stop()}}),a)})))()}},{key:"loadImage",value:function(e,r){var n=this;return o.asyncToGenerator(t(u).mark((function a(){return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n._load("image",e,r));case 1:case"end":return t.stop()}}),a)})))()}},{key:"_load",value:function(e,r,n){var a=this;return o.asyncToGenerator(t(u).mark((function o(){var l;return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,f.isNone)(a.streamDataRequester)){t.next=4;break}return t.next=3,(0,s.default)(r,{responseType:y[e]});case 3:return t.abrupt("return",t.sent.data);case 4:return t.next=6,(0,i.result)(a.streamDataRequester.request(r,e,n));case 6:if(!0!==(l=t.sent).ok){t.next=9;break}return t.abrupt("return",l.value);case 9:throw(0,p.throwIfAbortError)(l.error),new(0,c.default)("","Request for resource failed: ".concat(l.error));case 10:case"end":return t.stop()}}),o)})))()}}]),e}(),y={image:"image",binary:"array-buffer",json:"json"}})),r.register("h7U64",(function(n,a){e(n.exports,"load",(function(){return y}));var o=r("8TSCy"),u=r("2TvXO"),s=r("7qybv"),i=r("89KCq"),c=r("7Vi1c"),f=r("eovlx"),p=r("5BhCC"),l=r("8JzMA"),d=0;function y(e,t){return v.apply(this,arguments)}function v(){return v=o.asyncToGenerator(t(u).mark((function e(r,n){var a,c,f,y,v,x,b,g,k,_,A,I,C,B=arguments;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=B.length>2&&void 0!==B[2]?B[2]:{},c=!(B.length>3&&void 0!==B[3])||B[3],e.next=3,p.Resource.load(r,w,n,a);case 3:return f=e.sent,y="gltf_"+d++,v={lods:[],materials:new Map,textures:new Map,meta:h(f)},x=!(!f.json.asset.extras||"symbolResource"!==f.json.asset.extras.ESRI_type),b=new Map,e.next=10,m(f,function(){var e=o.asyncToGenerator(t(u).mark((function e(r,n,o,p){var d,h,m,x,g,k,_,A,I,C,B,O,E;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=null!=(d=b.get(o))?d:0,b.set(o,h+1),m=void 0!==r.mode?r.mode:l.PrimitiveType.TRIANGLES,x=m===l.PrimitiveType.TRIANGLES||m===l.PrimitiveType.TRIANGLE_STRIP||m===l.PrimitiveType.TRIANGLE_FAN?m:null,!(0,s.isNone)(x)){e.next=6;break}return e.abrupt("return",void w.warnUnsupported("Unsupported primitive mode ("+S[m]+"). Skipping primitive."));case 6:if(f.hasPositions(r)){e.next=8;break}return e.abrupt("return",void w.warn("Skipping primitive without POSITION vertex attribute."));case 8:return g=f.getPositionData(r,a),k=f.getMaterial(r,a,c),_=f.hasNormals(r)?f.getNormalData(r,a):null,A=f.hasTangents(r)?f.getTangentData(r,a):null,I=f.hasTextureCoordinates(r)?f.getTextureCoordinates(r,a):null,C=f.hasVertexColors(r)?f.getVertexColors(r,a):null,B=f.getIndexData(r,a),e.t0=(0,i.b)(n),e.next=18,g;case 18:if(e.t1=e.sent,!_){e.next=25;break}return e.next=22,_;case 22:e.t2=e.sent,e.next=26;break;case 25:e.t2=null;case 26:if(e.t3=e.t2,!I){e.next=33;break}return e.next=30,I;case 30:e.t4=e.sent,e.next=34;break;case 33:e.t4=null;case 34:if(e.t5=e.t4,!C){e.next=41;break}return e.next=38,C;case 38:e.t6=e.sent,e.next=42;break;case 41:e.t6=null;case 42:if(e.t7=e.t6,!A){e.next=49;break}return e.next=46,A;case 46:e.t8=e.sent,e.next=50;break;case 49:e.t8=null;case 50:return e.t9=e.t8,e.t10={position:e.t1,normal:e.t3,texCoord0:e.t5,color:e.t7,tangent:e.t9},e.next=54,B;case 54:return e.t11=e.sent,e.t12=x,e.t13=T,e.t14=v,e.next=60,k;case 60:e.t15=e.sent,e.t16=y,e.t17=(0,e.t13)(e.t14,e.t15,e.t16),O={transform:e.t0,attributes:e.t10,indices:e.t11,primitiveType:e.t12,material:e.t17},E=null,(0,s.isSome)(v.meta)&&(0,s.isSome)(v.meta.ESRI_lod)&&"screenSpaceRadius"===v.meta.ESRI_lod.metric&&(E=v.meta.ESRI_lod.thresholds[o]),v.lods[o]=v.lods[o]||{parts:[],name:p,lodThreshold:E},v.lods[o].parts[h]=O;case 66:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}());case 10:for(g=!0,k=!1,_=void 0,e.prev=11,A=v.lods[Symbol.iterator]();!(g=(I=A.next()).done);g=!0)(C=I.value).parts=C.parts.filter((function(e){return!!e}));e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),k=!0,_=e.t0;case 19:e.prev=19,e.prev=20,g||null==A.return||A.return();case 22:if(e.prev=22,!k){e.next=25;break}throw _;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return",{model:v,meta:{isEsriSymbolResource:x,uri:f.uri},customMeta:{}});case 28:case"end":return e.stop()}}),e,null,[[11,15,19,27],[20,,22,26]])}))),v.apply(this,arguments)}function h(e){var t=e.json,r=null;return t.nodes.forEach((function(e){var t=e.extras;(0,s.isSome)(t)&&(t.ESRI_proxyEllipsoid||t.ESRI_lod)&&(r=t)})),r}function m(e,t){return x.apply(this,arguments)}function x(){return x=o.asyncToGenerator(t(u).mark((function e(r,n){var a,s,i,c,f,p,l,d,y,v,h,m,x;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(m=function(e,t){return x.apply(this,arguments)},x=function(){return(x=o.asyncToGenerator(t(u).mark((function e(o,s){var i,f,p,l,d,y,v,h,x,b,T,g,S,k,_;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.nodes[o],f=r.getNodeTransform(o),w.warnUnsupportedIf(null!=i.weights,"Morph targets are not supported."),null==i.mesh){e.next=20;break}for(p=a.meshes[i.mesh],l=!0,d=!1,y=void 0,e.prev=4,v=p.primitives[Symbol.iterator]();!(l=(h=v.next()).done);l=!0)x=h.value,c.push(n(x,f,s,p.name));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),d=!0,y=e.t0;case 12:e.prev=12,e.prev=13,l||null==v.return||v.return();case 15:if(e.prev=15,!d){e.next=18;break}throw y;case 18:return e.finish(15);case 19:return e.finish(12);case 20:for(b=!0,T=!1,g=void 0,e.prev=21,S=(i.children||[])[Symbol.iterator]();!(b=(k=S.next()).done);b=!0)_=k.value,c.push(m(_,s));e.next=29;break;case 25:e.prev=25,e.t1=e.catch(21),T=!0,g=e.t1;case 29:e.prev=29,e.prev=30,b||null==S.return||S.return();case 32:if(e.prev=32,!T){e.next=35;break}throw g;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}}),e,null,[[4,8,12,20],[13,,15,19],[21,25,29,37],[30,,32,36]])})))).apply(this,arguments)},a=r.json,s=a.scenes[a.scene||0].nodes,i=s.length>1,c=[],f=!0,p=!1,l=void 0,e.prev=4,d=s[Symbol.iterator]();!(f=(y=d.next()).done);f=!0)v=y.value,h=a.nodes[v],c.push(m(v,0)),b(h)&&!i&&h.extensions.MSFT_lod.ids.forEach((function(e,t){return m(e,t+1)}));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),p=!0,l=e.t0;case 12:e.prev=12,e.prev=13,f||null==d.return||d.return();case 15:if(e.prev=15,!p){e.next=18;break}throw l;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=24,Promise.all(c);case 24:case"end":return e.stop()}}),e,null,[[4,8,12,20],[13,,15,19]])}))),x.apply(this,arguments)}function b(e){return e.extensions&&e.extensions.MSFT_lod&&Array.isArray(e.extensions.MSFT_lod.ids)}function T(e,t,r){var n=function(t){var n="".concat(r,"_tex_").concat(t&&t.id).concat(t&&t.name?"_"+t.name:"");if(t&&!e.textures.has(n)){var a=(0,f.makeTextureSource)(t.data,{wrap:{s:t.wrapS,t:t.wrapT},mipmap:g.some((function(e){return e===t.minFilter})),noUnpackFlip:!0});e.textures.set(n,a)}return n},a="".concat(r,"_mat_").concat(t.id,"_").concat(t.name);if(!e.materials.has(a)){var o=(0,f.makeMaterialParameters)({color:[t.color[0],t.color[1],t.color[2]],opacity:t.color[3],alphaMode:t.alphaMode,alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,colorMixMode:t.ESRI_externalColorMixMode,textureColor:t.colorTexture?n(t.colorTexture):void 0,textureNormal:t.normalTexture?n(t.normalTexture):void 0,textureOcclusion:t.occlusionTexture?n(t.occlusionTexture):void 0,textureEmissive:t.emissiveTexture?n(t.emissiveTexture):void 0,textureMetallicRoughness:t.metallicRoughnessTexture?n(t.metallicRoughnessTexture):void 0,emissiveFactor:[t.emissiveFactor[0],t.emissiveFactor[1],t.emissiveFactor[2]],metallicFactor:t.metallicFactor,roughnessFactor:t.roughnessFactor});e.materials.set(a,o)}return a}var w=new(0,c.DefaultErrorContext),g=[l.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,l.TextureSamplingMode.LINEAR_MIPMAP_NEAREST],S=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]})),r.register("7Vi1c",(function(t,n){e(t.exports,"DefaultErrorContext",(function(){return s}));var a=r("8TSCy"),o=r("kyj08"),u=r("jHOLN").default.getLogger("esri.views.3d.glTF"),s=function(){"use strict";function e(){a.classCallCheck(this,e)}return a.createClass(e,[{key:"error",value:function(e){throw new(0,o.default)("gltf-loader-error",e)}},{key:"errorUnsupported",value:function(e){throw new(0,o.default)("gltf-loader-unsupported-feature",e)}},{key:"errorUnsupportedIf",value:function(e,t){e&&this.errorUnsupported(t)}},{key:"assert",value:function(e,t){e||this.error(t)}},{key:"warn",value:function(e){u.warn(e)}},{key:"warnUnsupported",value:function(e){this.warn("[Unsupported Feature] "+e)}},{key:"warnUnsupportedIf",value:function(e,t){e&&this.warnUnsupported(t)}}]),e}()})),r.register("eovlx",(function(t,n){e(t.exports,"makeMaterialParameters",(function(){return u})),e(t.exports,"makeTextureSource",(function(){return s}));var a=r("8TSCy"),o=r("8JzMA");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.objectSpread({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{data:e,parameters:a.objectSpread({wrap:a.objectSpread({s:o.TextureWrapMode.REPEAT,t:o.TextureWrapMode.REPEAT},t.wrap),noUnpackFlip:!0,mipmap:!1},t)}}})),r.register("5BhCC",(function(n,a){e(n.exports,"Resource",(function(){return A}));var o,u=r("8TSCy"),s=r("2TvXO"),i=r("dMFG2"),c=r("edmn4"),f=r("kYueh"),p=r("beKZU"),l=r("gEEzE"),d=r("89KCq"),y=r("koyqq"),v=r("ksUrQ"),h=r("YI2am"),m=r("l8Rt5"),x=r("iFyuk"),b=r("kxKDY"),T=r("xFZio"),w=r("jVb5y"),g=r("8JzMA"),S=1179937895,k=1313821514,_=5130562,A=function(){"use strict";function e(t,r,n,a,o){u.classCallCheck(this,e),this.context=t,this.errorContext=r,this.uri=n,this.json=a,this.glbBuffer=o,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=(0,w.splitURI)(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),r.errorUnsupportedIf(null==a.scenes,"Scenes must be defined."),r.errorUnsupportedIf(null==a.meshes,"Meshes must be defined"),r.errorUnsupportedIf(null==a.nodes,"Nodes must be defined."),this._computeNodeParents()}return u.createClass(e,[{key:"getBuffer",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u,i;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.json.buffers[e],u=n.errorContext,null!=o.uri){t.next=3;break}return t.abrupt("return",(u.assert(null!=n.glbBuffer,"GLB buffer not present"),n.glbBuffer));case 3:return t.next=5,n._getBufferLoader(e,r);case 5:return i=t.sent,t.abrupt("return",(u.assert(i.byteLength===o.byteLength,"Buffer byte lengths should match."),i));case 7:case"end":return t.stop()}}),a)})))()}},{key:"_getBufferLoader",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u,i;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=n.bufferLoaders.get(e))){t.next=3;break}return t.abrupt("return",o);case 3:return u=n.json.buffers[e],i=n.context.loadBinary(n._resolveUri(u.uri),r).then((function(e){return new Uint8Array(e)})),t.abrupt("return",(n.bufferLoaders.set(e,i),i));case 5:case"end":return t.stop()}}),a)})))()}},{key:"getAccessor",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u,i,c,f,p,l,d;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).errorUnsupportedIf(!n.json.accessors,"Accessors missing."),u=n.json.accessors[e],o.errorUnsupportedIf(null==(null==u?void 0:u.bufferView),"Some accessor does not specify a bufferView."),o.errorUnsupportedIf(u.type in[b.AttributeType.MAT2,b.AttributeType.MAT3,b.AttributeType.MAT4],"AttributeType ".concat(u.type," is not supported")),i=n.json.bufferViews[u.bufferView],t.next=7,n.getBuffer(i.buffer,r);case 7:return c=t.sent,f=O[u.type],p=E[u.componentType],l=f*p,d=i.byteStride||l,t.abrupt("return",{raw:c.buffer,byteStride:d,byteOffset:c.byteOffset+(i.byteOffset||0)+(u.byteOffset||0),entryCount:u.count,isDenselyPacked:d===l,componentCount:f,componentByteSize:p,componentType:u.componentType,min:u.min,max:u.max,normalized:!!u.normalized});case 13:case"end":return t.stop()}}),a)})))()}},{key:"getIndexData",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.indices){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.getAccessor(e.indices,r);case 4:if(!(o=t.sent).isDenselyPacked){t.next=14;break}t.t0=o.componentType,t.next=t.t0===g.DataType.UNSIGNED_BYTE?9:t.t0===g.DataType.UNSIGNED_SHORT?10:t.t0===g.DataType.UNSIGNED_INT?11:12;break;case 9:return t.abrupt("return",new Uint8Array(o.raw,o.byteOffset,o.entryCount));case 10:return t.abrupt("return",new Uint16Array(o.raw,o.byteOffset,o.entryCount));case 11:return t.abrupt("return",new Uint32Array(o.raw,o.byteOffset,o.entryCount));case 12:t.next=20;break;case 14:t.t1=o.componentType,t.next=t.t1===g.DataType.UNSIGNED_BYTE?17:t.t1===g.DataType.UNSIGNED_SHORT?18:t.t1===g.DataType.UNSIGNED_INT?19:20;break;case 17:return t.abrupt("return",(0,m.m)(n._wrapAccessor(h.BufferViewUint8,o)));case 18:return t.abrupt("return",(0,m.m)(n._wrapAccessor(h.BufferViewUint16,o)));case 19:return t.abrupt("return",(0,m.m)(n._wrapAccessor(h.BufferViewUint32,o)));case 20:case"end":return t.stop()}}),a)})))()}},{key:"getPositionData",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).errorUnsupportedIf(null==e.attributes.POSITION,"No POSITION vertex data found."),t.next=4,n.getAccessor(e.attributes.POSITION,r);case 4:return u=t.sent,t.abrupt("return",(o.errorUnsupportedIf(u.componentType!==g.DataType.FLOAT,"Expected type FLOAT for POSITION vertex attribute, but found "+D[u.componentType]),o.errorUnsupportedIf(3!==u.componentCount,"POSITION vertex attribute must have 3 components, but found "+u.componentCount.toFixed()),n._wrapAccessor(h.BufferViewVec3f,u)));case 6:case"end":return t.stop()}}),a)})))()}},{key:"getNormalData",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).assert(null!=e.attributes.NORMAL,"No NORMAL vertex data found."),t.next=4,n.getAccessor(e.attributes.NORMAL,r);case 4:return u=t.sent,t.abrupt("return",(o.errorUnsupportedIf(u.componentType!==g.DataType.FLOAT,"Expected type FLOAT for NORMAL vertex attribute, but found "+D[u.componentType]),o.errorUnsupportedIf(3!==u.componentCount,"NORMAL vertex attribute must have 3 components, but found "+u.componentCount.toFixed()),n._wrapAccessor(h.BufferViewVec3f,u)));case 6:case"end":return t.stop()}}),a)})))()}},{key:"getTangentData",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).assert(null!=e.attributes.TANGENT,"No TANGENT vertex data found."),t.next=4,n.getAccessor(e.attributes.TANGENT,r);case 4:return u=t.sent,t.abrupt("return",(o.errorUnsupportedIf(u.componentType!==g.DataType.FLOAT,"Expected type FLOAT for TANGENT vertex attribute, but found "+D[u.componentType]),o.errorUnsupportedIf(4!==u.componentCount,"TANGENT vertex attribute must have 4 components, but found "+u.componentCount.toFixed()),new(0,h.BufferViewVec4f)(u.raw,u.byteOffset,u.byteStride,u.byteOffset+u.byteStride*u.entryCount)));case 6:case"end":return t.stop()}}),a)})))()}},{key:"getTextureCoordinates",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).assert(null!=e.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found."),t.next=4,n.getAccessor(e.attributes.TEXCOORD_0,r);case 4:return u=t.sent,t.abrupt("return",(o.errorUnsupportedIf(2!==u.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+u.componentCount.toFixed()),u.componentType===g.DataType.FLOAT?n._wrapAccessor(h.BufferViewVec2f,u):(o.errorUnsupportedIf(!u.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),U(u))));case 6:case"end":return t.stop()}}),a)})))()}},{key:"getVertexColors",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=n.errorContext).assert(null!=e.attributes.COLOR_0,"No COLOR_0 vertex data found."),t.next=4,n.getAccessor(e.attributes.COLOR_0,r);case 4:if(u=t.sent,o.errorUnsupportedIf(4!==u.componentCount&&3!==u.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+u.componentCount.toFixed()),4!==u.componentCount){t.next=14;break}if(u.componentType!==g.DataType.FLOAT){t.next=8;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec4f,u));case 8:if(u.componentType!==g.DataType.UNSIGNED_BYTE){t.next=10;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec4u8,u));case 10:if(u.componentType!==g.DataType.UNSIGNED_SHORT){t.next=12;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec4u16,u));case 12:t.next=21;break;case 14:if(3!==u.componentCount){t.next=21;break}if(u.componentType!==g.DataType.FLOAT){t.next=17;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec3f,u));case 17:if(u.componentType!==g.DataType.UNSIGNED_BYTE){t.next=19;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec3u8,u));case 19:if(u.componentType!==g.DataType.UNSIGNED_SHORT){t.next=21;break}return t.abrupt("return",n._wrapAccessor(h.BufferViewVec3u16,u));case 21:o.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+D[u.componentType]);case 22:case"end":return t.stop()}}),a)})))()}},{key:"hasPositions",value:function(e){return void 0!==e.attributes.POSITION}},{key:"hasNormals",value:function(e){return void 0!==e.attributes.NORMAL}},{key:"hasVertexColors",value:function(e){return void 0!==e.attributes.COLOR_0}},{key:"hasTextureCoordinates",value:function(e){return void 0!==e.attributes.TEXCOORD_0}},{key:"hasTangents",value:function(e){return void 0!==e.attributes.TANGENT}},{key:"getMaterial",value:function(e,r,n){var a=this;return u.asyncToGenerator(t(s).mark((function o(){var u,i,c,f,p,l,d,y,v,h;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=a.materialCache.get(e.material)){t.next=30;break}return i=null!=e.material?(0,T.material)(a.json.materials[e.material]):(0,T.material)(),c=i.pbrMetallicRoughness,f=a.hasVertexColors(e),p=a.getTexture(c.baseColorTexture,r),l=a.getTexture(i.normalTexture,r),d=n?a.getTexture(i.occlusionTexture,r):null,y=n?a.getTexture(i.emissiveTexture,r):null,v=n?a.getTexture(c.metallicRoughnessTexture,r):null,h=null!=e.material?e.material:-1,t.t0=i.alphaMode,t.t1=i.alphaCutoff,t.t2=c.baseColorFactor,t.t3=!!i.doubleSided,t.next=9,p;case 9:return t.t4=t.sent,t.next=12,l;case 12:return t.t5=t.sent,t.t6=i.name,t.t7=h,t.next=17,d;case 17:return t.t8=t.sent,t.next=20,y;case 20:return t.t9=t.sent,t.t10=i.emissiveFactor,t.t11=c.metallicFactor,t.t12=c.roughnessFactor,t.next=26,v;case 26:t.t13=t.sent,t.t14=f,t.t15=i.extras.ESRI_externalColorMixMode,u={alphaMode:t.t0,alphaCutoff:t.t1,color:t.t2,doubleSided:t.t3,colorTexture:t.t4,normalTexture:t.t5,name:t.t6,id:t.t7,occlusionTexture:t.t8,emissiveTexture:t.t9,emissiveFactor:t.t10,metallicFactor:t.t11,roughnessFactor:t.t12,metallicRoughnessTexture:t.t13,vertexColors:t.t14,ESRI_externalColorMixMode:t.t15};case 30:return t.abrupt("return",u);case 31:case"end":return t.stop()}}),o)})))()}},{key:"getTexture",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u,i,f,p,l;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return n.errorContext.errorUnsupportedIf(0!==(e.texCoord||0),"Only TEXCOORD with index 0 is supported."),o=e.index,u=n.errorContext,i=n.json.textures[o],f=(0,T.textureSampler)(null!=i.sampler?n.json.samplers[i.sampler]:{}),u.errorUnsupportedIf(null==i.source,"Source is expected to be defined for a texture."),p=n.json.images[i.source],t.next=8,n._loadTextureImageData(o,i,r);case 8:return l=t.sent,t.abrupt("return",(0,c.getOrCreateMapValue)(n.textureCache,o,(function(){var e=function(e){return 33071===e||33648===e||10497===e},t=function(e){return u.error("Unexpected TextureSampler WrapMode: ".concat(e,". Using default REPEAT(10497).")),10497};return{data:l,wrapS:e(f.wrapS)?f.wrapS:t(f.wrapS),wrapT:e(f.wrapT)?f.wrapT:t(f.wrapT),minFilter:f.minFilter,name:p.name,id:o}})));case 10:case"end":return t.stop()}}),a)})))()}},{key:"getNodeTransform",value:function(e){if(void 0===e)return C;var t=this.nodeTransformCache.get(e);if(!t){var r=this.getNodeTransform(this._getNodeParent(e)),n=this.json.nodes[e];n.matrix?t=(0,l.m)((0,d.c)(),r,n.matrix):n.translation||n.rotation||n.scale?(t=(0,d.b)(r),n.translation&&(0,l.j)(t,t,n.translation),n.rotation&&(B[3]=(0,y.g)(B,n.rotation),(0,l.e)(t,t,B[3],B)),n.scale&&(0,l.h)(t,t,n.scale)):t=r,this.nodeTransformCache.set(e,t)}return t}},{key:"_wrapAccessor",value:function(e,t){return new e(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*(t.entryCount-1)+t.componentByteSize*t.componentCount)}},{key:"_resolveUri",value:function(e){return(0,f.makeAbsolute)(e,this.baseUri)}},{key:"_getNodeParent",value:function(e){return this.nodeParentMap.get(e)}},{key:"_checkVersionSupported",value:function(){var e=p.Version.parse(this.json.asset.version,"glTF");I.validate(e)}},{key:"_checkRequiredExtensionsSupported",value:function(){var e=this.json,t=this.errorContext;e.extensionsRequired&&0!==e.extensionsRequired.length&&t.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+e.extensionsRequired.join(", "))}},{key:"_computeNodeParents",value:function(){var e=this;this.json.nodes.forEach((function(t,r){var n=e;t.children&&t.children.forEach((function(e){n.nodeParentMap.set(e,r)}))}))}},{key:"_loadTextureImageData",value:function(e,r,n){var a=this;return u.asyncToGenerator(t(s).mark((function o(){var u,i;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u=a.textureLoaders.get(e))){t.next=3;break}return t.abrupt("return",u);case 3:return i=a._createTextureLoader(r,n),t.abrupt("return",(a.textureLoaders.set(e,i),i));case 5:case"end":return t.stop()}}),o)})))()}},{key:"_createTextureLoader",value:function(e,r){var n=this;return u.asyncToGenerator(t(s).mark((function a(){var o,u,i,c;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=n.json.images[e.source]).uri){t.next=3;break}return t.abrupt("return",n.context.loadImage(n._resolveUri(o.uri),r));case 3:return(u=n.errorContext).errorUnsupportedIf(null==o.bufferView,"Image bufferView must be defined."),u.errorUnsupportedIf(null==o.mimeType,"Image mimeType must be defined."),i=n.json.bufferViews[o.bufferView],t.next=8,n.getBuffer(i.buffer,r);case 8:return c=t.sent,t.abrupt("return",(u.errorUnsupportedIf(null!=i.byteStride,"byteStride not supported for image buffer"),N(new Uint8Array(c.buffer,c.byteOffset+(i.byteOffset||0),i.byteLength),o.mimeType)));case 10:case"end":return t.stop()}}),a)})))()}}],[{key:"load",value:function(r,n,a,o){var i=this;return u.asyncToGenerator(t(s).mark((function u(){var c,p,l,d,y,v;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,f.isDataProtocol)(a)){t.next=13;break}if("model/gltf-binary"===(c=(0,f.dataComponents)(a)).mediaType){t.next=10;break}return t.prev=3,p=JSON.parse(c.isBase64?atob(c.data):c.data),t.abrupt("return",new e(r,n,a,p));case 8:t.prev=8,t.t0=t.catch(3);case 10:if(l=(0,f.dataToArrayBuffer)(a),!e._isGLBData(l)){t.next=13;break}return t.abrupt("return",i._fromGLBData(r,n,a,l));case 13:if(!a.endsWith(".gltf")){t.next=18;break}return t.next=16,r.loadJSON(a,o);case 16:return d=t.sent,t.abrupt("return",new e(r,n,a,d));case 18:return t.next=20,r.loadBinary(a,o);case 20:if(y=t.sent,!e._isGLBData(y)){t.next=23;break}return t.abrupt("return",i._fromGLBData(r,n,a,y));case 23:return t.next=25,r.loadJSON(a,o);case 25:return v=t.sent,t.abrupt("return",new e(r,n,a,v));case 27:case"end":return t.stop()}}),u,null,[[3,8]])})))()}},{key:"_isGLBData",value:function(e){var t=new(0,x.BinaryStreamReader)(e);return t.remainingBytes()>=4&&t.readUint32()===S}},{key:"_fromGLBData",value:function(r,n,a,o){return u.asyncToGenerator(t(s).mark((function u(){var i;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._parseGLBData(n,o);case 2:return i=t.sent,t.abrupt("return",new e(r,n,a,i.json,i.binaryData));case 4:case"end":return t.stop()}}),u)})))()}},{key:"_parseGLBData",value:function(e,r){return u.asyncToGenerator(t(s).mark((function n(){var a,o,u,i,c,f,p,l,d;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new(0,x.BinaryStreamReader)(r),e.assert(a.remainingBytes()>=12,"GLB binary data is insufficiently large."),o=a.readUint32(),u=a.readUint32(),i=a.readUint32(),e.assert(o===S,"Magic first 4 bytes do not fit to expected GLB value."),e.assert(r.byteLength>=i,"GLB binary data is smaller than header specifies."),e.errorUnsupportedIf(2!==u,"An unsupported GLB container version was detected. Only version 2 is supported."),p=0;case 5:if(!(a.remainingBytes()>=8)){t.next=19;break}if(l=a.readUint32(),d=a.readUint32(),0!==p){t.next=15;break}return e.assert(d===k,"First GLB chunk must be JSON."),e.assert(l>=0,"No JSON data found."),t.next=12,R(a.readUint8Array(l));case 12:c=t.sent,t.next=16;break;case 15:1===p?(e.errorUnsupportedIf(d!==_,"Second GLB chunk expected to be BIN."),f=a.readUint8Array(l)):e.warnUnsupported("More than 2 GLB chunks detected. Skipping.");case 16:p+=1;case 17:t.next=5;break;case 19:return t.abrupt("return",(c||e.error("No GLB JSON chunk detected."),{json:c,binaryData:f}));case 20:case"end":return t.stop()}}),n)})))()}}]),e}(),I=new(0,p.Version)(2,0,"glTF"),C=(0,l.y)((0,d.c)(),Math.PI/2),B=(0,v.a)(),O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},E=(o={},u.defineProperty(o,g.DataType.BYTE,1),u.defineProperty(o,g.DataType.UNSIGNED_BYTE,1),u.defineProperty(o,g.DataType.SHORT,2),u.defineProperty(o,g.DataType.UNSIGNED_SHORT,2),u.defineProperty(o,g.DataType.FLOAT,4),u.defineProperty(o,g.DataType.UNSIGNED_INT,4),o);function U(e){switch(e.componentType){case g.DataType.BYTE:return new(0,h.BufferViewVec2i8)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case g.DataType.UNSIGNED_BYTE:return new(0,h.BufferViewVec2u8)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case g.DataType.SHORT:return new(0,h.BufferViewVec2i16)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case g.DataType.UNSIGNED_SHORT:return new(0,h.BufferViewVec2u16)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case g.DataType.UNSIGNED_INT:return new(0,h.BufferViewVec2u32)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case g.DataType.FLOAT:return new(0,h.BufferViewVec2f)(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);default:return void(0,i.neverReached)(e.componentType)}}function R(e){return M.apply(this,arguments)}function M(){return(M=u.asyncToGenerator(t(s).mark((function e(r){return t(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=new Blob([r]),a=new FileReader;a.onload=function(){var t=a.result;e(JSON.parse(t))},a.onerror=function(e){t(e)},a.readAsText(n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return L.apply(this,arguments)}function L(){return(L=u.asyncToGenerator(t(s).mark((function e(r,n){return t(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=new Blob([r],{type:n}),o=URL.createObjectURL(a),u=new Image;u.addEventListener("load",(function(){URL.revokeObjectURL(o),"decode"in u?u.decode().then((function(){return e(u)}),(function(){return e(u)})):e(u)})),u.addEventListener("error",(function(e){URL.revokeObjectURL(o),t(e)})),u.src=o})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"}})),r.register("iFyuk",(function(t,n){e(t.exports,"BinaryStreamReader",(function(){return o}));var a=r("8TSCy"),o=function(){"use strict";function e(t){a.classCallCheck(this,e),this.data=t,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}return a.createClass(e,[{key:"readUint32",value:function(){var e=this.offset4;return this.offset4+=1,this.dataUint32[e]}},{key:"readUint8Array",value:function(e){var t=4*this.offset4;return this.offset4+=e/4,new Uint8Array(this.data,t,e)}},{key:"remainingBytes",value:function(){return this.data.byteLength-4*this.offset4}}]),e}()})),r.register("kxKDY",(function(t,r){var n,a,o,u;e(t.exports,"AttributeType",(function(){return n})),(u=n||(n={})).SCALAR="SCALAR",u.VEC2="VEC2",u.VEC3="VEC3",u.VEC4="VEC4",u.MAT2="MAT2",u.MAT3="MAT3",u.MAT4="MAT4",(o=a||(a={}))[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})),r.register("xFZio",(function(t,n){e(t.exports,"material",(function(){return f})),e(t.exports,"textureSampler",(function(){return d}));var a=r("8TSCy"),o=r("dMFG2"),u=r("8JzMA"),s={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},i={pbrMetallicRoughness:s,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},c={ESRI_externalColorMixMode:"tint"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.objectSpread({},s,e.pbrMetallicRoughness),r=p(a.objectSpread({},c,e.extras));return a.objectSpread({},i,e,{pbrMetallicRoughness:t,extras:r})};function p(e){switch(e.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,o.neverReached)(e.ESRI_externalColorMixMode),e.ESRI_externalColorMixMode="tint"}return e}var l={magFilter:u.TextureSamplingMode.LINEAR,minFilter:u.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,wrapS:u.TextureWrapMode.REPEAT,wrapT:u.TextureWrapMode.REPEAT},d=function(e){return a.objectSpread({},l,e)}})),r.register("jVb5y",(function(t,r){function n(e){var t,r;return e.replace(/^(.*\/)?([^/]*)$/,(function(e,n,a){return t=n||"",r=a||"",""})),{dirPart:t,filePart:r}}e(t.exports,"splitURI",(function(){return n}))})),r.register("fmpb6",(function(t,n){e(t.exports,"trianglesToTriangles",(function(){return u})),e(t.exports,"triangleStripToTriangles",(function(){return s})),e(t.exports,"triangleFanToTriangles",(function(){return i}));var a=r("kkxEC"),o=r("gUx67");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.generateDefaultIndexArray;return"number"==typeof e?t(e):(0,a.isUint16Array)(e)||(0,a.isUint8Array)(e)?new Uint32Array(e):e}function s(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e)for(var a=0,o=0;o<r;o+=1)o%2==0?(n[a++]=o,n[a++]=o+1,n[a++]=o+2):(n[a++]=o+1,n[a++]=o,n[a++]=o+2);else for(var u=0,s=0;s<r;s+=1)if(s%2==0){var i=e[s],c=e[s+1],f=e[s+2];n[u++]=i,n[u++]=c,n[u++]=f}else{var p=e[s+1],l=e[s],d=e[s+2];n[u++]=p,n[u++]=l,n[u++]=d}return n}function i(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){for(var a=0,o=0;o<r;++o)n[a++]=0,n[a++]=o+1,n[a++]=o+2;return n}for(var u=e[0],s=e[1],i=0,c=0;c<r;++c){var f=e[c+2];n[i++]=u,n[i++]=s,n[i++]=f,s=f}return n}})),r.register("gUx67",(function(t,n){e(t.exports,"generateDefaultIndexArray",(function(){return f})),e(t.exports,"generateIndexArray",(function(){return p})),e(t.exports,"computeAttachmentOriginTriangles",(function(){return l})),e(t.exports,"computeAttachmentOriginPoints",(function(){return d}));var a=r("e4Xv2"),o=r("5YMIf"),u=r("avKBC"),s=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),i=new Uint16Array([0]),c=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function f(e){if(1===e)return i;if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>s.length){var t=Math.max(2*s.length,e);s=new Uint32Array(t);for(var r=0;r<s.length;r++)s[r]=r}return new Uint32Array(s.buffer,0,e)}function p(e){if(1===e)return new Uint16Array(i);if(e<c.length)return new Uint16Array(c.slice(0,e));if(e>s.length){for(var t=new Uint32Array(e),r=0;r<t.length;r++)t[r]=r;return t}return new Uint32Array(s.slice(0,e))}function l(e,t,r){if(!e)return!1;var n=e.size,o=e.data;(0,a.s)(r,0,0,0),(0,a.s)(m,0,0,0);for(var s=0,i=0,c=0;c<t.length-2;c+=3){var f=t[c+0]*n,p=t[c+1]*n,l=t[c+2]*n;(0,a.s)(y,o[f+0],o[f+1],o[f+2]),(0,a.s)(v,o[p+0],o[p+1],o[p+2]),(0,a.s)(h,o[l+0],o[l+1],o[l+2]);var d=(0,u.areaPoints3d)(y,v,h);d?((0,a.b)(y,y,v),(0,a.b)(y,y,h),(0,a.a)(y,y,1/3*d),(0,a.b)(r,r,y),s+=d):((0,a.b)(m,m,y),(0,a.b)(m,m,v),(0,a.b)(m,m,h),i+=3)}return!(0===i&&0===s||(0!==s?((0,a.a)(r,r,1/s),0):0===i||((0,a.a)(r,m,1/i),0)))}function d(e,t,r){if(!e||!t)return!1;var n=e.size,o=e.data;(0,a.s)(r,0,0,0);for(var u=-1,s=0,i=0;i<t.length;i++){var c=t[i]*n;u!==c&&(r[0]+=o[c+0],r[1]+=o[c+1],r[2]+=o[c+2],s++),u=c}return s>1&&(0,a.a)(r,r,1/s),s>0}var y=(0,o.c)(),v=(0,o.c)(),h=(0,o.c)(),m=(0,o.c)()})),r.register("avKBC",(function(t,n){e(t.exports,"areaPoints3d",(function(){return i}));var a=r("jubE1"),o=(r("hRgCq"),r("e4Xv2")),u=r("5YMIf"),s=r("cFPW4");r("4Tl7p");function i(e,t,r){return(0,o.f)(c,t,e),(0,o.f)(f,r,e),(0,o.l)((0,o.c)(c,c,f))/2}new(0,a.ObjectStack)(s.create),new(0,a.ObjectStack)((function(){return{p0:null,p1:null,p2:null}}));var c=(0,u.c)(),f=(0,u.c)()})),r.register("jubE1",(function(t,n){e(t.exports,"ObjectStack",(function(){return u}));var a=r("8TSCy"),o=r("e02MS"),u=function(){"use strict";function e(t){a.classCallCheck(this,e),this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return a.createClass(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&(0,o.nextTick)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,s));e++)this._items.push(this.allocator())}}]),e}(),s=1024})),r.register("cFPW4",(function(t,n){e(t.exports,"create",(function(){return c})),e(t.exports,"fromValues",(function(){return f})),e(t.exports,"distance2",(function(){return p}));var a=r("iVfa0"),o=r("jubE1"),u=r("e4Xv2"),s=r("5YMIf"),i=r("4Tl7p");function c(e){return e?{origin:(0,s.a)(e.origin),vector:(0,s.a)(e.vector)}:{origin:(0,s.c)(),vector:(0,s.c)()}}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,u.g)(r.origin,e),(0,u.g)(r.vector,t),r}function p(e,t){var r=(0,u.f)(i.sv3d.get(),t,e.origin),n=(0,u.d)(e.vector,r),o=(0,u.d)(e.vector,e.vector),s=(0,a.clamp)(n/o,0,1),c=(0,u.f)(i.sv3d.get(),(0,u.a)(i.sv3d.get(),e.vector,s),r);return(0,u.d)(c,c)}(0,s.c)(),(0,s.c)(),new(0,o.ObjectStack)((function(){return{origin:null,vector:null}}))})),r.register("4Tl7p",(function(t,n){e(t.exports,"sv3d",(function(){return o})),e(t.exports,"sm4d",(function(){return u}));var a=r("61Wey"),o=(a.VectorStack.createVec2f64(),a.VectorStack.createVec3f64()),u=(a.VectorStack.createVec4f64(),a.VectorStack.createMat3f64(),a.VectorStack.createMat4f64());a.VectorStack.createQuatf64()})),r.register("61Wey",(function(t,n){e(t.exports,"VectorStack",(function(){return d}));var a=r("8TSCy"),o=r("dbxRf"),u=r("e02MS"),s=r("gnwu9"),i=r("89KCq"),c=r("ksUrQ"),f=r("iE3Nt"),p=r("5YMIf"),l=r("iLaO9"),d=function(){"use strict";function e(t,r,n){a.classCallCheck(this,e),this.itemByteSize=t,this.itemCreate=r,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}return a.createClass(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&(0,u.nextTick)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var r=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize),n=0;n<this._itemsPerBuffer;++n)this._items.push(this.itemCreate(r,n*this.itemByteSize));this._buffers.push(r)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(16,f.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(24,p.b,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(32,l.a,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(72,s.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(128,i.a,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return new e(32,c.c,t)}}]),e}(),y=4*o.ByteSizeUnit.KILOBYTES})),r.register("lHcHb",(function(t,r){e(t.exports,"COLOR_GAMMA",(function(){return n}));var n=2.1}))}();
//# sourceMappingURL=objectResourceUtils.43309e94.js.map
