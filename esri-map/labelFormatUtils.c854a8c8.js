!function(){function e(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("gZc4S",(function(t,n){e(t.exports,"createLabelFunction",(function(){return g})),e(t.exports,"formatField",(function(){return y}));var a=r("kyj08"),l=r("jHOLN"),u=r("8lxrq"),o=r("1RkqB"),i=r("7vTUY"),s=r("7OJpl"),c=r("3nnTb");const f=l.default.getLogger("esri.layers.support.labelFormatUtils"),d={type:"simple",evaluate:()=>null},p={getAttribute:(e,r)=>e.field(r)};async function g(e,t,n){if(!e||!e.symbol)return d;const l=e.where,u=(0,s.getLabelExpression)(e),o=l?await r("7uAQy"):null;let i;if("arcade"===u.type){const e=await(0,c.createLabelExpression)(u.expression,n,t);i={type:"arcade",evaluate(r){try{const t=e.evaluate({$feature:"attributes"in r?e.repurposeFeature(r):r});if(null!=t)return t.toString()}catch(e){f.error(new(0,a.default)("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:r,expression:u}))}return null},needsHydrationToEvaluate:()=>null==(0,s.getSingleFieldArcadeExpression)(u.expression)}}else i={type:"simple",evaluate:e=>u.expression.replace(/{[^}]*}/g,(r=>{const n=r.slice(1,-1),a=t.get(n);if(!a)return r;let l=null;return"attributes"in e?e&&e.attributes&&(l=e.attributes[a.name]):l=e.field(a.name),null==l?"":y(l,a)}))};if(l){let e;try{e=o.WhereClause.create(l,t)}catch(e){return f.error(new(0,a.default)("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:l,error:e})),d}const r=i.evaluate;i.evaluate=t=>{const n="attributes"in t?void 0:p;try{if(e.testFeature(t,n))return r(t)}catch(e){f.error(new(0,a.default)("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:l,feature:t,error:e}))}return null}}return i}function y(e,r){if(null==e)return"";const t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if("range"===t.type){const r=+e,n="range"in t?t.range[0]:t.minValue,a="range"in t?t.range[1]:t.maxValue;if(n<=r&&r<=a)return t.name}let n=e;return"date"===r.type||"esriFieldTypeDate"===r.type?n=(0,u.formatDate)(n,(0,u.convertDateFormatToIntlOptions)("short-date")):(0,i.isNumericField)(r)&&(n=(0,o.formatNumber)(+n)),n||""}})),r.register("7uAQy",(function(e,t){e.exports=r("4WKyX")(r("aNJCr").getBundleURL("eeyk4")+r("iE7OH").resolve("cgD2M")).then((()=>r("9AqbE")))}))}();
//# sourceMappingURL=labelFormatUtils.c854a8c8.js.map
