!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("eXarb",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return x}));var o=t("7eJjO"),s=t("2wMvA"),l=t("90ZKq"),a=t("imIAv"),u=t("d2yMj"),p=t("30Aps"),c=t("7qybv"),d=t("8NioF"),y=t("lKPaD"),f=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var g=t("fcwIv"),v=t("4LDxK"),h=t("5N5S1");const b=u.default.ofType(a.default);let m=class extends((0,h.OperationalLayer)((0,d.MultiOriginJSONMixin)(v.default))){initialize(){this.addHandles((0,y.watch)((()=>this.analysis),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),y.syncAndInitial))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,c.applySome)(this.analysis,(e=>e.observer))}set observer(e){(0,c.applySome)(this.analysis,(t=>t.observer=e))}get targets(){return null!=this.analysis?this.analysis.targets:new(0,u.default)}set targets(e){var t;(0,p.referenceSetter)(e,null===(t=this.analysis)||void 0===t?void 0:t.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new(0,s.default))}constructor(e){super(e),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new(0,s.default),this.opacity=1}};(0,o._)([(0,f.property)({json:{read:!1},readOnly:!0})],m.prototype,"type",void 0),(0,o._)([(0,f.property)({type:["LineOfSightLayer"]})],m.prototype,"operationalLayerType",void 0),(0,o._)([(0,f.property)({type:l.default,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,"observer",null),(0,o._)([(0,f.property)({type:b,json:{read:!0,write:{ignoreOrigin:!0}}})],m.prototype,"targets",null),(0,o._)([(0,f.property)({nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,"analysis",void 0),(0,o._)([(0,f.property)({readOnly:!0})],m.prototype,"fullExtent",null),(0,o._)([(0,f.property)({readOnly:!0})],m.prototype,"spatialReference",null),(0,o._)([(0,f.property)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],m.prototype,"opacity",void 0),(0,o._)([(0,f.property)({type:["show","hide"]})],m.prototype,"listMode",void 0),m=(0,o._)([(0,g.subclass)("esri.layers.LineOfSightLayer")],m);const x=m})),t.register("2wMvA",(function(r,n){e(r.exports,"default",(function(){return m}));var i=t("7eJjO"),o=t("0ccyt"),s=t("90ZKq"),l=t("imIAv"),a=t("d2yMj"),u=t("30Aps"),p=t("7qybv"),c=t("lKPaD"),d=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var y=t("fcwIv"),f=t("7RvA5"),g=t("ayLat"),v=t("dKgtR");const h=a.default.ofType(l.default);let b=class extends o.default{initialize(){this.addHandles((0,c.watch)((()=>this._computeExtent()),(e=>{null!=e&&null!=e.pending||this._set("extent",null!=e?e.extent:null)}),c.syncAndInitial))}get targets(){return this._get("targets")||new h}set targets(e){this._set("targets",(0,u.referenceSetter)(e,this.targets,h))}get spatialReference(){return null!=this.observer&&null!=this.observer.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,p.applySome)(this.observer,(e=>e.position))]}async waitComputeExtent(){const e=this._computeExtent();return null!=e?e.pending:Promise.resolve()}_computeExtent(){const e=this.spatialReference;if(null==this.observer||null==this.observer.position||null==e)return null;const t=e=>"absolute-height"===(0,v.getGeometryEffectiveElevationMode)(e.position,e.elevationInfo),r=this.observer.position,n=(0,g.fromValues)(r.x,r.y,r.z,r.x,r.y,r.z);for(const t of this.targets)if(null!=t.position){const r=(0,f.projectOrLoad)(t.position,e);if(null!=r.pending)return{pending:r.pending,extent:null};if(null!=r.geometry){const{x:e,y:t,z:i}=r.geometry;(0,g.expandWithVec3)(n,[e,t,i])}}const i=(0,g.toExtent)(n,e);return t(this.observer)&&this.targets.every(t)||(i.zmin=void 0,i.zmax=void 0),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}constructor(e){super(e),this.type="line-of-sight",this.observer=null,this.extent=null}};(0,i._)([(0,d.property)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,i._)([(0,d.property)({type:s.default,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,i._)([(0,d.property)({cast:u.castForReferenceSetter,type:h,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,i._)([(0,d.property)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,i._)([(0,d.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,i._)([(0,d.property)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,i._)([(0,y.subclass)("esri.analysis.LineOfSightAnalysis")],b);const m=b})),t.register("0ccyt",(function(r,n){e(r.exports,"default",(function(){return f}));var i=t("7eJjO"),o=t("jymfC"),s=t("lNwWH"),l=t("3SeOo"),a=t("52Bzb"),u=t("1XAcN"),p=t("iho5X");t("iJAIC"),t("2VlWd");var c=t("fcwIv");let d=0,y=class extends((0,u.JSONSupportMixin)((0,l.ClonableMixin)((0,a.IdentifiableMixin)(o.default)))){get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(s.isSome)}constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${d++}`,this.title=null}};(0,i._)([(0,p.property)({type:String,constructOnly:!0,clonable:!1})],y.prototype,"id",void 0),(0,i._)([(0,p.property)({type:String})],y.prototype,"title",void 0),(0,i._)([(0,p.property)({constructOnly:!0})],y.prototype,"type",void 0),(0,i._)([(0,p.property)({clonable:!1,value:null})],y.prototype,"parent",null),(0,i._)([(0,p.property)({readOnly:!0})],y.prototype,"isEditable",null),(0,i._)([(0,p.property)({readOnly:!0})],y.prototype,"requiredPropertiesForEditing",void 0),y=(0,i._)([(0,c.subclass)("esri.analysis.Analysis")],y);const f=y})),t.register("90ZKq",(function(r,n){e(r.exports,"default",(function(){return v}));var i=t("7eJjO"),o=t("lbJ00"),s=t("jymfC"),l=t("3SeOo"),a=t("1XAcN"),u=t("7qybv"),p=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var c=t("fcwIv"),d=t("8z7fo"),y=t("d1Fqh"),f=t("h5vCg");let g=class extends((0,a.JSONSupportMixin)((0,l.ClonableMixin)(s.default))){equals(e){return(0,u.equalsMaybe)(this.position,e.position)&&(0,u.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,p.property)({type:y.default,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),(0,i._)([(0,p.property)({type:f.default}),(0,d.persistable)()],g.prototype,"elevationInfo",void 0),(0,i._)([(0,p.property)(o.featureReferenceProperty)],g.prototype,"feature",void 0),g=(0,i._)([(0,c.subclass)("esri.analysis.LineOfSightAnalysisObserver")],g);const v=g})),t.register("lbJ00",(function(t,r){function n(e,t){return i(e)===i(t)}function i(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:"";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}e(t.exports,"featureReferenceEquals",(function(){return n})),e(t.exports,"featureReferenceProperty",(function(){return o}));const o={json:{write:{writer:function(e,t){var r;null!=e&&null!=(null===(r=e.layer)||void 0===r?void 0:r.objectIdField)&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}}})),t.register("8z7fo",(function(r,n){e(r.exports,"persistable",(function(){return d}));var i=t("arTQ0"),o=t("kYueh"),s=t("9Rl0r"),l=t("gy5s8"),a=t("Ej9Ns"),u=t("iho5X"),p=t("2LZwQ"),c=t("9ELaA");function d(e){var t;const r=null!==(t=null==e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,n)=>{const s=function(e,t,r){if("resource"===(null==e?void 0:e.type))return function(e,t,r){const n=(0,l.getPropertyMetadata)(t,r);return{type:String,read:(e,t,r)=>{const i=(0,c.r)(e,t,r);return n.type===String?i:"function"==typeof n.type?new n.type({url:i}):void 0},write:{writer(t,s,l,u){if(!u||!u.resources)return"string"==typeof t?void(s[l]=(0,c.t)(t,u)):void(s[l]=t.write({},u));const d=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),v=(0,c.t)(d,{...u,verifyItemRelativeUrls:u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},c.M.NO),h=n.type!==String&&(!(0,i.isMultiOriginJSONMixin)(this)||u&&u.origin&&this.originIdOf(r)>(0,a.nameToId)(u.origin)),b={object:this,propertyName:r,value:t,targetUrl:v,dest:s,targetPropertyName:l,context:u,params:e};u&&u.portalItem&&v&&!(0,o.isAbsolute)(v)?h?function(e){const{context:t,targetUrl:r,params:n,value:i,dest:s,targetPropertyName:l}=e;if(!t.portalItem)return;var a;const u=t.portalItem.resourceFromPath(r),c=g(i,r,t),d=(0,p.getResourceContentExtension)(c),v=(0,o.getPathExtension)(u.path),h=null!==(a=null==n?void 0:n.compress)&&void 0!==a&&a;d===v?(t.resources&&f({...e,resource:u,content:c,compress:h,updates:t.resources.toUpdate}),s[l]=r):y(e)}(b):function({context:e,targetUrl:t,dest:r,targetPropertyName:n}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[n]=t)}(b):u&&u.portalItem&&(null==v||null!=(0,c.i)(v)||(0,o.isBlobProtocol)(v)||h)?y(b):s[l]=v}}}}(e,t,r);var n;switch(null!==(n=null==e?void 0:e.type)&&void 0!==n?n:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.a;return{read:e,write:t}}}}(e,t,n);for(const e of r){const r=(0,u.propertyJSONMeta)(t,e,n);for(const e in s)r[e]=s[e]}}}function y(e){const{targetUrl:r,params:n,value:i,context:l,dest:a,targetPropertyName:u}=e;if(!l.portalItem)return;var d,y;const v=(0,c.p)(r),h=null!==(d=null==v?void 0:v.filename)&&void 0!==d?d:(0,s.generateUUID)(),b=null!==(y=null==n?void 0:n.prefix)&&void 0!==y?y:null==v?void 0:v.prefix,m=g(i,r,l),x=(0,o.join)(b,h),I=`${x}.${(0,p.getResourceContentExtension)(m)}`,w=l.portalItem.resourceFromPath(I);var O;(0,o.isBlobProtocol)(r)&&l.resources&&l.resources.pendingOperations.push(async function(e){const r=(await Promise.resolve(t("9pNSx"))).default,{data:n}=await r(e,{responseType:"blob"});return n}(r).then((e=>{w.path=`${x}.${(0,p.getResourceContentExtension)(e)}`,a[u]=w.itemRelativeUrl})).catch((()=>{})));const j=null!==(O=null==n?void 0:n.compress)&&void 0!==O&&O;l.resources&&f({...e,resource:w,content:m,compress:j,updates:l.resources.toAdd}),a[u]=w.itemRelativeUrl}function f({object:e,propertyName:t,updates:r,resource:n,content:i,compress:o}){r.push({resource:n,content:i,compress:o,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function g(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}})),t.register("arTQ0",(function(t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}e(t.exports,"isMultiOriginJSONMixin",(function(){return n}))})),t.register("2LZwQ",(function(r,n){e(r.exports,"getResourceContentExtension",(function(){return o}));var i=t("kYueh");function o(e){return s[function(e){return e instanceof Blob?e.type:function(e){const t=(0,i.getPathExtension)(e);return u[t]||l}(e.url)}(e)]||a}const s={},l="text/plain",a=s[l],u={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in u)s[u[e]]=e})),t.register("imIAv",(function(r,n){e(r.exports,"default",(function(){return g}));var i=t("7eJjO"),o=t("lbJ00"),s=t("3SeOo"),l=t("1XAcN"),a=t("7qybv"),u=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var p=t("fcwIv"),c=t("8z7fo"),d=t("d1Fqh"),y=t("h5vCg");let f=class extends((0,l.JSONSupportMixin)(s.Clonable)){equals(e){return(0,a.equalsMaybe)(this.position,e.position)&&(0,a.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,u.property)({type:d.default}),(0,c.persistable)()],f.prototype,"position",void 0),(0,i._)([(0,u.property)({type:y.default}),(0,c.persistable)()],f.prototype,"elevationInfo",void 0),(0,i._)([(0,u.property)(o.featureReferenceProperty)],f.prototype,"feature",void 0),f=(0,i._)([(0,p.subclass)("esri.analysis.LineOfSightAnalysisTarget")],f);const g=f})),t.register("dKgtR",(function(r,n){e(r.exports,"getGeometryEffectiveElevationMode",(function(){return o}));t("dspmW");function i(e){return e?s:l}function o(e,t){return function(e,t){return null!=t&&t.mode?t.mode:i(e).mode}(null!=e&&e.hasZ,t)}const s={mode:"absolute-height",offset:0},l={mode:"on-the-ground",offset:null}}))}();
//# sourceMappingURL=LineOfSightLayer.b9a50238.js.map
