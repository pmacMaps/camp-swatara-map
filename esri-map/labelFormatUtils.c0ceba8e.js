function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("9koH3",(function(r,n){e(r.exports,"createLabelFunction",(function(){return g})),e(r.exports,"formatField",(function(){return y}));var a=t("bPmsI"),i=t("6TszD"),l=t("eTz6p"),o=t("39Czw"),u=t("15IfA"),s=t("3BOKS"),f=t("QiKdE");const c=i.default.getLogger("esri.layers.support.labelFormatUtils"),d={type:"simple",evaluate:()=>null},p={getAttribute:(e,t)=>e.field(t)};async function g(e,r,n){if(!e||!e.symbol)return d;const i=e.where,l=(0,s.getLabelExpression)(e),o=i?await t("1qd8Q"):null;let u;if("arcade"===l.type){const e=await(0,f.createLabelExpression)(l.expression,n,r);u={type:"arcade",evaluate(t){try{const r=e.evaluate({$feature:"attributes"in t?e.repurposeFeature(t):t});if(null!=r)return r.toString()}catch(e){c.error(new(0,a.default)("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:t,expression:l}))}return null},needsHydrationToEvaluate:()=>null==(0,s.getSingleFieldArcadeExpression)(l.expression)}}else u={type:"simple",evaluate:e=>l.expression.replace(/{[^}]*}/g,(t=>{const n=t.slice(1,-1),a=r.get(n);if(!a)return t;let i=null;return"attributes"in e?e&&e.attributes&&(i=e.attributes[a.name]):i=e.field(a.name),null==i?"":y(i,a)}))};if(i){let e;try{e=o.WhereClause.create(i,r)}catch(e){return d}const t=u.evaluate;u.evaluate=r=>{const n="attributes"in r?void 0:p;return e.testFeature(r,n)?t(r):null}}return u}function y(e,t){if(null==e)return"";const r=t.domain;if(r)if("codedValue"===r.type||"coded-value"===r.type){const t=e;for(const e of r.codedValues)if(e.code===t)return e.name}else if("range"===r.type){const t=+e,n="range"in r?r.range[0]:r.minValue,a="range"in r?r.range[1]:r.maxValue;if(n<=t&&t<=a)return r.name}let n=e;return"date"===t.type||"esriFieldTypeDate"===t.type?n=(0,l.formatDate)(n,(0,l.convertDateFormatToIntlOptions)("short-date")):(0,u.isNumericField)(t)&&(n=(0,o.formatNumber)(+n)),n||""}})),t.register("1qd8Q",(function(e,r){e.exports=Promise.all([import("./"+t("kyEFX").resolve("kLHI6")),import("./"+t("kyEFX").resolve("k1oiq"))]).then((()=>t("jKVXg")))}));
//# sourceMappingURL=labelFormatUtils.c0ceba8e.js.map
