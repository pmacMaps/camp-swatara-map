!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("jUMXJ",(function(n,i){var a;a=n.exports,Object.defineProperty(a,"__esModule",{value:!0,configurable:!0}),t(n.exports,"default",(function(){return w}));var s=r("8TSCy"),o=r("2TvXO"),u=r("9pNSx"),l=r("kyj08"),c=r("jHOLN"),d=r("7qybv"),f=r("10vEZ"),h=r("79LpT"),p=r("eY5Yp"),m=r("akQYU"),v=r("73BcH"),y=r("fP7bp"),g=r("f3b5K"),x=r("4shxe"),b=r("dxhdj"),_=r("5JzQt"),I=r("4nMX7"),S=r("82Efb"),k=r("7vTUY"),T={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},w=function(){"use strict";function t(){s.classCallCheck(this,t);var r,n=this;this._queryEngine=null,this._snapshotFeatures=(r=s.asyncToGenerator(e(o).mark((function t(r){var i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetch(r);case 2:return i=e.sent,e.abrupt("return",n._createFeatures(i));case 4:case"end":return e.stop()}}),t)}))),function(e){return r.apply(this,arguments)})}return s.createClass(t,[{key:"destroy",value:function(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){var a,u,c,d,f,h,m,y,_,w,F,M,C,E,B,N,j,V,q,z,R,P,A,G,Y,D,O,X,Z;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loadOptions={url:t.url,customParameters:t.customParameters},a=[],e.next=4,n._checkProjection(t.spatialReference);case 4:if(u=null,e.t0=t.url,!e.t0){e.next=10;break}return e.next=9,n._fetch(null==r?void 0:r.signal);case 9:u=e.sent;case 10:c=(0,x.inferLayerProperties)(u,{geometryType:t.geometryType}),d=t.fields||c.fields||[],f=null!=t.hasZ?t.hasZ:c.hasZ,h=c.geometryType,m=t.objectIdField||c.objectIdFieldName||"__OBJECTID",y=t.spatialReference||p.WGS84,_=t.timeInfo,d===c.fields&&c.unknownFields.length>0&&a.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}}),(w=d.find((function(e){return e.name===m})))?("esriFieldTypeString"!==w.type&&(w.type="esriFieldTypeOID"),w.editable=!1,w.nullable=!1):(w={alias:m,name:m,type:"string"===c.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},d.unshift(w)),F={},M=!0,C=!1,E=void 0,e.prev=17,B=d[Symbol.iterator]();case 19:if(M=(N=B.next()).done){e.next=29;break}if(null==(j=N.value).name&&(j.name=j.alias),null==j.alias&&(j.alias=j.name),j.name){e.next=23;break}throw new(0,l.default)("geojson-layer:invalid-field-name","field name is missing",{field:j});case 23:if(S.kebabDict.jsonValues.includes(j.type)){e.next=25;break}throw new(0,l.default)("geojson-layer:invalid-field-type",'invalid type for field "'.concat(j.name,'"'),{field:j});case 25:j.name!==w.name&&void 0!==(V=(0,k.getFieldDefaultValue)(j))&&(F[j.name]=V);case 26:M=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(17),C=!0,E=e.t1;case 35:e.prev=35,e.prev=36,M||null==B.return||B.return();case 38:if(e.prev=38,!C){e.next=41;break}throw E;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return n._fieldsIndex=new(0,I.default)(d),(q=n._fieldsIndex.requiredFields.indexOf(w))>-1&&n._fieldsIndex.requiredFields.splice(q,1),_&&(_.startTimeField&&((z=n._fieldsIndex.get(_.startTimeField))?(_.startTimeField=z.name,z.type="esriFieldTypeDate"):_.startTimeField=null),_.endTimeField&&((R=n._fieldsIndex.get(_.endTimeField))?(_.endTimeField=R.name,R.type="esriFieldTypeDate"):_.endTimeField=null),_.trackIdField&&((P=n._fieldsIndex.get(_.trackIdField))?_.trackIdField=P.name:(_.trackIdField=null,a.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:_}}))),_.startTimeField||_.endTimeField||(a.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:_}}),_=null)),A=h?(0,b.createDrawingInfo)(h):null,G={warnings:a,featureErrors:[],layerDefinition:s.objectSpread({},T,{drawingInfo:A,templates:(0,b.createDefaultTemplate)(F),extent:null,geometryType:h,objectIdField:m,fields:d,hasZ:!!f,timeInfo:_})},n._queryEngine=new(0,g.default)({fields:d,geometryType:h,hasM:!1,hasZ:f,objectIdField:m,spatialReference:y,timeInfo:_,featureStore:new(0,v.default)({geometryType:h,hasM:!1,hasZ:f}),cacheSpatialQueries:!0}),n._createDefaultAttributes=(0,b.createDefaultAttributesFunction)(F,m),e.next=50,n._createFeatures(u);case 50:return Y=e.sent,n._objectIdGenerator=n._createObjectIdGenerator(n._queryEngine,Y),D=n._normalizeFeatures(Y,G.warnings,G.featureErrors),n._queryEngine.featureStore.addMany(D),G.layerDefinition.extent=n._queryEngine.fullExtent,G.layerDefinition.timeInfo&&(O=n._queryEngine.timeExtent,X=O.start,Z=O.end,G.layerDefinition.timeInfo.timeExtent=[X,Z]),e.abrupt("return",G);case 55:case"end":return e.stop()}}),i,null,[[17,31,35,43],[36,,38,42]])})))()}},{key:"applyEdits",value:function(t){var r=this;return s.asyncToGenerator(e(o).mark((function n(){var i,a,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r._queryEngine,a=i.spatialReference,s=i.geometryType,e.next=3,Promise.all([(0,_.loadGeometryEngineForSimplify)(a,s),(0,y.checkProjectionSupport)(t.adds,a),(0,y.checkProjectionSupport)(t.updates,a)]);case 3:return e.next=5,r._waitSnapshotComplete();case 5:return e.abrupt("return",(e.sent,e.sent,r._applyEdits(t)));case 6:case"end":return e.stop()}}),n)})))()}},{key:"queryFeatures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,n._queryEngine.executeQuery(t,r.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryFeatureCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,n._queryEngine.executeQueryForCount(t,r.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryObjectIds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,n._queryEngine.executeQueryForIds(t,r.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryExtent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,n._queryEngine.executeQueryForExtent(t,r.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"querySnapping",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,n._queryEngine.executeQueryForSnapping(t,r.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"refresh",value:function(t){var r=this;return s.asyncToGenerator(e(o).mark((function n(){var i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.loadOptions.customParameters=t,null==(i=r._snapshotTask)||i.abort(),r._snapshotTask=(0,f.createTask)(r._snapshotFeatures),r._snapshotTask.promise.then((function(e){r._queryEngine.featureStore.clear(),r._objectIdGenerator=r._createObjectIdGenerator(r._queryEngine,e);var t=r._normalizeFeatures(e);t&&r._queryEngine.featureStore.addMany(t)}),(function(e){r._queryEngine.featureStore.clear(),(0,f.isAbortError)(e)||c.default.getLogger("esri.layers.GeoJSONLayer").error(new(0,l.default)("geojson-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=7,r._waitSnapshotComplete();case 7:return e.abrupt("return",(e.sent,{extent:r._queryEngine.fullExtent,timeExtent:r._queryEngine.timeExtent}));case 8:case"end":return e.stop()}}),n)})))()}},{key:"_createFeatures",value:function(t){var r=this;return s.asyncToGenerator(e(o).mark((function n(){var i,a,s,u,l,c,f,h,v,g,b;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r._queryEngine,a=i.geometryType,s=i.hasZ,u=i.objectIdField,l=(0,x.createOptimizedFeatures)(t,{geometryType:a,hasZ:s,objectIdField:u}),c=!0,f=!1,h=void 0,(0,p.equals)(r._queryEngine.spatialReference,p.WGS84)){e.next=19;break}for(e.prev=3,v=l[Symbol.iterator]();!(c=(g=v.next()).done);c=!0)b=g.value,(0,d.isSome)(b.geometry)&&(b.geometry=(0,m.convertFromGeometry)((0,y.project)((0,m.convertToGeometry)(b.geometry,r._queryEngine.geometryType,r._queryEngine.hasZ,!1),p.WGS84,r._queryEngine.spatialReference)));e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),f=!0,h=e.t0;case 11:e.prev=11,e.prev=12,c||null==v.return||v.return();case 14:if(e.prev=14,!f){e.next=17;break}throw h;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),n,null,[[3,7,11,19],[12,,14,18]])})))()}},{key:"_waitSnapshotComplete",value:function(){var t=this;return s.asyncToGenerator(e(o).mark((function r(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._snapshotTask||t._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,t._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",t._waitSnapshotComplete());case 9:case"end":return e.stop()}}),r,null,[[1,6]])})))()}},{key:"_fetch",value:function(t){var r=this;return s.asyncToGenerator(e(o).mark((function n(){var i,a,l,c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.loadOptions,a=i.url,l=i.customParameters,e.next=5,(0,u.default)(a,{responseType:"json",query:s.objectSpread({},l),signal:t});case 5:return c=e.sent.data,e.next=8,(0,x.validateGeoJSON)(c);case 8:return e.abrupt("return",(e.sent,c));case 9:case"end":return e.stop()}}),n)})))()}},{key:"_normalizeFeatures",value:function(e,t,r){var n=this._queryEngine.objectIdField,i=[],a=!0,s=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,d=this._createDefaultAttributes(),f=(0,_.mixAttributes)(this._fieldsIndex,d,c.attributes,!0,t);f?null==r||r.push(f):(this._assignObjectId(d,c.attributes,!0),c.attributes=d,c.objectId=d[n],i.push(c))}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}return i}},{key:"_applyEdits",value:function(e){var t=e.adds,r=e.updates,n=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),r&&r.length&&this._applyUpdateEdits(i,r),n&&n.length){var a=!0,s=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i.deleteResults.push((0,_.createFeatureEditSuccessResult)(c))}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}this._queryEngine.featureStore.removeManyById(n)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}}},{key:"_applyAddEdits",value:function(e,t){var r=e.addResults,n=this._queryEngine,i=n.geometryType,a=n.hasM,s=n.hasZ,o=n.objectIdField,u=n.spatialReference,l=n.featureStore,c=[],f=!0,p=!1,v=void 0;try{for(var g,x=t[Symbol.iterator]();!(f=(g=x.next()).done);f=!0){var b=g.value;if(b.geometry&&i!==(0,h.getJsonType)(b.geometry))r.push((0,_.createFeatureEditErrorResult)("Incorrect geometry type."));else{var I=this._createDefaultAttributes(),S=(0,_.mixAttributes)(this._fieldsIndex,I,b.attributes);if(S)r.push(S);else{if(this._assignObjectId(I,b.attributes),b.attributes=I,null!=b.uid){var k=b.attributes[o];e.uidToObjectId[b.uid]=k}(0,d.isSome)(b.geometry)&&(b.geometry=(0,y.project)((0,_.simplify)(b.geometry,u),b.geometry.spatialReference,u)),c.push(b),r.push((0,_.createFeatureEditSuccessResult)(b.attributes[o]))}}}}catch(e){p=!0,v=e}finally{try{f||null==x.return||x.return()}finally{if(p)throw v}}l.addMany((0,m.convertFromFeatures)([],c,i,s,a,o))}},{key:"_applyUpdateEdits",value:function(e,t){var r=e.updateResults,n=this._queryEngine,i=n.geometryType,a=n.hasM,s=n.hasZ,o=n.objectIdField,u=n.spatialReference,l=n.featureStore,c=!0,f=!1,p=void 0;try{for(var v,g=t[Symbol.iterator]();!(c=(v=g.next()).done);c=!0){var x=v.value,b=x.attributes,I=x.geometry,S=b&&b[o];if(null!=S)if(l.has(S)){var k=(0,m.convertToFeature)(l.getFeature(S),i,s,a);if((0,d.isSome)(I)){if(i!==(0,h.getJsonType)(I)){r.push((0,_.createFeatureEditErrorResult)("Incorrect geometry type."));continue}k.geometry=(0,y.project)((0,_.simplify)(I,u),I.spatialReference,u)}if(b){var T=(0,_.mixAttributes)(this._fieldsIndex,k.attributes,b);if(T){r.push(T);continue}}l.add((0,m.convertFromFeature)(k,i,s,a,o)),r.push((0,_.createFeatureEditSuccessResult)(S))}else r.push((0,_.createFeatureEditErrorResult)("Feature with object id ".concat(S," missing")));else r.push((0,_.createFeatureEditErrorResult)("Identifier field ".concat(o," missing")))}}catch(e){f=!0,p=e}finally{try{c||null==g.return||g.return()}finally{if(f)throw p}}}},{key:"_createObjectIdGenerator",value:function(e,t){var r=e.fieldsIndex.get(e.objectIdField);if("esriFieldTypeString"===r.type)return function(){return r.name+"-"+Date.now().toString(16)};var n=Number.NEGATIVE_INFINITY,i=!0,a=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;l.objectId&&(n=Math.max(n,l.objectId))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return n=Math.max(0,n)+1,function(){return n++}}},{key:"_assignObjectId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._queryEngine.objectIdField;e[n]=r&&n in t?t[n]:this._objectIdGenerator()}},{key:"_checkProjection",value:function(t){return s.asyncToGenerator(e(o).mark((function r(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.checkProjectionSupport)(p.WGS84,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new(0,l.default)("geojson-layer","Projection not supported");case 8:case"end":return e.stop()}}),r,null,[[0,5]])})))()}}]),t}()})),r.register("73BcH",(function(e,n){t(e.exports,"default",(function(){return p}));var i=r("8TSCy"),a=r("kyj08"),s=r("amfHf"),o=r("jHOLN"),u=r("7qybv"),l=r("ayLat"),c=r("8TwEW"),d=r("akQYU"),f=r("1ZPLr"),h=r("1zB3R"),p=function(){"use strict";function e(t){i.classCallCheck(this,e),this.geometryInfo=t,this._boundsStore=new(0,f.BoundsStore),this._featuresById=new Map,this._markedIds=new Set,this.events=new(0,s.default),this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}return i.createClass(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){var e=this;if(!this.numFeatures)return null;var t=(0,c.create)(c.NEGATIVE_INFINITY);return this._featuresById.forEach((function(r){var n=e._boundsStore.get(r.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){(0,u.isSome)(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this._add(s)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=this._featuresById.get(s);o&&this._remove(o)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this._emitChanged()}},{key:"forEachBounds",value:function(e,t,r){var n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value,c=this._boundsStore.get(u.objectId);c&&t((0,l.fromRect)(r,c))}}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var r=this;this._boundsStore.forEachInBounds(e,(function(e){t(r._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(r,n){e._markedIds.has(n)||(t=!0,e._remove(r))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var r,n=this._featuresById.get(t);if(this._markedIds.add(t),n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):(0,u.isSome)(this.onFeatureAdd)&&this.onFeatureAdd(e),(0,u.isNone)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,d.getBoundsOptimizedGeometry)((0,u.isSome)(r)?r:(0,c.create)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,u.isSome)(r)&&this._boundsStore.set(t,r),this._featuresById.set(t,e)}else o.default.getLogger("esri.layers.graphics.data.FeatureStore").error(new(0,a.default)("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){return(0,u.isSome)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}]),e}()})),r.register("1ZPLr",(function(e,n){t(e.exports,"BoundsStore",(function(){return u}));var i=r("8TSCy"),a=r("2VlWd"),s=r("bWAZj"),o={minX:0,minY:0,maxX:0,maxY:0};var u=function(){"use strict";function e(){var t=this;i.classCallCheck(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new(0,s.PooledRBush)(9,(0,a.default)("esri-csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){var e=t;if(t._indexInvalid){var r=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(e,t){r[n++]=t})),t._indexInvalid=!1,t._index.clear(),t._index.load(r)}else t._boundsToLoad.length&&(t._index.load(t._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),t._boundsToLoad.length=0)}}return i.createClass(e,[{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var r,n,i,a=this;this._loadIndex(),r=this._index,n=e,i=function(e){return t(a._idByBounds.get(e))},o.minX=n[0],o.minY=n[1],o.maxX=n[2],o.maxY=n[3],r.search(o,i)}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var r=this._boundsById.get(e);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()})),r.register("bWAZj",(function(e,n){t(e.exports,"PooledRBush",(function(){return l}));var i=r("8TSCy"),a=r("lNwWH"),s=r("7qybv"),o=r("6v7Z0"),u=r("fcGl2"),l=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,r=arguments.length>1?arguments[1]:void 0;i.classCallCheck(this,e),this.compareMinX=h,this.compareMinY=p,this._toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),r&&("function"==typeof r?this._toBBox=r:this._initFormat(r)),this.clear()}return i.createClass(e,[{key:"destroy",value:function(){this.clear(),_.prune(),I.prune(),S.prune(),k.prune()}},{key:"all",value:function(e){this._all(this.data,e)}},{key:"search",value:function(e,t){var r=this.data,n=this._toBBox;if(x(e,r))for(_.clear();r;){for(var i=0,a=r.children.length;i<a;i++){var s=r.children[i],o=r.leaf?n(s):s;x(e,o)&&(r.leaf?t(s):g(e,o)?this._all(s,t):_.push(s))}r=_.pop()}}},{key:"collides",value:function(e){var t=this.data,r=this._toBBox;if(!x(e,t))return!1;for(_.clear();t;){for(var n=0,i=t.children.length;n<i;n++){var a=t.children[n],s=t.leaf?r(a):a;if(x(e,s)){if(t.leaf||g(e,s))return!0;_.push(a)}}t=_.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this.data.height-1),this}},{key:"clear",value:function(){return this.data=new w([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,r=this.data,n=null,i=0,o=!1,u=this._toBBox(e);for(S.clear(),k.clear();r||S.length>0;){var l;if(r||(r=(0,s.assumeNonNull)(S.pop()),n=S.data[S.length-1],i=null!=(l=k.pop())?l:0,o=!0),r.leaf&&-1!==(t=(0,a.indexOf)(r.children,e,r.children.length,r.indexHint)))return r.children.splice(t,1),S.push(r),this._condense(S),this;o||r.leaf||!g(r,u)?n?(i++,r=n.children[i],o=!1):r=null:(S.push(r),k.push(i),i=0,n=r,r=r.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(e){return this.data=e,this}},{key:"_all",value:function(e,t){var r=e;for(I.clear();r;){var n,i=!0,a=!1,s=void 0;if(!0===r.leaf)try{for(var o,u=r.children[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){t(o.value)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}else I.pushArray(r.children);r=null!=(n=I.pop())?n:null}}},{key:"_build",value:function(e,t,r,n){var i=r-t+1,a=this._maxEntries;if(i<=a){var s=new w(e.slice(t,r+1));return c(s,this._toBBox),s}n||(n=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,n-1)));var o=new F([]);o.height=n;var u=Math.ceil(i/a),l=u*Math.ceil(Math.sqrt(a));b(e,t,r,l,this.compareMinX);for(var d=t;d<=r;d+=l){var f=Math.min(d+l-1,r);b(e,d,f,u,this.compareMinY);for(var h=d;h<=f;h+=u){var p=Math.min(h+u-1,f);o.children.push(this._build(e,h,p,n-1))}}return c(o,this._toBBox),o}},{key:"_chooseSubtree",value:function(e,t,r,n){for(;n.push(t),!0!==t.leaf&&n.length-1!==r;){for(var i=void 0,a=1/0,s=1/0,o=0,u=t.children.length;o<u;o++){var l=t.children[o],c=m(l),d=(f=e,h=l,(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-c);d<s?(s=d,a=c<a?c:a,i=l):d===s&&c<a&&(a=c,i=l)}t=i||t.children[0]}var f,h;return t}},{key:"_insert",value:function(e,t,r){var n=this._toBBox,i=r?e:n(e);S.clear();var a=this._chooseSubtree(i,this.data,t,S);for(a.children.push(e),f(a,i);t>=0&&S.data[t].children.length>this._maxEntries;)this._split(S,t),t--;this._adjustParentBBoxes(i,S,t)}},{key:"_split",value:function(e,t){var r=e.data[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n);if(a){var s=r.children.splice(a,r.children.length-a),o=r.leaf?new w(s):new F(s);o.height=r.height,c(r,this._toBBox),c(o,this._toBBox),t?e.data[t-1].children.push(o):this._splitRoot(r,o)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this.data=new F([e,t]),this.data.height=e.height+1,c(this.data,this._toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,r){var n,i,a;n=i=1/0;for(var s=t;s<=r-t;s++){var o=d(e,0,s,this._toBBox),u=d(e,s,r,this._toBBox),l=y(o,u),c=m(o)+m(u);l<n?(n=l,a=s,i=c<i?c:i):l===n&&c<i&&(i=c,a=s)}return a}},{key:"_chooseSplitAxis",value:function(e,t,r){var n=e.leaf?this.compareMinX:h,i=e.leaf?this.compareMinY:p;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)}},{key:"_allDistMargin",value:function(e,t,r,n){e.children.sort(n);for(var i=this._toBBox,a=d(e,0,t,i),s=d(e,r-t,r,i),o=v(a)+v(s),u=t;u<r-t;u++){var l=e.children[u];f(a,e.leaf?i(l):l),o+=v(a)}for(var c=r-t-1;c>=t;c--){var h=e.children[c];f(s,e.leaf?i(h):h),o+=v(s)}return o}},{key:"_adjustParentBBoxes",value:function(e,t,r){for(var n=r;n>=0;n--)f(t.data[n],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var r=e.data[t];if(0===r.children.length)if(t>0){var n=e.data[t-1],i=n.children;i.splice((0,a.indexOf)(i,r,i.length,n.indexHint),1)}else this.clear();else c(r,this._toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function c(e,t){d(e,0,e.children.length,t,e)}function d(e,t,r,n,i){i||(i=new w([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a,s=t;s<r;s++)a=e.children[s],f(i,e.leaf?n(a):a);return i}function f(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function h(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function m(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function v(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,a-n)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function x(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function b(e,t,r,n,i){for(var a=[t,r];a.length;){var o=(0,s.assumeNonNull)(a.pop()),l=(0,s.assumeNonNull)(a.pop());if(!(o-l<=n)){var c=l+Math.ceil((o-l)/n/2)*n;(0,u.q)(e,c,l,o,i),a.push(l,c,c,o)}}}var _=new(0,o.default),I=new(0,o.default),S=new(0,o.default),k=new(0,o.default)({deallocator:void 0}),T=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(){var e;return i.classCallCheck(this,r),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).height=1,e.indexHint=new(0,a.PositionHint),i.possibleConstructorReturn(e)}return r}((function e(){"use strict";i.classCallCheck(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0})),w=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e){var n;return i.classCallCheck(this,r),(n=t.call(this)).children=e,n.leaf=!0,i.possibleConstructorReturn(n)}return r}(T),F=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e){var n;return i.classCallCheck(this,r),(n=t.call(this)).children=e,n.leaf=!1,i.possibleConstructorReturn(n)}return r}(T)})),r.register("1zB3R",(function(e,n){t(e.exports,"optimizedFeatureQueryEngineAdapter",(function(){return u}));var i=r("7qybv"),a=r("8mTF7"),s=r("ft2bT"),o=r("awxBI"),u={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new(0,s.OptimizedFeature)(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return(0,i.isNone)(e.centroid)&&(e.centroid=(0,a.getCentroidOptimizedGeometry)(new(0,o.default),e.geometry,t.hasZ,t.hasM)),e.centroid}}})),r.register("8mTF7",(function(e,n){t(e.exports,"getCentroidOptimizedGeometry",(function(){return s}));var i=r("7qybv");function a(e,t){return e?t?4:3:t?3:2}function s(e,t,r,n,s){if((0,i.isNone)(t)||!t.lengths.length)return null;var f="upperLeft"===(null==s?void 0:s.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);var h=e.coords,p=[],m=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],v=t.lengths,y=t.coords,g=a(r,n),x=0,b=!0,_=!1,I=void 0;try{for(var S,k=v[Symbol.iterator]();!(b=(S=k.next()).done);b=!0){var T=S.value,w=o(m,y,x,T,r,n,f);w&&p.push(w),x+=T*g}}catch(e){_=!0,I=e}finally{try{b||null==k.return||k.return()}finally{if(_)throw I}}if(p.sort((function(e,t){var n=f*e[2]-f*t[2];return 0===n&&r&&(n=e[4]-t[4]),n})),p.length){var F=6*p[0][2];h[0]=p[0][0]/F,h[1]=p[0][1]/F,r&&(F=6*p[0][4],h[2]=0!==F?p[0][3]/F:0),(h[0]<m[0]||h[0]>m[1]||h[1]<m[2]||h[1]>m[3]||r&&(h[2]<m[4]||h[2]>m[5]))&&(h.length=0)}if(!h.length){var M=t.lengths[0]?function(e,t,r,n,i){for(var s=a(n,i),o=t,f=t+s,h=0,p=0,m=0,v=0,y=0,g=r-1;y<g;y++,o+=s,f+=s){var x=e[o],b=e[o+1],_=e[o+2],I=e[f],S=e[f+1],k=e[f+2],T=n?l(x,b,_,I,S,k):u(x,b,I,S);if(T)if(h+=T,n){var w=d(x,b,_,I,S,k);p+=T*w[0],m+=T*w[1],v+=T*w[2]}else{var F=c(x,b,I,S);p+=T*F[0],m+=T*F[1]}}return h>0?n?[p/h,m/h,v/h]:[p/h,m/h]:r>0?n?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(y,0,v[0],r,n):null;if(!M)return null;h[0]=M[0],h[1]=M[1],r&&M.length>2&&(h[2]=M[2])}return e}function o(e,t,r,n,i,s){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=a(i,s),l=r,c=r+u,d=0,f=0,h=0,p=0,m=0,v=0,y=n-1;v<y;v++,l+=u,c+=u){var g=t[l],x=t[l+1],b=t[l+2],_=t[c],I=t[c+1],S=t[c+2],k=g*I-_*x;p+=k,d+=(g+_)*k,f+=(x+I)*k,i&&(h+=(b+S)*(k=g*S-_*b),m+=k),g<e[0]&&(e[0]=g),g>e[1]&&(e[1]=g),x<e[2]&&(e[2]=x),x>e[3]&&(e[3]=x),i&&(b<e[4]&&(e[4]=b),b>e[5]&&(e[5]=b))}if(p*o>0&&(p*=-1),m*o>0&&(m*=-1),!p)return null;var T=[d,f,.5*p];return i&&(T[3]=h,T[4]=.5*m),T}function u(e,t,r,n){var i=r-e,a=n-t;return Math.sqrt(i*i+a*a)}function l(e,t,r,n,i,a){var s=n-e,o=i-t,u=a-r;return Math.sqrt(s*s+o*o+u*u)}function c(e,t,r,n){return[e+.5*(r-e),t+.5*(n-t)]}function d(e,t,r,n,i,a){return[e+.5*(n-e),t+.5*(i-t),r+.5*(a-r)]}})),r.register("fP7bp",(function(n,i){t(n.exports,"checkProjectionSupport",(function(){return v})),t(n.exports,"project",(function(){return b})),t(n.exports,"projectMany",(function(){return I}));var a=r("8TSCy"),s=r("2TvXO"),o=r("7qybv"),u=r("7RvA5"),l=r("jGyUI"),c=r("eY5Yp"),d=r("eF88h"),f=[0,0];function h(e,t){if(!t)return null;if("x"in t){var r,n={x:0,y:0};return r=a.slicedToArray(e(t.x,t.y,f),2),n.x=r[0],n.y=r[1],null!=t.z&&(n.z=t.z),null!=t.m&&(n.m=t.m),n}if("xmin"in t){var i,s,o={xmin:0,ymin:0,xmax:0,ymax:0};return i=a.slicedToArray(e(t.xmin,t.ymin,f),2),o.xmin=i[0],o.ymin=i[1],s=a.slicedToArray(e(t.xmax,t.ymax,f),2),o.xmax=s[0],o.ymax=s[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:p(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:p(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:m(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;r.push(m(u,t))}}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}function m(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value,l=t(u[0],u[1],[0,0]);r.push(l),u.length>2&&l.push(u[2]),u.length>3&&l.push(u[3])}}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}function v(e,t){return y.apply(this,arguments)}function y(){return(y=a.asyncToGenerator(e(s).mark((function t(r,n){var i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return i=Array.isArray(r)?r.map((function(e){return(0,o.isSome)(e.geometry)&&e.geometry.spatialReference})):[r],e.next=5,(0,u.initializeProjection)(i.map((function(e){return{source:e,dest:n}})));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var g=h.bind(null,d.lngLatToXY),x=h.bind(null,d.xyToLngLat);function b(e,t,r){if(!e)return e;if(r||(r=t,t=e.spatialReference),!(0,c.isValid)(t)||!(0,c.isValid)(r)||(0,c.equals)(t,r))return e;if((0,d.canProject)(t,r)){var n=(0,c.isWebMercator)(r)?g(e):x(e);return n.spatialReference=r,n}return(0,u.projectMany)(l.jsonAdapter,[e],t,r,null)[0]}var _=new(function(){"use strict";function t(){a.classCallCheck(this,t),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return a.createClass(t,[{key:"push",value:function(t,r,n){var i=this;return a.asyncToGenerator(e(s).mark((function a(){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length&&r&&n&&!(0,c.equals)(r,n)){e.next=2;break}return e.abrupt("return",t);case 2:return o={geometries:t,inSpatialReference:r,outSpatialReference:n,resolve:null},e.abrupt("return",(i._jobs.push(o),new Promise((function(e){o.resolve=e,null===i._timer&&(i._timer=setTimeout(i._process,10))}))));case 4:case"end":return e.stop()}}),a)})))()}},{key:"_process",value:function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;(0,d.canProject)(r,n)?(0,c.isWebMercator)(n)?i(t.map(g)):i(t.map(x)):i((0,u.projectMany)(l.jsonAdapter,t,r,n,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),t}());function I(e,t,r){return _.push(e,t,r)}})),r.register("jGyUI",(function(e,n){t(e.exports,"jsonAdapter",(function(){return a}));var i=r("8TSCy"),a={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,r){var n=new s(e.getPointX(t),e.getPointY(t),r),i=e.hasZ(t),a=e.hasM(t);return i&&(n.z=e.getPointZ(t)),a&&(n.m=e.getPointM(t)),n},exportPolygon:function(e,t,r){return new o(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new u(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new l(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var n=e.hasZ(t),i=e.hasM(t),a=new c(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){var s=e.getZExtent(t);a.zmin=s.vmin,a.zmax=s.vmax}if(i){var o=e.getMExtent(t);a.mmin=o.vmin,a.mmax=o.vmax}return a}};var s=function e(t,r,n){"use strict";i.classCallCheck(this,e),this.x=t,this.y=r,this.spatialReference=n,this.z=void 0,this.m=void 0};var o=function e(t,r,n,a){"use strict";i.classCallCheck(this,e),this.rings=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)};var u=function e(t,r,n,a){"use strict";i.classCallCheck(this,e),this.paths=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)};var l=function e(t,r,n,a){"use strict";i.classCallCheck(this,e),this.points=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)};var c=function e(t,r,n,a,s){"use strict";i.classCallCheck(this,e),this.xmin=t,this.ymin=r,this.xmax=n,this.ymax=a,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}})),r.register("dxhdj",(function(e,n){t(e.exports,"createDrawingInfo",(function(){return l})),t(e.exports,"createDefaultAttributesFunction",(function(){return f})),t(e.exports,"createDefaultTemplate",(function(){return h})),t(e.exports,"createCapabilities",(function(){return p}));var i=r("8TSCy"),a=r("2VlWd"),s=r("flPLJ"),o=r("aNMpQ"),u=r("2iY9n");function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?u.defaultPointSymbolJSON:"esriGeometryPolyline"===e?u.defaultPolylineSymbolJSON:u.defaultPolygonSymbolJSON}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,d=1;function f(e,t){if((0,a.default)("esri-csp-restrictions"))return function(){return i.objectSpread(i.defineProperty({},t,null),e)};try{var r="this.".concat(t," = null;");for(var n in e)r+="this".concat(c.test(n)?".".concat(n):'["'.concat(n,'"]')," = ").concat(JSON.stringify(e[n]),";");var s=new Function("\n      return class AttributesClass$".concat(d++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return function(){return new s}}catch(r){return function(){return i.objectSpread(i.defineProperty({},t,null),e)}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,s.clone)(e)}}]}function p(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:o.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}})),r.register("aNMpQ",(function(e,r){t(e.exports,"queryCapabilities",(function(){return n}));var n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}})),r.register("5JzQt",(function(n,i){t(n.exports,"createFeatureEditErrorResult",(function(){return d})),t(n.exports,"createFeatureEditSuccessResult",(function(){return h})),t(n.exports,"mixAttributes",(function(){return v})),t(n.exports,"simplify",(function(){return g})),t(n.exports,"loadGeometryEngineForSimplify",(function(){return _}));var a=r("8TSCy"),s=r("2TvXO"),o=r("eY5Yp"),u=r("7vTUY"),l=function e(){"use strict";a.classCallCheck(this,e),this.code=null,this.description=null},c=function e(t){"use strict";a.classCallCheck(this,e),this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t};function d(e){return new c(e)}var f=function e(t){"use strict";a.classCallCheck(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t};function h(e){return new f(e)}var p,m=new Set;function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;for(var a in m.clear(),r){var s=e.get(a);if(s){var o=r[a],l=y(s,o);if(l!==o&&i&&i.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:s,originalValue:o,sanitizedValue:l}}),m.add(s.name),s&&(n||s.editable)){var c=(0,u.validateFieldValue)(s,l);if(c)return d((0,u.validationErrorToString)(c,s,l));t[s.name]=l}}}var f=!0,h=!1,p=void 0;try{for(var v,g=e.requiredFields[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var x=v.value;if(!m.has(x.name))return d('missing required field "'.concat(x.name,'"'))}}catch(e){h=!0,p=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}return null}function y(e,t){var r=t;return"string"==typeof t&&(0,u.isNumericField)(e)?r=parseFloat(t):null!=t&&(0,u.isStringField)(e)&&"string"!=typeof t&&(r=String(t)),(0,u.sanitizeNullFieldValue)(r)}function g(e,t){if(!e||!(0,o.isValid)(t))return e;if("rings"in e||"paths"in e){if(!p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e}function x(){return b.apply(this,arguments)}function b(){return(b=a.asyncToGenerator(e(s).mark((function t(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=p,e.t0){e.next=6;break}return e.next=4,r("aFA9f");case 4:p=e.sent,e.t0=p;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(e,t){return I.apply(this,arguments)}function I(){return(I=a.asyncToGenerator(e(s).mark((function t(r,n){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(0,o.isValid)(r)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n,e.t0){e.next=4;break}return e.next=4,x();case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}})),r.register("aFA9f",(function(e,t){e.exports=Promise.all([r("4WKyX")(r("aNJCr").getBundleURL("cUtJI")+r("iE7OH").resolve("Km0rI")),r("4WKyX")(r("aNJCr").getBundleURL("cUtJI")+r("iE7OH").resolve("vg0wl"))]).then((function(){return r("1n9JK")}))})),r.register("hbg1x",(function(e,n){t(e.exports,"isNullCountSupported",(function(){return d})),t(e.exports,"calculateStringStatistics",(function(){return f})),t(e.exports,"calculatePercentile",(function(){return p})),t(e.exports,"calculateStatistics",(function(){return h})),t(e.exports,"getAttributeComparator",(function(){return m})),t(e.exports,"processSummaryStatisticsResult",(function(){return g})),t(e.exports,"calculateUniqueValuesCount",(function(){return x})),t(e.exports,"createUVResult",(function(){return b})),t(e.exports,"getNormalizedValue",(function(){return _})),t(e.exports,"calculateClassBreaks",(function(){return I})),t(e.exports,"resolveCBResult",(function(){return S})),t(e.exports,"calculateHistogram",(function(){return k}));var i=r("8TSCy"),a=r("59jTx"),s=r("hxmJW"),o="equal-interval",u=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,l=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),c=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function d(e){var t=null!=e.normalizationField||null!=e.normalizationType,r=null!=e.minValue||null!=e.maxValue,n=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!r&&!n}function f(e){var t=e.returnDistinct?i.toConsumableArray(new Set(e.values)):e.values,r=t.filter((function(e){return null!=e})).length,n={count:r};return e.supportsNullCount&&(n.nullcount=t.length-r),e.percentileParams&&(n.median=p(t,e.percentileParams)),n}function h(e){var t=e.values,r=e.useSampleStdDev,n=e.supportsNullCount,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=null,o=null,u=null,l=null,c=0,d=null==e.minValue?-1/0:e.minValue,f=null==e.maxValue?1/0:e.maxValue,h=!0,m=!1,v=void 0;try{for(var y,g=t[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var x=y.value;Number.isFinite(x)?x>=d&&x<=f&&(s+=x,i=Math.min(i,x),a=Math.max(a,x),c++):"string"==typeof x&&c++}}catch(e){m=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw v}}if(c&&null!=s){o=s/c;var b=0,_=!0,I=!1,S=void 0;try{for(var k,T=t[Symbol.iterator]();!(_=(k=T.next()).done);_=!0){var w=k.value;Number.isFinite(w)&&w>=d&&w<=f&&(b+=Math.pow(w-o,2))}}catch(e){I=!0,S=e}finally{try{_||null==T.return||T.return()}finally{if(I)throw S}}l=r?c>1?b/(c-1):0:c>0?b/c:0,u=Math.sqrt(l)}else i=null,a=null;var F={avg:o,count:c,max:a,min:i,stddev:u,sum:s,variance:l};return n&&(F.nullcount=t.length-c),e.percentileParams&&(F.median=p(t,e.percentileParams)),F}function p(e,t){var r=t.fieldType,n=t.value,a=t.orderBy,s=t.isDiscrete,o=m(r,"desc"===a);if(0===(e=i.toConsumableArray(e).filter((function(e){return null!=e})).sort((function(e,t){return o(e,t)}))).length)return null;if(n<=0)return e[0];if(n>=1)return e[e.length-1];var u=(e.length-1)*n,l=Math.floor(u),c=l+1,d=u%1,f=e[l],h=e[c];return c>=e.length||s||"string"==typeof f||"string"==typeof h?f:f*(1-d)+h*d}function m(e,t){var r=t?1:-1,n=t?function(e,t){return t-e}:function(e,t){return e-t},a=v(t);if(!e||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID"].concat(i.toConsumableArray(l)).includes(e))return function(e,t){return"number"==typeof e&&"number"==typeof t?n(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):r};if("esriFieldTypeDate"===e)return function(e,t){var i=new Date(e).getTime(),a=new Date(t).getTime();return isNaN(i)||isNaN(a)?r:n(i,a)};if(l.has(e))return function(e,t){return n(e,t)};if("esriFieldTypeString"===e)return function(e,t){return a(e,t)};if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e){var s=v(t);return function(e,t){return s(y(e),y(t))}}return t?function(e,t){return 1}:function(e,t){return-1}}function v(e){return e?function(e,t){var r,n;return(e=null==(r=e)?void 0:r.toUpperCase())>(t=null==(n=t)?void 0:n.toUpperCase())?-1:e<t?1:0}:function(e,t){var r,n;return(e=null==(r=e)?void 0:r.toUpperCase())<(t=null==(n=t)?void 0:n.toUpperCase())?-1:e>t?1:0}}function y(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function g(e,t){var r;for(r in e)c.indexOf(r)>-1&&(Number.isFinite(e[r])||(e[r]=null));return t?(["avg","stddev","variance"].forEach((function(t){null!=e[t]&&(e[t]=Math.ceil(e[t]))})),e):e}function x(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;(null==o||"string"==typeof o&&""===o.trim())&&(o=null),null==t[o]?t[o]={count:1,data:o}:t[o].count++}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return{count:t}}function b(e,t,r){var n=e.count,i=[];for(var a in r&&t&&"coded-value"===t.type&&t.codedValues.forEach((function(e){var t=e.code;n.hasOwnProperty(t)||(n[t]={data:t,count:0})})),n){var s=n[a];i.push({value:s.data,count:s.count,label:s.label})}return{uniqueValueInfos:i}}function _(e,t,r,n){var i=null;switch(t){case"log":0!==e&&(i=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(n)&&0!==n&&(i=e/n*100);break;case"field":Number.isFinite(r)&&0!==r&&(i=e/r);break;case"natural-log":e>0&&(i=Math.log(e));break;case"square-root":e>0&&(i=Math.pow(e,.5))}return i}function I(e,t){var r,n,i,u,l,c,d,f,h,p=(r={field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||5},n=r.field,i=r.classificationMethod||o,u=r.normalizationType,l=r.normalizationField,(c=new(0,a.default)).classificationField=n,c.breakCount=r.breakCount,c.classificationMethod=i,c.standardDeviationInterval="standard-deviation"===i?r.standardDeviationInterval||1:void 0,c.normalizationType=u,c.normalizationField="field"===u?l:void 0,c);return d=e,f=t.minValue,h=t.maxValue,f=null==f?-1/0:f,h=null==h?1/0:h,e=d.filter((function(e){return Number.isFinite(e)&&e>=f&&e<=h})),(0,s.createGenerateRendererClassBreaks)({definition:p,values:e,normalizationTotal:t.normalizationTotal})}function S(e,t){var r=e.classBreaks,n=r.length,i=r[0].minValue,a=r[n-1].maxValue,s="standard-deviation"===t,o=u;return{minValue:i,maxValue:a,classBreakInfos:r=r.map((function(e){var t=e.label,r={minValue:e.minValue,maxValue:e.maxValue,label:t};if(s&&t){var n=t.match(o).map((function(e){return+e.trim()}));2===n.length?(r.minStdDev=n[0],r.maxStdDev=n[1],n[0]<0&&n[1]>0&&(r.hasAvg=!0)):1===n.length&&(t.includes("<")?(r.minStdDev=null,r.maxStdDev=n[0]):t.includes(">")&&(r.minStdDev=n[0],r.maxStdDev=null))}return r})),normalizationTotal:e.normalizationTotal}}function k(e,t){var r=function(e,t){var r=t.field,n=t.classificationMethod,i=t.standardDeviationInterval,a=t.normalizationType,s=t.normalizationField,o=t.normalizationTotal,u=t.minValue,l=t.maxValue,c=t.numBins||10,f=null,p=null,m=null;if(n&&"equal-interval"!==n||a){var v=I(e,{field:r,normalizationType:a,normalizationField:s,normalizationTotal:o,classificationMethod:n,standardDeviationInterval:i,minValue:u,maxValue:l,numClasses:c}).classBreaks;f=v[0].minValue,p=v[v.length-1].maxValue,m=v.map((function(e){return[e.minValue,e.maxValue]}))}else{if(null!=u&&null!=l)f=u,p=l;else{var y=h({values:e,minValue:u,maxValue:l,useSampleStdDev:!a,supportsNullCount:d({normalizationType:a,normalizationField:s,minValue:u,maxValue:l})});f=y.min,p=y.max}m=function(e,t,r){for(var n,i=(t-e)/r,a=[],s=e,o=1;o<=r;o++)n=s+i,n=Number(n.toFixed(16)),a.push([s,o===r?t:n]),s=n;return a}(f,p,c)}return{min:f,max:p,intervals:m}}(e,t),n=r.min,i=r.max,a=r.intervals,s=a.map((function(e,t){return{minValue:a[t][0],maxValue:a[t][1],count:0}})),o=!0,u=!1,l=void 0;try{for(var c,f=e[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var p=c.value;if(null!=p&&p>=n&&p<=i){var m=T(a,p);m>-1&&s[m].count++}}}catch(e){u=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw l}}return{bins:s,minValue:n,maxValue:i,normalizationTotal:t.normalizationTotal}}function T(e,t){for(var r=-1,n=e.length-1;n>=0;n--)if(t>=e[n][0]){r=n;break}return r}})),r.register("59jTx",(function(e,n){t(e.exports,"default",(function(){return h}));var i=r("8TSCy"),a=r("7eJjO"),s=r("79ASa"),o=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var u=r("fcwIv"),l=r("kt6hM"),c=new(0,s.JSONMap)({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),d=new(0,s.JSONMap)({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),f=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(){var e;return i.classCallCheck(this,r),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",i.possibleConstructorReturn(e)}return i.createClass(r,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),r}(l.default);(0,a._)([(0,o.property)({json:{write:!0}})],f.prototype,"breakCount",void 0),(0,a._)([(0,o.property)({json:{write:!0}})],f.prototype,"classificationField",void 0),(0,a._)([(0,o.property)({type:String,json:{read:c.read,write:c.write}})],f.prototype,"classificationMethod",void 0),(0,a._)([(0,o.property)({json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,a._)([(0,o.property)({json:{read:d.read,write:d.write}})],f.prototype,"normalizationType",void 0),(0,a._)([(0,o.property)({value:null,json:{write:!0}})],f.prototype,"standardDeviationInterval",null),(0,a._)([(0,o.property)({value:null,json:{write:!0}})],f.prototype,"definedInterval",null),(0,a._)([(0,o.property)()],f.prototype,"type",void 0);var h=f=(0,a._)([(0,u.subclass)("esri.rest.support.ClassBreaksDefinition")],f)})),r.register("kt6hM",(function(e,n){t(e.exports,"default",(function(){return p}));var i=r("8TSCy"),a=r("7eJjO"),s=r("79ASa"),o=r("1XAcN"),u=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var l=r("fcwIv"),c=r("1DHtQ"),d=r("j9ZJv"),f=new(0,s.JSONMap)({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),h=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(){var e;return i.classCallCheck(this,r),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).baseSymbol=null,e.colorRamp=null,e.type=null,i.possibleConstructorReturn(e)}return r}(o.JSONSupport);(0,a._)([(0,u.property)({type:d.default,json:{write:!0}})],h.prototype,"baseSymbol",void 0),(0,a._)([(0,u.property)({types:c.types,json:{read:{reader:c.fromJSON},write:!0}})],h.prototype,"colorRamp",void 0),(0,a._)([(0,u.property)({json:{read:f.read,write:f.write}})],h.prototype,"type",void 0);var p=h=(0,a._)([(0,l.subclass)("esri.rest.support.ClassificationDefinition")],h)})),r.register("hxmJW",(function(e,r){function n(e,t){return Number(e.toFixed(t))}function i(e){var t=e.normalizationTotal;return{classBreaks:a(e),normalizationTotal:t}}function a(e){var t=e.definition,r=t.classificationMethod,i=t.breakCount,a=t.normalizationType,c=t.definedInterval,d=[],f=e.values;if(0===f.length)return[];var h,p,m,v,y,g,x=(f=f.sort((function(e,t){return e-t})))[0],b=f[f.length-1];if("equal-interval"===r)if(f.length>=i){for(var _=(b-x)/i,I=x,S=1;S<i;S++){var k=n(x+S*_,6);d.push({minValue:I,maxValue:k,label:s(I,k,a)}),I=k}d.push({minValue:I,maxValue:b,label:s(I,b,a)})}else f.forEach((function(e){d.push({minValue:e,maxValue:e,label:s(e,e,a)})}));else if("natural-breaks"===r){for(var T=o(f),w=e.valueFrequency||T.valueFrequency,F=function(e,t,r){var n=e.length,i=[];r>n&&(r=n);for(var a=0;a<r;a++)i.push(Math.round(a*n/r-1));i.push(n-1);var s=u(i,e,t,r);return function(e,t,r,n,i,a){for(var s=0,o=0,u=0,c=0,d=!0,f=0;f<2&&d;f++){0===f&&(d=!1);for(var h=0;h<a-1;h++)for(;r[h+1]+1!==r[h+2];){r[h+1]=r[h+1]+1;var p=l(h,r,n,i);u=p.sbMean,s=p.sbSdcm;var m=l(h+1,r,n,i);if(c=m.sbMean,!(s+(o=m.sbSdcm)<t[h]+t[h+1])){r[h+1]=r[h+1]-1;break}t[h]=s,t[h+1]=o,e[h]=u,e[h+1]=c,d=!0}for(var v=a-1;v>0;v--)for(;r[v]!==r[v-1]+1;){r[v]=r[v]-1;var y=l(v-1,r,n,i);u=y.sbMean,s=y.sbSdcm;var g=l(v,r,n,i);if(c=g.sbMean,!(s+(o=g.sbSdcm)<t[v-1]+t[v])){r[v]=r[v]+1;break}t[v-1]=s,t[v]=o,e[v-1]=u,e[v]=c,d=!0}}return d}(s.mean,s.sdcm,i,e,t,r)&&(s=u(i,e,t,r)),i}(T.uniqueValues,w,i),M=x,C=1;C<i;C++)if(T.uniqueValues.length>C){var E=n(T.uniqueValues[F[C]],6);d.push({minValue:M,maxValue:E,label:s(M,E,a)}),M=E}d.push({minValue:M,maxValue:b,label:s(M,b,a)})}else if("quantile"===r)if(f.length>=i&&x!==b){for(var B=x,N=Math.ceil(f.length/i),j=0,V=1;V<i;V++){var q=N+j-1;q>f.length&&(q=f.length-1),q<0&&(q=0),d.push({minValue:B,maxValue:f[q],label:s(B,f[q],a)}),B=f[q],j+=N,N=Math.ceil((f.length-j)/(i-V))}d.push({minValue:B,maxValue:b,label:s(B,b,a)})}else for(var z=-1,R=0;R<f.length;R++){var P=f[R];P!==z&&(z=P,d.push({minValue:z,maxValue:P,label:s(z,P,a)}),z=P)}else if("standard-deviation"===r){var A=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}(f),G=function(e,t){for(var r=0,n=0;n<e.length;n++){var i=e[n];r+=(i-t)*(i-t)}return r/=e.length,Math.sqrt(r)}(f,A);if(0===G)d.push({minValue:f[0],maxValue:f[0],label:s(f[0],f[0],a)});else{for(var Y=(h=x,p=b,m=i,v=A,y=G,((g=Math.max(v-h,p-v)/y/m)>=1?1:g>=.5?.5:.25)*G),D=0,O=x,X=i;X>=1;X--){var Z=n(A-(X-.5)*Y,6);d.push({minValue:O,maxValue:Z,label:s(O,Z,a)}),O=Z,D++}var Q=n(A+.5*Y,6);d.push({minValue:O,maxValue:Q,label:s(O,Q,a)}),O=Q,D++;for(var J=1;J<=i;J++)Q=D===2*i?b:n(A+(J+.5)*Y,6),d.push({minValue:O,maxValue:Q,label:s(O,Q,a)}),O=Q,D++}}else if("defined-interval"===r){if(!c)return d;for(var L=f[0],U=f[f.length-1],W=Math.ceil((U-L)/c),H=L,K=1;K<W;K++){var $=n(L+K*c,6);d.push({minValue:H,maxValue:$,label:s(H,$,a)}),H=$}d.push({minValue:H,maxValue:U,label:s(H,U,a)})}return d}function s(e,t,r){return e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t}function o(e){for(var t=[],r=[],n=Number.MIN_VALUE,i=1,a=-1,s=0;s<e.length;s++){var o=e[s];o===n?(i++,r[a]=i):null!==o&&(t.push(o),n=o,i=1,r.push(i),a++)}return{uniqueValues:t,valueFrequency:r}}function u(e,t,r,n){for(var i=[],a=[],s=[],o=0,u=[],c=[],d=0;d<n;d++){var f=l(d,e,t,r);u.push(f.sbMean),c.push(f.sbSdcm),o+=c[d]}for(var h,p=o,m=!0;m||o<p;){m=!1,i=[];for(var v=0;v<n;v++)i.push(e[v]);for(var y=0;y<n;y++)for(var g=e[y]+1;g<=e[y+1];g++)if(h=t[g],y>0&&g!==e[y+1]&&Math.abs(h-u[y])>Math.abs(h-u[y-1]))e[y]=g;else if(y<n-1&&e[y]!==g-1&&Math.abs(h-u[y])>Math.abs(h-u[y+1])){e[y+1]=g-1;break}p=o,o=0,a=[],s=[];for(var x=0;x<n;x++){a.push(u[x]),s.push(c[x]);var b=l(x,e,t,r);u[x]=b.sbMean,c[x]=b.sbSdcm,o+=c[x]}}if(o>p){for(var _=0;_<n;_++)e[_]=i[_],u[_]=a[_],c[_]=s[_];o=p}return{mean:u,sdcm:c}}function l(e,t,r,n){for(var i=0,a=0,s=t[e]+1;s<=t[e+1];s++){var o=n[s];i+=r[s]*o,a+=o}a<=0&&console.log("Exception in Natural Breaks calculation");for(var u=i/a,l=0,c=t[e]+1;c<=t[e+1];c++)l+=n[c]*Math.pow(r[c]-u,2);return{sbMean:u,sbSdcm:l}}t(e.exports,"createGenerateRendererClassBreaks",(function(){return i}))})),r.register("ibKgR",(function(e,n){t(e.exports,"toQuantizationTransform",(function(){return c})),t(e.exports,"quantizePoint",(function(){return x})),t(e.exports,"quantizeGeometry",(function(){return I})),t(e.exports,"unquantizeMultipoint",(function(){return S})),t(e.exports,"unquantizePoint",(function(){return k})),t(e.exports,"unquantizePolygon",(function(){return T})),t(e.exports,"unquantizePolyline",(function(){return w}));var i=r("8TSCy"),a=r("7qybv"),s=r("79LpT");var o=function(e,t,r){return[t,r]},u=function(e,t,r){return[t,r,e[2]]},l=function(e,t,r){return[t,r,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,a.isSome)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function d(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function f(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function h(e,t,r){for(var n,i,a,s,o=[],u=0;u<r.length;u++){var l=r[u];u>0?(a=d(e,l[0]),s=f(e,l[1]),a===n&&s===i||(o.push(t(l,a-n,s-i)),n=a,i=s)):(n=d(e,l[0]),i=f(e,l[1]),o.push(t(l,n,i)))}return o.length>0?o:null}function p(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function m(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function v(e,t,r){var n=new Array(r.length);if(!r.length)return n;var a=i.slicedToArray(e.scale,2),s=a[0],o=a[1],u=p(e,r[0][0]),l=m(e,r[0][1]);n[0]=t(r[0],u,l);for(var c=1;c<r.length;c++){var d=r[c];u+=d[0]*s,l-=d[1]*o,n[c]=t(d,u,l)}return n}function y(e,t,r){for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=v(e,t,r[i]);return n}function g(e,t,r,n,i){return t.points=(a=e,s=r.points,c=i,h(a,n?c?l:u:c?u:o,s)),t;var a,s,c}function x(e,t,r,n,i){return t.x=d(e,r.x),t.y=f(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t}function b(e,t,r,n,i){var a=function(e,t,r,n){for(var i=[],a=r?n?l:u:n?u:o,s=0;s<t.length;s++){var c=h(e,a,t[s]);c&&c.length>=3&&i.push(c)}return i.length?i:null}(e,r.rings,n,i);return a?(t.rings=a,t):null}function _(e,t,r,n,i){var a=function(e,t,r,n){for(var i=[],a=r?n?l:u:n?u:o,s=0;s<t.length;s++){var c=h(e,a,t[s]);c&&c.length>=2&&i.push(c)}return i.length?i:null}(e,r.paths,n,i);return a?(t.paths=a,t):null}function I(e,t){return e&&t?(0,s.isPoint)(t)?x(e,{},t,!1,!1):(0,s.isPolyline)(t)?_(e,{},t,!1,!1):(0,s.isPolygon)(t)?b(e,{},t,!1,!1):(0,s.isMultipoint)(t)?g(e,{},t,!1,!1):(0,s.isExtent)(t)?(a=!1,o=!1,(n={}).xmin=d(r=e,(i=t).xmin),n.ymin=f(r,i.ymin),n.xmax=d(r,i.xmax),n.ymax=f(r,i.ymax),n!==i&&(a&&(n.zmin=i.zmin,n.zmax=i.zmax),o&&(n.mmin=i.mmin,n.mmax=i.mmax)),n):null:null;var r,n,i,a,o}function S(e,t,r,n,i){return(0,a.isSome)(r)&&(t.points=(s=e,c=r.points,d=i,v(s,n?d?l:u:d?u:o,c))),t;var s,c,d}function k(e,t,r,n,i){return(0,a.isNone)(r)||(t.x=p(e,r.x),t.y=m(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m))),t}function T(e,t,r,n,i){return(0,a.isSome)(r)&&(t.rings=(s=e,c=r.rings,d=i,y(s,n?d?l:u:d?u:o,c))),t;var s,c,d}function w(e,t,r,n,i){return(0,a.isSome)(r)&&(t.paths=(s=e,c=r.paths,d=i,y(s,n?d?l:u:d?u:o,c))),t;var s,c,d}}))}();
//# sourceMappingURL=GeoJSONSourceWorker.8df55fbc.js.map
