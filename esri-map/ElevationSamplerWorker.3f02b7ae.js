function r(r,e,t,n){Object.defineProperty(r,e,{get:t,set:n,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("cjn8Z",(function(t,n){r(t.exports,"georeference",(function(){return P})),r(t.exports,"georeferenceApplyTransform",(function(){return T})),r(t.exports,"georeferenceByTransform",(function(){return V})),r(t.exports,"ungeoreference",(function(){return d})),r(t.exports,"ungeoreferenceByTransform",(function(){return F}));var o=e("1CpCt"),i=e("zPXCh"),a=e("4vUOo"),f=e("9gD5C"),c=e("2ouJi"),u=e("52822"),l=e("5cP7j"),s=e("5VlFX"),p=e("1G15h"),g=e("k4Lc2"),y=e("3Bcds"),h=e("8zb78"),m=e("8huIY");function P(r,e,t){return(0,h.isGeographicMesh)(e.spatialReference,t)?function(r,e,t){const n=e.spatialReference,o=x(e,t,N),i=new Float64Array(r.position.length),a=function(r,e,t,n){(0,y.t)(g.BufferViewVec3f64.fromTypedArray(n),g.BufferViewVec3f64.fromTypedArray(r),e);const o=new Float64Array(r.length);return(0,m.projectFromPCPF)(n,o,t)}(r.position,o,n,i),f=(0,u.a)(_,o);return{position:a,normal:A(a,i,r.normal,f,n),tangent:w(a,i,r.tangent,f,n)}}(r,e,t):function(r,e,t){const n=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,{horizontal:c,vertical:u}=E(t?t.unit:null,e.spatialReference);for(let r=0;r<o.length;r+=3)n[r+0]=o[r+0]*c+i,n[r+1]=o[r+1]*c+a,n[r+2]=o[r+2]*u+f;return{position:n,normal:r.normal,tangent:r.tangent}}(r,e,t)}function T(r,e,t){const{position:n,normal:i,tangent:a}=r;if((0,o.isNone)(e))return{position:n,normal:i,tangent:a};const f=e.localMatrix;return P({position:(0,m.transformPosition)(n,new Float64Array(n.length),f),normal:(0,o.isSome)(i)?(0,m.transformNormal)(i,new Float32Array(i.length),f):null,tangent:(0,o.isSome)(a)?(0,m.transformTangent)(a,new Float32Array(a.length),f):null},e.getOriginPoint(t),{geographic:e.geographic})}function V(r,e,t){if(null!=t&&t.useTransform){var n;const{position:o,normal:i,tangent:a}=r;return{vertexAttributes:{position:o,normal:i,tangent:a},transform:new(0,p.default)({origin:[e.x,e.y,null!=(n=e.z)?n:0],geographic:(0,h.isGeographicMesh)(e.spatialReference,t)})}}return{vertexAttributes:P(r,e,t),transform:null}}function d(r,e,t){return(0,h.isGeographicMesh)(e.spatialReference,t)?C(r,e,t):B(r,e,t)}function F(r,e,t,n){if((0,o.isNone)(e))return d(r,t,n);const i=T(r,e,t.spatialReference);return t.equals(e.getOriginPoint(t.spatialReference))?B(i,t,n):(0,h.isGeographicMesh)(t.spatialReference,n)?C(i,t,n):B(i,t,n)}function A(r,e,t,n,i){if((0,o.isNone)(t))return null;const a=new Float32Array(t.length);return(0,y.a)(g.BufferViewVec3f.fromTypedArray(a),g.BufferViewVec3f.fromTypedArray(t),n),(0,m.projectNormalFromPCPF)(a,r,e,i,a),a}function w(r,e,t,n,i){if((0,o.isNone)(t))return null;const a=new Float32Array(t.length);(0,y.a)(g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT),g.BufferViewVec3f.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),n);for(let r=3;r<a.length;r+=4)a[r]=t[r];return(0,m.projectTangentFromPCPF)(a,r,e,i,a),a}function B(r,e,t){const n=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,{horizontal:c,vertical:u}=E(t?t.unit:null,e.spatialReference);for(let r=0;r<o.length;r+=3)n[r+0]=(o[r+0]-i)/c,n[r+1]=(o[r+1]-a)/c,n[r+2]=(o[r+2]-f)/u;return{position:n,normal:r.normal,tangent:r.tangent}}function C(r,e,t){const n=e.spatialReference;x(e,t,N);const o=(0,f.a)(v,N),i=new Float64Array(r.position.length),a=function(r,e,t,n){const o=(0,m.projectToPCPF)(r,e,n),i=g.BufferViewVec3f64.fromTypedArray(o),a=new Float64Array(o.length),f=g.BufferViewVec3f64.fromTypedArray(a);return(0,y.t)(f,i,t),a}(r.position,n,o,i),c=(0,u.a)(_,o);return{position:a,normal:M(r.normal,r.position,i,n,c),tangent:R(r.tangent,r.position,i,n,c)}}function x(r,e,t){(0,l.computeTranslationToOriginAndRotation)(r.spatialReference,[r.x,r.y,r.z||0],t,(0,s.getSphericalPCPF)(r.spatialReference));const{horizontal:n,vertical:o}=E(e?e.unit:null,r.spatialReference);return(0,f.h)(t,t,[n,n,o]),t}function M(r,e,t,n,i){if((0,o.isNone)(r))return null;const a=(0,m.projectNormalToPCPF)(r,e,t,n,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a);return(0,y.a)(f,f,i),a}function R(r,e,t,n,i){if((0,o.isNone)(r))return null;const a=(0,m.projectTangentToPCPF)(r,e,t,n,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT);return(0,y.a)(f,f,i),a}function E(r,e){if((0,o.isNone)(r))return j;const t=e.isGeographic?1:(0,i.getMetersPerUnit)(e),n=e.isGeographic?1:(0,i.getMetersPerVerticalUnitForSR)(e),a=(0,i.convertUnit)(1,r,"meters");return{horizontal:a*t,vertical:a*n}}const N=(0,c.c)(),v=(0,c.c)(),_=(0,a.c)(),j={horizontal:1,vertical:1}})),e.register("1G15h",(function(t,n){r(t.exports,"default",(function(){return A}));var o=e("j6uz9"),i=e("hO0an"),a=e("1CpCt"),f=e("hTI69");e("aX9sh"),e("5HTPH"),e("gHCNy");var c,u=e("qA6zg"),l=e("9gD5C"),s=e("2ouJi"),p=e("8lcnQ"),g=e("iHxaG"),y=e("dZxPT"),h=e("5cP7j"),m=e("5VlFX"),P=e("kRASh"),T=e("k4Lc2"),V=e("3Bcds"),d=e("5gcCk");let F=c=class extends i.JSONSupport{get localMatrix(){const r=(0,s.c)();return(0,l.u)(r,this.scale),(0,l.e)(r,r,(0,P.angleRad)(this.rotation),(0,P.axis)(this.rotation)),(0,l.j)(r,r,this.translation),r}get localMatrixInverse(){return(0,l.a)((0,s.c)(),this.localMatrix)}applyLocal(r,e){return(0,p.m)(e,r,this.localMatrix)}applyLocalInverse(r,e){return(0,p.m)(e,r,this.localMatrixInverse)}project(r,e){const t=new Float64Array(r.length),n=T.BufferViewVec3f64.fromTypedArray(t),o=T.BufferViewVec3f64.fromTypedArray(r);if(this.geographic){const r=(0,m.getSphericalPCPF)(e),i=(0,s.c)();return(0,h.computeTranslationToOriginAndRotation)(e,this.origin,i,r),(0,l.m)(i,i,this.localMatrix),(0,V.t)(n,o,i),(0,h.projectBuffer)(t,r,0,t,e,0,t.length/3),t}const{localMatrix:i,origin:a}=this;(0,l.v)(i,s.I)?(0,d.c)(n,o):(0,V.t)(n,o,i);for(let r=0;r<t.length;r+=3)t[r+0]+=a[0],t[r+1]+=a[1],t[r+2]+=a[2];return t}getOriginPoint(r){const[e,t,n]=this.origin;return new(0,y.default)({x:e,y:t,z:n,spatialReference:r})}equals(r){return(0,a.isSome)(r)&&this.geographic===r.geographic&&(0,p.k)(this.origin,r.origin)&&(0,l.w)(this.localMatrix,r.localMatrix)}clone(){const r={origin:(0,g.a)(this.origin),translation:(0,g.a)(this.translation),rotation:(0,P.create)(this.rotation),scale:(0,g.a)(this.scale),geographic:this.geographic};return new c(r)}constructor(r){super(r),this.origin=(0,g.c)(),this.translation=(0,g.c)(),this.rotation=(0,P.create)(),this.scale=(0,g.f)(1,1,1),this.geographic=!0}};(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"origin",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"translation",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"rotation",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"scale",void 0),(0,o._)([(0,f.property)({type:Boolean,nonNullable:!0,json:{write:!0}})],F.prototype,"geographic",void 0),(0,o._)([(0,f.property)()],F.prototype,"localMatrix",null),(0,o._)([(0,f.property)()],F.prototype,"localMatrixInverse",null),F=c=(0,o._)([(0,u.subclass)("esri.geometry.support.MeshTransform")],F);const A=F})),e.register("kRASh",(function(t,n){r(t.exports,"create",(function(){return c})),r(t.exports,"fromAxisAndAngle",(function(){return u})),r(t.exports,"axis",(function(){return s})),r(t.exports,"compose",(function(){return l})),r(t.exports,"angleRad",(function(){return p}));var o=e("8TN87"),i=e("gDeEN"),a=e("6MY4j"),f=e("8lcnQ");function c(r=g){return[r[0],r[1],r[2],r[3]]}function u(r,e,t=c()){return(0,f.g)(t,r),t[3]=e,t}function l(r,e,t=c()){return(0,i.s)(y,r,p(r)),(0,i.s)(h,e,p(e)),(0,i.m)(y,h,y),n=t,a=(0,o.rad2deg)((0,i.g)(t,y)),n[3]=a,n;var n,a}function s(r){return r}function p(r){return(0,o.deg2rad)(r[3])}const g=[0,0,1,0],y=(0,a.a)(),h=(0,a.a)();c()})),e.register("8zb78",(function(e,t){function n(r,e){var t;return r.isGeographic||r.isWebMercator&&(null==(t=null==e?void 0:e.geographic)||t)}r(e.exports,"isGeographicMesh",(function(){return n}))})),e.register("8huIY",(function(t,n){r(t.exports,"projectNormalToPCPF",(function(){return T})),r(t.exports,"projectNormalFromPCPF",(function(){return V})),r(t.exports,"projectToPCPF",(function(){return d})),r(t.exports,"projectFromPCPF",(function(){return F})),r(t.exports,"transformPosition",(function(){return A})),r(t.exports,"transformNormal",(function(){return w})),r(t.exports,"transformTangent",(function(){return B})),r(t.exports,"projectTangentToPCPF",(function(){return C})),r(t.exports,"projectTangentFromPCPF",(function(){return x}));var o=e("6TszD"),i=e("1CpCt"),a=e("52822"),f=e("4vUOo"),c=e("2ouJi"),u=e("8lcnQ"),l=e("iHxaG"),s=e("5cP7j"),p=e("5VlFX"),g=e("fau59"),y=e("ZYFMI"),h=e("k4Lc2"),m=e("3Bcds");const P=o.default.getLogger("esri.geometry.support.meshUtils.normalProjection");function T(r,e,t,n,o){return R(n)?(M(N.TO_PCPF,h.BufferViewVec3f.fromTypedArray(r),h.BufferViewVec3f64.fromTypedArray(e),h.BufferViewVec3f64.fromTypedArray(t),n,h.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert spatial reference to PCPF"),o)}function V(r,e,t,n,o){return R(n)?(M(N.FROM_PCPF,h.BufferViewVec3f.fromTypedArray(r),h.BufferViewVec3f64.fromTypedArray(e),h.BufferViewVec3f64.fromTypedArray(t),n,h.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert to spatial reference from PCPF"),o)}function d(r,e,t){return(0,s.projectBuffer)(r,e,0,t,(0,p.getSphericalPCPF)(e),0,r.length/3),t}function F(r,e,t){return(0,s.projectBuffer)(r,(0,p.getSphericalPCPF)(t),0,e,t,0,r.length/3),e}function A(r,e,t){if((0,i.isNone)(r))return e;const n=h.BufferViewVec3f64.fromTypedArray(r),o=h.BufferViewVec3f64.fromTypedArray(e);return(0,m.t)(o,n,t),e}function w(r,e,t){if((0,i.isNone)(r))return e;(0,a.a)(O,t);const n=h.BufferViewVec3f.fromTypedArray(r),o=h.BufferViewVec3f.fromTypedArray(e);return(0,m.a)(o,n,O),(0,a.i)(O)||(0,m.n)(o,o),e}function B(r,e,t){if((0,i.isNone)(r))return e;(0,a.a)(O,t);const n=h.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),o=h.BufferViewVec3f.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if((0,m.a)(o,n,O),(0,a.i)(O)||(0,m.n)(o,o),r!==e)for(let t=3;t<r.length;t+=4)e[t]=r[t];return e}function C(r,e,t,n,o){if(!R(n))return P.error("Cannot convert spatial reference to PCPF"),o;M(N.TO_PCPF,h.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),h.BufferViewVec3f64.fromTypedArray(e),h.BufferViewVec3f64.fromTypedArray(t),n,h.BufferViewVec3f.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT));for(let e=3;e<r.length;e+=4)o[e]=r[e];return o}function x(r,e,t,n,o){if(!R(n))return P.error("Cannot convert to spatial reference from PCPF"),o;M(N.FROM_PCPF,h.BufferViewVec3f.fromTypedArray(r,16),h.BufferViewVec3f64.fromTypedArray(e),h.BufferViewVec3f64.fromTypedArray(t),n,h.BufferViewVec3f.fromTypedArray(o,16));for(let e=3;e<r.length;e+=4)o[e]=r[e];return o}function M(r,e,t,n,o,i){if(!e)return;const f=t.count,c=(0,p.getSphericalPCPF)(o);if(E(o))for(let t=0;t<f;t++)n.getVec(t,_),e.getVec(t,j),(0,s.computeTranslationToOriginAndRotation)(c,_,b,c),(0,a.f)(O,b),r===N.FROM_PCPF&&(0,a.t)(O,O),(0,u.t)(j,j,O),i.setVec(t,j);else for(let o=0;o<f;o++){n.getVec(o,_),e.getVec(o,j),(0,s.computeTranslationToOriginAndRotation)(c,_,b,c),(0,a.f)(O,b);const f=(0,y.y2lat)(t.get(o,1));let l=Math.cos(f);r===N.TO_PCPF&&(l=1/l),O[0]*=l,O[1]*=l,O[2]*=l,O[3]*=l,O[4]*=l,O[5]*=l,r===N.FROM_PCPF&&(0,a.t)(O,O),(0,u.t)(j,j,O),(0,u.n)(j,j),i.setVec(o,j)}return i}function R(r){return E(r)||r.isWebMercator}function E(r){return r.isWGS84||(0,g.isCGCS2000)(r)||(0,g.isMars)(r)||(0,g.isMoon)(r)}var N,v;(v=N||(N={}))[v.TO_PCPF=0]="TO_PCPF",v[v.FROM_PCPF=1]="FROM_PCPF";const _=(0,l.c)(),j=(0,l.c)(),b=(0,c.c)(),O=(0,f.c)()}));
//# sourceMappingURL=ElevationSamplerWorker.3f02b7ae.js.map
