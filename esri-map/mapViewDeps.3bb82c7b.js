!function(){function e(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("cOrC4",(function(i,r){e(i.exports,"Container",(function(){return o}));var s=t("eYrMi"),n=t("a4nX6"),a=t("2qlsz");class o extends a.DisplayObject{get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!==(t=null===(e=this._effectView)||void 0===e?void 0:e.effects)&&void 0!==t?t:null}get effect(){var e,t;return null!==(t=null===(e=this._effectView)||void 0===e?void 0:e.effect)&&void 0!==t?t:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new(0,n.EffectView)),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:(0,s.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}}})),t.register("2qlsz",(function(i,r){e(i.exports,"DisplayObject",(function(){return c}));var s=t("amfHf"),n=t("2VlWd"),a=t("7qybv"),o=t("10vEZ");const l=1/(0,n.default)("mapview-transitions-duration");class c extends s.default{get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,a.isNone)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,o.createResolver)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,o.createResolver)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null===(e=this.parent)||void 0===e||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const r=e*l;this.computedOpacity=i>t?Math.max(t,i-r):Math.min(t,i+r),this.computedVisible=this.computedOpacity>0;const s=t===this.computedOpacity;this.inFadeTransition=!s,s||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}}})),t.register("jhijF",(function(i,r){e(i.exports,"assertRendererSchema",(function(){return d})),e(i.exports,"getTechniqueFromRenderer",(function(){return u})),e(i.exports,"getTechniqueFromMaterialKey",(function(){return p}));var s=t("kyj08"),n=t("66IJZ"),a=t("ktHf8"),o=t("hFnPX"),l=t("hezBG"),c=t("frI3C"),h=t("98IxW");function d(e,t){if(e.type!==t)throw new(0,s.default)("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${t}" but found type "${e.type}"`)}function u(e){switch(e.type){case"dot-density":return l.DotDensityTechnique;case"heatmap":return c.HeatmapTechnique;case"pie-chart":return h.PieChartTechnique;default:return o.Technique}}function p(e){const{geometryType:t,symbologyType:i}=a.MaterialKeyBase.load(e);switch(t){case n.WGLGeometryType.FILL:if(i===n.WGLSymbologyType.DOT_DENSITY)return l.DotDensityTechnique;break;case n.WGLGeometryType.MARKER:switch(i){case n.WGLSymbologyType.HEATMAP:return c.HeatmapTechnique;case n.WGLSymbologyType.PIE_CHART:return h.PieChartTechnique}}return o.Technique}})),t.register("hFnPX",(function(i,r){e(i.exports,"Technique",(function(){return n}));var s=t("7qybv");class n{static getStorageSpec(e){return null}static createOrUpdateRendererSchema(e,t){return(0,s.isSome)(e)&&"default"===e.type?e:{type:"default"}}static getVariation(e){return{}}static getVariationHash(e){return 0}}n.type="default",n.programSpec=null})),t.register("hezBG",(function(i,r){e(i.exports,"DotDensityTechnique",(function(){return c}));var s=t("7qybv"),n=t("hUDEJ"),a=t("4WoSm"),o=t("hFnPX"),l=t("8JzMA");class c extends o.Technique{static getStorageSpec({attributes:e}){return{visualVariables:!1,attributes:null!=e?e:null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(e,t){const{attributes:i,dotValue:r,referenceScale:o,dotSize:l,dotBlendingEnabled:c,seed:h,backgroundColor:d}=t,u=(0,s.isSome)(e)&&"dot-density"===e.type?e:this._createRendererSchema();u.dotValue=r,u.dotSize=l,u.dotScale=o,u.dotBlending=c,u.seed=h;const{colors:p,activeDots:f,backgroundColor:y}=u;for(let e=0;e<a.DOT_DENSITY_MAX_FIELDS;e++){const t=e>=i.length?null:i[e].color;(0,n.writeColor)(p,t,4*e)}for(let e=0;e<8;e++)f[e]=e<t.attributes.length?1:0;return(0,n.writeColor)(y,d),u}static getVariation(e){return{ddDotBlending:e.dotBlending}}static getVariationHash(e){return e.dotBlending?1:0}}c.type="dot-density",c.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:l.DataType.SHORT},{location:1,name:"a_id",count:3,type:l.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:l.DataType.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:l.DataType.FLOAT}]}}})),t.register("frI3C",(function(i,r){e(i.exports,"HeatmapTechnique",(function(){return c}));var s=t("7qybv"),n=t("iXlXu"),a=t("e51b3"),o=t("hFnPX"),l=t("8JzMA");class c extends o.Technique{static getStorageSpec({field:e,valueExpression:t}){return{visualVariables:!1,attributes:e||t?[{field:e,valueExpression:t}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(e,t){const{radius:i,minDensity:r,maxDensity:o,referenceScale:l,field:c,valueExpression:h,colorStops:d}=t,u=o-r,p=c||h?1:0,f=d.map((({color:e,ratio:t})=>`${t}:${e.toString()}`)).join();let y,m=!0;return(0,s.isSome)(e)&&"heatmap"===e.type?(y=e,m=f!==e.gradientHash):y=this._createRendererSchema(),y.radius=(0,n.pt2px)(i),y.minDensity=r,y.densityRange=u,y.referenceScale=l,y.isFieldActive=p,m&&(y.gradient=(0,a.generateGradient)(d),y.gradientHash=f),y}}c.type="heatmap",c.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:l.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:l.DataType.SHORT},{location:4,name:"a_id",count:4,type:l.DataType.UNSIGNED_BYTE}]}}})),t.register("98IxW",(function(i,r){e(i.exports,"PieChartTechnique",(function(){return d}));var s=t("jgs9n"),n=t("7qybv"),a=t("iXlXu"),o=t("hUDEJ"),l=t("4WoSm"),c=t("hFnPX"),h=t("8JzMA");class d extends c.Technique{static getStorageSpec({attributes:e}){return{visualVariables:!0,attributes:null!=e?e:null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*l.CHART_MAX_FIELDS),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(e,t){const{attributes:i,defaultColor:r,holePercentage:c,othersCategory:h,outline:d}=t,u=(0,n.isSome)(e)&&"pie-chart"===e.type?e:this._createRendererSchema();for(let e=0;e<l.CHART_MAX_FIELDS;e++){const t=e>=i.length?new(0,s.default)([0,0,0,0]):i[e].color;(0,o.writeColor)(u.colors,t,4*e)}return(0,o.writeColor)(u.defaultColor,r),(0,o.writeColor)(u.othersColor,null==h?void 0:h.color),(0,o.writeColor)(u.outlineColor,null==d?void 0:d.color),u.outlineWidth=(0,a.pt2px)((null==d?void 0:d.width)||0),u.holePercentage=c,u.sectorThreshold=(null==h?void 0:h.threshold)||0,u.numberOfFields=i.length,u}static getVariation(e){return{numberOfFields:e.numberOfFields}}static getVariationHash(e){return e.numberOfFields}}d.type="pie-chart",d.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:h.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:h.DataType.SHORT},{location:2,name:"a_texCoords",count:2,type:h.DataType.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:h.DataType.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:h.DataType.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:h.DataType.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:h.DataType.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:h.DataType.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:h.DataType.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]}}))}();
//# sourceMappingURL=mapViewDeps.3bb82c7b.js.map
