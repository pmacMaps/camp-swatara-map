{"mappings":"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","sources":["node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import a from\"../../../Graphic.js\";import{neverReached as r}from\"../../../core/compilerUtils.js\";import i from\"../../../core/Logger.js\";import{isSome as n,isNone as t}from\"../../../core/maybe.js\";import{meterIn as s}from\"../../support/lengthUtils.js\";import{isSizeVariable as o,isValidNumber as l,TransformationType as c,InputValueType as u}from\"./sizeVariableUtils.js\";const f=i.getLogger(\"esri.renderers.visualVariables.support.visualVariableUtils\"),p=new a,d=Math.PI,v=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i;function b(a,r,i){const t=\"visualVariables\"in a&&a.visualVariables?a.visualVariables.find((e=>\"color\"===e.type)):a;if(!t)return;if(\"esri.renderers.visualVariables.ColorVariable\"!==t.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable\");const s=\"number\"==typeof r,o=s?null:r,l=o&&o.attributes;let c=s?r:null;const u=t.field,{ipData:p,hasExpression:d}=t.cache;let v=t.cache.compiledFunc;if(!u&&!d){const e=t.stops;return e&&e[0]&&e[0].color}if(\"number\"!=typeof c)if(d){if(!n(i)||!n(i.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),s=a.createExecContext(o,r);if(!v){const e=a.createSyntaxTree(t.valueExpression);v=a.createFunction(e),t.cache.compiledFunc=v}c=a.executeFunction(v,s)}else l&&(c=l[u]);const b=t.normalizationField,h=l?parseFloat(l[b]):void 0;if(null!=c&&(!b||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(c/=h);const a=R(c,p);if(a){const r=a[0],s=a[1],o=r===s?t.stops[r].color:e.blendColors(t.stops[r].color,t.stops[s].color,a[2],n(i)?i.color:void 0);return new e(o)}}}function h(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"opacity\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.OpacityVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable\");const n=\"number\"==typeof a,s=n?null:a,o=s&&s.attributes;let l=n?a:null;const c=i.field,{ipData:u,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!c&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if(\"number\"!=typeof l)if(p){if(t(r)||t(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),o=a.createExecContext(s,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d}l=a.executeFunction(d,o)}else o&&(l=o[c]);const v=i.normalizationField,b=o?parseFloat(o[v]):void 0;if(null!=l&&(!v||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(l/=b);const e=R(l,u);if(e){const a=e[0],r=e[1];if(a===r)return i.stops[a].opacity;{const n=i.stops[a].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function m(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"rotation\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.RotationVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable\");const n=i.axis||\"heading\",s=\"heading\"===n&&\"arithmetic\"===i.rotationType?90:0,o=\"heading\"===n&&\"arithmetic\"===i.rotationType?-1:1,l=\"number\"==typeof a?null:a,c=l&&l.attributes,u=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,v=0;if(!u&&!p)return v;if(p){if(t(r)||t(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),s=a.createExecContext(l,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d}v=a.executeFunction(d,s)}else c&&(v=c[u]||0);return v=\"number\"!=typeof v||isNaN(v)?null:s+o*v,v}function V(e,a,r){const i=\"number\"==typeof a,s=i?null:a,o=s&&s.attributes;let c=i?a:null;const{isScaleDriven:p}=e.cache;let d=e.cache.compiledFunc;if(p){const a=n(r)?r.scale:void 0,i=n(r)?r.view:void 0;c=null==a||\"3d\"===i?x(e):a}else if(!i)switch(e.inputValueType){case u.Expression:{if(t(r)||t(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const a={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(a),o=i.createExecContext(s,n);if(!d){const a=i.createSyntaxTree(e.valueExpression);d=i.createFunction(a),e.cache.compiledFunc=d}c=i.executeFunction(d,o);break}case u.Field:o&&(c=o[e.field]);break;case u.Unknown:c=null}if(!l(c))return null;if(i||!e.normalizationField)return c;const v=o?parseFloat(o[e.normalizationField]):null;return l(v)&&0!==v?c/v:null}function x(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}function y(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"size\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.SizeVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable\");const n=M(V(i,a,r),i,a,r,i.cache.ipData);return null==n||isNaN(n)?0:n}function w(e,a,r){return null==e?null:o(e)?y(e,a,r):l(e)?e:null}function g(e,a,r){return l(r)&&e>r?r:l(a)&&e<a?a:e}function z(e,a,r,i){return e+(w(a.minSize,r,i)||a.minDataValue)}function F(e,a,r){const i=e.stops;let n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),w(n,a,r)}function S(e,a,r,i){const t=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),s=w(a.minSize,r,i),o=w(a.maxSize,r,i),l=n(i)?i.shape:void 0;if(e<=a.minDataValue)return s;if(e>=a.maxDataValue)return o;if(\"area\"===a.scaleBy&&l){const e=\"circle\"===l,a=e?d*(s/2)**2:s*s,r=a+t*((e?d*(o/2)**2:o*o)-a);return e?2*Math.sqrt(r/d):Math.sqrt(r)}return s+t*(o-s)}function E(e,a,r,i){const t=n(i)?i.shape:void 0,s=e/a.minDataValue,o=w(a.minSize,r,i),l=w(a.maxSize,r,i);let c=null;return c=\"circle\"===t?2*Math.sqrt(s*(o/2)**2):\"square\"===t||\"diamond\"===t||\"image\"===t?Math.sqrt(s*o**2):s*o,g(c,o,l)}function U(e,a,r,i,n){const[t,s,o]=R(e,n);if(t===s)return w(a.stops[t].size,r,i);{const e=w(a.stops[t].size,r,i);return e+(w(a.stops[s].size,r,i)-e)*o}}function C(e,a,r,i){const t=(n(i)&&i.resolution?i.resolution:1)*s[a.valueUnit],o=w(a.minSize,r,i),l=w(a.maxSize,r,i),{valueRepresentation:c}=a;let u=null;return u=\"area\"===c?2*Math.sqrt(e/d)/t:\"radius\"===c||\"distance\"===c?2*e/t:e/t,g(u,o,l)}function D(e){return e}function M(e,a,r,i,n){switch(a.transformationType){case c.Additive:return z(e,a,r,i);case c.Constant:return F(a,r,i);case c.ClampedLinear:return S(e,a,r,i);case c.Proportional:return E(e,a,r,i);case c.Stops:return U(e,a,r,i,n);case c.RealWorldSize:return C(e,a,r,i);case c.Identity:return D(e);case c.Unknown:return null}}function k(e,a,r){const{isScaleDriven:i}=e.cache;if(!(i&&\"3d\"===r||a))return null;const n={scale:a,view:r};let t=w(e.minSize,p,n),s=w(e.maxSize,p,n);if(null!=t||null!=s){if(t>s){const e=s;s=t,t=e}return{minSize:t,maxSize:s}}}function N(e,a,r){if(!e.visualVariables)return;const i=[],n=[],t=[],s=[],o=[];for(const l of e.visualVariables)switch(l.type){case\"color\":n.push(l);break;case\"opacity\":t.push(l);break;case\"rotation\":o.push(l);break;case\"size\":s.push(l)}return n.forEach((e=>{const n=b(e,a,r);i.push({variable:e,value:n})})),t.forEach((e=>{const n=h(e,a,r);i.push({variable:e,value:n})})),o.forEach((e=>{const n=m(e,a,r);i.push({variable:e,value:n})})),s.forEach((e=>{const n=y(e,a,r);i.push({variable:e,value:n})})),i.filter((e=>null!=e.value))}function R(e,a){if(!a)return;let r=0,i=a.length-1;return a.some(((a,n)=>e<a?(i=n,!0):(r=n,!1))),[r,i,(e-a[r])/(a[i]-a[r])]}function T(e,a,i){const n=[\"proportional\",\"proportional\",\"proportional\"];for(const t of e){const e=t.useSymbolValue?\"symbol-value\":y(t,a,i);switch(t.axis){case\"width\":n[0]=e;break;case\"depth\":n[1]=e;break;case\"height\":n[2]=e;break;case\"width-and-depth\":n[0]=e,n[1]=e;break;case\"all\":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:r(t.axis)}}return n}export{T as getAllSizes,b as getColor,h as getOpacity,m as getRotationAngle,y as getSize,M as getSizeForValue,w as getSizeFromNumberOrVariable,k as getSizeRangeAtScale,N as getVisualVariableValues,v as viewScaleRE};\n"],"names":["$hJt7u","parcelRequire","$46ce05f15332bf9c$var$f","$6TszD","default","getLogger","$46ce05f15332bf9c$var$p","$EvxpF","$46ce05f15332bf9c$var$d","Math","PI","$46ce05f15332bf9c$export$348c348f11333765","$46ce05f15332bf9c$export$5551a2d24ff40153","a1","r1","i1","t1","visualVariables","find","e1","type","declaredClass","warn","s1","o1","l1","attributes","c1","u1","field","ipData","p1","hasExpression","d1","cache","v1","compiledFunc","e2","stops","color","$1CpCt","isSome","arcade","error","e3","viewingMode","scale","spatialReference","a2","arcadeUtils","r2","getViewInfo","s2","createExecContext","e4","createSyntaxTree","valueExpression","createFunction","executeFunction","b1","normalizationField","h1","parseFloat","isNaN","a3","$46ce05f15332bf9c$var$R","r3","s3","o2","blendColors","$46ce05f15332bf9c$export$c85e0347fceb69ba","e5","a4","r4","i2","e6","n1","s4","o4","l2","c2","u2","p2","d2","e7","opacity","isNone","e8","a5","n2","o3","e9","v2","b2","e10","a6","r5","n3","$46ce05f15332bf9c$export$22b70cbbb2a2942b","e11","a7","r6","i3","e12","n4","axis","s6","rotationType","o5","l3","c3","u3","p3","d3","v3","e13","a8","n5","s5","e14","$46ce05f15332bf9c$export$31b21d0167753bb4","e17","a14","r9","i8","e18","n7","$46ce05f15332bf9c$export$5964722a6071e808","e15","a9","r7","i4","s7","o7","c4","isScaleDriven","p4","d4","a10","i5","view","e16","a13","r8","i7","value","length","minDataValue","maxDataValue","$46ce05f15332bf9c$var$x","inputValueType","$iHSuM","InputValueType","Expression","a11","i6","n6","o6","a12","Field","Unknown","isValidNumber","v4","$46ce05f15332bf9c$var$V","$46ce05f15332bf9c$export$29b3e044e6068e0f","e19","a15","r10","isSizeVariable","$46ce05f15332bf9c$var$g","e20","a16","r11","e30","a24","r19","i15","n10","transformationType","TransformationType","Additive","r12","i9","a17","minSize","Constant","e22","a18","r13","i10","n8","size","$46ce05f15332bf9c$var$F","ClampedLinear","e23","a19","r14","i11","t2","s8","o8","maxSize","l4","shape","scaleBy","e24","a20","r15","sqrt","$46ce05f15332bf9c$var$S","Proportional","e25","a21","r16","i12","t3","s9","o9","l5","c5","$46ce05f15332bf9c$var$E","Stops","e26","a22","r17","i13","n9","t4","s10","o10","e27","$46ce05f15332bf9c$var$U","RealWorldSize","e28","a23","r18","i14","t5","resolution","$88Eiv","meterIn","valueUnit","o11","l6","valueRepresentation","c6","u4","$46ce05f15332bf9c$var$C","Identity","$46ce05f15332bf9c$export$6ab198baef8e9203","e31","a25","r20","i16","n11","t6","s11","e32","$46ce05f15332bf9c$export$d0f18e4eba74e4b0","e33","a26","r21","i17","n12","t7","s12","o12","l7","push","forEach","e34","n13","variable","e35","n14","e36","n15","e37","n16","filter","e38","e39","a27","r22","i18","some","a28","n17","$46ce05f15332bf9c$export$d2db82958107ad8a","e40","a29","i19","n18","t8","e41","useSymbolValue","$cL2Ua","neverReached"],"version":3,"file":"visualVariableUtils.72c05279.js.map"}