!function(){function t(t,n,e,r){Object.defineProperty(t,n,{get:e,set:r,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;n.register("4pnUn",(function(e,r){t(e.exports,"georeference",(function(){return A})),t(e.exports,"georeferenceApplyTransform",(function(){return F})),t(e.exports,"georeferenceByTransform",(function(){return v})),t(e.exports,"ungeoreference",(function(){return w})),t(e.exports,"ungeoreferenceByTransform",(function(){return T})),t(e.exports,"project",(function(){return C}));var o=n("5vzSQ"),i=n("gnwu9"),a=n("gEEzE"),u=n("89KCq"),c=n("e4Xv2"),l=n("5YMIf"),s=n("j3x2p"),f=n("7RvA5"),p=n("ighN7"),g=n("7PZhr"),h=n("bNJcf"),y=n("niZH3"),P=n("cuVrb"),m=n("17b31"),d=n("hhwnq"),M=n("gLl1O"),x=n("9r2zb");function A(t,n,e){return(0,M.isGeographicMesh)(n.spatialReference,e)?function(t,n,e){const r=n.spatialReference,o=j(n,e,_),i=new Float64Array(t.position.length),a=function(t,n,e,r){(0,d.t)(r,t,n);const o=new Float64Array(t.length);return(0,x.projectFromPCPF)(r,o,e)}(t.position,o,r,i),u=(0,s.b)(N,o);return{position:a,normal:V(a,i,t.normal,u,r),tangent:b(a,i,t.tangent,u,r)}}(t,n,e):function(t,n,e){var r;const o=new Float64Array(t.position.length),i=t.position,a=n.x,u=n.y,c=null!==(r=n.z)&&void 0!==r?r:0,l=q(e?e.unit:null,n.spatialReference);for(let t=0;t<i.length;t+=3)o[t]=i[t]*l+a,o[t+1]=i[t+1]*l+u,o[t+2]=i[t+2]*l+c;return{position:o,normal:t.normal,tangent:t.tangent}}(t,n,e)}function F(t,n,e,r){const{position:o,normal:i,tangent:a}=t;if(!n.isRelative)return{position:o,normal:i,tangent:a};var c;const l=null!==(c=null==e?void 0:e.localMatrix)&&void 0!==c?c:u.I;return A({position:(0,d.t)(new Float64Array(o.length),o,l),normal:null!=i?(0,x.transformNormal)(i,new Float32Array(i.length),l):null,tangent:null!=a?(0,x.transformTangent)(a,new Float32Array(a.length),l):null},n.getOriginPoint(r),{geographic:!n.isGeoreferenced})}function v(t,n,e){if(null==e?void 0:e.useTransform){const{position:o,normal:i,tangent:a}=t,{x:u,y:c,z:s}=n,f=(0,l.f)(u,c,null!=s?s:0);var r;return{vertexAttributes:{position:o,normal:i,tangent:a},vertexSpace:null===(r=e.geographic)||void 0===r||r?new(0,P.default)({origin:f}):new(0,h.default)({origin:f}),transform:new(0,m.default)}}return{vertexAttributes:A(t,n,e),vertexSpace:new(0,y.default),transform:null}}function w(t,n,e){return(0,M.isGeographicMesh)(n.spatialReference,e)?function(t,n,e){const r=n.spatialReference;j(n,e,_);const o=(0,a.a)(B,_),i=new Float64Array(t.position.length),u=function(t,n,e,r){const o=(0,x.projectToPCPF)(t,n,r),i=new Float64Array(o.length);return(0,d.t)(i,o,e),i}(t.position,r,o,i),c=(0,s.b)(N,o);return{position:u,normal:S(t.normal,t.position,i,r,c),tangent:O(t.tangent,t.position,i,r,c)}}(t,n,e):R(t,n,e)}function T(t,n,e,r,o){if(!n.isRelative)return w(t,r,o);const{spatialReference:i}=r,a=F(t,n,e,i);return r.equals(n.getOriginPoint(i))?R(a,r,o):w(a,r,o)}function C({positions:t,transform:n,vertexSpace:e,inSpatialReference:r,outSpatialReference:o,outPositions:i,local:s}){var h;const y=e.isRelative?e.origin:l.Z,P=e.isRelative&&null!==(h=null==n?void 0:n.localMatrix)&&void 0!==h?h:u.I;if(e.isGeoreferenced){const n=null!=i?i:(0,g.newDoubleArray)(t.length);if((0,a.j)(P,u.I)?(0,g.copyInto)(n,t):(0,d.t)(n,t,P),!(0,c.k)(y,l.Z)){const[t,e,r]=y;for(let o=0;o<n.length;o+=3)n[o]+=t,n[o+1]+=e,n[o+2]+=r}return(0,f.projectBuffer)(n,r,0,n,o,0,n.length/3),n}const m=(0,p.getSphericalPCPF)(r),M=!s&&(0,f.canProjectWithoutEngine)(r,m)?m:r;(0,f.computeTranslationToOriginAndRotation)(r,y,_,M),(0,a.m)(_,_,P);const x=null!=i?i:(0,g.newDoubleArray)(t.length);return(0,d.t)(x,t,_),(0,f.projectBuffer)(x,M,0,x,o,0,x.length/3),x}function V(t,n,e,r,o){if(null==e)return null;const i=new Float32Array(e.length);return(0,d.a)(i,e,r),(0,x.projectNormalFromPCPF)(i,t,n,o,i),i}function b(t,n,e,r,o){if(null==e)return null;const i=new Float32Array(e.length);(0,d.a)(i,e,r,4);for(let t=3;t<i.length;t+=4)i[t]=e[t];return(0,x.projectTangentFromPCPF)(i,t,n,o,i),i}function R(t,n,e){var r;const o=new Float64Array(t.position.length),i=t.position,a=n.x,u=n.y,c=null!==(r=n.z)&&void 0!==r?r:0,l=q(e?e.unit:null,n.spatialReference);for(let t=0;t<i.length;t+=3)o[t]=(i[t]-a)/l,o[t+1]=(i[t+1]-u)/l,o[t+2]=(i[t+2]-c)/l;return{position:o,normal:t.normal,tangent:t.tangent}}function j(t,n,e){var r;(0,f.computeTranslationToOriginAndRotation)(t.spatialReference,[t.x,t.y,null!==(r=t.z)&&void 0!==r?r:0],e,(0,p.getSphericalPCPF)(t.spatialReference));const o=q(n?n.unit:null,t.spatialReference);return(0,a.k)(e,e,[o,o,o]),e}function S(t,n,e,r,o){if(null==t)return null;const i=(0,x.projectNormalToPCPF)(t,n,e,r,new Float32Array(t.length));return(0,d.a)(i,i,o),i}function O(t,n,e,r,o){if(null==t)return null;const i=(0,x.projectTangentToPCPF)(t,n,e,r,new Float32Array(t.length));return(0,d.a)(i,i,o,4),i}function q(t,n){if(null==t)return 1;const e=(0,o.getMetersPerCartesianUnitForSR)(n);return 1/(0,o.convertUnit)(e,"meters",t)}const _=(0,u.c)(),B=(0,u.c)(),N=(0,i.c)()})),n.register("ighN7",(function(e,r){t(e.exports,"getSphericalPCPF",(function(){return s}));var o=n("97SWO"),i=n("j40xv"),a=n("eY5Yp");const u=new(0,i.default)(o.SphericalECEFSpatialReferenceLike),c=new(0,i.default)(o.SphericalPCPFMarsLike),l=new(0,i.default)(o.SphericalPCPFMoonLike);new(0,i.default)(o.WGS84ECEFSpatialReferenceLike);function s(t){return t&&((0,a.isMars)(t)||(0,a.equals)(t,c))?c:t&&((0,a.isMoon)(t)||(0,a.equals)(t,l))?l:u}})),n.register("17b31",(function(e,r){t(e.exports,"default",(function(){return d}));var o=n("7eJjO"),i=n("1XAcN"),a=n("iho5X");n("iJAIC"),n("lNwWH"),n("2VlWd");var u,c=n("fcwIv"),l=n("gEEzE"),s=n("89KCq"),f=n("koyqq"),p=n("ksUrQ"),g=n("e4Xv2"),h=n("5YMIf"),y=n("glKuz");let P=u=class extends i.JSONSupport{get rotation(){return(0,y.fromAxisAndAngle)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,h.a)((0,y.axis)(t)),this.rotationAngle=(0,y.angle)(t)}get localMatrix(){const t=(0,s.c)();return(0,f.s)(m,(0,y.axis)(this.rotation),(0,y.angleRad)(this.rotation)),(0,l.g)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.a)((0,s.c)(),this.localMatrix)}applyLocal(t,n){return(0,g.m)(n,t,this.localMatrix)}applyLocalInverse(t,n){return(0,g.m)(n,t,this.localMatrixInverse)}equals(t){return this===t||null!=t&&(0,l.h)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,h.a)(this.translation),rotationAxis:(0,h.a)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,h.a)(this.scale)};return new u(t)}constructor(t){super(t),this.translation=(0,h.c)(),this.rotationAxis=(0,h.g)(y.UP),this.rotationAngle=0,this.scale=(0,h.f)(1,1,1)}};(0,o._)([(0,a.property)({type:[Number],nonNullable:!0,json:{write:!0}})],P.prototype,"translation",void 0),(0,o._)([(0,a.property)({type:[Number],nonNullable:!0,json:{write:!0}})],P.prototype,"rotationAxis",void 0),(0,o._)([(0,a.property)({type:Number,nonNullable:!0,json:{write:!0}})],P.prototype,"rotationAngle",void 0),(0,o._)([(0,a.property)({type:[Number],nonNullable:!0,json:{write:!0}})],P.prototype,"scale",void 0),(0,o._)([(0,a.property)()],P.prototype,"rotation",null),(0,o._)([(0,a.property)()],P.prototype,"localMatrix",null),(0,o._)([(0,a.property)()],P.prototype,"localMatrixInverse",null),P=u=(0,o._)([(0,c.subclass)("esri.geometry.support.MeshTransform")],P);const m=(0,p.a)(),d=P})),n.register("koyqq",(function(e,r){t(e.exports,"s",(function(){return s})),t(e.exports,"g",(function(){return f})),t(e.exports,"m",(function(){return p})),t(e.exports,"c",(function(){return h})),t(e.exports,"k",(function(){return P})),t(e.exports,"a",(function(){return m})),t(e.exports,"j",(function(){return R}));var o=n("gnwu9"),i=n("ksUrQ"),a=n("5YMIf"),u=n("1CBkz"),c=n("e4Xv2"),l=n("hRPEZ");function s(t,n,e){e*=.5;const r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function f(t,n){const e=2*Math.acos(n[3]),r=Math.sin(e/2);return r>(0,u.g)()?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function p(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],c=e[1],l=e[2],s=e[3];return t[0]=r*s+a*u+o*l-i*c,t[1]=o*s+a*c+i*u-r*l,t[2]=i*s+a*l+r*c-o*u,t[3]=a*s-r*u-o*c-i*l,t}function g(t,n,e,r){const o=n[0],i=n[1],a=n[2],c=n[3];let l,s,f,p,g,h=e[0],y=e[1],P=e[2],m=e[3];return s=o*h+i*y+a*P+c*m,s<0&&(s=-s,h=-h,y=-y,P=-P,m=-m),1-s>(0,u.g)()?(l=Math.acos(s),f=Math.sin(l),p=Math.sin((1-r)*l)/f,g=Math.sin(r*l)/f):(p=1-r,g=r),t[0]=p*o+g*h,t[1]=p*i+g*y,t[2]=p*a+g*P,t[3]=p*c+g*m,t}function h(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function y(t,n){const e=n[0]+n[4]+n[8];let r;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);const o=(e+1)%3,i=(e+2)%3;r=Math.sqrt(n[3*e+e]-n[3*o+o]-n[3*i+i]+1),t[e]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+e]+n[3*e+o])*r,t[i]=(n[3*i+e]+n[3*e+i])*r}return t}function P(t,n,e,r){const o=.5*Math.PI/180;n*=o,e*=o,r*=o;const i=Math.sin(n),a=Math.cos(n),u=Math.sin(e),c=Math.cos(e),l=Math.sin(r),s=Math.cos(r);return t[0]=i*c*s-a*u*l,t[1]=a*u*s+i*c*l,t[2]=a*c*l-i*u*s,t[3]=a*c*s+i*u*l,t}const m=l.c,d=l.s,M=l.a,x=p,A=l.b,F=l.d,v=l.l,w=l.e,T=w,C=l.f,V=C,b=l.n,R=l.g,j=l.h;const S=(0,a.c)(),O=(0,a.f)(1,0,0),q=(0,a.f)(0,1,0);const _=(0,i.a)(),B=(0,i.a)();const N=(0,o.c)();Object.freeze(Object.defineProperty({__proto__:null,add:M,calculateW:function(t,n){const e=n[0],r=n[1],o=n[2];return t[0]=e,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-o*o)),t},conjugate:h,copy:m,dot:F,equals:j,exactEquals:R,fromEuler:P,fromMat3:y,getAxisAngle:f,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:function(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=e*e+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t},len:T,length:w,lerp:v,mul:x,multiply:p,normalize:b,random:function(t){const n=u.R,e=n(),r=n(),o=n(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*o),t[3]=a*Math.cos(2*Math.PI*o),t},rotateX:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+a*u,t[1]=o*c+i*u,t[2]=i*c-o*u,t[3]=a*c-r*u,t},rotateY:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c-i*u,t[1]=o*c+a*u,t[2]=i*c+r*u,t[3]=a*c-o*u,t},rotateZ:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=i*c+a*u,t[3]=a*c-i*u,t},rotationTo:function(t,n,e){const r=(0,c.e)(n,e);return r<-.999999?((0,c.f)(S,O,n),(0,c.u)(S)<1e-6&&(0,c.f)(S,q,n),(0,c.n)(S,S),s(t,S,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,c.f)(S,n,e),t[0]=S[0],t[1]=S[1],t[2]=S[2],t[3]=1+r,b(t,t))},scale:A,set:d,setAxes:function(t,n,e,r){const o=N;return o[0]=e[0],o[3]=e[1],o[6]=e[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],b(t,y(t,o))},setAxisAngle:s,slerp:g,sqlerp:function(t,n,e,r,o,i){return g(_,n,o,i),g(B,e,r,i),g(t,_,B,2*i*(1-i)),t},sqrLen:V,squaredLength:C,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))})),n.register("glKuz",(function(e,r){t(e.exports,"create",(function(){return l})),t(e.exports,"UP",(function(){return P})),t(e.exports,"fromAxisAndAngle",(function(){return s})),t(e.exports,"axis",(function(){return g})),t(e.exports,"compose",(function(){return f})),t(e.exports,"angleRad",(function(){return y})),t(e.exports,"composeAxes",(function(){return p})),t(e.exports,"angle",(function(){return h}));var o=n("iVfa0"),i=n("koyqq"),a=n("ksUrQ"),u=n("e4Xv2"),c=n("5YMIf");function l(t=P){return[t[0],t[1],t[2],t[3]]}function s(t,n,e=l()){return(0,u.c)(e,t),e[3]=n,e}function f(t,n,e=l()){return(0,i.s)(m,t,y(t)),(0,i.s)(d,n,y(n)),(0,i.m)(m,d,m),function(t,n){return t[3]=n,t}(e,(0,o.rad2deg)((0,i.g)(e,m)))}function p(t,n,e,r=l()){return s(c.d,t,M),s(c.e,n,x),s(c.U,e,A),f(M,x,M),f(M,A,r),r}function g(t){return t}function h(t){return t[3]}function y(t){return(0,o.deg2rad)(t[3])}const P=[0,0,1,0],m=(0,a.a)(),d=(0,a.a)(),M=(l(),l()),x=l(),A=l()})),n.register("gLl1O",(function(e,r){t(e.exports,"isGeographicMesh",(function(){return i})),t(e.exports,"validateGeographicFlag",(function(){return a}));var o=n("jHOLN");function i(t,n){var e;return t.isGeographic||t.isWebMercator&&(null===(e=null==n?void 0:n.geographic)||void 0===e||e)}function a(t,n,e){const r=!t.isGeoreferenced;null!=(null==e?void 0:e.geographic)&&e.geographic!==r&&o.default.getLogger(n).warnOnce(`Specifying the 'geographic' parameter (${e.geographic}) for a Mesh vertex space of type "${t.type}" is not supported. This parameter will be ignored.`)}})),n.register("9r2zb",(function(e,r){t(e.exports,"projectNormalToPCPF",(function(){return m})),t(e.exports,"projectNormalFromPCPF",(function(){return d})),t(e.exports,"projectToPCPF",(function(){return M})),t(e.exports,"projectFromPCPF",(function(){return x})),t(e.exports,"transformNormal",(function(){return A})),t(e.exports,"transformTangent",(function(){return F})),t(e.exports,"projectTangentToPCPF",(function(){return v})),t(e.exports,"projectTangentFromPCPF",(function(){return w}));var o=n("jHOLN"),i=n("j3x2p"),a=n("gnwu9"),u=n("89KCq"),c=n("e4Xv2"),l=n("5YMIf"),s=n("7RvA5"),f=n("ighN7"),p=n("eY5Yp"),g=n("eF88h"),h=n("YI2am"),y=n("hhwnq");const P=o.default.getLogger("esri.geometry.support.meshUtils.normalProjection");function m(t,n,e,r,o){return C(r)?(T(b.TO_PCPF,h.BufferViewVec3f.fromTypedArray(t),h.BufferViewVec3f64.fromTypedArray(n),h.BufferViewVec3f64.fromTypedArray(e),r,h.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert spatial reference to PCPF"),o)}function d(t,n,e,r,o){return C(r)?(T(b.FROM_PCPF,h.BufferViewVec3f.fromTypedArray(t),h.BufferViewVec3f64.fromTypedArray(n),h.BufferViewVec3f64.fromTypedArray(e),r,h.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert to spatial reference from PCPF"),o)}function M(t,n,e){return(0,s.projectBuffer)(t,n,0,e,(0,f.getSphericalPCPF)(n),0,t.length/3),e}function x(t,n,e){return(0,s.projectBuffer)(t,(0,f.getSphericalPCPF)(e),0,n,e,0,t.length/3),n}function A(t,n,e){return(0,i.b)(q,e),(0,y.a)(n,t,q),(0,i.i)(q)||(0,y.n)(n,n),n}function F(t,n,e){if((0,i.b)(q,e),(0,y.a)(n,t,q,4),(0,i.i)(q)||(0,y.n)(n,n,4),t!==n)for(let e=3;e<t.length;e+=4)n[e]=t[e];return n}function v(t,n,e,r,o){if(!C(r))return P.error("Cannot convert spatial reference to PCPF"),o;T(b.TO_PCPF,h.BufferViewVec3f.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),h.BufferViewVec3f64.fromTypedArray(n),h.BufferViewVec3f64.fromTypedArray(e),r,h.BufferViewVec3f.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT));for(let n=3;n<t.length;n+=4)o[n]=t[n];return o}function w(t,n,e,r,o){if(!C(r))return P.error("Cannot convert to spatial reference from PCPF"),o;T(b.FROM_PCPF,h.BufferViewVec3f.fromTypedArray(t,16),h.BufferViewVec3f64.fromTypedArray(n),h.BufferViewVec3f64.fromTypedArray(e),r,h.BufferViewVec3f.fromTypedArray(o,16));for(let n=3;n<t.length;n+=4)o[n]=t[n];return o}function T(t,n,e,r,o,a){if(!n)return;const u=e.count,l=(0,f.getSphericalPCPF)(o);if(V(o))for(let e=0;e<u;e++)r.getVec(e,j),n.getVec(e,S),(0,s.computeTranslationToOriginAndRotation)(l,j,O,l),(0,i.f)(q,O),t===b.FROM_PCPF&&(0,i.t)(q,q),(0,c.t)(S,S,q),a.setVec(e,S);else for(let o=0;o<u;o++){r.getVec(o,j),n.getVec(o,S),(0,s.computeTranslationToOriginAndRotation)(l,j,O,l),(0,i.f)(q,O);const u=(0,g.y2lat)(e.get(o,1));let f=Math.cos(u);t===b.TO_PCPF&&(f=1/f),q[0]*=f,q[1]*=f,q[2]*=f,q[3]*=f,q[4]*=f,q[5]*=f,t===b.FROM_PCPF&&(0,i.t)(q,q),(0,c.t)(S,S,q),(0,c.n)(S,S),a.setVec(o,S)}return a}function C(t){return V(t)||function(t){return t.isWebMercator}(t)}function V(t){return t.isWGS84||(0,p.isCGCS2000)(t)||(0,p.isMars)(t)||(0,p.isMoon)(t)}var b,R;(R=b||(b={}))[R.TO_PCPF=0]="TO_PCPF",R[R.FROM_PCPF=1]="FROM_PCPF";const j=(0,l.c)(),S=(0,l.c)(),O=(0,u.c)(),q=(0,a.c)()}))}();
//# sourceMappingURL=georeference.c3aa8282.js.map
