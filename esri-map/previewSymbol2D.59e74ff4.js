var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("7a1V1",(function(t,l){var a,n,o,i;a=t.exports,n="previewSymbol2D",o=function(){return w},Object.defineProperty(a,n,{get:o,set:i,enumerable:!0,configurable:!0});var s=e("hJt7u"),u=e("bPmsI"),c=e("jCR4P"),r=e("1B2ZX"),m=e("3DOhA"),p=e("1dJvi");const d="picture-fill",h=m.SymbolSizeDefaults.size,f=m.SymbolSizeDefaults.maxSize,v=m.SymbolSizeDefaults.maxOutlineSize,y=m.SymbolSizeDefaults.lineWidth,g=document.createElement("canvas");function b(e){const t=null==e?void 0:e.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,c.pt2px)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,c.pt2px)(t.height):null}}function w(e,t){var l,a;const n="number"==typeof(null==t?void 0:t.size)?null==t?void 0:t.size:null,o=null!=n?(0,c.pt2px)(n):null,i=null!=(null==t?void 0:t.maxSize)?(0,c.pt2px)(t.maxSize):null,w=null!=(null==t?void 0:t.opacity)?t.opacity:null,x=null!=(null==t?void 0:t.rotation)?t.rotation:"angle"in e?e.angle:null,M=(0,r.getFill)(e);let z=(0,r.getStroke)(e);if(M&&!z){const e="type"in M?null:new(0,s.default)(M);"#ffffff"===(e?e.toHex():null)&&(z={color:"#bdc3c7",width:.75})}const k={shape:null,fill:null,stroke:z,offset:[0,0]};null!=(l=z)&&l.width&&(z.width=Math.min(z.width,v));const L=(null==(a=z)?void 0:a.width)||0;let S=null!=(null==t?void 0:t.size)&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale)),C=0,j=0,P=!1;switch(e.type){case"simple-marker":{const t=e.style,l=Math.min(null!=o?o:(0,c.pt2px)(e.size),i||f);switch(C=l,j=l,t){case"circle":k.shape={type:"circle",cx:0,cy:0,r:.5*l},S||(C+=L,j+=L);break;case"cross":k.shape={type:"path",path:[{command:"M",values:[0,.5*j]},{command:"L",values:[C,.5*j]},{command:"M",values:[.5*C,0]},{command:"L",values:[.5*C,j]}]};break;case"diamond":k.shape={type:"path",path:[{command:"M",values:[0,.5*j]},{command:"L",values:[.5*C,0]},{command:"L",values:[C,.5*j]},{command:"L",values:[.5*C,j]},{command:"Z",values:[]}]},S||(C+=L,j+=L);break;case"square":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[C,0]},{command:"L",values:[C,j]},{command:"L",values:[0,j]},{command:"Z",values:[]}]},S||(C+=L,j+=L),x&&(P=!0);break;case"triangle":k.shape={type:"path",path:[{command:"M",values:[.5*C,0]},{command:"L",values:[C,j]},{command:"L",values:[0,j]},{command:"Z",values:[]}]},S||(C+=L,j+=L),x&&(P=!0);break;case"x":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[C,j]},{command:"M",values:[C,0]},{command:"L",values:[0,j]}]},x&&(P=!0);break;case"path":k.shape={type:"path",path:e.path||""},S||(C+=L,j+=L),x&&(P=!0),S=!0}break}case"simple-line":{var D;const{width:e,height:l}=b(t),a=null!=l?l:Math.min(null!=o?o:L,i||v),n=null!=e?e:y;z.width=a,C=n,j=a;const s=(null==k||null==(D=k.stroke)?void 0:D.cap)||"butt",u="round"===s;S=!0,k.stroke.cap="butt"===s?"square":s,k.shape={type:"path",path:[{command:"M",values:[u?a/2:0,j/2]},{command:"L",values:[u?C-a/2:C,j/2]}]};break}case d:case"simple-fill":{const e="object"==typeof(null==t?void 0:t.symbolConfig)&&(null==t?void 0:t.symbolConfig.isSquareFill),{width:l,height:a}=b(t);C=e&&null!=l?l:null!=o?o:h,j=e&&null!=a?a:C,S||(C+=L,j+=L),S=!0,k.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[C,0]},{command:"L",values:[C,j]},{command:"L",values:[0,j]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:m.shapes.fill[0];break}case"picture-marker":{let t=(0,c.pt2px)(e.width),l=(0,c.pt2px)(e.height);const a=null!=o?o:Math.max(t,l),n=t/l;t=n<=1?Math.ceil(a*n):a,l=n<=1?a:Math.ceil(a/n),C=Math.min(t,i||f),j=Math.min(l,i||f),k.shape={type:"image",x:-Math.round(C/2),y:-Math.round(j/2),width:C,height:j,src:e.url||""},x&&(P=!0);break}case"text":{const t=e,l=t.text||"Aa",a=t.font,n=Math.min(null!=o?o:(0,c.pt2px)(a.size),i||f),s=function(e,t){const l=g.getContext("2d"),a=[];return t&&(t.weight&&a.push(t.weight),t.size&&a.push(t.size+"px"),t.family&&a.push(t.family)),l.font=a.join(" "),l.measureText(e).width}(l,{weight:a.weight,size:n,family:a.family}),u=/[\uE600-\uE6FF]/.test(l);C=u?n:s,j=n;let r=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=(0,c.px2pt)(1),l=parseFloat(e);switch(e.slice(-2)){case"px":return l;case"pt":return l*t;case"in":return 72*l*t;case"pc":return 12*l*t;case"mm":return 2.8346456692913384*l*t;case"cm":return 28.346456692913385*l*t}}return parseFloat(e)}((a?n:0).toString());u&&(r+=5),k.shape={type:"text",text:l,x:0,y:r,align:"middle",decoration:a&&a.decoration,rotated:t.rotated,kerning:t.kerning},k.font=a&&{size:n,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!k.shape)return Promise.reject(new(0,u.default)("symbolPreview: renderPreviewHTML2D","symbol not supported."));const F=M,Z=e.color;let q=null;return F&&"pattern"===F.type&&Z&&e.type!==d?q=(0,r.getPatternUrlWithColor)(F.src,Z.toCss(!0)).then((e=>(F.src=e,k.fill=F,k))):(k.fill=M,q=Promise.resolve(k)),q.then((e=>{const l=[[e]];if("object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.applyColorModulation){const t=.6*C;l.unshift([{...e,offset:[-t,0],fill:(0,m.adjustColorBrightness)(M,-.3)}]),l.push([{...e,offset:[t,0],fill:(0,m.adjustColorBrightness)(M,.3)}]),C+=2*t,S=!1}return(0,p.renderSymbol)(l,[C,j],{node:t&&t.node,scale:S,opacity:w,rotation:x,useRotationSize:P,effectView:null==t?void 0:t.effectView})}))}}));
//# sourceMappingURL=previewSymbol2D.59e74ff4.js.map
