!function(){function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("eXarb",(function(r,i){var n;n=r.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return m}));var o=t("7eJjO"),s=t("2wMvA"),l=t("90ZKq"),a=t("imIAv"),p=t("d2yMj"),u=t("7qybv"),y=t("8NioF"),c=t("lKPaD"),d=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var f=t("fcwIv"),g=t("4LDxK"),h=t("5N5S1");const v=p.default.ofType(a.default);let b=class extends((0,h.OperationalLayer)((0,y.MultiOriginJSONMixin)(g.default))){initialize(){this.own((0,c.watch)((()=>this.analysis),((e,t)=>{(0,u.isSome)(t)&&t.parent===this&&(t.parent=null),(0,u.isSome)(e)&&(e.parent=this)}),c.syncAndInitial))}async load(){return(0,u.isSome)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,u.applySome)(this.analysis,(e=>e.observer))}set observer(e){(0,u.applySome)(this.analysis,(t=>t.observer=e))}get targets(){return(0,u.isSome)(this.analysis)?this.analysis.targets:null}set targets(e){(0,u.applySome)(this.analysis,(t=>t.targets=e))}get fullExtent(){return(0,u.isSome)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,u.isSome)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(e){this.analysis===e&&(this.analysis=new(0,s.default))}constructor(e){super(e),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new(0,s.default),this.opacity=1}};(0,o._)([(0,d.property)({json:{read:!1},readOnly:!0})],b.prototype,"type",void 0),(0,o._)([(0,d.property)({type:["LineOfSightLayer"]})],b.prototype,"operationalLayerType",void 0),(0,o._)([(0,d.property)({type:l.default,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,"observer",null),(0,o._)([(0,d.property)({type:v,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,"targets",null),(0,o._)([(0,d.property)({nonNullable:!0,json:{read:!1,write:!1}})],b.prototype,"analysis",void 0),(0,o._)([(0,d.property)({readOnly:!0})],b.prototype,"fullExtent",null),(0,o._)([(0,d.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,o._)([(0,d.property)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],b.prototype,"opacity",void 0),(0,o._)([(0,d.property)({type:["show","hide"]})],b.prototype,"listMode",void 0),b=(0,o._)([(0,f.subclass)("esri.layers.LineOfSightLayer")],b);const m=b})),t.register("2wMvA",(function(r,i){e(r.exports,"default",(function(){return m}));var n=t("7eJjO"),o=t("0ccyt"),s=t("90ZKq"),l=t("imIAv"),a=t("d2yMj"),p=t("30Aps"),u=t("7qybv"),y=t("lKPaD"),c=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var d=t("fcwIv"),f=t("7RvA5"),g=t("ayLat"),h=t("dKgtR");const v=a.default.ofType(l.default);let b=class extends o.default{initialize(){this.own((0,y.watch)((()=>this._computeExtent()),(e=>{((0,u.isNone)(e)||(0,u.isNone)(e.pending))&&this._set("extent",(0,u.isSome)(e)?e.extent:null)}),y.syncAndInitial))}get targets(){return this._get("targets")||new v}set targets(e){this._set("targets",(0,p.referenceSetter)(e,this.targets,v))}get spatialReference(){return(0,u.isSome)(this.observer)&&(0,u.isSome)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,u.applySome)(this.observer,(e=>e.position))]}async waitComputeExtent(){const e=this._computeExtent();return(0,u.isSome)(e)?(0,u.unwrap)(e.pending):null}_computeExtent(){const e=this.spatialReference;if((0,u.isNone)(this.observer)||(0,u.isNone)(this.observer.position)||(0,u.isNone)(e))return null;const t=e=>"absolute-height"===(0,h.getGeometryEffectiveElevationMode)(e.position,e.elevationInfo),r=this.observer.position,i=(0,g.fromValues)(r.x,r.y,r.z,r.x,r.y,r.z);for(const t of this.targets)if((0,u.isSome)(t.position)){const r=(0,f.projectOrLoad)(t.position,e);if((0,u.isSome)(r.pending))return{pending:r.pending,extent:null};if((0,u.isSome)(r.geometry)){const{x:e,y:t,z:n}=r.geometry;(0,g.expandWithVec3)(i,[e,t,n])}}const n=(0,g.toExtent)(i,e);return t(this.observer)&&this.targets.every(t)||(n.zmin=null,n.zmax=null),{pending:null,extent:n}}clear(){this.observer=null,this.targets.removeAll()}constructor(e){super(e),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}};(0,n._)([(0,c.property)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,n._)([(0,c.property)({type:s.default,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,n._)([(0,c.property)({cast:p.castForReferenceSetter,type:v,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,n._)([(0,c.property)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,n._)([(0,c.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,n._)([(0,c.property)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),(0,n._)([(0,c.property)({readOnly:!0})],b.prototype,"nonEditableMessage",void 0),b=(0,n._)([(0,d.subclass)("esri.analysis.LineOfSightAnalysis")],b);const m=b})),t.register("0ccyt",(function(r,i){e(r.exports,"default",(function(){return f}));var n=t("7eJjO"),o=t("jymfC"),s=t("3SeOo"),l=t("52Bzb"),a=t("1XAcN"),p=t("7qybv"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var y=t("fcwIv");let c=0,d=class extends((0,a.JSONSupportMixin)((0,s.ClonableMixin)((0,l.IdentifiableMixin)(o.default)))){get parent(){return this._get("parent")}set parent(e){const t=this.parent;if((0,p.isSome)(t))switch(t.type){case"line-of-sight":t.removeAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(p.isSome)}constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${c++}`,this.title=null}};(0,n._)([(0,u.property)({type:String,constructOnly:!0,clonable:!1})],d.prototype,"id",void 0),(0,n._)([(0,u.property)({type:String})],d.prototype,"title",void 0),(0,n._)([(0,u.property)({constructOnly:!0})],d.prototype,"type",void 0),(0,n._)([(0,u.property)({clonable:!1,value:null})],d.prototype,"parent",null),(0,n._)([(0,u.property)({readOnly:!0})],d.prototype,"extent",void 0),(0,n._)([(0,u.property)({readOnly:!0})],d.prototype,"isEditable",null),(0,n._)([(0,u.property)({readOnly:!0})],d.prototype,"requiredPropertiesForEditing",void 0),(0,n._)([(0,u.property)({readOnly:!0})],d.prototype,"nonEditableMessage",void 0),d=(0,n._)([(0,y.subclass)("esri.analysis.Analysis")],d);const f=d})),t.register("90ZKq",(function(r,i){e(r.exports,"default",(function(){return h}));var n=t("7eJjO"),o=t("lbJ00"),s=t("jymfC"),l=t("3SeOo"),a=t("1XAcN"),p=t("7qybv"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var y=t("fcwIv"),c=t("8z7fo"),d=t("d1Fqh"),f=t("h5vCg");let g=class extends((0,a.JSONSupportMixin)((0,l.ClonableMixin)(s.default))){equals(e){return(0,p.equalsMaybe)(this.position,e.position)&&(0,p.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,n._)([(0,u.property)({type:d.default}),(0,c.persistable)()],g.prototype,"position",void 0),(0,n._)([(0,u.property)({type:f.default}),(0,c.persistable)()],g.prototype,"elevationInfo",void 0),(0,n._)([(0,u.property)(o.featureReferenceProperty)],g.prototype,"feature",void 0),g=(0,n._)([(0,y.subclass)("esri.analysis.LineOfSightAnalysisObserver")],g);const h=g})),t.register("lbJ00",(function(r,i){e(r.exports,"featureReferenceEquals",(function(){return o})),e(r.exports,"featureReferenceProperty",(function(){return l}));var n=t("7qybv");function o(e,t){return s(e)===s(t)}function s(e){if((0,n.isNone)(e))return null;const t=null!=e.layer?e.layer.id:"";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const l={json:{write:{writer:function(e,t){var r;(0,n.isNone)(e)||null==(null===(r=e.layer)||void 0===r?void 0:r.objectIdField)||null==e.attributes||(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}}})),t.register("8z7fo",(function(r,i){e(r.exports,"persistable",(function(){return d}));var n=t("7qybv"),o=t("arTQ0"),s=t("kYueh"),l=t("9Rl0r"),a=t("gy5s8"),p=t("Ej9Ns"),u=t("iho5X"),y=t("2LZwQ"),c=t("9ELaA");function d(e){const t=(0,n.isSome)(e)&&e.origins?e.origins:[void 0];return(r,i)=>{const l=function(e,t,r){if((0,n.isSome)(e)&&"resource"===e.type)return function(e,t,r){const i=(0,a.getOwnPropertyMetadata)(t,r);return{type:String,read:(e,t,r)=>{const n=(0,c.r)(e,t,r);return i.type===String?n:"function"==typeof i.type?new i.type({url:n}):void 0},write:{writer(t,l,a,u){if(!u||!u.resources)return"string"==typeof t?void(l[a]=(0,c.t)(t,u)):void(l[a]=t.write({},u));const d=function(e){return(0,n.isNone)(e)?null:"string"==typeof e?e:e.url}(t),v=d?(0,c.t)(d,{...u,verifyItemRelativeUrls:u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},c.M.NO):null,b=i.type!==String&&(!(0,o.isMultiOriginJSONMixin)(this)||u&&u.origin&&this.originIdOf(r)>(0,p.nameToId)(u.origin));u&&u.portalItem&&(0,n.isSome)(v)&&!(0,s.isAbsolute)(v)?b?function(e,t,r,i,n,o,l,a){const p=l.portalItem.resourceFromPath(i),u=h(r,i,l);(0,y.getResourceContentExtension)(u)===(0,s.getPathExtension)(p.path)?(g(e,t,p,u,l.resources.toUpdate),n[o]=i):f(e,t,r,i,n,o,l,a)}(this,r,t,v,l,a,u,e):function(e,t,r,i){i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(e)}),t[r]=e}(v,l,a,u):u&&u.portalItem&&((0,n.isNone)(v)||(0,n.isSome)((0,c.i)(v))||(0,s.isBlobProtocol)(v)||b)?f(this,r,t,v,l,a,u,e):l[a]=v}}}}(e,t,r);switch((0,n.isSome)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.p;return{read:e,write:t}}}}(e,r,i);for(const e of t){const t=(0,u.propertyJSONMeta)(r,e,i);for(const e in l)t[e]=l[e]}}}function f(e,r,i,o,a,p,u,c){const d=(0,l.generateUUID)(),f=h(i,o,u),v=(0,s.join)((0,n.get)(c,"prefix"),d),b=`${v}.${(0,y.getResourceContentExtension)(f)}`,m=u.portalItem.resourceFromPath(b);(0,s.isBlobProtocol)(o)&&u.resources.pendingOperations.push(async function(e){const r=(await Promise.resolve(t("9pNSx"))).default,{data:i}=await r(e,{responseType:"blob"});return i}(o).then((e=>{m.path=`${v}.${(0,y.getResourceContentExtension)(e)}`,a[p]=m.itemRelativeUrl})).catch((()=>{}))),g(e,r,m,f,u.resources.toAdd),a[p]=m.itemRelativeUrl}function g(e,t,r,i,n){n.push({resource:r,content:i,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function h(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}})),t.register("arTQ0",(function(t,r){function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}e(t.exports,"isMultiOriginJSONMixin",(function(){return i}))})),t.register("2LZwQ",(function(r,i){e(r.exports,"getResourceContentExtension",(function(){return o}));var n=t("kYueh");function o(e){return s[function(e){return e instanceof Blob?e.type:function(e){const t=(0,n.getPathExtension)(e);return p[t]||l}(e.url)}(e)]||a}const s={},l="text/plain",a=s[l],p={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const e in p)s[p[e]]=e})),t.register("imIAv",(function(r,i){e(r.exports,"default",(function(){return g}));var n=t("7eJjO"),o=t("lbJ00"),s=t("3SeOo"),l=t("1XAcN"),a=t("7qybv"),p=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("fcwIv"),y=t("8z7fo"),c=t("d1Fqh"),d=t("h5vCg");let f=class extends((0,l.JSONSupportMixin)(s.Clonable)){equals(e){return(0,a.equalsMaybe)(this.position,e.position)&&(0,a.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,n._)([(0,p.property)({type:c.default}),(0,y.persistable)()],f.prototype,"position",void 0),(0,n._)([(0,p.property)({type:d.default}),(0,y.persistable)()],f.prototype,"elevationInfo",void 0),(0,n._)([(0,p.property)(o.featureReferenceProperty)],f.prototype,"feature",void 0),f=(0,n._)([(0,u.subclass)("esri.analysis.LineOfSightAnalysisTarget")],f);const g=f})),t.register("dKgtR",(function(r,i){e(r.exports,"getGeometryEffectiveElevationMode",(function(){return o}));var n=t("7qybv");t("dspmW");function o(e,t){return function(e,t){return(0,n.isNone)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}(!!(0,n.isSome)(e)&&e.hasZ,t)}}))}();
//# sourceMappingURL=LineOfSightLayer.f36995aa.js.map
