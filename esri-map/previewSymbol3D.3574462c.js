!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,r){Object.defineProperty(e,t,{get:a,set:r,enumerable:!0,configurable:!0})}var a=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;a.register("5TXU6",(function(r,n){t(r.exports,"getSymbolLayerFill",(function(){return D})),t(r.exports,"getPatternDescriptor",(function(){return N})),t(r.exports,"getSizeFromOptions",(function(){return A})),t(r.exports,"previewSymbol3D",(function(){return E}));var s=a("8TSCy"),l=a("2TvXO"),i=a("i9j5X"),o=a("5xAFh");a("2VlWd");var p=a("kyj08"),u=a("jHOLN"),h=a("7qybv"),c=a("10vEZ"),m=a("iXlXu"),f=a("dNlty"),y=a("c35Oi"),d=a("5craB"),b=a("cBxZc"),v=a("bFgGH"),g=a("8NoYK"),x=a("cVYSt"),S=b.SymbolSizeDefaults.size,k=b.SymbolSizeDefaults.maxSize,w=b.SymbolSizeDefaults.maxOutlineSize,M=b.SymbolSizeDefaults.lineWidth,L=b.SymbolSizeDefaults.tallSymbolWidth,j=u.default.getLogger("esri.symbols.support.previewSymbol3D");function z(e){var t=e.outline,a=(0,h.isSome)(e.material)?e.material.color:null,r=(0,h.isSome)(a)?a.toHex():null;if((0,h.isNone)(t)||"pattern"in t&&(0,h.isSome)(t.pattern)&&"style"===t.pattern.type&&"none"===t.pattern.style)return"fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;var n=(0,m.pt2px)(t.size)||0;return{color:"rgba("+((0,h.isSome)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,w),style:"pattern"in t&&(0,h.isSome)(t.pattern)&&"style"===t.pattern.type?(0,f.dekebabifyLineStyle)(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.a,r=(0,o.toHSV)(e),n=r.h,s=r.s/t,l=100-(100-r.v)/t,i=(0,o.toRGB)({h:n,s:s,v:l}),p=i.r,u=i.g,h=i.b;return[p,u,h,a]}function P(e){return"water"===e.type?(0,h.isNone)(e.color)?null:e.color:(0,h.isNone)(e.material)||(0,h.isNone)(e.material.color)?null:e.material.color}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=P(e);if(!a){if("fill"===e.type)return null;var r=f.defaultThematicColor.r,n=(0,b.adjustColorComponentBrightness)(r,t);return[n,n,n,100]}for(var s=a.toRgba(),l=0;l<3;l++)s[l]=(0,b.adjustColorComponentBrightness)(s[l],t);return s}function N(e,t){return O.apply(this,arguments)}function O(){return(O=s.asyncToGenerator(e(l).mark((function t(a,r){var n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(n=a.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,f.getPatternUrlWithColor)((0,i.getAssetUrl)("esri/symbols/patterns/".concat(n,".png")),r.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function T(e){return e.outline?z(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function B(e,t){var a=P(e);if(!a)return null;var r="rgba(";return r+=(0,b.adjustColorComponentBrightness)(a.r,t)+",",r+=(0,b.adjustColorComponentBrightness)(a.g,t)+",",(r+=(0,b.adjustColorComponentBrightness)(a.b,t)+",")+a.a+");"}function I(e,t){var a=B(e,t);return a?"pattern"in e&&(0,h.isSome)(e.pattern)&&"style"===e.pattern.type&&"none"===e.pattern.style?null:{color:a,width:Math.min(e.size?(0,m.pt2px)(e.size):.75,w),style:"pattern"in e&&(0,h.isSome)(e.pattern)&&"style"===e.pattern.type?(0,f.dekebabifyLineStyle)(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?(0,m.pt2px)(2):e.join:null}:{}}function W(e,t,a){var r=.75*a;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function A(e){var t="number"==typeof(null==e?void 0:e.size)?null==e?void 0:e.size:null;return t?(0,m.pt2px)(t):null}function H(e,t){var a,r=A(t),n=t&&t.maxSize?(0,m.pt2px)(t.maxSize):null,s=t&&t.disableUpsampling,l=e.symbolLayers,o=[],p=0,u=0,h=l.getItemAt(l.length-1);return h&&"icon"===h.type&&(a=h.size&&(0,m.pt2px)(h.size)),l.forEach((function(l){if("icon"===l.type||"object"===l.type){var h,c,f,w,M="icon"===l.type?l.size&&(0,m.pt2px)(l.size):0,j=r||M?Math.ceil(Math.min(r||M,n||k)):S;if(l&&l.resource&&l.resource.href){var C=function(e,t){var a=t&&t.resource,r=a&&a.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&"object"!==t.type)return Promise.resolve((0,g.getIconHref)(e,t));var n=(0,i.getAssetUrl)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?(0,x.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||n})):Promise.resolve(n)}(e,l).then((function(e){var t=l.get("material.color"),a="icon"===l.type?"multiply":"tint";return(0,v.tintImageWithColor)(e,j,t,a,s)})).then((function(e){var t=e.width,a=e.height;return p=Math.max(p,t),u=Math.max(u,a),[{shape:{type:"image",x:0,y:0,width:t,height:a,src:e.url},fill:null,stroke:null}]}));o.push(C)}else{var P,N=j;"icon"===l.type&&a&&r&&(N=j*(M/a));var O="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(P=t.symbolConfig)?void 0:P.isTall)||"object"===l.type&&(c=(h=l).depth,f=h.height,(w=h.width)&&c&&f&&w===c&&w<f);p=Math.max(p,O?L:N),u=Math.max(u,N),o.push(Promise.resolve(function(e,t,a){var r=[];if(!e)return r;switch(e.type){case"icon":var n=t,s=t;switch(e.resource&&e.resource.primitive||y.defaultPrimitive){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:D(e,0),stroke:z(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,0]},{command:"L",values:[n,0]},{command:"L",values:[n,s]},{command:"Z",values:[]}]},fill:D(e,0),stroke:z(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,s]},{command:"Z",values:[]}]},fill:D(e,0),stroke:z(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[.5*n,s]},{command:"M",values:[0,.5*s]},{command:"L",values:[n,.5*s]}]},stroke:T(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[n,s]},{command:"M",values:[n,0]},{command:"L",values:[0,s]}]},stroke:T(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*s]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,.5*s]},{command:"L",values:[.5*n,s]},{command:"Z",values:[]}]},fill:D(e,0),stroke:z(e)})}break;case"object":switch(e.resource&&e.resource.primitive||d.defaultPrimitive){case"cone":var l=W(D(e,0),D(e,-.6),a?L:t),i=(0,b.getConeShapes)(t,a);r.push({shape:i[0],fill:l}),r.push({shape:i[1],fill:l});break;case"inverted-cone":var o=D(e,0),p=W(o,D(e,-.6),t),u=(0,b.getInvertedConeShapes)(t);r.push({shape:u[0],fill:p}),r.push({shape:u[1],fill:o});break;case"cube":var h=(0,b.getCubeShapes)(t,a);r.push({shape:h[0],fill:D(e,0)}),r.push({shape:h[1],fill:D(e,-.3)}),r.push({shape:h[2],fill:D(e,-.5)});break;case"cylinder":var c=W(D(e,0),D(e,-.6),a?L:t),m=(0,b.getCylinderShapes)(t,a);r.push({shape:m[0],fill:c}),r.push({shape:m[1],fill:c}),r.push({shape:m[2],fill:D(e,0)});break;case"diamond":var f=(0,b.getDiamondShapes)(t);r.push({shape:f[0],fill:D(e,-.3)}),r.push({shape:f[1],fill:D(e,0)}),r.push({shape:f[2],fill:D(e,-.3)}),r.push({shape:f[3],fill:D(e,-.7)});break;case"sphere":var v=W(D(e,0),D(e,-.6));v.x1=0,v.y1=0,v.x2=.25*t,v.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:v});break;case"tetrahedron":var g=(0,b.getTetrahedronShapes)(t);r.push({shape:g[0],fill:D(e,-.3)}),r.push({shape:g[1],fill:D(e,0)}),r.push({shape:g[2],fill:D(e,-.6)})}}return r}(l,N,O)))}}})),(0,c.eachAlways)(o).then((function(e){var a=[];return e.forEach((function(e){e.value?a.push(e.value):e.error&&j.warn("error while building swatchInfo!",e.error)})),(0,v.renderSymbol)(a,[p,u],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function U(){return(U=s.asyncToGenerator(e(l).mark((function t(a,r){var n,i,o,p,u,c,f,y,d,g,x,w,M,L,j,O,T,B,W,H,U,E,R,X,Z,q,F,G,V,Y,_,K,J;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="mesh-3d"===a.type,i=a.symbolLayers,o=A(r),p=r&&r.maxSize?(0,m.pt2px)(r.maxSize):null,u=o||S,c=[],f=0,y=0,d=!1,g=0;case 3:if(!(g<i.length)){e.next=42;break}if(x=i.getItemAt(g),w=[],!n||"fill"===x.type){e.next=7;break}return e.abrupt("continue",39);case 7:M=b.shapes.fill[0],e.t0=x.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?28:"water"===e.t0?33:38;break;case 11:if(L=z(x),j=Math.min(u,p||k),f=Math.max(f,j),y=Math.max(y,j),d=!0,O=D(x,0),T="pattern"in x&&x.pattern,B=P(x),e.t1=!n&&(0,h.isSome)(T)&&"style"===T.type&&"solid"!==T.style&&B,!e.t1){e.next=20;break}return e.next=19,N(T,B);case 19:O=e.sent;case 20:return w.push({shape:M,fill:O,stroke:L}),e.abrupt("break",38);case 22:if(W=I(x,0),!(0,h.isNone)(W)){e.next=25;break}return e.abrupt("break",38);case 25:return H={stroke:W,shape:M},f=Math.max(f,S),y=Math.max(y,S),w.push(H),e.abrupt("break",38);case 28:return U=s.objectSpread({join:"round",width:1},I(x,-.4)),E=D(x,0),R=D(x,-.2),X=Math.min(u,p||k),Z=(0,b.getExtrudeSymbolShapes)(X),U.width=1,w.push({shape:Z[0],fill:R,stroke:U}),w.push({shape:Z[1],fill:R,stroke:U}),w.push({shape:Z[2],fill:E,stroke:U}),q=S,F=.7*S+.5*X,f=Math.max(f,q),y=Math.max(y,F),e.abrupt("break",38);case 33:return G=P(x),V=C(G),Y=C(G,2),_=C(G,3),K=(0,b.getWaterSymbolShapes)(),d=!0,w.push({shape:K[0],fill:V}),w.push({shape:K[1],fill:Y}),w.push({shape:K[2],fill:_}),J=Math.min(u,p||k),f=Math.max(f,J),y=Math.max(y,J),e.abrupt("break",38);case 38:c.push(w);case 39:g++,e.next=3;break;case 42:return e.abrupt("return",Promise.resolve((0,v.renderSymbol)(c,[f,y],{node:r&&r.node,scale:d,opacity:r&&r.opacity})));case 43:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function E(e,t){if(0===e.symbolLayers.length)return Promise.reject(new(0,p.default)("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return H(e,t);case"line-3d":return r=t,l=(a=e).symbolLayers,i=[],o=(0,g.isVolumetricSymbol)(a),u=A(r),c=(r&&r.maxSize?(0,m.pt2px)(r.maxSize):null)||w,f=0,y=0,l.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var a=[];switch(e.type){case"line":var r=I(e,0);if((0,h.isNone)(r))break;var l=r&&r.width||0;0===t&&(n=l);var o=Math.min(u||l,c),p=0===t?o:u?o*(l/n):o,m=p>M/2?2*p:M;y=Math.max(y,p),f=Math.max(f,m),r.width=p,a.push({shape:{type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[f,.5*y]}]},stroke:r});break;case"path":var d=Math.min(u||S,c),v=D(e,0),g=D(e,-.2),x=B(e,-.4),k=x?{color:x,width:1}:{};if("quad"===e.profile){var w=e.width,L=e.height,j=(0,b.getPathSymbolShapes)(w&&L?w/L:1,0===L,0===w),z=s.objectSpread({},k,{join:"bevel"});a.push({shape:j[0],fill:g,stroke:z}),a.push({shape:j[1],fill:g,stroke:z}),a.push({shape:j[2],fill:v,stroke:z})}else a.push({shape:b.shapes.pathSymbol3DLayer[0],fill:g,stroke:k}),a.push({shape:b.shapes.pathSymbol3DLayer[1],fill:v,stroke:k});y=Math.max(y,d),f=y}i.push(a)}})),Promise.resolve((0,v.renderSymbol)(i,[f,y],{node:r&&r.node,scale:o,opacity:r&&r.opacity}));case"polygon-3d":case"mesh-3d":return function(e,t){return U.apply(this,arguments)}(e,t)}var a,r,n,l,i,o,u,c,f,y;return Promise.reject(new(0,p.default)("symbolPreview: swatchInfo3D","symbol not supported."))}}))}();
//# sourceMappingURL=previewSymbol3D.3574462c.js.map
