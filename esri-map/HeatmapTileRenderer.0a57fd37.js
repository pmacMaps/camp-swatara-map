!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("cqbWu",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return x}));var a=t("8TSCy"),s=t("7eJjO");t("jHOLN"),t("iJAIC"),t("lNwWH"),t("2VlWd"),t("62edV");var o=t("fcwIv"),u=t("e51b3"),l=t("7g7T8"),c=t("aUYE0"),h=t("cCHof"),f=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e))._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},n.featuresView={attributeView:{initialize:function(){},requestUpdate:function(){}},requestRender:function(){}},n._container=new(0,l.BitmapTileContainer)(e.tileInfoView),a.possibleConstructorReturn(n)}return a.createClass(r,[{key:"createTile",value:function(e){var t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}},{key:"onConfigUpdate",value:function(){var e=this.layer.renderer;if("heatmap"===e.type){var t=this,r=e.minPixelIntensity,n=e.maxPixelIntensity;this._intensityInfo.minPixelIntensity=r,this._intensityInfo.maxPixelIntensity=n,this._gradient=(0,u.generateGradient)(e.colorStops),this.tiles.forEach((function(e){var i=e.bitmap.source;i&&(i.minPixelIntensity=r,i.maxPixelIntensity=n,i.gradient=t._gradient,e.bitmap.invalidateTexture())}))}}},{key:"hitTest",value:function(){return Promise.resolve([])}},{key:"install",value:function(e){e.addChild(this._container)}},{key:"uninstall",value:function(e){this._container.removeAllChildren(),e.removeChild(this._container)}},{key:"disposeTile",value:function(e){this._container.removeChild(e),e.destroy()}},{key:"supportsRenderer",value:function(e){return e&&"heatmap"===e.type}},{key:"onTileData",value:function(e){var t=this.tiles.get(e.tileKey);if(t){var r=e.intensityInfo,n=this._intensityInfo,i=n.minPixelIntensity,a=n.maxPixelIntensity,s=t.bitmap.source||new(0,h.HeatmapSource);s.intensities=r&&r.matrix||null,s.minPixelIntensity=i,s.maxPixelIntensity=a,s.gradient=this._gradient,t.bitmap.source=s,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}}},{key:"onTileError",value:function(e){console.error(e)}},{key:"lockGPUUploads",value:function(){}},{key:"unlockGPUUploads",value:function(){}},{key:"fetchResource",value:function(e,t){return console.error(e),Promise.reject()}}]),r}(c.default),x=f=(0,s._)([(0,o.subclass)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],f)})),t.register("e51b3",(function(r,n){e(r.exports,"generateGradient",(function(){return a})),e(r.exports,"calculateHeatmapIntensityInfoReaders",(function(){return s})),e(r.exports,"drawHeatmap",(function(){return o}));var i=t("iVfa0"),a=function(){if(!("document"in globalThis))return function(){return null};var e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,function(r){t.clearRect(0,0,1,e.height);var n=t.createLinearGradient(0,0,0,e.height),i=!0,a=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=l.ratio,h=l.color;n.addColorStop(Math.max(c,.001),"rgba(".concat(h.r,", ").concat(h.g,", ").concat(h.b,", ").concat(h.a,")"))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}}();function s(e,t,r,n){var i,a,s,o=t.blurRadius,l=t.fieldOffset,c=t.field,h=new Float64Array(r*n),f=u(o),x=Math.round(3*o),d=Number.NEGATIVE_INFINITY,y=(s=l,null!=(a=c)?"string"==typeof s?function(e){return-1*+e.readAttribute(a)}:function(e){return+e.readAttribute(a)+s}:function(e){return 1}),v=new Set,p=!0,g=!1,m=void 0;try{for(var k,w=e[Symbol.iterator]();!(p=(k=w.next()).done);p=!0)for(var b=k.value.getCursor();b.next();){var T=b.getObjectId();if(!v.has(T)){v.add(T);var _=b.readLegacyPointGeometry(),I=128;if(!(_.x<-I||_.x>=r+I||_.y<-I||_.y>n+I))for(var R=+y(b),C=Math.round(_.x)-x,P=Math.round(_.y)-x,M=Math.max(0,C),S=Math.max(0,P),B=Math.min(n,Math.round(_.y)+x),D=Math.min(r,Math.round(_.x)+x),E=S;E<B;E++)for(var A=f[E-P],O=M;O<D;O++){var Z=f[O-C];(i=h[E*r+O]+=A*Z*R)>d&&(d=i)}}}}catch(e){g=!0,m=e}finally{try{p||null==w.return||w.return()}finally{if(g)throw m}}return{matrix:h.buffer,max:d}}function o(e,t,r,n,a,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var o=e.getImageData(0,0,t,t);r&&n&&o.data.set(new Uint8ClampedArray(function(e,t,r,n,a){for(var s=new Uint32Array(e*e),o=("buffer"in t?t:new Float64Array(t)),u=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),l=u.length/(a-n),c=0;c<o.length;c++){var h=o[c],f=Math.floor((h-n)*l);s[c]=u[(0,i.clamp)(f,0,u.length-1)]}return s.buffer}(t,r,n,a,s))),e.putImageData(o,0,0)}function u(e){for(var t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1),i=0;i<=n.length;i++)n[i]=Math.exp(-Math.pow(i-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}})),t.register("7g7T8",(function(r,n){e(r.exports,"BitmapTileContainer",(function(){return l}));var i=t("8TSCy"),a=t("8TwEW"),s=t("11Mjy"),o=t("jhrt5"),u=t("66IJZ"),l=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(){return i.classCallCheck(this,r),t.apply(this,arguments)}return i.createClass(r,[{key:"requiresDedicatedFBO",get:function(){return this.children.some((function(e){return"additive"===e.bitmap.blendFunction}))}},{key:"createTile",value:function(e){var t=this._tileInfoView.getTileBounds((0,a.create)(),e),r=i.slicedToArray(this._tileInfoView.tileInfo.size,2),n=r[0],o=r[1];return new(0,s.BitmapTile)(e,t[0],t[3],n,o)}},{key:"prepareRenderPasses",value:function(e){var t=this,n=e.registerRenderPass({name:"bitmap (tile)",brushes:[o.brushes.bitmap],target:function(){return t.children.map((function(e){return e.bitmap}))},drawPhase:u.WGLDrawPhase.MAP});return i.toConsumableArray(i.get(i.getPrototypeOf(r.prototype),"prepareRenderPasses",this).call(this,e)).concat([n])}},{key:"doRender",value:function(e){this.visible&&e.drawPhase===u.WGLDrawPhase.MAP&&i.get(i.getPrototypeOf(r.prototype),"doRender",this).call(this,e)}}]),r}(t("3v0eQ").default)})),t.register("11Mjy",(function(r,n){e(r.exports,"BitmapTile",(function(){return o}));var i=t("8TSCy"),a=t("eYrMi"),s=t("1ScYs"),o=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e,n,a,o,u){var l,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return i.classCallCheck(this,r),(l=t.call(this,e,n,a,o,u)).bitmap=new(0,s.Bitmap)(c,"standard",!1),l.bitmap.coordScale=[o,u],l.bitmap.once("isReady",(function(){return l.ready()})),i.possibleConstructorReturn(l)}return i.createClass(r,[{key:"destroy",value:function(){i.get(i.getPrototypeOf(r.prototype),"destroy",this).call(this),this.bitmap.destroy()}},{key:"beforeRender",value:function(e){i.get(i.getPrototypeOf(r.prototype),"beforeRender",this).call(this,e),this.bitmap.beforeRender(e)}},{key:"afterRender",value:function(e){i.get(i.getPrototypeOf(r.prototype),"afterRender",this).call(this,e),this.bitmap.afterRender(e)}},{key:"stencilRef",get:function(){return this.bitmap.stencilRef},set:function(e){this.bitmap.stencilRef=e}},{key:"_createTransforms",value:function(){return{dvs:(0,a.c)(),tileMat3:(0,a.c)()}}},{key:"setTransform",value:function(e,t){i.get(i.getPrototypeOf(r.prototype),"setTransform",this).call(this,e,t),this.bitmap.transforms.dvs=this.transforms.dvs}},{key:"onAttach",value:function(){this.bitmap.stage=this.stage}},{key:"onDetach",value:function(){this.bitmap&&(this.bitmap.stage=null)}}]),r}(t("8eM7H").TiledDisplayObject)})),t.register("1ScYs",(function(r,n){e(r.exports,"Bitmap",(function(){return d}));var i=t("8TSCy"),a=t("7qybv"),s=t("j3x2p"),o=t("eYrMi"),u=t("0P8XU"),l=t("2qlsz"),c=t("9rklz"),h=t("8JzMA"),f=t("8aBT4");function x(e,t,r){var n={target:h.TextureType.TEXTURE_2D,pixelFormat:h.PixelFormat.RGBA,internalFormat:h.PixelFormat.RGBA,dataType:h.PixelType.UNSIGNED_BYTE,wrapMode:h.TextureWrapMode.CLAMP_TO_EDGE};return t&&r&&(n.width=t,n.height=r),new(0,f.Texture)(e,n)}var d=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.classCallCheck(this,r),(e=t.call(this)).requestRenderOnSourceChangedEnabled=s,e._textureInvalidated=!0,e.stencilRef=0,e.coordScale=[1,1],e._height=void 0,e.pixelRatio=1,e.resolution=0,e.rotation=0,e._source=null,e._width=void 0,e.x=0,e.y=0,e.blendFunction=a,e.source=n,e.requestRender=e.requestRender.bind(i.assertThisInitialized(e)),i.possibleConstructorReturn(e)}return i.createClass(r,[{key:"destroy",value:function(){this._texture&&(this._texture.dispose(),this._texture=null)}},{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(e){this._height=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(e){this._width=e}},{key:"beforeRender",value:function(e){i.get(i.getPrototypeOf(r.prototype),"beforeRender",this).call(this,e),this.updateTexture(e.context)}},{key:"invalidateTexture",value:function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}},{key:"_createTransforms",value:function(){return{dvs:(0,o.c)()}}},{key:"setTransform",value:function(e){var t=(0,s.b)(this.transforms.dvs),r=i.slicedToArray(e.toScreenNoRotation([0,0],[this.x,this.y]),2),n=r[0],a=r[1],o=this.resolution/this.pixelRatio/e.resolution,l=o*this.width,c=o*this.height,h=Math.PI*this.rotation/180;(0,s.c)(t,t,(0,u.f)(n,a)),(0,s.c)(t,t,(0,u.f)(l/2,c/2)),(0,s.r)(t,t,-h),(0,s.c)(t,t,(0,u.f)(-l/2,-c/2)),(0,s.j)(t,t,(0,u.f)(l,c)),(0,s.m)(this.transforms.dvs,e.displayViewMat3,t)}},{key:"setSamplingProfile",value:function(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}},{key:"bind",value:function(e,t){this._texture&&e.bindTexture(this._texture,t)}},{key:"updateTexture",value:function(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(this._textureInvalidated){this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(e,this.sourceWidth,this.sourceHeight):this._texture=x(e));var r,n,i,s,o=this.source;if(o){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(s=o)&&"render"in s)if(o instanceof c.default){var u=o.getRenderedRasterPixels();this._texture.setData((0,a.isSome)(u)?u.renderedRasterPixels:null)}else this._texture.setData((n=o,(i=document.createElement("canvas")).width=n.width,i.height=n.height,n.render(i.getContext("2d")),i));else(r=o)&&!("render"in r)&&this._texture.setData(o);this.ready()}else this._texture.setData(null)}}},{key:"onAttach",value:function(){this.invalidateTexture()}},{key:"onDetach",value:function(){this.invalidateTexture()}}]),r}(l.DisplayObject)})),t.register("9rklz",(function(r,n){e(r.exports,"default",(function(){return s}));var i=t("8TSCy"),a=t("7qybv"),s=function(){"use strict";function e(t,r,n){i.classCallCheck(this,e),this.pixelBlock=t,this.extent=r,this.originalPixelBlock=n}return i.createClass(e,[{key:"width",get:function(){return(0,a.isSome)(this.pixelBlock)?this.pixelBlock.width:0}},{key:"height",get:function(){return(0,a.isSome)(this.pixelBlock)?this.pixelBlock.height:0}},{key:"render",value:function(e){var t=this.pixelBlock;if(!(0,a.isNone)(t)){var r=this.filter({pixelBlock:t});if(!(0,a.isNone)(r.pixelBlock)){var n=r.pixelBlock.getAsRGBA(),i=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);i.data.set(n),e.putImageData(i,0,0)}}}},{key:"getRenderedRasterPixels",value:function(){var e=this.filter({pixelBlock:this.pixelBlock});return(0,a.isNone)(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}]),e}()})),t.register("8eM7H",(function(r,n){e(r.exports,"TiledDisplayObject",(function(){return u}));var i=t("8TSCy"),a=t("j3x2p"),s=t("2qlsz"),o=t("i90gL"),u=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e,n,a,s,u){var l,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u;return i.classCallCheck(this,r),(l=t.call(this)).triangleCountReportedInDebug=0,l.triangleCount=0,l.texture=null,l.key=new(0,o.default)(e),l.x=n,l.y=a,l.width=s,l.height=u,l.rangeX=c,l.rangeY=h,i.possibleConstructorReturn(l)}return i.createClass(r,[{key:"destroy",value:function(){this.texture&&(this.texture.dispose(),this.texture=null)}},{key:"setTransform",value:function(e,t){var r=t/(e.resolution*e.pixelRatio),n=this.transforms.tileMat3,s=i.slicedToArray(e.toScreenNoRotation([0,0],[this.x,this.y]),2),o=s[0],u=s[1],l=this.width/this.rangeX*r,c=this.height/this.rangeY*r;(0,a.s)(n,l,0,0,0,c,0,o,u,1),(0,a.m)(this.transforms.dvs,e.displayViewMat3,n)}}]),r}(s.DisplayObject)})),t.register("3v0eQ",(function(r,n){e(r.exports,"default",(function(){return h}));var i=t("8TSCy"),a=t("2VlWd"),s=t("66IJZ"),o=t("3FBIK"),u=t("cq8Fg"),l=t("ht01f"),c=function(e,t){return e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col},h=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e){var n;return i.classCallCheck(this,r),(n=t.call(this))._tileInfoView=e,i.possibleConstructorReturn(n)}return i.createClass(r,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"renderChildren",value:function(e){this.sortChildren(c),this.setStencilReference(e),i.get(i.getPrototypeOf(r.prototype),"renderChildren",this).call(this,e)}},{key:"createRenderParams",value:function(e){var t=e.state,n=i.get(i.getPrototypeOf(r.prototype),"createRenderParams",this).call(this,e);return n.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,n.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),n}},{key:"prepareRenderPasses",value:function(e){var t=this,n=i.get(i.getPrototypeOf(r.prototype),"prepareRenderPasses",this).call(this,e);return n.push(e.registerRenderPass({name:"stencil",brushes:[l.default],drawPhase:s.WGLDrawPhase.DEBUG|s.WGLDrawPhase.MAP|s.WGLDrawPhase.HIGHLIGHT,target:function(){return t.getStencilTarget()}})),(0,a.default)("esri-tiles-debug")&&n.push(e.registerRenderPass({name:"tileInfo",brushes:[u.default],drawPhase:s.WGLDrawPhase.DEBUG,target:function(){return t.children}})),n}},{key:"getStencilTarget",value:function(){return this.children}},{key:"updateTransforms",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=this._tileInfoView.getTileResolution(s.key);s.setTransform(e,o)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"setStencilReference",value:function(e){var t=1,r=!0,n=!1,i=void 0;try{for(var a,s=this.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.stencilRef=t++}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}}]),r}(o.default)})),t.register("aUYE0",(function(r,n){e(r.exports,"default",(function(){return c}));var i=t("8TSCy"),a=t("7eJjO"),s=t("6dXDO"),o=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("fcwIv"),l=function(e){"use strict";i.inherits(r,e);var t=i.createSuper(r);function r(e){var n;return i.classCallCheck(this,r),(n=t.call(this,e)).tiles=new Map,i.possibleConstructorReturn(n)}return i.createClass(r,[{key:"destroy",value:function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}},{key:"updating",get:function(){return this.isUpdating()}},{key:"acquireTile",value:function(e){var t=this,r=this.createTile(e);return r.once("isReady",(function(){return t.notifyChange("updating")})),this.tiles.set(e.id,r),r}},{key:"forceAttributeTextureUpload",value:function(){}},{key:"forEachTile",value:function(e){this.tiles.forEach(e)}},{key:"releaseTile",value:function(e){this.tiles.delete(e.key.id),this.disposeTile(e)}},{key:"isUpdating",value:function(){var e=!0;return this.tiles.forEach((function(t){e=e&&t.isReady})),!e}},{key:"setHighlight",value:function(){}},{key:"invalidateLabels",value:function(){}},{key:"requestUpdate",value:function(){this.layerView.requestUpdate()}}]),r}(s.HandleOwner);(0,a._)([(0,o.property)()],l.prototype,"layer",void 0),(0,a._)([(0,o.property)()],l.prototype,"layerView",void 0),(0,a._)([(0,o.property)()],l.prototype,"tileInfoView",void 0),(0,a._)([(0,o.property)()],l.prototype,"updating",null);var c=l=(0,a._)([(0,u.subclass)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],l)})),t.register("cCHof",(function(r,n){e(r.exports,"HeatmapSource",(function(){return s}));var i=t("8TSCy"),a=t("e51b3"),s=function(){"use strict";function e(){i.classCallCheck(this,e),this.gradient=null,this.height=512,this.width=512}return i.createClass(e,[{key:"render",value:function(e){(0,a.drawHeatmap)(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}]),e}()})),t.register("iTfMY",(function(t,r){e(t.exports,"radToByte",(function(){return o})),e(t.exports,"degToByte",(function(){return u})),e(t.exports,"log2",(function(){return l})),e(t.exports,"between",(function(){return c}));Number.POSITIVE_INFINITY;var n=Math.PI,i=128/n,a=1/Math.LN2;function s(e,t){return(e%=t)>=0?e:e+t}function o(e){return s(e*i,256)}function u(e){return s(.7111111111111111*e,256)}function l(e){return Math.log(e)*a}function c(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}})),t.register("2ndsO",(function(t,r){e(t.exports,"e",(function(){return s}));var n,i,a={exports:{}};n=a,void 0!==(i=function(){function e(e,i,a){a=a||2;var s,o,l,h,f,d,y,v=i&&i.length,p=v?i[0]*a:e.length,g=t(e,0,p,a,!0),m=[];if(!g||g.next===g.prev)return m;if(v&&(g=function(e,n,i,a){var s,o,l,h=[];for(s=0,o=n.length;s<o;s++)(l=t(e,n[s]*a,s<o-1?n[s+1]*a:e.length,a,!1))===l.next&&(l.steiner=!0),h.push(x(l));for(h.sort(u),s=0;s<h.length;s++)i=r(i=c(h[s],i),i.next);return i}(e,i,g,a)),e.length>80*a){s=l=e[0],o=h=e[1];for(var k=a;k<p;k+=a)(f=e[k])<s&&(s=f),(d=e[k+1])<o&&(o=d),f>l&&(l=f),d>h&&(h=d);y=0!==(y=Math.max(l-s,h-o))?1/y:0}return n(g,m,a,s,o,y),m}function t(e,t,r,n,i){var a,s;if(i===R(e,t,r,n)>0)for(a=t;a<r;a+=n)s=T(a,e[a],e[a+1],s);else for(a=r-n;a>=t;a-=n)s=T(a,e[a],e[a+1],s);if(s&&p(s,s.next)){var o=s.next;_(s),s=o}return s}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!p(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{var i=n.prev;if(_(n),(n=t=i)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,u,l,c,h,x){if(e){!x&&h&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=f(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,s,o,u,l=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,n=r,o=0,t=0;t<l&&(o++,n=n.nextZ);t++);for(u=l;o>0||u>0&&n;)0!==o&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(s>1)}(i)}(e,l,c,h);for(var d,y,v=e;e.prev!==e.next;)if(d=e.prev,y=e.next,h?a(e,l,c,h):i(e))t.push(d.i/u),t.push(e.i/u),t.push(y.i/u),_(e),e=y.next,v=y.next;else if((e=y)===v){x?1===x?n(e=s(r(e),t,u),t,u,l,c,h,2):2===x&&o(e,t,u,l,c,h):n(r(e),t,u,l,c,h,1);break}}}function i(e){var t=e.prev,r=e,n=e.next;if(v(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(d(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&v(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(e,t,r,n){var i=e.prev,a=e,s=e.next;if(v(i,a,s)>=0)return!1;for(var o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,u=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,l=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,c=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,h=f(o,u,t,r,n),x=f(l,c,t,r,n),y=e.prevZ,p=e.nextZ;y&&y.z>=h&&p&&p.z<=x;){if(y!==e.prev&&y!==e.next&&d(i.x,i.y,a.x,a.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,p!==e.prev&&p!==e.next&&d(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&d(i.x,i.y,a.x,a.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;p&&p.z<=x;){if(p!==e.prev&&p!==e.next&&d(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function s(e,t,n){var i=e;do{var a=i.prev,s=i.next.next;!p(a,s)&&g(a,i,i.next,s)&&w(a,s)&&w(s,a)&&(t.push(a.i/n),t.push(i.i/n),t.push(s.i/n),_(i),_(i.next),i=e=s),i=i.next}while(i!==e);return r(i)}function o(e,t,i,a,s,o){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&y(u,l)){var c=b(u,l);return u=r(u,u.next),c=r(c,c.next),n(u,t,i,a,s,o),void n(c,t,i,a,s,o)}l=l.next}u=u.next}while(u!==e)}function u(e,t){return e.x-t.x}function l(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function c(e,t){var n=function(e,t){var r,n=t,i=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>s){if(s=o,o===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r;var u,l=r,c=r.x,f=r.y,x=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&d(a<f?i:s,a,c,f,a<f?s:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),w(n,e)&&(u<x||u===x&&(n.x>r.x||n.x===r.x&&h(r,n)))&&(r=n,x=u)),n=n.next}while(n!==l);return r}(e,t);if(!n)return t;var i=b(n,e),a=r(n,n.next),s=l(i);return r(s,s.next),a=l(a),l(t===n?a:t)}function h(e,t){return v(e.prev,e,t.prev)<0&&v(t.next,e,e.next)<0}function f(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function x(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function d(e,t,r,n,i,a,s,o){return(i-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(n-o)-(r-s)*(t-o)>=0&&(r-s)*(a-o)-(i-s)*(n-o)>=0}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&g(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(v(e.prev,e,t.prev)||v(e,t.prev,t))||p(e,t)&&v(e.prev,e,e.next)>0&&v(t.prev,t,t.next)>0)}function v(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function p(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,r,n){var i=k(v(e,t,r)),a=k(v(e,t,n)),s=k(v(r,n,e)),o=k(v(r,n,t));return i!==a&&s!==o||!(0!==i||!m(e,r,t))||!(0!==a||!m(e,n,t))||!(0!==s||!m(r,e,n))||!(0!==o||!m(r,t,n))}function m(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function k(e){return e>0?1:e<0?-1:0}function w(e,t){return v(e.prev,e,e.next)<0?v(e,t,e.next)>=0&&v(e,e.prev,t)>=0:v(e,t,e.prev)<0||v(e,e.next,t)<0}function b(e,t){var r=new I(e.i,e.x,e.y),n=new I(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function T(e,t,r,n){var i=new I(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function I(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,r,n){for(var i=0,a=t,s=r-n;a<r;a+=n)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}return e.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,s=Math.abs(R(e,0,a,r));if(i)for(var o=0,u=t.length;o<u;o++){var l=t[o]*r,c=o<u-1?t[o+1]*r:e.length;s-=Math.abs(R(e,l,c,r))}var h=0;for(o=0;o<n.length;o+=3){var f=n[o]*r,x=n[o+1]*r,d=n[o+2]*r;h+=Math.abs((e[f]-e[d])*(e[x+1]-e[f+1])-(e[f]-e[x])*(e[d+1]-e[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[i][a][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e}())&&(n.exports=i);var s=a.exports})),t.register("ebEEs",(function(t,r){e(t.exports,"DECLUTTER_TILES",(function(){return n})),e(t.exports,"COLLISION_GRID_CELL_SIZE",(function(){return i})),e(t.exports,"DECLUTTER_BUDGET",(function(){return a})),e(t.exports,"FADE_DURATION",(function(){return s}));var n=!0,i=32,a=1.5,s=200}))}();
//# sourceMappingURL=HeatmapTileRenderer.0a57fd37.js.map
