!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("eBjmH",(function(n,r){e(n.exports,"process",(function(){return f})),e(n.exports,"initialize",(function(){return E})),e(n.exports,"dracoDecompressPointCloudData",(function(){return a})),e(n.exports,"filterObbsForModifications",(function(){return l})),e(n.exports,"filterObbsForModificationsSync",(function(){return x})),e(n.exports,"setModifications",(function(){return d})),e(n.exports,"setModificationsSync",(function(){return y})),e(n.exports,"setLegacySchema",(function(){return h})),e(n.exports,"destroyContext",(function(){return g})),e(n.exports,"interpretObbModificationResults",(function(){return _})),e(n.exports,"test",(function(){return P}));var i=t("7qybv"),o=t("kkxEC"),s=t("1yzlF"),c=t("gtROr"),u=t("3ImqX");async function f(e){await E();const t=[e.geometryBuffer];return{result:b(e,t),transferList:t}}async function a(e){var t;await E();const n=[e.geometryBuffer],{geometryBuffer:r}=e,i=r.byteLength,s=p._malloc(i),c=new Uint8Array(p.HEAPU8.buffer,s,i);c.set(new Uint8Array(r));const u=p.dracoDecompressPointCloudData(s,c.byteLength);if(p._free(s),u.error.length>0)throw`i3s.wasm: ${u.error}`;const f=(null===(t=u.featureIds)||void 0===t?void 0:t.length)>0?(0,o.slice)(u.featureIds):null,a=(0,o.slice)(u.positions);return f&&n.push(f.buffer),n.push(a.buffer),{result:{positions:a,featureIds:f},transferList:n}}async function l(e){await E(),x(e);const t={buffer:e.buffer};return{result:t,transferList:[t.buffer]}}async function d(e){await E(),y(e)}async function h(e){await E(),p.setLegacySchema(e.context,e.jsonSchema)}function g(e){w(e)}let m,p;function y(e){const t=e.modifications,n=p._malloc(8*t.length),r=new Float64Array(p.HEAPU8.buffer,n,t.length);for(let e=0;e<t.length;++e)r[e]=t[e];p.setModifications(e.context,n,t.length,e.isGeodetic),p._free(n)}function b(e,t){if(!p)return null;const{context:n,localOrigin:r,globalTrafo:c,mbs:u,obb:f,elevationOffset:a,geometryBuffer:l,geometryDescriptor:d,indexToVertexProjector:h,vertexToRenderProjector:g}=e,m=p._malloc(l.byteLength),y=p._malloc(33*Float64Array.BYTES_PER_ELEMENT),b=new Uint8Array(p.HEAPU8.buffer,m,l.byteLength);b.set(new Uint8Array(l));const _=new Float64Array(p.HEAPU8.buffer,y,33);M(_,r);let x=_.byteOffset+3*_.BYTES_PER_ELEMENT,w=new Float64Array(_.buffer,x);M(w,c),x+=16*_.BYTES_PER_ELEMENT,w=new Float64Array(_.buffer,x),M(w,u),x+=4*_.BYTES_PER_ELEMENT,(0,i.isSome)(f)&&(w=new Float64Array(_.buffer,x),M(w,f.center),x+=3*_.BYTES_PER_ELEMENT,w=new Float64Array(_.buffer,x),M(w,f.halfSize),x+=3*_.BYTES_PER_ELEMENT,w=new Float64Array(_.buffer,x),M(w,f.quaternion));const E=d,P={isDraco:!1,isLegacy:!1,color:e.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:e.needNormals&&e.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:e.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:e.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:E.featureIndex},S=p.process(n,!!e.obb,m,b.byteLength,E,P,y,a,h,g,e.normalReferenceFrame);if(p._free(y),p._free(m),S.error.length>0)throw`i3s.wasm: ${S.error}`;if(S.discarded)return null;const I=S.componentOffsets.length>0?(0,o.slice)(S.componentOffsets):null,v=S.featureIds.length>0?(0,o.slice)(S.featureIds):null,T=(0,o.slice)(S.interleavedVertedData).buffer,A=S.indicesType===s.IndexType.Int16?(0,o.slice)(new Uint16Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/2)):(0,o.slice)(new Uint32Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/4)),O=(0,o.slice)(S.positions),L=S.positionIndicesType===s.IndexType.Int16?(0,o.slice)(new Uint16Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/2)):(0,o.slice)(new Uint32Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/4)),R={layout:e.layouts[0],interleavedVertexData:T,indices:A,hasColors:S.hasColors,hasModifications:S.hasModifications,positionData:{data:O,indices:L}};return v&&t.push(v.buffer),I&&t.push(I.buffer),t.push(T),t.push(A.buffer),t.push(O.buffer),t.push(L.buffer),{componentOffsets:I,featureIds:v,transformedGeometry:R,obb:S.obb}}function _(e){return 0===e?u.NodeIMModificationImpact.Unmodified:1===e?u.NodeIMModificationImpact.PotentiallyModified:2===e?u.NodeIMModificationImpact.Culled:u.NodeIMModificationImpact.Unknown}function x(e){const{context:t,buffer:n}=e,r=p._malloc(n.byteLength),i=n.byteLength/Float64Array.BYTES_PER_ELEMENT,o=new Float64Array(p.HEAPU8.buffer,r,i),s=new Float64Array(n);o.set(s),p.filterOBBs(t,r,i),s.set(o),p._free(r)}function w(e){p&&p.destroy(e)}function M(e,t){for(let n=0;n<t.length;++n)e[n]=t[n]}function E(){return p?Promise.resolve():(m||(m=(0,c.get)().then((e=>{p=e,m=null}))),m)}const P={transform:b,destroy:w}})),t.register("1yzlF",(function(t,n){var r,i,o;e(t.exports,"IndexType",(function(){return r})),(o=r||(r={}))[o.None=0]="None",o[o.Int16=1]="Int16",o[o.Int32=2]="Int32",function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(i||(i={}))})),t.register("gtROr",(function(n,r){e(n.exports,"get",(function(){return o}));var i=t("i9j5X");function o(){return c||(c=new Promise((e=>t("ik3pa").then((e=>e.i)).then((({default:t})=>{const n=t({locateFile:s,onRuntimeInitialized:()=>e(n)});delete n.then})))).catch((e=>{throw e}))),c}function s(e){return(0,i.getAssetUrl)(`esri/libs/i3s/${e}`)}let c})),t.register("ik3pa",(function(e,n){e.exports=t("4WKyX")(t("aNJCr").getBundleURL("25Kje")+t("iE7OH").resolve("9O0mo")).then((()=>t("3Iuxa")))})),t.register("3ImqX",(function(n,r){e(n.exports,"NodeIMModificationImpact",(function(){return o}));var i,o,s,c,u,f;t("8hg3f");(f=i||(i={}))[f.Unmodified=0]="Unmodified",f[f.Culled=1]="Culled",f[f.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(o||(o={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(s||(s={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(c||(c={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(u||(u={}))})),t.register("8hg3f",(function(n,r){e(n.exports,"c",(function(){return y})),e(n.exports,"b",(function(){return b})),e(n.exports,"d",(function(){return _})),e(n.exports,"g",(function(){return x})),e(n.exports,"f",(function(){return w})),e(n.exports,"i",(function(){return P})),e(n.exports,"m",(function(){return L})),t("2VlWd");var i=t("jHOLN"),o=t("iVfa0"),s=t("7qybv"),c=t("gEEzE"),u=t("e4Xv2"),f=t("5YMIf"),a=t("hRPEZ"),l=t("iLaO9"),d=t("2BLER"),h=t("8lK3H"),g=t("ckIlK"),m=t("4Tl7p");const p=i.default.getLogger("esri.geometry.support.sphere");function y(){return(0,l.c)()}function b(e,t=y()){return(0,a.c)(t,e)}function _(e){return e[3]}function x(e){return e}function w(e,t,n,r){return(0,l.f)(e,t,n,r)}function M(e,t,n){if((0,s.isNone)(t))return!1;const{origin:r,direction:i}=t,o=E;o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2];const c=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],u=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),f=u*u-4*c*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(f<0)return!1;const a=Math.sqrt(f);let l=(-u-a)/(2*c);const d=(-u+a)/(2*c);return(l<0||d<l&&d>0)&&(l=d),!(l<0||(n&&(n[0]=r[0]+i[0]*l,n[1]=r[1]+i[1]*l,n[2]=r[2]+i[2]*l),0))}const E=(0,f.c)();function P(e,t){return M(e,t,null)}function S(e,t,n){const r=m.sv3d.get(),i=m.sm4d.get();(0,u.f)(r,t.origin,t.direction);const o=_(e);(0,u.f)(n,r,t.origin),(0,u.g)(n,n,1/(0,u.l)(n)*o);const s=v(e,t.origin),f=(0,g.angle)(t.origin,n);return(0,c.d)(i,f+s,r),(0,u.m)(n,n,i),n}function I(e,t,n){const r=(0,u.b)(m.sv3d.get(),t,e),i=(0,u.g)(m.sv3d.get(),r,e[3]/(0,u.l)(r));return(0,u.a)(n,i,e)}function v(e,t){const n=(0,u.b)(m.sv3d.get(),t,e),r=(0,u.l)(n),i=_(e),s=i+Math.abs(i-r);return(0,o.acosClamped)(i/s)}const T=(0,f.c)();function A(e,t,n,r){const i=(0,u.b)(T,t,e);switch(n){case d.Axis.X:{const e=(0,o.cartesianToSpherical)(i,T)[2];return(0,u.s)(r,-Math.sin(e),Math.cos(e),0)}case d.Axis.Y:{const e=(0,o.cartesianToSpherical)(i,T),t=e[1],n=e[2],s=Math.sin(t);return(0,u.s)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(t))}case d.Axis.Z:return(0,u.n)(r,i);default:return}}function O(e,t){const n=(0,u.b)(R,t,e);return(0,u.l)(n)-e[3]}function L(e,t){const n=(0,u.d)(e,t),r=_(e);return n<=r*r}const R=(0,f.c)(),B=y();Object.freeze(Object.defineProperty({__proto__:null,create:y,copy:b,fromCenterAndRadius:function(e,t){return(0,l.f)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:function(e){e[0]=e[1]=e[2]=e[3]=0},fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},getRadius:_,getCenter:x,fromValues:w,elevate:function(e,t,n){return e!==n&&(0,u.c)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return p.error("sphere.setExtent is not yet supported"),e===n?n:b(e,n)},intersectRay:M,intersectsRay:P,intersectRayClosestSilhouette:function(e,t,n){if(M(e,t,n))return n;const r=S(e,t,m.sv3d.get());return(0,u.a)(n,t.origin,(0,u.g)(m.sv3d.get(),t.direction,(0,u.i)(t.origin,r)/(0,u.l)(t.direction))),n},closestPointOnSilhouette:S,closestPoint:function(e,t,n){return M(e,t,n)?n:((0,h.closestPoint)(t,e,n),I(e,n,n))},projectPoint:I,distanceToSilhouette:function(e,t){const n=(0,u.b)(m.sv3d.get(),t,e),r=(0,u.p)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:v,axisAt:A,altitudeAt:O,setAltitudeAt:function(e,t,n,r){const i=O(e,t),o=A(e,t,d.Axis.Z,R),s=(0,u.g)(R,o,n-i);return(0,u.a)(r,t,s)},containsPoint:L,tmpSphere:B},Symbol.toStringTag,{value:"Module"}))})),t.register("2BLER",(function(t,n){var r,i;e(t.exports,"Axis",(function(){return r})),(i=r||(r={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z"})),t.register("8lK3H",(function(n,r){e(n.exports,"create",(function(){return c})),e(n.exports,"wrap",(function(){return u})),e(n.exports,"copy",(function(){return f})),e(n.exports,"fromValues",(function(){return a})),e(n.exports,"closestPoint",(function(){return l}));t("lNwWH");var i=t("jubE1"),o=t("e4Xv2"),s=t("5YMIf");t("4Tl7p");function c(e){return e?{origin:(0,s.a)(e.origin),direction:(0,s.a)(e.direction)}:{origin:(0,s.c)(),direction:(0,s.c)()}}function u(e,t){const n=d.get();return n.origin=e,n.direction=t,n}function f(e,t=c()){return a(e.origin,e.direction,t)}function a(e,t,n=c()){return(0,o.c)(n.origin,e),(0,o.c)(n.direction,t),n}function l(e,t,n){const r=(0,o.e)(e.direction,(0,o.b)(n,t,e.origin));return(0,o.a)(n,e.origin,(0,o.g)(n,e.direction,r)),n}const d=new(0,i.ObjectStack)((function(){return{origin:null,direction:null}}))})),t.register("jubE1",(function(n,r){e(n.exports,"ObjectStack",(function(){return o}));var i=t("e02MS");class o{get(){return 0===this._itemsPtr&&(0,i.nextTick)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,s));e++)this._items.push(this.allocator())}constructor(e){this.allocator=e,this._items=[],this._itemsPtr=0,this._grow()}}const s=1024})),t.register("4Tl7p",(function(n,r){e(n.exports,"sv3d",(function(){return o})),e(n.exports,"sv4d",(function(){return s})),e(n.exports,"sm4d",(function(){return c}));var i=t("61Wey");i.VectorStack.createVec2f64();const o=i.VectorStack.createVec3f64(),s=i.VectorStack.createVec4f64(),c=(i.VectorStack.createMat3f64(),i.VectorStack.createMat4f64());i.VectorStack.createQuatf64()})),t.register("61Wey",(function(n,r){e(n.exports,"VectorStack",(function(){return d}));var i=t("dbxRf"),o=t("e02MS"),s=t("gnwu9"),c=t("89KCq"),u=t("ksUrQ"),f=t("iE3Nt"),a=t("5YMIf"),l=t("iLaO9");class d{get(){0===this._itemsPtr&&(0,o.nextTick)((()=>this._reset()));const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const e=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let t=0;t<this._itemsPerBuffer;++t)this._items.push(this.itemCreate(e,t*this.itemByteSize));this._buffers.push(e)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=h){return new d(16,f.c,e)}static createVec3f64(e=h){return new d(24,a.b,e)}static createVec4f64(e=h){return new d(32,l.a,e)}static createMat3f64(e=h){return new d(72,s.a,e)}static createMat4f64(e=h){return new d(128,c.a,e)}static createQuatf64(e=h){return new d(32,u.c,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}constructor(e,t,n){this.itemByteSize=e,this.itemCreate=t,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}}const h=4*i.ByteSizeUnit.KILOBYTES})),t.register("gnwu9",(function(t,n){function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}e(t.exports,"c",(function(){return r})),e(t.exports,"a",(function(){return i}));Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,o,s,c,u){return[e,t,n,r,i,o,s,c,u]},createView:i},Symbol.toStringTag,{value:"Module"}))})),t.register("89KCq",(function(t,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t){return new Float64Array(e,t,16)}e(t.exports,"c",(function(){return r})),e(t.exports,"b",(function(){return i})),e(t.exports,"a",(function(){return o})),e(t.exports,"I",(function(){return s}));const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,o,s,c,u,f,a,l,d,h,g,m){return[e,t,n,r,i,o,s,c,u,f,a,l,d,h,g,m]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))})),t.register("ksUrQ",(function(t,n){function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}e(t.exports,"a",(function(){return r})),e(t.exports,"b",(function(){return i})),e(t.exports,"c",(function(){return o})),e(t.exports,"I",(function(){return s}));const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r){return[e,t,n,r]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))})),t.register("ckIlK",(function(n,r){e(n.exports,"projectPointSignedLength",(function(){return c})),e(n.exports,"angle",(function(){return u}));var i=t("iVfa0"),o=t("e4Xv2"),s=t("5YMIf");function c(e,t){return(0,o.e)(e,t)/(0,o.l)(e)}function u(e,t){const n=(0,o.e)(e,t)/((0,o.l)(e)*(0,o.l)(t));return-(0,i.acosClamped)(n)}(0,s.c)(),(0,s.c)()}))}();
//# sourceMappingURL=SceneLayerWorker.dea33f55.js.map
