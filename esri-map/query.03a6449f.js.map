{"mappings":"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","sources":["node_modules/@arcgis/core/rest/query/operations/query.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import{isSome as t}from\"../../../core/maybe.js\";import{join as r,urlToObject as n}from\"../../../core/urlUtils.js\";import{getJsonType as i}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as o}from\"../../../geometry/support/normalizeUtils.js\";import{mapParameters as a}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as s}from\"./pbfQueryUtils.js\";import{applyFeatureSetZUnitScaling as u}from\"./queryZScale.js\";const l=\"Layer does not support extent calculation.\";function m(e,t){if(t&&\"extent\"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&\"point\"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function y(e,r){const n=e.geometry,o=e.toJSON();delete o.compactGeometryEnabled,delete o.defaultSpatialReferenceEnabled;const a=o,s=e.outSpatialReference;let u,l;if(t(n)&&(u=n.spatialReference,l=n.spatialReference.wkid||JSON.stringify(n.spatialReference),a.geometryType=i(n),a.geometry=m(n,e.compactGeometryEnabled),a.inSR=l),o.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(\",\")),o.objectIds&&(a.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(a.orderByFields=o.orderByFields.join(\",\")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete a.outFields:-1!==o.outFields.indexOf(\"*\")?a.outFields=\"*\":a.outFields=o.outFields.join(\",\"),o.outSR?a.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(a.outSR=a.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(a.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(a.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&t(u)&&t(e.quantizationParameters)&&t(e.quantizationParameters.extent)&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete o.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(a.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(a.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(a.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const e=o.timeExtent,{start:t,end:r}=e;null==t&&null==r||(a.time=t===r?t:`${null==t?\"null\":t},${null==r?\"null\":r}`),delete o.timeExtent}return e.defaultSpatialReferenceEnabled&&t(u)&&t(s)&&u.equals(s)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function c(e,r,n,i){const o=t(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await E(e,r,\"json\",i);return u(r,n,o.data),o}async function d(e,r,n,i){if(t(r.timeExtent)&&r.timeExtent.isEmpty)return Promise.resolve({data:n.createFeatureResult()});const o=await f(e,r,i),a=o;return a.data=s(o.data,n),a}function f(e,t,r){return E(e,t,\"pbf\",r)}function p(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(e,r,\"json\",n,{returnIdsOnly:!0})}function S(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(e,r,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}function x(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):E(e,r,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty(\"extent\"))return e;if(t.features)throw new Error(l);if(t.hasOwnProperty(\"count\"))throw new Error(l);return e}))}function E(i,s,u,l={},m={}){const c=\"string\"==typeof i?n(i):i,d=s.geometry?[s.geometry]:[];return l.responseType=\"pbf\"===u?\"array-buffer\":\"json\",o(d,null,l).then((n=>{const i=n&&n[0];t(i)&&((s=s.clone()).geometry=i);const o=a({...c.query,f:u,...m,...y(s,m)});return e(r(c.path,\"query\"),{...l,query:{...o,...l.query}})}))}export{m as encodeGeometry,c as executeQuery,S as executeQueryForCount,x as executeQueryForExtent,p as executeQueryForIds,d as executeQueryPBF,f as executeQueryPBFBuffer,y as queryToQueryStringParameters,E as runQuery};\n"],"names":["$8TSCy","parcelRequire","$de77fa763b440300$var$l","$de77fa763b440300$export$a51a692f286d7124","e1","t1","type","concat","xmin","ymin","xmax","ymax","x","y","r1","toJSON","spatialReference","JSON","stringify","$de77fa763b440300$export$bc6cbcec9d7c47c4","e2","r2","n1","geometry","o1","compactGeometryEnabled","defaultSpatialReferenceEnabled","u1","l1","a1","s1","outSpatialReference","$7qybv","isSome","wkid","geometryType","$79LpT","getJsonType","inSR","groupByFieldsForStatistics","join","objectIds","orderByFields","outFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","indexOf","outSR","returnGeometry","returnCentroid","outStatistics","pixelSize","quantizationParameters","extent","equals","parameterValues","rangeValues","dynamicDataSource","layer","source","timeExtent","_$e","_$t","start","_$r","end","time","defaultSR","$de77fa763b440300$export$786299a18b5685fc","e3","r3","n2","i1","$de77fa763b440300$var$_c","apply","this","arguments","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","o2","isEmpty","data","features","$de77fa763b440300$export$1b084def02c50fa0","_ctx","t0","$4JATB","applyFeatureSetZUnitScaling","$de77fa763b440300$export$9f73cf7d7c68d5aa","e4","r4","n3","i2","$de77fa763b440300$var$_d","o3","a2","Promise","resolve","createFeatureResult","$de77fa763b440300$export$ad12b2ae30da47a9","sent","$6JnOG","parsePBFFeatureQuery","e5","t2","r5","$de77fa763b440300$export$33ea1d65b3f763","e6","r6","n4","$de77fa763b440300$export$76c93621284f88bc","e7","r7","n5","count","$de77fa763b440300$export$dd0e0238b43e3274","e8","r8","n6","then","e9","hasOwnProperty","Error","i3","s2","u2","l2","length","m1","c1","$kYueh","urlToObject","d1","responseType","$5On35","normalizeCentralMeridian","n7","_$i","clone","_$o","$bPDFo","mapParameters","objectSpread","query","f","$9pNSx","default","path"],"version":3,"file":"query.03a6449f.js.map"}