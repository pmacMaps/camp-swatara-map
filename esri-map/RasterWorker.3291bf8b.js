!function(){function e(e){return e&&e.__esModule?e.default:e}function r(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("4mBLQ",(function(n,o){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),r(n.exports,"default",(function(){return S}));var a=t("8TSCy"),s=t("2TvXO");t("2ILM8");var f=t("7qybv"),l=t("8fZmy"),u=t("idX6c"),c=t("2G55A"),p=t("alctY"),y=t("jxAFe"),d=t("2hwKJ"),v=t("gzPy2"),m=t("frUQM"),h=t("k8DEI"),x=t("gINRd"),S=function(){"use strict";function r(){a.classCallCheck(this,r)}return a.createClass(r,[{key:"convertVectorFieldData",value:function(e){var r=u.default.fromJSON(e.pixelBlock),t=(0,d.convertVectorFieldData)(r,e.type);return Promise.resolve((0,f.isSome)(t)&&t.toJSON())}},{key:"decode",value:function(r){return a.asyncToGenerator(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.decode)(r.data,r.options);case 2:return n=e.sent,e.abrupt("return",n&&n.toJSON());case 4:case"end":return e.stop()}}),t)})))()}},{key:"symbolize",value:function(e){e.pixelBlock=u.default.fromJSON(e.pixelBlock),e.extent=e.extent?x.default.fromJSON(e.extent):null;var r=this.symbolizer.symbolize(e);return Promise.resolve((0,f.isSome)(r)&&r.toJSON())}},{key:"updateSymbolizer",value:function(r){var t=this;return a.asyncToGenerator(e(s).mark((function n(){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.symbolizer=m.default.fromJSON(r.symbolizerJSON),r.histograms&&"rasterStretch"===(null==(o=t.symbolizer)?void 0:o.rendererJSON.type)&&(t.symbolizer.rendererJSON.histograms=r.histograms);case 2:case"end":return e.stop()}}),n)})))()}},{key:"stretch",value:function(e){var r=this.symbolizer.simpleStretch(u.default.fromJSON(e.srcPixelBlock),e.stretchParams);return Promise.resolve((0,f.isSome)(r)&&r.toJSON())}},{key:"estimateStatisticsHistograms",value:function(e){var r=(0,p.estimateStatisticsHistograms)(u.default.fromJSON(e.srcPixelBlock));return Promise.resolve(r)}},{key:"split",value:function(e){var r=(0,p.split)(u.default.fromJSON(e.srcPixelBlock),e.tileSize,e.maximumPyramidLevel);return r&&r.forEach((function(e,t){r.set(t,null==e?void 0:e.toJSON())})),Promise.resolve(r)}},{key:"mosaicAndTransform",value:function(r){return a.asyncToGenerator(e(s).mark((function t(){var n,o,i,a,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.srcPixelBlocks.map((function(e){return e?new(0,u.default)(e):null})),i=(0,p.mosaic)(o,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize}),l=i,e.abrupt("return",(r.coefs&&(l=(0,p.approximateTransform)(i,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(a=(0,p.getLocalArithmeticNorthRotations)(r.destDimension,r.gcsGrid),l=(0,f.unwrap)((0,d.convertToLocalDirections)(l,r.isUV?"vector-uv":"vector-magdir",a))),{pixelBlock:null==(n=l)?void 0:n.toJSON(),localNorthDirections:a}));case 4:case"end":return e.stop()}}),t)})))()}},{key:"createStreamlinesMesh",value:function(r,t){return a.asyncToGenerator(e(s).mark((function n(){var o,i,a,f;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={data:new Float32Array(r.flowData.buffer),width:r.flowData.width,height:r.flowData.height},e.next=3,(0,h.createStreamlinesMesh)(r.rendererSettings,o,t.signal);case 3:return i=e.sent,a=i.vertexData,f=i.indexData,e.abrupt("return",{result:{vertexBuffer:a.buffer,indexBuffer:f.buffer},transferList:[a.buffer,f.buffer]});case 7:case"end":return e.stop()}}),n)})))()}},{key:"getProjectionOffsetGrid",value:function(r){return a.asyncToGenerator(e(s).mark((function t(){var n,o,i,f;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.default.fromJSON(r.projectedExtent),o=x.default.fromJSON(r.srcBufferExtent),i=null,r.datumTransformationSteps&&(i=new(0,l.default)({steps:r.datumTransformationSteps})),e.t0=r.includeGCSGrid||(0,y.requirePE)(n.spatialReference,o.spatialReference,i),!e.t0){e.next=7;break}return e.next=7,(0,y.load)();case 7:return f=r.rasterTransform?(0,v.readTransform)(r.rasterTransform):null,e.abrupt("return",(0,y.getProjectionOffsetGrid)(a.objectSpread({},r,{projectedExtent:n,srcBufferExtent:o,datumTransformation:i,rasterTransform:f})));case 9:case"end":return e.stop()}}),t)})))()}}]),r}()})),t.register("gzPy2",(function(e,n){r(e.exports,"isTransformSupported",(function(){return l})),r(e.exports,"readTransform",(function(){return u}));var o=t("h5QJK"),i=t("87TLR"),a=t("kSbmb"),s={GCSShiftXform:o.default,IdentityXform:i.default,PolynomialXform:a.default},f=Object.keys(s);function l(e){var r=null==e?void 0:e.type;return!e||f.includes(r)}function u(e){if(!(null==e?void 0:e.type))return null;var r=s[null==e?void 0:e.type];if(r){var t=new r;return t.read(e),t}return null}})),t.register("h5QJK",(function(e,n){r(e.exports,"default",(function(){return u}));var o=t("8TSCy"),i=t("7eJjO"),a=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var s=t("bSafx"),f=t("fcwIv"),l=function(e){"use strict";o.inherits(t,e);var r=o.createSuper(t);function t(){var e;return o.classCallCheck(this,t),(e=r.call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))).type="gcs-shift",e.tolerance=1e-8,o.possibleConstructorReturn(e)}return o.createClass(t,[{key:"forwardTransform",value:function(e){return"point"===(e=e.clone()).type?(e.x>180+this.tolerance&&(e.x-=360),e):(e.xmin>=180-this.tolerance?(e.xmax-=360,e.xmin-=360):e.xmax>180+this.tolerance&&(e.xmin=-180,e.xmax=180),e)}},{key:"inverseTransform",value:function(e){return"point"===(e=e.clone()).type?(e.x<-this.tolerance&&(e.x+=360),e):(e.xmin<-this.tolerance&&(e.xmin+=360,e.xmax+=360),e)}}]),t}(t("gD7nb").default);(0,i._)([(0,s.enumeration)({GCSShiftXform:"gcs-shift"})],l.prototype,"type",void 0),(0,i._)([(0,a.property)()],l.prototype,"tolerance",void 0);var u=l=(0,i._)([(0,f.subclass)("esri.layers.support.rasterTransforms.GCSShiftTransform")],l)})),t.register("gD7nb",(function(e,n){r(e.exports,"default",(function(){return u}));var o=t("8TSCy"),i=t("7eJjO"),a=t("1XAcN"),s=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var f=t("fcwIv"),l=function(e){"use strict";o.inherits(t,e);var r=o.createSuper(t);function t(){return o.classCallCheck(this,t),r.apply(this,arguments)}return o.createClass(t,[{key:"affectsPixelSize",get:function(){return!1}},{key:"forwardTransform",value:function(e){return e}},{key:"inverseTransform",value:function(e){return e}}]),t}(a.JSONSupport);(0,i._)([(0,s.property)()],l.prototype,"affectsPixelSize",null),(0,i._)([(0,s.property)({json:{write:!0}})],l.prototype,"spatialReference",void 0);var u=l=(0,i._)([(0,f.subclass)("esri.layers.support.rasterTransforms.BaseRasterTransform")],l)})),t.register("87TLR",(function(e,n){r(e.exports,"default",(function(){return l}));var o=t("8TSCy"),i=t("7eJjO");t("jHOLN"),t("iJAIC"),t("lNwWH"),t("2VlWd"),t("62edV");var a=t("bSafx"),s=t("fcwIv"),f=function(e){"use strict";o.inherits(t,e);var r=o.createSuper(t);function t(){var e;return o.classCallCheck(this,t),(e=r.call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))).type="identity",o.possibleConstructorReturn(e)}return t}(t("gD7nb").default);(0,i._)([(0,a.enumeration)({IdentityXform:"identity"})],f.prototype,"type",void 0);var l=f=(0,i._)([(0,s.subclass)("esri.layers.support.rasterTransforms.IdentityTransform")],f)})),t.register("kSbmb",(function(e,n){r(e.exports,"default",(function(){return h}));var o=t("8TSCy"),i=t("7eJjO");t("2ILM8");var a=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var s=t("bSafx"),f=t("eB8sj"),l=t("fcwIv"),u=t("kced1"),c=t("gD7nb"),p=t("d1Fqh"),y=t("gINRd");function d(e,r,t){var n=r.x,o=r.y;if(t<2)return{x:e[0]+n*e[2]+o*e[4],y:e[1]+n*e[3]+o*e[5]};if(2===t){var i=n*n,a=o*o,s=n*o;return{x:e[0]+n*e[2]+o*e[4]+i*e[6]+s*e[8]+a*e[10],y:e[1]+n*e[3]+o*e[5]+i*e[7]+s*e[9]+a*e[11]}}var f=n*n,l=o*o,u=n*o,c=f*n,p=f*o,y=n*l,d=o*l;return{x:e[0]+n*e[2]+o*e[4]+f*e[6]+u*e[8]+l*e[10]+c*e[12]+p*e[14]+y*e[16]+d*e[18],y:e[1]+n*e[3]+o*e[5]+f*e[7]+u*e[9]+l*e[11]+c*e[13]+p*e[15]+y*e[17]+d*e[19]}}function v(e,r,t){var n=r.xmin,o=r.ymin,i=r.xmax,a=r.ymax,s=r.spatialReference,f=[];if(t<2)f.push({x:n,y:a}),f.push({x:i,y:a}),f.push({x:n,y:o}),f.push({x:i,y:o});else{for(var l=10,u=0;u<l;u++)f.push({x:n,y:o+(a-o)*u/(l-1)}),f.push({x:i,y:o+(a-o)*u/(l-1)});l=8;for(var c=1;c<=l;c++)f.push({x:n+(i-n)*c/l,y:o}),f.push({x:n+(i-n)*c/l,y:a})}var p=(f=f.map((function(r){return d(e,r,t)}))).map((function(e){return e.x})),v=f.map((function(e){return e.y}));return new(0,y.default)({xmin:Math.min.apply(null,p),xmax:Math.max.apply(null,p),ymin:Math.min.apply(null,v),ymax:Math.max.apply(null,v),spatialReference:s})}var m=function(e){"use strict";o.inherits(t,e);var r=o.createSuper(t);function t(){var e;return o.classCallCheck(this,t),(e=r.call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))).polynomialOrder=1,e.type="polynomial",o.possibleConstructorReturn(e)}return o.createClass(t,[{key:"readForwardCoefficients",value:function(e,r){var t=r.coeffX,n=r.coeffY;if(null==t||!t.length||null==n||!n.length||t.length!==n.length)return null;for(var o=[],i=0;i<t.length;i++)o.push(t[i]),o.push(n[i]);return o}},{key:"writeForwardCoefficients",value:function(e,r,t){for(var n=[],o=[],i=0;i<(null==e?void 0:e.length);i++)i%2==0?n.push(e[i]):o.push(e[i]);r.coeffX=n,r.coeffY=o}},{key:"inverseCoefficients",get:function(){var e=this._get("inverseCoefficients"),r=this._get("forwardCoefficients");return!e&&r&&this.polynomialOrder<2&&(e=function(e){var r=o.slicedToArray(e,6),t=r[0],n=r[1],i=r[2],a=r[3],s=r[4],f=r[5],l=i*f-s*a,u=s*a-i*f;return[(s*n-t*f)/l,(i*n-t*a)/u,f/l,a/u,-s/l,-i/u]}(r)),e},set:function(e){this._set("inverseCoefficients",e)}},{key:"readInverseCoefficients",value:function(e,r){var t=r.inverseCoeffX,n=r.inverseCoeffY;if(null==t||!t.length||null==n||!n.length||t.length!==n.length)return null;for(var o=[],i=0;i<t.length;i++)o.push(t[i]),o.push(n[i]);return o}},{key:"writeInverseCoefficients",value:function(e,r,t){for(var n=[],o=[],i=0;i<(null==e?void 0:e.length);i++)i%2==0?n.push(e[i]):o.push(e[i]);r.inverseCoeffX=n,r.inverseCoeffY=o}},{key:"affectsPixelSize",get:function(){return this.polynomialOrder>0}},{key:"forwardTransform",value:function(e){if("point"===e.type){var r=d(this.forwardCoefficients,e,this.polynomialOrder);return new(0,p.default)({x:r.x,y:r.y,spatialReference:e.spatialReference})}return v(this.forwardCoefficients,e,this.polynomialOrder)}},{key:"inverseTransform",value:function(e){if("point"===e.type){var r=d(this.inverseCoefficients,e,this.polynomialOrder);return new(0,p.default)({x:r.x,y:r.y,spatialReference:e.spatialReference})}return v(this.inverseCoefficients,e,this.polynomialOrder)}}]),t}(c.default);(0,i._)([(0,a.property)({json:{write:!0}})],m.prototype,"polynomialOrder",void 0),(0,i._)([(0,a.property)()],m.prototype,"forwardCoefficients",void 0),(0,i._)([(0,f.reader)("forwardCoefficients",["coeffX","coeffY"])],m.prototype,"readForwardCoefficients",null),(0,i._)([(0,u.writer)("forwardCoefficients")],m.prototype,"writeForwardCoefficients",null),(0,i._)([(0,a.property)({json:{write:!0}})],m.prototype,"inverseCoefficients",null),(0,i._)([(0,f.reader)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],m.prototype,"readInverseCoefficients",null),(0,i._)([(0,u.writer)("inverseCoefficients")],m.prototype,"writeInverseCoefficients",null),(0,i._)([(0,a.property)()],m.prototype,"affectsPixelSize",null),(0,i._)([(0,s.enumeration)({PolynomialXform:"polynomial"})],m.prototype,"type",void 0);var h=m=(0,i._)([(0,l.subclass)("esri.layers.support.rasterTransforms.PolynomialTransform")],m)}))}();
//# sourceMappingURL=RasterWorker.3291bf8b.js.map
