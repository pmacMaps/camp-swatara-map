function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("1WkgJ",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return m}));var o=t("j6uz9"),s=t("4rJMS"),a=t("aEGHp"),l=t("6ZiQ2"),p=t("26zvD"),u=t("1CpCt"),y=t("2IJVS"),c=t("cc23H"),f=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var d=t("qA6zg"),g=t("iGP99"),h=t("ctxhN");const v=p.default.ofType(l.default);let b=class extends((0,h.OperationalLayer)((0,y.MultiOriginJSONMixin)(g.default))){initialize(){this.own((0,c.watch)((()=>this.analysis),((e,t)=>{(0,u.isSome)(t)&&t.parent===this&&(t.parent=null),(0,u.isSome)(e)&&(e.parent=this)}),c.syncAndInitial))}async load(){return(0,u.isSome)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,u.applySome)(this.analysis,(e=>e.observer))}set observer(e){(0,u.applySome)(this.analysis,(t=>t.observer=e))}get targets(){return(0,u.isSome)(this.analysis)?this.analysis.targets:null}set targets(e){(0,u.applySome)(this.analysis,(t=>t.targets=e))}get fullExtent(){return(0,u.isSome)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,u.isSome)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(e){this.analysis===e&&(this.analysis=new(0,s.default))}constructor(e){super(e),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new(0,s.default),this.opacity=1}};(0,o._)([(0,f.property)({json:{read:!1},readOnly:!0})],b.prototype,"type",void 0),(0,o._)([(0,f.property)({type:["LineOfSightLayer"]})],b.prototype,"operationalLayerType",void 0),(0,o._)([(0,f.property)({type:a.default,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,"observer",null),(0,o._)([(0,f.property)({type:v,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,"targets",null),(0,o._)([(0,f.property)({nonNullable:!0,json:{read:!1,write:!1}})],b.prototype,"analysis",void 0),(0,o._)([(0,f.property)({readOnly:!0})],b.prototype,"fullExtent",null),(0,o._)([(0,f.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,o._)([(0,f.property)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],b.prototype,"opacity",void 0),(0,o._)([(0,f.property)({type:["show","hide"]})],b.prototype,"listMode",void 0),b=(0,o._)([(0,d.subclass)("esri.layers.LineOfSightLayer")],b);const m=b})),t.register("4rJMS",(function(r,n){e(r.exports,"default",(function(){return m}));var i=t("j6uz9"),o=t("fXSFe"),s=t("aEGHp"),a=t("6ZiQ2"),l=t("26zvD"),p=t("4cIQk"),u=t("1CpCt"),y=t("cc23H"),c=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var f=t("qA6zg"),d=t("5cP7j"),g=t("ccOFp"),h=t("6Y0Wl");const v=l.default.ofType(a.default);let b=class extends o.default{initialize(){this.own((0,y.watch)((()=>this._computeExtent()),(e=>{((0,u.isNone)(e)||(0,u.isNone)(e.pending))&&this._set("extent",(0,u.isSome)(e)?e.extent:null)}),y.syncAndInitial))}get targets(){return this._get("targets")||new v}set targets(e){this._set("targets",(0,p.referenceSetter)(e,this.targets,v))}get spatialReference(){return(0,u.isSome)(this.observer)&&(0,u.isSome)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,u.applySome)(this.observer,(e=>e.position))]}async waitComputeExtent(){const e=this._computeExtent();return(0,u.isSome)(e)?(0,u.unwrap)(e.pending):null}_computeExtent(){const e=this.spatialReference;if((0,u.isNone)(this.observer)||(0,u.isNone)(this.observer.position)||(0,u.isNone)(e))return null;const t=e=>"absolute-height"===(0,h.getGeometryEffectiveElevationMode)(e.position,e.elevationInfo),r=this.observer.position,n=(0,g.fromValues)(r.x,r.y,r.z,r.x,r.y,r.z);for(const t of this.targets)if((0,u.isSome)(t.position)){const r=(0,d.projectOrLoad)(t.position,e);if((0,u.isSome)(r.pending))return{pending:r.pending,extent:null};if((0,u.isSome)(r.geometry)){const{x:e,y:t,z:i}=r.geometry;(0,g.expandWithVec3)(n,[e,t,i])}}const i=(0,g.toExtent)(n,e);return t(this.observer)&&this.targets.every(t)||(i.zmin=null,i.zmax=null),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}constructor(e){super(e),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}};(0,i._)([(0,c.property)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,i._)([(0,c.property)({type:s.default,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,i._)([(0,c.property)({cast:p.castForReferenceSetter,type:v,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,i._)([(0,c.property)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,i._)([(0,c.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,i._)([(0,c.property)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),(0,i._)([(0,c.property)({readOnly:!0})],b.prototype,"nonEditableMessage",void 0),b=(0,i._)([(0,f.subclass)("esri.analysis.LineOfSightAnalysis")],b);const m=b})),t.register("fXSFe",(function(r,n){e(r.exports,"default",(function(){return d}));var i=t("j6uz9"),o=t("27btt"),s=t("2VGYF"),a=t("2tTSh"),l=t("hO0an"),p=t("1CpCt"),u=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var y=t("qA6zg");let c=0,f=class extends((0,l.JSONSupportMixin)((0,s.ClonableMixin)((0,a.IdentifiableMixin)(o.default)))){get parent(){return this._get("parent")}set parent(e){const t=this.parent;if((0,p.isSome)(t))switch(t.type){case"line-of-sight":t.removeAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(p.isSome)}constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${c++}`,this.title=null}};(0,i._)([(0,u.property)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,i._)([(0,u.property)({type:String})],f.prototype,"title",void 0),(0,i._)([(0,u.property)({constructOnly:!0})],f.prototype,"type",void 0),(0,i._)([(0,u.property)({clonable:!1,value:null})],f.prototype,"parent",null),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"extent",void 0),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"isEditable",null),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"requiredPropertiesForEditing",void 0),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"nonEditableMessage",void 0),f=(0,i._)([(0,y.subclass)("esri.analysis.Analysis")],f);const d=f})),t.register("aEGHp",(function(r,n){e(r.exports,"default",(function(){return h}));var i=t("j6uz9"),o=t("hO9f9"),s=t("27btt"),a=t("2VGYF"),l=t("hO0an"),p=t("1CpCt"),u=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var y=t("qA6zg"),c=t("iHntE"),f=t("dZxPT"),d=t("gDefd");let g=class extends((0,l.JSONSupportMixin)((0,a.ClonableMixin)(s.default))){equals(e){return(0,p.equalsMaybe)(this.position,e.position)&&(0,p.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,u.property)({type:f.default}),(0,c.persistable)()],g.prototype,"position",void 0),(0,i._)([(0,u.property)({type:d.default}),(0,c.persistable)()],g.prototype,"elevationInfo",void 0),(0,i._)([(0,u.property)(o.featureReferenceProperty)],g.prototype,"feature",void 0),g=(0,i._)([(0,y.subclass)("esri.analysis.LineOfSightAnalysisObserver")],g);const h=g})),t.register("hO9f9",(function(r,n){e(r.exports,"featureReferenceEquals",(function(){return o})),e(r.exports,"featureReferenceProperty",(function(){return a}));var i=t("1CpCt");function o(e,t){return s(e)===s(t)}function s(e){if((0,i.isNone)(e))return null;const t=null!=e.layer?e.layer.id:"";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const a={json:{write:{writer:function(e,t){(0,i.isNone)(e)||null==e.layer?.objectIdField||null==e.attributes||(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}}})),t.register("iHntE",(function(r,n){e(r.exports,"persistable",(function(){return f}));var i=t("1CpCt"),o=t("fMNx8"),s=t("7dRCe"),a=t("e63kH"),l=t("9nE9e"),p=t("74iZY"),u=t("hTI69"),y=t("9Pepw"),c=t("hej7M");function f(e){const t=(0,i.isSome)(e)&&e.origins?e.origins:[void 0];return(r,n)=>{const a=function(e,t,r){if((0,i.isSome)(e)&&"resource"===e.type)return function(e,t,r){const n=(0,l.getOwnPropertyMetadata)(t,r);return{type:String,read:(e,t,r)=>{const i=(0,c.r)(e,t,r);return n.type===String?i:"function"==typeof n.type?new n.type({url:i}):void 0},write:{writer(t,a,l,u){if(!u||!u.resources)return"string"==typeof t?void(a[l]=(0,c.t)(t,u)):void(a[l]=t.write({},u));const f=function(e){return(0,i.isNone)(e)?null:"string"==typeof e?e:e.url}(t),v=f?(0,c.t)(f,{...u,verifyItemRelativeUrls:u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},c.M.NO):null,b=n.type!==String&&(!(0,o.isMultiOriginJSONMixin)(this)||u&&u.origin&&this.originIdOf(r)>(0,p.nameToId)(u.origin));u&&u.portalItem&&(0,i.isSome)(v)&&!(0,s.isAbsolute)(v)?b?function(e,t,r,n,i,o,a,l){const p=a.portalItem.resourceFromPath(n),u=h(r,n,a);(0,y.getResourceContentExtension)(u)===(0,s.getPathExtension)(p.path)?(g(e,t,p,u,a.resources.toUpdate),i[o]=n):d(e,t,r,n,i,o,a,l)}(this,r,t,v,a,l,u,e):function(e,t,r,n){n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(e)}),t[r]=e}(v,a,l,u):u&&u.portalItem&&((0,i.isNone)(v)||(0,i.isSome)((0,c.i)(v))||(0,s.isBlobProtocol)(v)||b)?d(this,r,t,v,a,l,u,e):a[l]=v}}}}(e,t,r);switch((0,i.isSome)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.p;return{read:e,write:t}}}}(e,r,n);for(const e of t){const t=(0,u.propertyJSONMeta)(r,e,n);for(const e in a)t[e]=a[e]}}}function d(e,r,n,o,l,p,u,c){const f=(0,a.generateUUID)(),d=h(n,o,u),v=(0,s.join)((0,i.get)(c,"prefix"),f),b=`${v}.${(0,y.getResourceContentExtension)(d)}`,m=u.portalItem.resourceFromPath(b);(0,s.isBlobProtocol)(o)&&u.resources.pendingOperations.push(async function(e){const r=(await Promise.resolve(t("bYA0c"))).default,{data:n}=await r(e,{responseType:"blob"});return n}(o).then((e=>{m.path=`${v}.${(0,y.getResourceContentExtension)(e)}`,l[p]=m.itemRelativeUrl})).catch((()=>{}))),g(e,r,m,d,u.resources.toAdd),l[p]=m.itemRelativeUrl}function g(e,t,r,n,i){i.push({resource:r,content:n,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function h(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}})),t.register("fMNx8",(function(t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}e(t.exports,"isMultiOriginJSONMixin",(function(){return n}))})),t.register("9Pepw",(function(r,n){e(r.exports,"getResourceContentExtension",(function(){return o}));var i=t("7dRCe");function o(e){return s[function(e){return e instanceof Blob?e.type:function(e){const t=(0,i.getPathExtension)(e);return p[t]||a}(e.url)}(e)]||l}const s={},a="text/plain",l=s[a],p={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const e in p)s[p[e]]=e})),t.register("6ZiQ2",(function(r,n){e(r.exports,"default",(function(){return g}));var i=t("j6uz9"),o=t("hO9f9"),s=t("2VGYF"),a=t("hO0an"),l=t("1CpCt"),p=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var u=t("qA6zg"),y=t("iHntE"),c=t("dZxPT"),f=t("gDefd");let d=class extends((0,a.JSONSupportMixin)(s.Clonable)){equals(e){return(0,l.equalsMaybe)(this.position,e.position)&&(0,l.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,p.property)({type:c.default}),(0,y.persistable)()],d.prototype,"position",void 0),(0,i._)([(0,p.property)({type:f.default}),(0,y.persistable)()],d.prototype,"elevationInfo",void 0),(0,i._)([(0,p.property)(o.featureReferenceProperty)],d.prototype,"feature",void 0),d=(0,i._)([(0,u.subclass)("esri.analysis.LineOfSightAnalysisTarget")],d);const g=d})),t.register("6Y0Wl",(function(r,n){e(r.exports,"getGeometryEffectiveElevationMode",(function(){return o}));var i=t("1CpCt");t("aKYdG");function o(e,t){return function(e,t){return(0,i.isNone)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}(!!(0,i.isSome)(e)&&e.hasZ,t)}}));
//# sourceMappingURL=LineOfSightLayer.1d6334c0.js.map
