!function(){function r(r,e,t,n){Object.defineProperty(r,e,{get:t,set:n,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("4pnUn",(function(t,n){r(t.exports,"georeference",(function(){return P})),r(t.exports,"georeferenceApplyTransform",(function(){return T})),r(t.exports,"georeferenceByTransform",(function(){return V})),r(t.exports,"ungeoreference",(function(){return d})),r(t.exports,"ungeoreferenceByTransform",(function(){return A}));var o=e("7qybv"),i=e("5vzSQ"),a=e("gnwu9"),f=e("gEEzE"),c=e("89KCq"),u=e("j3x2p"),l=e("7RvA5"),s=e("7USIy"),p=e("17b31"),g=e("YI2am"),y=e("hhwnq"),m=e("gLl1O"),h=e("9r2zb");function P(r,e,t){return(0,m.isGeographicMesh)(e.spatialReference,t)?function(r,e,t){const n=e.spatialReference,o=v(e,t,R),i=new Float64Array(r.position.length),a=function(r,e,t,n){(0,y.t)(g.BufferViewVec3f64.fromTypedArray(n),g.BufferViewVec3f64.fromTypedArray(r),e);const o=new Float64Array(r.length);return(0,h.projectFromPCPF)(n,o,t)}(r.position,o,n,i),f=(0,u.a)(_,o);return{position:a,normal:F(a,i,r.normal,f,n),tangent:w(a,i,r.tangent,f,n)}}(r,e,t):function(r,e,t){const n=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,{horizontal:c,vertical:u}=M(t?t.unit:null,e.spatialReference);for(let r=0;r<o.length;r+=3)n[r+0]=o[r+0]*c+i,n[r+1]=o[r+1]*c+a,n[r+2]=o[r+2]*u+f;return{position:n,normal:r.normal,tangent:r.tangent}}(r,e,t)}function T(r,e,t){const{position:n,normal:i,tangent:a}=r;if((0,o.isNone)(e))return{position:n,normal:i,tangent:a};const f=e.localMatrix;return P({position:(0,h.transformPosition)(n,new Float64Array(n.length),f),normal:(0,o.isSome)(i)?(0,h.transformNormal)(i,new Float32Array(i.length),f):null,tangent:(0,o.isSome)(a)?(0,h.transformTangent)(a,new Float32Array(a.length),f):null},e.getOriginPoint(t),{geographic:e.geographic})}function V(r,e,t){if(null==t?void 0:t.useTransform){const{position:o,normal:i,tangent:a}=r;var n;return{vertexAttributes:{position:o,normal:i,tangent:a},transform:new(0,p.default)({origin:[e.x,e.y,null!==(n=e.z)&&void 0!==n?n:0],geographic:(0,m.isGeographicMesh)(e.spatialReference,t)})}}return{vertexAttributes:P(r,e,t),transform:null}}function d(r,e,t){return(0,m.isGeographicMesh)(e.spatialReference,t)?B(r,e,t):x(r,e,t)}function A(r,e,t,n){if((0,o.isNone)(e))return d(r,t,n);const i=T(r,e,t.spatialReference);return t.equals(e.getOriginPoint(t.spatialReference))?x(i,t,n):(0,m.isGeographicMesh)(t.spatialReference,n)?B(i,t,n):x(i,t,n)}function F(r,e,t,n,i){if((0,o.isNone)(t))return null;const a=new Float32Array(t.length);return(0,y.a)(g.BufferViewVec3f.fromTypedArray(a),g.BufferViewVec3f.fromTypedArray(t),n),(0,h.projectNormalFromPCPF)(a,r,e,i,a),a}function w(r,e,t,n,i){if((0,o.isNone)(t))return null;const a=new Float32Array(t.length);(0,y.a)(g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT),g.BufferViewVec3f.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),n);for(let r=3;r<a.length;r+=4)a[r]=t[r];return(0,h.projectTangentFromPCPF)(a,r,e,i,a),a}function x(r,e,t){const n=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,{horizontal:c,vertical:u}=M(t?t.unit:null,e.spatialReference);for(let r=0;r<o.length;r+=3)n[r+0]=(o[r+0]-i)/c,n[r+1]=(o[r+1]-a)/c,n[r+2]=(o[r+2]-f)/u;return{position:n,normal:r.normal,tangent:r.tangent}}function B(r,e,t){const n=e.spatialReference;v(e,t,R);const o=(0,f.a)(N,R),i=new Float64Array(r.position.length),a=function(r,e,t,n){const o=(0,h.projectToPCPF)(r,e,n),i=g.BufferViewVec3f64.fromTypedArray(o),a=new Float64Array(o.length),f=g.BufferViewVec3f64.fromTypedArray(a);return(0,y.t)(f,i,t),a}(r.position,n,o,i),c=(0,u.a)(_,o);return{position:a,normal:C(r.normal,r.position,i,n,c),tangent:E(r.tangent,r.position,i,n,c)}}function v(r,e,t){(0,l.computeTranslationToOriginAndRotation)(r.spatialReference,[r.x,r.y,r.z||0],t,(0,s.getSphericalPCPF)(r.spatialReference));const{horizontal:n,vertical:o}=M(e?e.unit:null,r.spatialReference);return(0,f.h)(t,t,[n,n,o]),t}function C(r,e,t,n,i){if((0,o.isNone)(r))return null;const a=(0,h.projectNormalToPCPF)(r,e,t,n,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a);return(0,y.a)(f,f,i),a}function E(r,e,t,n,i){if((0,o.isNone)(r))return null;const a=(0,h.projectTangentToPCPF)(r,e,t,n,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT);return(0,y.a)(f,f,i),a}function M(r,e){if((0,o.isNone)(r))return b;const t=e.isGeographic?1:(0,i.getMetersPerUnitForSR)(e),n=e.isGeographic?1:(0,i.getMetersPerVerticalUnitForSR)(e),a=(0,i.convertUnit)(1,r,"meters");return{horizontal:a*t,vertical:a*n}}const R=(0,c.c)(),N=(0,c.c)(),_=(0,a.c)(),b={horizontal:1,vertical:1}})),e.register("17b31",(function(t,n){r(t.exports,"default",(function(){return F}));var o=e("7eJjO"),i=e("1XAcN"),a=e("7qybv"),f=e("iho5X");e("lNwWH"),e("2VlWd"),e("iJAIC");var c,u=e("fcwIv"),l=e("gEEzE"),s=e("89KCq"),p=e("e4Xv2"),g=e("5YMIf"),y=e("d1Fqh"),m=e("7RvA5"),h=e("7USIy"),P=e("glKuz"),T=e("YI2am"),V=e("hhwnq"),d=e("fxkX0");let A=c=class extends i.JSONSupport{get localMatrix(){const r=(0,s.c)();return(0,l.u)(r,this.scale),(0,l.e)(r,r,(0,P.angleRad)(this.rotation),(0,P.axis)(this.rotation)),(0,l.j)(r,r,this.translation),r}get localMatrixInverse(){return(0,l.a)((0,s.c)(),this.localMatrix)}applyLocal(r,e){return(0,p.m)(e,r,this.localMatrix)}applyLocalInverse(r,e){return(0,p.m)(e,r,this.localMatrixInverse)}project(r,e){const t=new Float64Array(r.length),n=T.BufferViewVec3f64.fromTypedArray(t),o=T.BufferViewVec3f64.fromTypedArray(r);if(this.geographic){const r=(0,h.getSphericalPCPF)(e),i=(0,s.c)();return(0,m.computeTranslationToOriginAndRotation)(e,this.origin,i,r),(0,l.m)(i,i,this.localMatrix),(0,V.t)(n,o,i),(0,m.projectBuffer)(t,r,0,t,e,0,t.length/3),t}const{localMatrix:i,origin:a}=this;(0,l.v)(i,s.I)?(0,d.c)(n,o):(0,V.t)(n,o,i);for(let r=0;r<t.length;r+=3)t[r+0]+=a[0],t[r+1]+=a[1],t[r+2]+=a[2];return t}getOriginPoint(r){const[e,t,n]=this.origin;return new(0,y.default)({x:e,y:t,z:n,spatialReference:r})}equals(r){return(0,a.isSome)(r)&&this.geographic===r.geographic&&(0,p.k)(this.origin,r.origin)&&(0,l.w)(this.localMatrix,r.localMatrix)}clone(){const r={origin:(0,g.a)(this.origin),translation:(0,g.a)(this.translation),rotation:(0,P.create)(this.rotation),scale:(0,g.a)(this.scale),geographic:this.geographic};return new c(r)}constructor(r){super(r),this.origin=(0,g.c)(),this.translation=(0,g.c)(),this.rotation=(0,P.create)(),this.scale=(0,g.f)(1,1,1),this.geographic=!0}};(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"origin",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"translation",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"rotation",void 0),(0,o._)([(0,f.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"scale",void 0),(0,o._)([(0,f.property)({type:Boolean,nonNullable:!0,json:{write:!0}})],A.prototype,"geographic",void 0),(0,o._)([(0,f.property)()],A.prototype,"localMatrix",null),(0,o._)([(0,f.property)()],A.prototype,"localMatrixInverse",null),A=c=(0,o._)([(0,u.subclass)("esri.geometry.support.MeshTransform")],A);const F=A})),e.register("glKuz",(function(t,n){r(t.exports,"create",(function(){return c})),r(t.exports,"fromAxisAndAngle",(function(){return u})),r(t.exports,"axis",(function(){return s})),r(t.exports,"compose",(function(){return l})),r(t.exports,"angleRad",(function(){return p}));var o=e("iVfa0"),i=e("koyqq"),a=e("ksUrQ"),f=e("e4Xv2");function c(r=g){return[r[0],r[1],r[2],r[3]]}function u(r,e,t=c()){return(0,f.c)(t,r),t[3]=e,t}function l(r,e,t=c()){return(0,i.s)(y,r,p(r)),(0,i.s)(m,e,p(e)),(0,i.m)(y,m,y),function(r,e){return r[3]=e,r}(t,(0,o.rad2deg)((0,i.g)(t,y)))}function s(r){return r}function p(r){return(0,o.deg2rad)(r[3])}const g=[0,0,1,0],y=(0,a.a)(),m=(0,a.a)();c()})),e.register("gLl1O",(function(e,t){function n(r,e){var t;return r.isGeographic||r.isWebMercator&&(null===(t=null==e?void 0:e.geographic)||void 0===t||t)}r(e.exports,"isGeographicMesh",(function(){return n}))})),e.register("9r2zb",(function(t,n){r(t.exports,"projectNormalToPCPF",(function(){return T})),r(t.exports,"projectNormalFromPCPF",(function(){return V})),r(t.exports,"projectToPCPF",(function(){return d})),r(t.exports,"projectFromPCPF",(function(){return A})),r(t.exports,"transformPosition",(function(){return F})),r(t.exports,"transformNormal",(function(){return w})),r(t.exports,"transformTangent",(function(){return x})),r(t.exports,"projectTangentToPCPF",(function(){return B})),r(t.exports,"projectTangentFromPCPF",(function(){return v}));var o=e("jHOLN"),i=e("7qybv"),a=e("j3x2p"),f=e("gnwu9"),c=e("89KCq"),u=e("e4Xv2"),l=e("5YMIf"),s=e("7RvA5"),p=e("7USIy"),g=e("eY5Yp"),y=e("eF88h"),m=e("YI2am"),h=e("hhwnq");const P=o.default.getLogger("esri.geometry.support.meshUtils.normalProjection");function T(r,e,t,n,o){return E(n)?(C(R.TO_PCPF,m.BufferViewVec3f.fromTypedArray(r),m.BufferViewVec3f64.fromTypedArray(e),m.BufferViewVec3f64.fromTypedArray(t),n,m.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert spatial reference to PCPF"),o)}function V(r,e,t,n,o){return E(n)?(C(R.FROM_PCPF,m.BufferViewVec3f.fromTypedArray(r),m.BufferViewVec3f64.fromTypedArray(e),m.BufferViewVec3f64.fromTypedArray(t),n,m.BufferViewVec3f.fromTypedArray(o)),o):(P.error("Cannot convert to spatial reference from PCPF"),o)}function d(r,e,t){return(0,s.projectBuffer)(r,e,0,t,(0,p.getSphericalPCPF)(e),0,r.length/3),t}function A(r,e,t){return(0,s.projectBuffer)(r,(0,p.getSphericalPCPF)(t),0,e,t,0,r.length/3),e}function F(r,e,t){if((0,i.isNone)(r))return e;const n=m.BufferViewVec3f64.fromTypedArray(r),o=m.BufferViewVec3f64.fromTypedArray(e);return(0,h.t)(o,n,t),e}function w(r,e,t){if((0,i.isNone)(r))return e;(0,a.a)(S,t);const n=m.BufferViewVec3f.fromTypedArray(r),o=m.BufferViewVec3f.fromTypedArray(e);return(0,h.a)(o,n,S),(0,a.i)(S)||(0,h.n)(o,o),e}function x(r,e,t){if((0,i.isNone)(r))return e;(0,a.a)(S,t);const n=m.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),o=m.BufferViewVec3f.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if((0,h.a)(o,n,S),(0,a.i)(S)||(0,h.n)(o,o),r!==e)for(let t=3;t<r.length;t+=4)e[t]=r[t];return e}function B(r,e,t,n,o){if(!E(n))return P.error("Cannot convert spatial reference to PCPF"),o;C(R.TO_PCPF,m.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),m.BufferViewVec3f64.fromTypedArray(e),m.BufferViewVec3f64.fromTypedArray(t),n,m.BufferViewVec3f.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT));for(let e=3;e<r.length;e+=4)o[e]=r[e];return o}function v(r,e,t,n,o){if(!E(n))return P.error("Cannot convert to spatial reference from PCPF"),o;C(R.FROM_PCPF,m.BufferViewVec3f.fromTypedArray(r,16),m.BufferViewVec3f64.fromTypedArray(e),m.BufferViewVec3f64.fromTypedArray(t),n,m.BufferViewVec3f.fromTypedArray(o,16));for(let e=3;e<r.length;e+=4)o[e]=r[e];return o}function C(r,e,t,n,o,i){if(!e)return;const f=t.count,c=(0,p.getSphericalPCPF)(o);if(M(o))for(let t=0;t<f;t++)n.getVec(t,_),e.getVec(t,b),(0,s.computeTranslationToOriginAndRotation)(c,_,j,c),(0,a.f)(S,j),r===R.FROM_PCPF&&(0,a.t)(S,S),(0,u.t)(b,b,S),i.setVec(t,b);else for(let o=0;o<f;o++){n.getVec(o,_),e.getVec(o,b),(0,s.computeTranslationToOriginAndRotation)(c,_,j,c),(0,a.f)(S,j);const f=(0,y.y2lat)(t.get(o,1));let l=Math.cos(f);r===R.TO_PCPF&&(l=1/l),S[0]*=l,S[1]*=l,S[2]*=l,S[3]*=l,S[4]*=l,S[5]*=l,r===R.FROM_PCPF&&(0,a.t)(S,S),(0,u.t)(b,b,S),(0,u.n)(b,b),i.setVec(o,b)}return i}function E(r){return M(r)||function(r){return r.isWebMercator}(r)}function M(r){return r.isWGS84||(0,g.isCGCS2000)(r)||(0,g.isMars)(r)||(0,g.isMoon)(r)}var R,N;(N=R||(R={}))[N.TO_PCPF=0]="TO_PCPF",N[N.FROM_PCPF=1]="FROM_PCPF";const _=(0,l.c)(),b=(0,l.c)(),j=(0,c.c)(),S=(0,f.c)()}))}();
//# sourceMappingURL=ElevationSamplerWorker.82ee4fc3.js.map
