!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("grXPo",(function(a,l){var t,n,i,o;t=a.exports,n="previewSymbol2D",i=function(){return x},Object.defineProperty(t,n,{get:i,set:o,enumerable:!0,configurable:!0});var s=e("8TSCy"),u=e("jgs9n"),r=e("kyj08"),c=e("iXlXu"),m=e("dNlty"),p=e("cBxZc"),d=e("bFgGH"),h="picture-fill",f=p.SymbolSizeDefaults.size,v=p.SymbolSizeDefaults.maxSize,y=p.SymbolSizeDefaults.maxOutlineSize,g=p.SymbolSizeDefaults.lineWidth,b=document.createElement("canvas");function w(e){var a=null==e?void 0:e.size;return{width:null!=a&&"object"==typeof a&&"width"in a?(0,c.pt2px)(a.width):null,height:null!=a&&"object"==typeof a&&"height"in a?(0,c.pt2px)(a.height):null}}function x(e,a){var l,t,n="number"==typeof(null==a?void 0:a.size)?null==a?void 0:a.size:null,i=null!=n?(0,c.pt2px)(n):null,o=null!=(null==a?void 0:a.maxSize)?(0,c.pt2px)(a.maxSize):null,x=null!=(null==a?void 0:a.opacity)?a.opacity:null,M=null!=(null==a?void 0:a.rotation)?a.rotation:"angle"in e?e.angle:null,S=(0,m.getFill)(e),z=(0,m.getStroke)(e);if(S&&!z){var k="type"in S?null:new(0,u.default)(S);"#ffffff"===(k?k.toHex():null)&&(z={color:"#bdc3c7",width:.75})}var L={shape:null,fill:null,stroke:z,offset:[0,0]};null!=(l=z)&&l.width&&(z.width=Math.min(z.width,y));var j,C,F,P,D=(null==(t=z)?void 0:t.width)||0,T=null!=(null==a?void 0:a.size)&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale)),Z=0,q=0,B=!1;switch(e.type){case"simple-marker":var E=e.style,H=Math.min(null!=i?i:(0,c.pt2px)(e.size),o||v);switch(Z=H,q=H,E){case"circle":L.shape={type:"circle",cx:0,cy:0,r:.5*H},T||(Z+=D,q+=D);break;case"cross":L.shape={type:"path",path:[{command:"M",values:[0,.5*q]},{command:"L",values:[Z,.5*q]},{command:"M",values:[.5*Z,0]},{command:"L",values:[.5*Z,q]}]};break;case"diamond":L.shape={type:"path",path:[{command:"M",values:[0,.5*q]},{command:"L",values:[.5*Z,0]},{command:"L",values:[Z,.5*q]},{command:"L",values:[.5*Z,q]},{command:"Z",values:[]}]},T||(Z+=D,q+=D);break;case"square":L.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[Z,0]},{command:"L",values:[Z,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},T||(Z+=D,q+=D),M&&(B=!0);break;case"triangle":L.shape={type:"path",path:[{command:"M",values:[.5*Z,0]},{command:"L",values:[Z,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},T||(Z+=D,q+=D),M&&(B=!0);break;case"x":L.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[Z,q]},{command:"M",values:[Z,0]},{command:"L",values:[0,q]}]},M&&(B=!0);break;case"path":L.shape={type:"path",path:e.path||""},T||(Z+=D,q+=D),M&&(B=!0),T=!0}break;case"simple-line":var X,O=w(a),R=O.width,V=O.height,W=null!=V?V:Math.min(null!=i?i:D,o||y),A=null!=R?R:g;z.width=W,Z=A,q=W;var G=(null==L||null==(X=L.stroke)?void 0:X.cap)||"butt",N="round"===G;T=!0,L.stroke.cap="butt"===G?"square":G,L.shape={type:"path",path:[{command:"M",values:[N?W/2:0,q/2]},{command:"L",values:[N?Z-W/2:Z,q/2]}]};break;case h:case"simple-fill":var U="object"==typeof(null==a?void 0:a.symbolConfig)&&(null==a?void 0:a.symbolConfig.isSquareFill),I=w(a),J=I.width,K=I.height;Z=U&&null!=J?J:null!=i?i:f,q=U&&null!=K?K:Z,T||(Z+=D,q+=D),T=!0,L.shape=U?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[Z,0]},{command:"L",values:[Z,q]},{command:"L",values:[0,q]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:p.shapes.fill[0];break;case"picture-marker":var Q=(0,c.pt2px)(e.width),Y=(0,c.pt2px)(e.height),$=null!=i?i:Math.max(Q,Y),_=Q/Y;Q=_<=1?Math.ceil($*_):$,Y=_<=1?$:Math.ceil($/_),Z=Math.min(Q,o||v),q=Math.min(Y,o||v),L.shape={type:"image",x:-Math.round(Z/2),y:-Math.round(q/2),width:Z,height:q,src:e.url||""},M&&(B=!0);break;case"text":var ee=e,ae=ee.text||"Aa",le=ee.font,te=Math.min(null!=i?i:(0,c.pt2px)(le.size),o||v),ne=(j=ae,C={weight:le.weight,size:te,family:le.family},F=b.getContext("2d"),P=[],C&&(C.weight&&P.push(C.weight),C.size&&P.push(C.size+"px"),C.family&&P.push(C.family)),F.font=P.join(" "),F.measureText(j).width),ie=/[\uE600-\uE6FF]/.test(ae);Z=ie?te:ne,q=te;var oe=.25*function(e){if(0===e.length)return 0;if(e.length>2){var a=(0,c.px2pt)(1),l=parseFloat(e);switch(e.slice(-2)){case"px":return l;case"pt":return l*a;case"in":return 72*l*a;case"pc":return 12*l*a;case"mm":return 2.8346456692913384*l*a;case"cm":return 28.346456692913385*l*a}}return parseFloat(e)}((le?te:0).toString());ie&&(oe+=5),L.shape={type:"text",text:ae,x:0,y:oe,align:"middle",decoration:le&&le.decoration,rotated:ee.rotated,kerning:ee.kerning},L.font=le&&{size:te,style:le.style,decoration:le.decoration,weight:le.weight,family:le.family}}if(!L.shape)return Promise.reject(new(0,r.default)("symbolPreview: renderPreviewHTML2D","symbol not supported."));var se=S,ue=e.color,re=null;return se&&"pattern"===se.type&&ue&&e.type!==h?re=(0,m.getPatternUrlWithColor)(se.src,ue.toCss(!0)).then((function(e){return se.src=e,L.fill=se,L})):(L.fill=S,re=Promise.resolve(L)),re.then((function(e){var l=[[e]];if("object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.applyColorModulation){var t=.6*Z;l.unshift([s.objectSpread({},e,{offset:[-t,0],fill:(0,p.adjustColorBrightness)(S,-.3)})]),l.push([s.objectSpread({},e,{offset:[t,0],fill:(0,p.adjustColorBrightness)(S,.3)})]),Z+=2*t,T=!1}return(0,d.renderSymbol)(l,[Z,q],{node:a&&a.node,scale:T,opacity:x,rotation:M,useRotationSize:B,effectView:null==a?void 0:a.effectView})}))}}))}();
//# sourceMappingURL=previewSymbol2D.9533ae04.js.map
