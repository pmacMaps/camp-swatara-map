!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("gyhpX",(function(n,i){t(n.exports,"wrappedWork",(function(){return h})),t(n.exports,"work",(function(){return v}));var u=r("8TSCy"),a=r("2TvXO"),f=r("gPnQi"),o=r("c8rlx"),s=r("En4uz"),c=r("k8a7B"),l=r("1VRLl"),d=r("6lzcr");function h(e){return p.apply(this,arguments)}function p(){return(p=u.asyncToGenerator(e(a).mark((function t(r){var n,i,u;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(r),i=v(n),u=[n.data.buffer],e.abrupt("return",{result:V(i,u),transferList:u});case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function v(e){var t=function(e,t,r,n){if(t)return{faces:r,facesLength:n,neighbors:(0,o.computeNeighbors)(r,n,e.count),vertices:e};var i=(0,f.deduplicate)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:n}),u=(0,o.computeNeighbors)(i.indices,n,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:u,vertices:c.EdgeInputBufferLayout.createView(i.buffer)}}(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return y.updateSettings(e.writerSettings),A.updateSettings(e.writerSettings),(0,d.extractEdges)(t,y,A)}function g(e){return{data:c.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function V(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,s.packInterleavedBuffer)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,s.packInterleavedBuffer)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}var y=new(0,l.RegularEdgeBufferWriter),A=new(0,l.SilhouetteEdgeBufferWriter)})),r.register("gPnQi",(function(e,n){t(e.exports,"deduplicate",(function(){return u}));var i=r("iVfa0");function u(e,t,r){var n,u=e.byteLength/(4*t),c=new Uint32Array(e,0,u*t),l=new Uint32Array(u),d=null!=(n=null==r?void 0:r.minReduction)?n:0,h=(null==r?void 0:r.originalIndices)||null,p=h?h.length:0,v=(null==r?void 0:r.componentOffsets)||null,g=0;if(v)for(var V=0;V<v.length-1;V++){var y=v[V+1]-v[V];y>g&&(g=y)}else g=u;var A=Math.floor(1.1*g)+1;(null==s||s.length<2*A)&&(s=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*A)));for(var w=0;w<2*A;w++)s[w]=0;for(var E=0,I=!!v&&!!h,T=I?p:u,N=I?new Uint32Array(p):null,m=1.96,O=0!==d?Math.ceil(4*m*m/(d*d)*d*(1-d)):T,B=1,S=v?v[1]:T,b=0;b<T;b++){if(b===O){var L=1-E/b;if(L+m*Math.sqrt(L*(1-L)/b)<d)return null;O*=2}if(b===S){for(var R=0;R<2*A;R++)s[R]=0;if(h)for(var x=v[B-1];x<v[B];x++)N[x]=l[h[x]];S=v[++B]}for(var k=I?h[b]:b,F=k*t,U=o(c,F,t),M=U%A,D=E;0!==s[2*M+1];){if(s[2*M]===U){var C=s[2*M+1]-1;if(a(c,F,C*t,t)){D=l[C];break}}++M>=A&&(M-=A)}D===E&&(s[2*M]=U,s[2*M+1]=k+1,E++),l[k]=D}if(0!==d&&1-E/u<d)return null;if(I){for(var P=v[B-1];P<N.length;P++)N[P]=l[h[P]];l=N}var _=new Uint32Array(t*E);E=0;for(var G=0;G<T;G++)l[G]===E&&(f(c,(I?h[G]:G)*t,_,E*t,t),E++);if(h&&!I){for(var W=new Uint32Array(p),X=0;X<W.length;X++)W[X]=l[h[X]];l=W}return{buffer:_.buffer,indices:l,uniqueCount:E}}function a(e,t,r,n){for(var i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function f(e,t,r,n,i){for(var u=0;u<i;u++)r[n+u]=e[t+u]}function o(e,t,r){for(var n=0,i=0;i<r;i++)n=(n=e[t+i]+n|0)+(n<<11)+(n>>>2)|0;return n>>>0}var s=null})),r.register("c8rlx",(function(e,r){function n(e,t,r){for(var n=t/3,i=new Uint32Array(r+1),u=new Uint32Array(r+1),a=function(e,t){e<t?i[e+1]++:u[t+1]++},f=0;f<n;f++){var o=e[3*f],s=e[3*f+1],c=e[3*f+2];a(o,s),a(s,c),a(c,o)}for(var l=0,d=0,h=0;h<r;h++){var p=i[h+1],v=u[h+1];i[h+1]=l,u[h+1]=d,l+=p,d+=v}for(var g=new Uint32Array(6*n),V=i[r],y=function(e,t,r){if(e<t){var n=i[e+1]++;g[2*n]=t,g[2*n+1]=r}else{var a=u[t+1]++;g[2*V+2*a]=e,g[2*V+2*a+1]=r}},A=0;A<n;A++){var w=e[3*A],E=e[3*A+1],I=e[3*A+2];y(w,E,A),y(E,I,A),y(I,w,A)}for(var T=function(e,t){for(var r=2*e,n=t-e,i=1;i<n;i++){for(var u=g[r+2*i],a=g[r+2*i+1],f=i-1;f>=0&&g[r+2*f]>u;f--)g[r+2*f+2]=g[r+2*f],g[r+2*f+3]=g[r+2*f+1];g[r+2*f+2]=u,g[r+2*f+3]=a}},N=0;N<r;N++)T(i[N],i[N+1]),T(V+u[N],V+u[N+1]);for(var m=new Int32Array(3*n),O=function(t,r){return t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1},B=function(e,t){var r=O(e,t);m[3*t+r]=-1},S=function(e,t,r,n){var i=O(e,t);m[3*t+i]=n;var u=O(r,n);m[3*n+u]=t},b=0;b<r;b++){for(var L=i[b],R=i[b+1],x=u[b],k=u[b+1];L<R&&x<k;){var F=g[2*L],U=g[2*V+2*x];F===U?(S(b,g[2*L+1],U,g[2*V+2*x+1]),L++,x++):F<U?(B(b,g[2*L+1]),L++):(B(U,g[2*V+2*x+1]),x++)}for(;L<R;)B(b,g[2*L+1]),L++;for(;x<k;)B(g[2*V+2*x],g[2*V+2*x+1]),x++}return m}t(e.exports,"computeNeighbors",(function(){return n}))})),r.register("En4uz",(function(e,n){t(e.exports,"packInterleavedBuffer",(function(){return a}));var i=r("8TSCy"),u=r("YI2am");r("8Z9U2");function a(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:(r=e.layout,n=new Array,r.fields.forEach((function(e,t){var r=i.objectSpread({},e,{constructor:o(e.constructor)});n.push([t,r])})),{stride:r.stride,fields:n,fieldNames:r.fieldNames})};var r,n}var f=[u.BufferViewFloat,u.BufferViewVec2f,u.BufferViewVec3f,u.BufferViewVec4f,u.BufferViewMat3f,u.BufferViewMat4f,u.BufferViewFloat64,u.BufferViewVec2f64,u.BufferViewVec3f64,u.BufferViewVec4f64,u.BufferViewMat3f64,u.BufferViewMat4f64,u.BufferViewUint8,u.BufferViewVec2u8,u.BufferViewVec3u8,u.BufferViewVec4u8,u.BufferViewUint16,u.BufferViewVec2u16,u.BufferViewVec3u16,u.BufferViewVec4u16,u.BufferViewUint32,u.BufferViewVec2u32,u.BufferViewVec3u32,u.BufferViewVec4u32,u.BufferViewInt8,u.BufferViewVec2i8,u.BufferViewVec3i8,u.BufferViewVec4i8,u.BufferViewInt16,u.BufferViewVec2i16,u.BufferViewVec3i16,u.BufferViewVec4i16,u.BufferViewInt32,u.BufferViewVec2i32,u.BufferViewVec3i32,u.BufferViewVec4i32];function o(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}var s=new Map;f.forEach((function(e){return s.set(o(e),e)}))})),r.register("8Z9U2",(function(e,n){t(e.exports,"newLayout",(function(){return s}));var i=r("8TSCy"),u=r("YI2am"),a=r("2TwbA"),f=function(){"use strict";function e(t,r){i.classCallCheck(this,e),this.layout=t,this.buffer="number"==typeof r?new ArrayBuffer(r*t.stride):r;var n=!0,u=!1,a=void 0;try{for(var f,o=t.fieldNames[Symbol.iterator]();!(n=(f=o.next()).done);n=!0){var s=f.value,c=t.fields.get(s);this[s]=new c.constructor(this.buffer,c.offset,this.stride)}}catch(e){u=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(u)throw a}}}return i.createClass(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}},{key:"slice",value:function(t,r){return new e(this.layout,this.buffer.slice(t*this.stride,r*this.stride))}},{key:"copyFrom",value:function(e,t,r,n){var i=this.stride;if(i%4==0){var u=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(u)}else{var a=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(a)}}}]),e}(),o=function(){"use strict";function e(){i.classCallCheck(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return i.createClass(e,[{key:"vec2f",value:function(e,t){return this._appendField(e,u.BufferViewVec2f,t),this}},{key:"vec2f64",value:function(e,t){return this._appendField(e,u.BufferViewVec2f64,t),this}},{key:"vec3f",value:function(e,t){return this._appendField(e,u.BufferViewVec3f,t),this}},{key:"vec3f64",value:function(e,t){return this._appendField(e,u.BufferViewVec3f64,t),this}},{key:"vec4f",value:function(e,t){return this._appendField(e,u.BufferViewVec4f,t),this}},{key:"vec4f64",value:function(e,t){return this._appendField(e,u.BufferViewVec4f64,t),this}},{key:"mat3f",value:function(e,t){return this._appendField(e,u.BufferViewMat3f,t),this}},{key:"mat3f64",value:function(e,t){return this._appendField(e,u.BufferViewMat3f64,t),this}},{key:"mat4f",value:function(e,t){return this._appendField(e,u.BufferViewMat4f,t),this}},{key:"mat4f64",value:function(e,t){return this._appendField(e,u.BufferViewMat4f64,t),this}},{key:"vec4u8",value:function(e,t){return this._appendField(e,u.BufferViewVec4u8,t),this}},{key:"f32",value:function(e,t){return this._appendField(e,u.BufferViewFloat,t),this}},{key:"f64",value:function(e,t){return this._appendField(e,u.BufferViewFloat64,t),this}},{key:"u8",value:function(e,t){return this._appendField(e,u.BufferViewUint8,t),this}},{key:"u16",value:function(e,t){return this._appendField(e,u.BufferViewUint16,t),this}},{key:"i8",value:function(e,t){return this._appendField(e,u.BufferViewInt8,t),this}},{key:"vec2i8",value:function(e,t){return this._appendField(e,u.BufferViewVec2i8,t),this}},{key:"vec2i16",value:function(e,t){return this._appendField(e,u.BufferViewVec2i16,t),this}},{key:"vec2u8",value:function(e,t){return this._appendField(e,u.BufferViewVec2u8,t),this}},{key:"vec4u16",value:function(e,t){return this._appendField(e,u.BufferViewVec4u16,t),this}},{key:"u32",value:function(e,t){return this._appendField(e,u.BufferViewUint32,t),this}},{key:"_appendField",value:function(e,t,r){var n=t.ElementCount*(0,a.elementTypeSize)(t.ElementType),i=this.stride;this.fields.set(e,{size:n,constructor:t,offset:i,optional:r}),this.stride+=n,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.indexOf(e)>=0}},{key:"createBuffer",value:function(e){return new f(this,e)}},{key:"createView",value:function(e){return new f(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,r){return t.fields.set(r,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function s(){return new o}})),r.register("2TwbA",(function(e,n){function i(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function u(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function f(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}t(e.exports,"elementTypeSize",(function(){return i})),t(e.exports,"isSigned",(function(){return u})),t(e.exports,"isInteger",(function(){return a})),t(e.exports,"maximumValue",(function(){return f})),r("2VlWd")})),r.register("k8a7B",(function(e,n){t(e.exports,"EdgeInputBufferLayout",(function(){return f})),t(e.exports,"RegularEdgeInstancesLayout",(function(){return c})),t(e.exports,"SilhouetteEdgeInstancesLayout",(function(){return l}));var i=r("3h6Nu"),u=r("8Z9U2"),a=r("7S12W"),f=(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION).u16(a.VertexAttribute.COMPONENTINDEX).u16(a.VertexAttribute.U16PADDING),o=(0,u.newLayout)().vec2u8(a.VertexAttribute.SIDENESS),s=((0,i.glLayout)(o),(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION0).vec3f(a.VertexAttribute.POSITION1).u16(a.VertexAttribute.COMPONENTINDEX).u8(a.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(a.VertexAttribute.VARIANTSTROKE).u8(a.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).u8(a.VertexAttribute.U8PADDING,{glPadding:!0}).u16(a.VertexAttribute.U16PADDING,{glPadding:!0})),c=s.clone().vec3f(a.VertexAttribute.NORMAL),l=s.clone().vec3f(a.VertexAttribute.NORMALA).vec3f(a.VertexAttribute.NORMALB);new Map([[a.VertexAttribute.POSITION0,0],[a.VertexAttribute.POSITION1,1],[a.VertexAttribute.COMPONENTINDEX,2],[a.VertexAttribute.VARIANTOFFSET,3],[a.VertexAttribute.VARIANTSTROKE,4],[a.VertexAttribute.VARIANTEXTENSION,5],[a.VertexAttribute.NORMAL,6],[a.VertexAttribute.NORMALA,6],[a.VertexAttribute.NORMALB,7],[a.VertexAttribute.SIDENESS,8]])})),r.register("3h6Nu",(function(e,n){t(e.exports,"glLayout",(function(){return a}));var i=r("8JzMA"),u=r("LW1Aq");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.stride;return e.fieldNames.filter((function(t){var r=e.fields.get(t).optional;return!(r&&r.glPadding)})).map((function(n){var i=e.fields.get(n),a=i.constructor.ElementCount,o=f(i.constructor.ElementType),s=i.offset,c=!(!i.optional||!i.optional.glNormalized);return new(0,u.VertexElementDescriptor)(n,a,o,s,r,c,t)}))}function f(e){var t=o[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var o={u8:i.DataType.UNSIGNED_BYTE,u16:i.DataType.UNSIGNED_SHORT,u32:i.DataType.UNSIGNED_INT,i8:i.DataType.BYTE,i16:i.DataType.SHORT,i32:i.DataType.INT,f32:i.DataType.FLOAT}})),r.register("7S12W",(function(e,r){var n,i;t(e.exports,"VertexAttribute",(function(){return n})),(i=n||(n={})).POSITION="position",i.NORMAL="normal",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.MAPPOS="mapPos",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.NORMALCOMPRESSED="normalCompressed",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude"})),r.register("1VRLl",(function(e,n){t(e.exports,"RegularEdgeBufferWriter",(function(){return V})),t(e.exports,"SilhouetteEdgeBufferWriter",(function(){return y}));var i=r("8TSCy"),u=r("hvORu"),a=r("e4Xv2"),f=r("5YMIf"),o=r("3h6Nu"),s=r("k8a7B"),c=function(){"use strict";function e(){i.classCallCheck(this,e)}return i.createClass(e,[{key:"updateSettings",value:function(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?v:p}},{key:"write",value:function(e,t,r){var n=this.edgeHashFunction(r);w.seed=n;var i,u,a,f=w.getIntRange(0,255),o=w.getIntRange(0,this.settings.variants-1),s=w.getFloat(),c=255*(.5*(i=-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),u=1.2,a=i<0?-1:1,Math.pow(Math.abs(i),u)*a)+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,f),e.variantStroke.set(t,o),e.variantExtension.set(t,c)}},{key:"trim",value:function(e,t){return e.slice(0,t)}}]),e}(),l=new Float32Array(6),d=new Uint32Array(l.buffer),h=new Uint32Array(1);function p(e){var t=l;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],h[0]=5381;for(var r=0;r<d.length;r++)h[0]=31*h[0]+d[r];return h[0]}function v(e){var t=l;t[0]=g(e.position0[0]),t[1]=g(e.position0[1]),t[2]=g(e.position0[2]),t[3]=g(e.position1[0]),t[4]=g(e.position1[1]),t[5]=g(e.position1[2]),h[0]=5381;for(var r=0;r<d.length;r++)h[0]=31*h[0]+d[r];return h[0]}function g(e){return Math.round(1e4*e)/1e4}var V=function(){"use strict";function e(){i.classCallCheck(this,e),this.commonWriter=new c}return i.createClass(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return s.RegularEdgeInstancesLayout.createBuffer(e)}},{key:"write",value:function(e,t,r){this.commonWriter.write(e,t,r),(0,a.b)(A,r.faceNormal0,r.faceNormal1),(0,a.n)(A,A),e.normal.setVec(t,A)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();V.Layout=s.RegularEdgeInstancesLayout,V.glLayout=(0,o.glLayout)(s.RegularEdgeInstancesLayout,1);var y=function(){"use strict";function e(){i.classCallCheck(this,e),this.commonWriter=new c}return i.createClass(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return s.SilhouetteEdgeInstancesLayout.createBuffer(e)}},{key:"write",value:function(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();y.Layout=s.SilhouetteEdgeInstancesLayout,y.glLayout=(0,o.glLayout)(s.SilhouetteEdgeInstancesLayout,1);var A=(0,f.c)(),w=new(0,u.default)})),r.register("6lzcr",(function(e,n){t(e.exports,"extractEdges",(function(){return d}));var i,u,a=r("lNwWH"),f=r("iVfa0"),o=r("kkxEC"),s=r("e4Xv2"),c=r("5YMIf"),l=-1;function d(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,i=e.vertices.position,u=e.vertices.componentIndex,c=(0,f.deg2rad)(n.anglePlanar),d=(0,f.deg2rad)(n.angleSignificantEdge),A=Math.cos(d),E=Math.cos(c),I=y.edge,T=I.position0,N=I.position1,m=I.faceNormal0,O=I.faceNormal1,B=V(e),S=g(e),b=S.length/4,L=t.allocate(b),R=0,x=b,k=r.allocate(x),F=0,U=0,M=0,D=(0,a.range)(0,b),C=new Float32Array(b);(0,o.forEach)(C,(function(e,t,r){i.getVec(S[4*t+0],T),i.getVec(S[4*t+1],N),r[t]=(0,s.i)(T,N)})),D.sort((function(e,t){return C[t]-C[e]}));for(var P=new Array,_=new Array,G=0;G<b;G++){var W=D[G],X=C[W],z=S[4*W+0],H=S[4*W+1],Y=S[4*W+2],q=S[4*W+3],K=q===l;if(i.getVec(z,T),i.getVec(H,N),K)(0,s.s)(m,B[3*Y+0],B[3*Y+1],B[3*Y+2]),(0,s.g)(O,m),I.componentIndex=u.get(z),I.cosAngle=(0,s.d)(m,O);else{if((0,s.s)(m,B[3*Y+0],B[3*Y+1],B[3*Y+2]),(0,s.s)(O,B[3*q+0],B[3*q+1],B[3*q+2]),I.componentIndex=u.get(z),I.cosAngle=(0,s.d)(m,O),p(I,E))continue;I.cosAngle<-.9999&&(0,s.g)(O,m)}U+=X,M++,K||h(I,A)?(t.write(L,R++,I),P.push(X)):v(I,c)&&(r.write(k,F++,I),_.push(X))}var Z=new Float32Array(P.reverse()),j=new Float32Array(_.reverse());return{regular:{instancesData:t.trim(L,R),lodInfo:{lengths:Z}},silhouette:{instancesData:r.trim(k,F),lodInfo:{lengths:j}},averageEdgeLength:U/M}}function h(e,t){return e.cosAngle<t}function p(e,t){return e.cosAngle>t}function v(e,t){var r=(0,f.acosClamped)(e.cosAngle),n=y.fwd,i=y.ortho;return(0,s.r)(n,e.position1,e.position0),r*((0,s.d)((0,s.c)(i,e.faceNormal0,e.faceNormal1),n)>0?-1:1)>t}function g(e){for(var t=e.faces.length/3,r=e.faces,n=e.neighbors,i=0,u=0;u<t;u++){var a=n[3*u+0],f=n[3*u+1],o=n[3*u+2],s=r[3*u+0],c=r[3*u+1],d=r[3*u+2];i+=a===l||s<c?1:0,i+=f===l||c<d?1:0,i+=o===l||d<s?1:0}for(var h=new Int32Array(4*i),p=0,v=0;v<t;v++){var g=n[3*v+0],V=n[3*v+1],y=n[3*v+2],A=r[3*v+0],w=r[3*v+1],E=r[3*v+2];(g===l||A<w)&&(h[p++]=A,h[p++]=w,h[p++]=v,h[p++]=g),(V===l||w<E)&&(h[p++]=w,h[p++]=E,h[p++]=v,h[p++]=V),(y===l||E<A)&&(h[p++]=E,h[p++]=A,h[p++]=v,h[p++]=y)}return h}function V(e){for(var t=e.faces.length/3,r=e.vertices.position,n=e.faces,i=A.v0,u=A.v1,a=A.v2,f=new Float32Array(3*t),o=0;o<t;o++){var c=n[3*o+0],l=n[3*o+1],d=n[3*o+2];r.getVec(c,i),r.getVec(l,u),r.getVec(d,a),(0,s.f)(u,u,i),(0,s.f)(a,a,i),(0,s.c)(i,u,a),(0,s.n)(i,i),f[3*o+0]=i[0],f[3*o+1]=i[1],f[3*o+2]=i[2]}return f}(u=i||(i={}))[u.SOLID=0]="SOLID",u[u.SKETCH=1]="SKETCH";var y={edge:{position0:(0,c.c)(),position1:(0,c.c)(),faceNormal0:(0,c.c)(),faceNormal1:(0,c.c)(),componentIndex:0,cosAngle:0},ortho:(0,c.c)(),fwd:(0,c.c)()},A={v0:(0,c.c)(),v1:(0,c.c)(),v2:(0,c.c)()},w={anglePlanar:4,angleSignificantEdge:35}}))}();
//# sourceMappingURL=EdgeProcessingWorker.ac61484d.js.map
