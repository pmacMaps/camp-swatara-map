{"mappings":"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","sources":["node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js","node_modules/@arcgis/core/chunks/vec4f64.js","node_modules/@arcgis/core/geometry/support/buffer/types.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import e from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{unwrap as o,applySome as n,isSome as s,isNone as i}from\"../../../core/maybe.js\";import{a}from\"../../../chunks/mat3.js\";import{c}from\"../../../chunks/mat3f64.js\";import{f as l}from\"../../../chunks/vec3f64.js\";import{f as u}from\"../../../chunks/vec4f64.js\";import f from\"../MeshComponent.js\";import m from\"../MeshMaterialMetallicRoughness.js\";import p from\"../MeshTexture.js\";import{MeshVertexAttributes as d}from\"../MeshVertexAttributes.js\";import{BufferViewVec3f64 as g,BufferViewVec3f as x,BufferViewVec4f as h,BufferViewVec4u8 as v,BufferViewVec2f as w,BufferViewVec4u16 as b,BufferViewVec3u8 as j,BufferViewVec3u16 as y}from\"../buffer/BufferView.js\";import{t as A,a as M,s as C,b as T}from\"../../../chunks/vec32.js\";import{t as E,s as R,a as k}from\"../../../chunks/vec42.js\";import{createBuffer as B}from\"../buffer/utils.js\";import{georeferenceByTransform as F}from\"./georeference.js\";import{DefaultLoadingContext as $}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{load as I}from\"../../../views/3d/glTF/loader.js\";import{triangleFanToTriangles as L,triangleStripToTriangles as S,trianglesToTriangles as N}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{generateIndexArray as O}from\"../../../views/3d/webgl-engine/lib/geometryDataUtils.js\";import{COLOR_GAMMA as _}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as D,TextureWrapMode as G}from\"../../../views/webgl/enums.js\";import{f as P,c as U}from\"../../../chunks/vec33.js\";import{f as V,c as q}from\"../../../chunks/vec43.js\";import{n as z,f as K}from\"../../../chunks/vec22.js\";async function Q(t,e,r){const o=new $(H(r)),n=(await I(o,e,r,!0)).model,i=n.lods.shift(),a=new Map,c=new Map;n.textures.forEach(((t,e)=>a.set(e,Y(t)))),n.materials.forEach(((t,e)=>c.set(e,Z(t,a))));const l=X(i);for(const s of l.parts)tt(l,s,c);const{position:u,normal:f,tangent:m,color:p,texCoord0:g}=l.vertexAttributes,x={position:u.typedBuffer,normal:s(f)?f.typedBuffer:null,tangent:s(m)?m.typedBuffer:null,uv:s(g)?g.typedBuffer:null,color:s(p)?p.typedBuffer:null},h=F(x,t,r);return{transform:h.transform,components:l.components,spatialReference:t.spatialReference,vertexAttributes:new d({position:h.vertexAttributes.position,normal:h.vertexAttributes.normal,tangent:h.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function H(t){return null!=t&&t.resolveFile?{busy:!1,request:async(r,o,n)=>{const i=t.resolveFile(r),a=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await e(i,{responseType:a,signal:s(n)?n.signal:null})).data}}:null}function J(t,e){if(i(t))return\"-\";const o=t.typedBuffer;return`${r(e,o.buffer,(()=>e.size))}/${o.byteOffset}/${o.byteLength}`}function W(t){return s(t)?t.toString():\"-\"}function X(t){let e=0;const o={color:!1,tangent:!1,normal:!1,texCoord0:!1},n=new Map,s=new Map,i=[];for(const a of t.parts){const{attributes:{position:t,normal:c,color:l,tangent:u,texCoord0:f}}=a,m=`\\n      ${J(t,n)}/\\n      ${J(c,n)}/\\n      ${J(l,n)}/\\n      ${J(u,n)}/\\n      ${J(f,n)}/\\n      ${W(a.transform)}\\n    `;let p=!1;const d=r(s,m,(()=>(p=!0,{start:e,length:t.count})));p&&(e+=t.count),c&&(o.normal=!0),l&&(o.color=!0),u&&(o.tangent=!0),f&&(o.texCoord0=!0),i.push({gltf:a,writeVertices:p,region:d})}return{vertexAttributes:{position:B(g,e),normal:o.normal?B(x,e):null,tangent:o.tangent?B(h,e):null,color:o.color?B(v,e):null,texCoord0:o.texCoord0?B(w,e):null},parts:i,components:[]}}function Y(t){return new p({data:t.data,wrap:nt(t.parameters.wrap)})}function Z(e,r){const s=new t(at(e.color,e.opacity)),i=e.emissiveFactor?new t(ct(e.emissiveFactor)):null;return new m({color:s,colorTexture:o(n(e.textureColor,(t=>r.get(t)))),normalTexture:o(n(e.textureNormal,(t=>r.get(t)))),emissiveColor:i,emissiveTexture:o(n(e.textureEmissive,(t=>r.get(t)))),occlusionTexture:o(n(e.textureOcclusion,(t=>r.get(t)))),alphaMode:ot(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:o(n(e.textureMetallicRoughness,(t=>r.get(t))))})}function tt(t,e,r){e.writeVertices&&et(t,e);const o=e.gltf,n=rt(o.indices||o.attributes.position.count,o.primitiveType),s=e.region.start;if(s)for(let i=0;i<n.length;i++)n[i]+=s;t.components.push(new f({faces:n,material:r.get(o.material),trustSourceNormals:!0}))}function et(t,e){const{position:r,normal:o,tangent:n,color:i,texCoord0:l}=t.vertexAttributes,u=e.region.start,{attributes:f,transform:m}=e.gltf,p=f.position.count;if(A(r.slice(u,p),f.position,m),s(f.normal)&&s(o)){const t=a(c(),m);M(o.slice(u,p),f.normal,t)}else s(o)&&P(o,0,0,1,{dstIndex:u,count:p});if(s(f.tangent)&&s(n)){const t=a(c(),m);E(n.slice(u,p),f.tangent,t)}else s(n)&&V(n,0,0,1,1,{dstIndex:u,count:p});if(s(f.texCoord0)&&s(l)?z(l.slice(u,p),f.texCoord0):s(l)&&K(l,0,0,{dstIndex:u,count:p}),s(f.color)&&s(i)){const t=f.color,e=i.slice(u,p);if(4===t.elementCount)t instanceof h?R(e,t,255):t instanceof v?q(e,t):t instanceof b&&k(e,t,8);else{V(e,255,255,255,255);const r=j.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof x?C(r,t,255):t instanceof j?U(r,t):t instanceof y&&T(r,t,8)}}else s(i)&&V(i.slice(u,p),255,255,255,255)}function rt(t,e){switch(e){case D.TRIANGLES:return N(t,O);case D.TRIANGLE_STRIP:return S(t);case D.TRIANGLE_FAN:return L(t)}}function ot(t){switch(t){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function nt(t){return{horizontal:st(t.s),vertical:st(t.t)}}function st(t){switch(t){case G.CLAMP_TO_EDGE:return\"clamp\";case G.MIRRORED_REPEAT:return\"mirror\";case G.REPEAT:return\"repeat\"}}function it(t){return t**(1/_)*255}function at(t,e){return u(it(t[0]),it(t[1]),it(t[2]),e)}function ct(t){return l(it(t[0]),it(t[1]),it(t[2]))}export{Q as loadGLTFMesh};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function i(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const _=a(),l=o(),N=s(),U=c(),I=i(),O=f(),T=Object.freeze({__proto__:null,create:n,clone:t,fromValues:r,fromArray:e,createView:u,zeros:a,ones:o,unitX:s,unitY:c,unitZ:i,unitW:f,ZEROS:_,ONES:l,UNIT_X:N,UNIT_Y:U,UNIT_Z:I,UNIT_W:O});export{l as O,N as U,_ as Z,u as a,t as b,n as c,e as d,c as e,r as f,i as g,f as h,U as i,I as j,O as k,o,s as u,T as v,a as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";function e(e){switch(e){case\"u8\":case\"i8\":return 1;case\"u16\":case\"i16\":return 2;case\"u32\":case\"i32\":case\"f32\":return 4;case\"f64\":return 8;default:return}}function r(e){switch(e){case\"u8\":case\"u16\":case\"u32\":return!1;case\"i8\":case\"i16\":case\"i32\":case\"f32\":case\"f64\":return!0;default:return}}function c(e){switch(e){case\"u8\":case\"u16\":case\"u32\":case\"i8\":case\"i16\":case\"i32\":return!0;case\"f32\":case\"f64\":return!1;default:return}}function u(e){switch(e){case\"u8\":return 255;case\"u16\":return 65535;case\"u32\":return 4294967295;case\"i8\":return 127;case\"i16\":return 32767;case\"i32\":return 2147483647;case\"f32\":return 3402823e32;case\"f64\":return 179769e303;default:return}}export{e as elementTypeSize,c as isInteger,r as isSigned,u as maximumValue};\n"],"names":["$8TSCy","parcelRequire","$7887a642e247b089$export$d3fb9c705f65cc77","t1","e1","r1","$7887a642e247b089$var$_Q","apply","this","arguments","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","o1","n1","i1","a1","c1","l1","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","s1","_vertexAttributes","u1","f1","m1","p1","g1","x1","h1","$cZCWI","DefaultLoadingContext","$7887a642e247b089$var$H","$h7U64","load","_ctx","sent","model","lods","shift","Map","textures","forEach","t2","e2","set","$7887a642e247b089$var$Y","materials","t3","e3","$7887a642e247b089$var$Z","$7887a642e247b089$var$X","undefined","parts","Symbol","iterator","next","done","value","$7887a642e247b089$var$tt","t0","return","vertexAttributes","position","normal","tangent","color","texCoord0","typedBuffer","$7qybv","isSome","uv","$4pnUn","georeferenceByTransform","transform","components","spatialReference","$9VOjl","MeshVertexAttributes","t4","resolveFile","busy","request","r2","o2","n2","i2","a2","$9pNSx","default","responseType","signal","data","$7887a642e247b089$var$J","t5","e4","isNone","o3","concat","$edmn4","getOrCreateMapValue","buffer","size","byteOffset","byteLength","t7","e5","o4","n3","s2","i3","_step1","t6","a3","_attributes","attributes","_$t","c2","l2","u2","f2","m2","toString","p2","d1","start","length","count","push","gltf","writeVertices","region","_loop","err","$eKMts","createBuffer","$YI2am","BufferViewVec3f64","BufferViewVec3f","BufferViewVec4f","BufferViewVec4u8","BufferViewVec2f","t8","$iJpq3","wrap","t18","parameters","horizontal","$7887a642e247b089$var$st","s","vertical","t","e6","r3","t22","t21","e10","s3","$jgs9n","opacity","$iLaO9","f","$7887a642e247b089$var$it","i4","emissiveFactor","$5YMIf","$4aGER","colorTexture","unwrap","applySome","textureColor","t9","get","normalTexture","textureNormal","t10","emissiveColor","emissiveTexture","textureEmissive","t11","occlusionTexture","textureOcclusion","t12","alphaMode","$7887a642e247b089$var$ot","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","t13","t14","e7","r4","t15","e8","r6","o6","n5","i6","l3","u3","_gltf","f3","m3","p3","$hhwnq","slice","$j3x2p","a","$gnwu9","c","$fxkX0","dstIndex","_$t1","$cUsSX","$6ma5C","$fVcSp","n","_$t2","_$e","elementCount","BufferViewVec4u16","r5","BufferViewVec3u8","fromTypedArray","typedBufferStride","BufferViewVec3u16","b","$7887a642e247b089$var$et","o5","n4","t16","e9","$8JzMA","PrimitiveType","TRIANGLES","$fmpb6","trianglesToTriangles","$gUx67","generateIndexArray","TRIANGLE_STRIP","triangleStripToTriangles","TRIANGLE_FAN","triangleFanToTriangles","$7887a642e247b089$var$rt","indices","primitiveType","s4","i5","$lqmgd","faces","material","trustSourceNormals","t17","t19","TextureWrapMode","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","t20","Math","pow","$lHcHb","COLOR_GAMMA","$da8500043cd28630$export$db3b6bfb95261072","$da8500043cd28630$export$2d1720544b23b823","$da8500043cd28630$export$4368d992c4eafac0","_$r","min","_$n","$da8500043cd28630$export$407448d2b89b1813","Float64Array","$da8500043cd28630$export$df995fae86a55f06","$da8500043cd28630$export$ae1af26003f05816","$da8500043cd28630$export$3b14a55fb2447963","$da8500043cd28630$export$f1e1789686576879","$da8500043cd28630$export$39b482c5e57630a8","$da8500043cd28630$export$dda1d9f60106f0e9","$da8500043cd28630$export$dc98b0b04f4c7758","$da8500043cd28630$export$c4ce752e73470fba","$da8500043cd28630$export$3a6d5c9ae78a2c08","$da8500043cd28630$export$23f2a1d2818174ef","$da8500043cd28630$export$35e795649ee09318","$da8500043cd28630$export$342063e11d6c3cad","Object","freeze","__proto__","create","clone","fromValues","fromArray","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","$21b9af477ee02ee5$export$1ec4aabe1b9ae11d","$21b9af477ee02ee5$export$969d24321cf24522","$21b9af477ee02ee5$export$a287f47fed4544b8","$21b9af477ee02ee5$export$444e1cd7953d6ffa"],"version":3,"file":"loadGLTFMesh.7e19e7ef.js.map"}