{"mappings":"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","sources":["node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js","node_modules/@arcgis/core/chunks/vec4f64.js","node_modules/@arcgis/core/geometry/support/buffer/types.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import e from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{unwrap as o,applySome as n,isSome as s,isNone as i}from\"../../../core/maybe.js\";import{a}from\"../../../chunks/mat3.js\";import{c}from\"../../../chunks/mat3f64.js\";import{f as l}from\"../../../chunks/vec3f64.js\";import{f as u}from\"../../../chunks/vec4f64.js\";import f from\"../MeshComponent.js\";import m from\"../MeshMaterialMetallicRoughness.js\";import p from\"../MeshTexture.js\";import{MeshVertexAttributes as d}from\"../MeshVertexAttributes.js\";import{BufferViewVec3f64 as g,BufferViewVec3f as x,BufferViewVec4f as h,BufferViewVec4u8 as v,BufferViewVec2f as w,BufferViewVec4u16 as b,BufferViewVec3u8 as j,BufferViewVec3u16 as y}from\"../buffer/BufferView.js\";import{t as A,a as M,s as C,b as T}from\"../../../chunks/vec32.js\";import{t as E,s as R,a as k}from\"../../../chunks/vec42.js\";import{createBuffer as B}from\"../buffer/utils.js\";import{georeferenceByTransform as F}from\"./georeference.js\";import{DefaultLoadingContext as $}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{load as I}from\"../../../views/3d/glTF/loader.js\";import{triangleFanToTriangles as L,triangleStripToTriangles as S,trianglesToTriangles as N}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{generateIndexArray as O}from\"../../../views/3d/webgl-engine/lib/geometryDataUtils.js\";import{COLOR_GAMMA as _}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as D,TextureWrapMode as G}from\"../../../views/webgl/enums.js\";import{f as P,c as U}from\"../../../chunks/vec33.js\";import{f as V,c as q}from\"../../../chunks/vec43.js\";import{n as z,f as K}from\"../../../chunks/vec22.js\";async function Q(t,e,r){const o=new $(H(r)),n=(await I(o,e,r,!0)).model,i=n.lods.shift(),a=new Map,c=new Map;n.textures.forEach(((t,e)=>a.set(e,Y(t)))),n.materials.forEach(((t,e)=>c.set(e,Z(t,a))));const l=X(i);for(const s of l.parts)tt(l,s,c);const{position:u,normal:f,tangent:m,color:p,texCoord0:g}=l.vertexAttributes,x={position:u.typedBuffer,normal:s(f)?f.typedBuffer:null,tangent:s(m)?m.typedBuffer:null,uv:s(g)?g.typedBuffer:null,color:s(p)?p.typedBuffer:null},h=F(x,t,r);return{transform:h.transform,components:l.components,spatialReference:t.spatialReference,vertexAttributes:new d({position:h.vertexAttributes.position,normal:h.vertexAttributes.normal,tangent:h.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function H(t){return null!=t&&t.resolveFile?{busy:!1,request:async(r,o,n)=>{const i=t.resolveFile(r),a=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await e(i,{responseType:a,signal:s(n)?n.signal:null})).data}}:null}function J(t,e){if(i(t))return\"-\";const o=t.typedBuffer;return`${r(e,o.buffer,(()=>e.size))}/${o.byteOffset}/${o.byteLength}`}function W(t){return s(t)?t.toString():\"-\"}function X(t){let e=0;const o={color:!1,tangent:!1,normal:!1,texCoord0:!1},n=new Map,s=new Map,i=[];for(const a of t.parts){const{attributes:{position:t,normal:c,color:l,tangent:u,texCoord0:f}}=a,m=`\\n      ${J(t,n)}/\\n      ${J(c,n)}/\\n      ${J(l,n)}/\\n      ${J(u,n)}/\\n      ${J(f,n)}/\\n      ${W(a.transform)}\\n    `;let p=!1;const d=r(s,m,(()=>(p=!0,{start:e,length:t.count})));p&&(e+=t.count),c&&(o.normal=!0),l&&(o.color=!0),u&&(o.tangent=!0),f&&(o.texCoord0=!0),i.push({gltf:a,writeVertices:p,region:d})}return{vertexAttributes:{position:B(g,e),normal:o.normal?B(x,e):null,tangent:o.tangent?B(h,e):null,color:o.color?B(v,e):null,texCoord0:o.texCoord0?B(w,e):null},parts:i,components:[]}}function Y(t){return new p({data:t.data,wrap:nt(t.parameters.wrap)})}function Z(e,r){const s=new t(at(e.color,e.opacity)),i=e.emissiveFactor?new t(ct(e.emissiveFactor)):null;return new m({color:s,colorTexture:o(n(e.textureColor,(t=>r.get(t)))),normalTexture:o(n(e.textureNormal,(t=>r.get(t)))),emissiveColor:i,emissiveTexture:o(n(e.textureEmissive,(t=>r.get(t)))),occlusionTexture:o(n(e.textureOcclusion,(t=>r.get(t)))),alphaMode:ot(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:o(n(e.textureMetallicRoughness,(t=>r.get(t))))})}function tt(t,e,r){e.writeVertices&&et(t,e);const o=e.gltf,n=rt(o.indices||o.attributes.position.count,o.primitiveType),s=e.region.start;if(s)for(let i=0;i<n.length;i++)n[i]+=s;t.components.push(new f({faces:n,material:r.get(o.material),trustSourceNormals:!0}))}function et(t,e){const{position:r,normal:o,tangent:n,color:i,texCoord0:l}=t.vertexAttributes,u=e.region.start,{attributes:f,transform:m}=e.gltf,p=f.position.count;if(A(r.slice(u,p),f.position,m),s(f.normal)&&s(o)){const t=a(c(),m);M(o.slice(u,p),f.normal,t)}else s(o)&&P(o,0,0,1,{dstIndex:u,count:p});if(s(f.tangent)&&s(n)){const t=a(c(),m);E(n.slice(u,p),f.tangent,t)}else s(n)&&V(n,0,0,1,1,{dstIndex:u,count:p});if(s(f.texCoord0)&&s(l)?z(l.slice(u,p),f.texCoord0):s(l)&&K(l,0,0,{dstIndex:u,count:p}),s(f.color)&&s(i)){const t=f.color,e=i.slice(u,p);if(4===t.elementCount)t instanceof h?R(e,t,255):t instanceof v?q(e,t):t instanceof b&&k(e,t,8);else{V(e,255,255,255,255);const r=j.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof x?C(r,t,255):t instanceof j?U(r,t):t instanceof y&&T(r,t,8)}}else s(i)&&V(i.slice(u,p),255,255,255,255)}function rt(t,e){switch(e){case D.TRIANGLES:return N(t,O);case D.TRIANGLE_STRIP:return S(t);case D.TRIANGLE_FAN:return L(t)}}function ot(t){switch(t){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function nt(t){return{horizontal:st(t.s),vertical:st(t.t)}}function st(t){switch(t){case G.CLAMP_TO_EDGE:return\"clamp\";case G.MIRRORED_REPEAT:return\"mirror\";case G.REPEAT:return\"repeat\"}}function it(t){return t**(1/_)*255}function at(t,e){return u(it(t[0]),it(t[1]),it(t[2]),e)}function ct(t){return l(it(t[0]),it(t[1]),it(t[2]))}export{Q as loadGLTFMesh};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function i(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const _=a(),l=o(),N=s(),U=c(),I=i(),O=f(),T=Object.freeze({__proto__:null,create:n,clone:t,fromValues:r,fromArray:e,createView:u,zeros:a,ones:o,unitX:s,unitY:c,unitZ:i,unitW:f,ZEROS:_,ONES:l,UNIT_X:N,UNIT_Y:U,UNIT_Z:I,UNIT_W:O});export{l as O,N as U,_ as Z,u as a,t as b,n as c,e as d,c as e,r as f,i as g,f as h,U as i,I as j,O as k,o,s as u,T as v,a as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";function e(e){switch(e){case\"u8\":case\"i8\":return 1;case\"u16\":case\"i16\":return 2;case\"u32\":case\"i32\":case\"f32\":return 4;case\"f64\":return 8;default:return}}function r(e){switch(e){case\"u8\":case\"u16\":case\"u32\":return!1;case\"i8\":case\"i16\":case\"i32\":case\"f32\":case\"f64\":return!0;default:return}}function c(e){switch(e){case\"u8\":case\"u16\":case\"u32\":case\"i8\":case\"i16\":case\"i32\":return!0;case\"f32\":case\"f64\":return!1;default:return}}function u(e){switch(e){case\"u8\":return 255;case\"u16\":return 65535;case\"u32\":return 4294967295;case\"i8\":return 127;case\"i16\":return 32767;case\"i32\":return 2147483647;case\"f32\":return 3402823e32;case\"f64\":return 179769e303;default:return}}export{e as elementTypeSize,c as isInteger,r as isSigned,u as maximumValue};\n"],"names":["$hJt7u","parcelRequire","async","$937f4d75b887db0e$export$d3fb9c705f65cc77","t1","e1","r1","o1","$5cRuQ","DefaultLoadingContext","t4","resolveFile","busy","request","r2","o2","n2","i2","a2","$bYA0c","default","responseType","signal","$1CpCt","isSome","data","n1","$iXVKm","load","model","i1","lods","shift","a1","Map","c1","textures","forEach","t2","e2","set","t9","$44zDp","wrap","$937f4d75b887db0e$var$nt","parameters","materials","t3","e3","e6","r3","s3","t25","color","e11","opacity","$64ROT","f","$937f4d75b887db0e$var$it","i4","emissiveFactor","t26","$iHxaG","$9CdsJ","colorTexture","unwrap","applySome","textureColor","t10","get","normalTexture","textureNormal","t11","emissiveColor","emissiveTexture","textureEmissive","t12","occlusionTexture","textureOcclusion","t13","alphaMode","$937f4d75b887db0e$var$ot","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","t14","$937f4d75b887db0e$var$Z","l1","t7","e5","o4","tangent","normal","texCoord0","n3","s2","i3","a3","parts","attributes","position","t8","c2","l2","u2","f2","m2","$937f4d75b887db0e$var$J","$937f4d75b887db0e$var$W","transform","p2","d1","$035lZ","getOrCreateMapValue","start","length","count","push","gltf","writeVertices","region","vertexAttributes","$6Jhbg","createBuffer","$k4Lc2","BufferViewVec3f64","BufferViewVec3f","BufferViewVec4f","BufferViewVec4u8","BufferViewVec2f","components","$937f4d75b887db0e$var$X","s1","$937f4d75b887db0e$var$tt","u1","f1","m1","p1","g1","x1","typedBuffer","uv","h1","$cjn8Z","georeferenceByTransform","spatialReference","$7uKdD","MeshVertexAttributes","t5","e4","isNone","o3","buffer","size","byteOffset","byteLength","t6","toString","t15","e7","r4","t16","e8","r5","o6","n5","i6","l3","u3","f3","m3","p3","$3Bcds","t","slice","t17","$52822","a","$4vUOo","c","$5gcCk","dstIndex","t18","$7vBMy","$7JiCL","$lLtQf","n","t19","e9","elementCount","s","BufferViewVec4u16","r6","BufferViewVec3u8","fromTypedArray","typedBufferStride","BufferViewVec3u16","b","$937f4d75b887db0e$var$et","o5","n4","t20","e10","$l3QXd","PrimitiveType","TRIANGLES","$jQTCa","trianglesToTriangles","$7AfyI","generateIndexArray","TRIANGLE_STRIP","triangleStripToTriangles","TRIANGLE_FAN","triangleFanToTriangles","$937f4d75b887db0e$var$rt","indices","primitiveType","s4","i5","$lnPqT","faces","material","trustSourceNormals","t21","t22","horizontal","$937f4d75b887db0e$var$st","vertical","t23","TextureWrapMode","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","t24","$amFar","COLOR_GAMMA","$46ccdd4bf9bfc9cc$export$db3b6bfb95261072","$46ccdd4bf9bfc9cc$export$2d1720544b23b823","$46ccdd4bf9bfc9cc$export$4368d992c4eafac0","Math","min","$46ccdd4bf9bfc9cc$export$407448d2b89b1813","Float64Array","$46ccdd4bf9bfc9cc$export$df995fae86a55f06","$46ccdd4bf9bfc9cc$export$ae1af26003f05816","$46ccdd4bf9bfc9cc$export$3b14a55fb2447963","$46ccdd4bf9bfc9cc$export$f1e1789686576879","$46ccdd4bf9bfc9cc$export$39b482c5e57630a8","$46ccdd4bf9bfc9cc$export$dda1d9f60106f0e9","$46ccdd4bf9bfc9cc$export$dc98b0b04f4c7758","$46ccdd4bf9bfc9cc$export$c4ce752e73470fba","$46ccdd4bf9bfc9cc$export$3a6d5c9ae78a2c08","$46ccdd4bf9bfc9cc$export$23f2a1d2818174ef","$46ccdd4bf9bfc9cc$export$35e795649ee09318","$46ccdd4bf9bfc9cc$export$342063e11d6c3cad","Object","freeze","__proto__","create","clone","fromValues","fromArray","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","$1978dac8f2e7ab20$export$1ec4aabe1b9ae11d","$1978dac8f2e7ab20$export$969d24321cf24522","$1978dac8f2e7ab20$export$a287f47fed4544b8","$1978dac8f2e7ab20$export$444e1cd7953d6ffa"],"version":3,"file":"loadGLTFMesh.8f4bbcc0.js.map"}