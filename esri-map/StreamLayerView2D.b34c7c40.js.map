{"mappings":"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","sources":["node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../rest/support/FeatureSet.js\";import a from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";import p from\"../../layers/StreamLayerView.js\";function c(e,t){if(null==e&&null==t)return null;const r={};return null!=t&&(r.geometry=t.toJSON()),null!=e&&(r.where=e),r}let u=class extends(p(a)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null,this._enabledEventTypes=new Set}initialize(){this.addHandles([s((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),s((()=>this.layer.purgeOptions),(()=>this._update())),s((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\")}get connectionError(){return this.pipelineErrorString?new t(\"stream-controller\",this.pipelineErrorString):null}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const i=super.on(e,t),o=this;return{remove(){i.remove(),s&&(o._proxy.closed||o.hasEventListener(e)||o._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=n.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){this._proxy?.pauseStream()}_doResume(){this._proxy?.resumeStream()}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(c(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,o=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",isPaused:this._isUserPaused,fields:r,geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:c(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([i()],u.prototype,\"pipelineConnectionStatus\",void 0),e([i()],u.prototype,\"pipelineErrorString\",void 0),e([i({readOnly:!0})],u.prototype,\"connectionError\",null),e([i({readOnly:!0})],u.prototype,\"_streamConnectionStatus\",null),u=e([o(\"esri.views.2d.layers.StreamLayerView2D\")],u);const y=u;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import t from\"../../layers/support/FeatureFilter.js\";const o=o=>{let i=class extends o{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return this._isUserPaused?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:t})],i.prototype,\"filter\",void 0),i=s([r(\"esri.layers.mixins.StreamLayerView\")],i),i};export{o as default};\n"],"names":["$j6uz9","parcelRequire","$1b9ffa91c8004b8b$var$c","e","t","r","geometry","toJSON","where","$1b9ffa91c8004b8b$var$u","$bNjov","default","$lstEf","initialize","this","addHandles","$cc23H","watch","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","_onSuspendedChange","bind","connectionError","pipelineErrorString","$bPmsI","Array","isArray","$1gMab","handlesGroup","map","s","includes","_enabledEventTypes","add","enableEvent","i","super","o","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","_cleanUpQuery","then","$gEU1A","fromJSON","features","forEach","sourceLayer","detach","pipelineConnectionStatus","_streamConnectionStatus","_doPause","pauseStream","_doResume","resumeStream","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","definitionExpression","geometryDefinition","async","objectIdField","fields","$8it4a","toJSONGeometryType","geometryType","spatialReference","type","isPaused","_isUserPaused","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","constructor","arguments","Set","_","$hTI69","property","prototype","readOnly","$qA6zg","subclass","$1b9ffa91c8004b8b$export$2e2bcd8739ae039","$89635098992d5571$export$2e2bcd8739ae039","resume","pause","connectionStatus","filter","$gkHrn"],"version":3,"file":"StreamLayerView2D.b34c7c40.js.map"}