function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("cF7II",(function(r,n){e(r.exports,"loadGLTFMesh",(function(){return O}));var i=t("hJt7u"),s=t("bYA0c"),o=t("035lZ"),c=t("8TN87"),a=t("1CpCt"),u=t("52822"),f=t("4vUOo"),l=t("iHxaG"),m=t("64ROT"),p=t("lnPqT"),h=t("9CdsJ"),g=t("44zDp"),d=t("7uKdD"),x=t("k4Lc2"),w=t("3Bcds"),S=t("7vBMy"),_=t("6Jhbg"),y=t("cjn8Z"),v=t("5cRuQ"),b=t("iXVKm"),V=t("jQTCa"),B=t("7AfyI"),T=t("amFar"),M=t("l3QXd"),P=t("5gcCk"),A=t("7JiCL"),C=t("lLtQf");async function O(e,t,r){const n=new(0,v.DefaultLoadingContext)(function(e){return e?.resolveFile?{busy:!1,request:async(t,r,n)=>{const i=e.resolveFile(t),o="image"===r?"image":"binary"===r?"array-buffer":"json";return(await(0,s.default)(i,{responseType:o,signal:(0,a.isSome)(n)?n.signal:null})).data}}:null}(r)),c=(await(0,b.load)(n,t,r,!0)).model,u=c.lods.shift(),f=new Map,p=new Map;c.textures.forEach(((e,t)=>f.set(t,function(e){return new(0,g.default)({data:e.data,wrap:I(e.parameters.wrap)})}(e)))),c.materials.forEach(((e,t)=>p.set(t,function(e,t){const r=new(0,i.default)(function(e,t){return(0,m.f)(L(e[0]),L(e[1]),L(e[2]),t)}(e.color,e.opacity)),n=e.emissiveFactor?new(0,i.default)(function(e){return(0,l.f)(L(e[0]),L(e[1]),L(e[2]))}(e.emissiveFactor)):null;return new(0,h.default)({color:r,colorTexture:(0,a.unwrap)((0,a.applySome)(e.textureColor,(e=>t.get(e)))),normalTexture:(0,a.unwrap)((0,a.applySome)(e.textureNormal,(e=>t.get(e)))),emissiveColor:n,emissiveTexture:(0,a.unwrap)((0,a.applySome)(e.textureEmissive,(e=>t.get(e)))),occlusionTexture:(0,a.unwrap)((0,a.applySome)(e.textureOcclusion,(e=>t.get(e)))),alphaMode:k(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:(0,a.unwrap)((0,a.applySome)(e.textureMetallicRoughness,(e=>t.get(e))))})}(e,f))));const w=function(e){let t=0;const r={color:!1,tangent:!1,normal:!1,texCoord0:!1},n=new Map,i=new Map,s=[];for(const c of e.parts){const{attributes:{position:e,normal:a,color:u,tangent:f,texCoord0:l}}=c,m=`\n      ${R(e,n)}/\n      ${R(a,n)}/\n      ${R(u,n)}/\n      ${R(f,n)}/\n      ${R(l,n)}/\n      ${E(c.transform)}\n    `;let p=!1;const h=(0,o.getOrCreateMapValue)(i,m,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),a&&(r.normal=!0),u&&(r.color=!0),f&&(r.tangent=!0),l&&(r.texCoord0=!0),s.push({gltf:c,writeVertices:p,region:h})}return{vertexAttributes:{position:(0,_.createBuffer)(x.BufferViewVec3f64,t),normal:r.normal?(0,_.createBuffer)(x.BufferViewVec3f,t):null,tangent:r.tangent?(0,_.createBuffer)(x.BufferViewVec4f,t):null,color:r.color?(0,_.createBuffer)(x.BufferViewVec4u8,t):null,texCoord0:r.texCoord0?(0,_.createBuffer)(x.BufferViewVec2f,t):null},parts:s,components:[]}}(u);for(const e of w.parts)z(w,e,p);const{position:S,normal:V,tangent:B,color:T,texCoord0:M}=w.vertexAttributes,P={position:S.typedBuffer,normal:(0,a.isSome)(V)?V.typedBuffer:null,tangent:(0,a.isSome)(B)?B.typedBuffer:null,uv:(0,a.isSome)(M)?M.typedBuffer:null,color:(0,a.isSome)(T)?T.typedBuffer:null},A=(0,y.georeferenceByTransform)(P,e,r);return{transform:A.transform,components:w.components,spatialReference:e.spatialReference,vertexAttributes:new(0,d.MeshVertexAttributes)({position:A.vertexAttributes.position,normal:A.vertexAttributes.normal,tangent:A.vertexAttributes.tangent,color:P.color,uv:P.uv})}}function R(e,t){if((0,a.isNone)(e))return"-";const r=e.typedBuffer;return`${(0,o.getOrCreateMapValue)(t,r.buffer,(()=>t.size))}/${r.byteOffset}/${r.byteLength}`}function E(e){return(0,a.isSome)(e)?e.toString():"-"}function z(e,t,r){t.writeVertices&&function(e,t){const{position:r,normal:n,tangent:i,color:s,texCoord0:o}=e.vertexAttributes,l=t.region.start,{attributes:m,transform:p}=t.gltf,h=m.position.count;if((0,w.t)(r.slice(l,h),m.position,p),(0,a.isSome)(m.normal)&&(0,a.isSome)(n)){const e=(0,u.a)((0,f.c)(),p),t=n.slice(l,h);(0,w.a)(t,m.normal,e),(0,c.hasScaling)(e)&&(0,w.n)(t,t)}else(0,a.isSome)(n)&&(0,P.f)(n,0,0,1,{dstIndex:l,count:h});if((0,a.isSome)(m.tangent)&&(0,a.isSome)(i)){const e=(0,u.a)((0,f.c)(),p),t=i.slice(l,h);(0,S.t)(t,m.tangent,e),(0,c.hasScaling)(e)&&(0,S.n)(t,t)}else(0,a.isSome)(i)&&(0,A.f)(i,0,0,1,1,{dstIndex:l,count:h});if((0,a.isSome)(m.texCoord0)&&(0,a.isSome)(o)?(0,C.n)(o.slice(l,h),m.texCoord0):(0,a.isSome)(o)&&(0,C.f)(o,0,0,{dstIndex:l,count:h}),(0,a.isSome)(m.color)&&(0,a.isSome)(s)){const e=m.color,t=s.slice(l,h);if(4===e.elementCount)e instanceof x.BufferViewVec4f?(0,S.s)(t,e,255):e instanceof x.BufferViewVec4u8?(0,A.c)(t,e):e instanceof x.BufferViewVec4u16&&(0,S.a)(t,e,8);else{(0,A.f)(t,255,255,255,255);const r=x.BufferViewVec3u8.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof x.BufferViewVec3f?(0,w.s)(r,e,255):e instanceof x.BufferViewVec3u8?(0,P.c)(r,e):e instanceof x.BufferViewVec3u16&&(0,w.b)(r,e,8)}}else(0,a.isSome)(s)&&(0,A.f)(s.slice(l,h),255,255,255,255)}(e,t);const n=t.gltf,i=function(e,t){switch(t){case M.PrimitiveType.TRIANGLES:return(0,V.trianglesToTriangles)(e,B.generateIndexArray);case M.PrimitiveType.TRIANGLE_STRIP:return(0,V.triangleStripToTriangles)(e);case M.PrimitiveType.TRIANGLE_FAN:return(0,V.triangleFanToTriangles)(e)}}(n.indices||n.attributes.position.count,n.primitiveType),s=t.region.start;if(s)for(let e=0;e<i.length;e++)i[e]+=s;e.components.push(new(0,p.default)({faces:i,material:r.get(n.material),trustSourceNormals:!0}))}function k(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function I(e){return{horizontal:j(e.s),vertical:j(e.t)}}function j(e){switch(e){case M.TextureWrapMode.CLAMP_TO_EDGE:return"clamp";case M.TextureWrapMode.MIRRORED_REPEAT:return"mirror";case M.TextureWrapMode.REPEAT:return"repeat"}}function L(e){return e**(1/T.COLOR_GAMMA)*255}})),t.register("2bApG",(function(r,n){function i(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function c(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}e(r.exports,"elementTypeSize",(function(){return i})),e(r.exports,"isSigned",(function(){return s})),e(r.exports,"isInteger",(function(){return o})),e(r.exports,"maximumValue",(function(){return c})),t("5HTPH")})),t.register("a9my6",(function(r,n){e(r.exports,"ObjectStack",(function(){return s}));var i=t("jzWcQ");class s{get(){return 0===this._itemsPtr&&(0,i.nextTick)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,o));e++)this._items.push(this.allocator())}constructor(e){this.allocator=e,this._items=[],this._itemsPtr=0,this._grow()}}const o=1024})),t.register("hjHdJ",(function(r,n){e(r.exports,"sv3d",(function(){return s})),e(r.exports,"sv4d",(function(){return o})),e(r.exports,"sm4d",(function(){return c}));var i=t("2zNcU");i.VectorStack.createVec2f64();const s=i.VectorStack.createVec3f64(),o=i.VectorStack.createVec4f64(),c=(i.VectorStack.createMat3f64(),i.VectorStack.createMat4f64());i.VectorStack.createQuatf64()})),t.register("2zNcU",(function(r,n){e(r.exports,"VectorStack",(function(){return m}));var i=t("gMUc8"),s=t("jzWcQ"),o=t("4vUOo"),c=t("2ouJi"),a=t("6MY4j"),u=t("lOOi9"),f=t("iHxaG"),l=t("64ROT");class m{get(){0===this._itemsPtr&&(0,s.nextTick)((()=>this._reset()));const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const e=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let t=0;t<this._itemsPerBuffer;++t)this._items.push(this.itemCreate(e,t*this.itemByteSize));this._buffers.push(e)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=p){return new m(16,u.c,e)}static createVec3f64(e=p){return new m(24,f.b,e)}static createVec4f64(e=p){return new m(32,l.a,e)}static createMat3f64(e=p){return new m(72,o.a,e)}static createMat4f64(e=p){return new m(128,c.a,e)}static createQuatf64(e=p){return new m(32,a.c,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}constructor(e,t,r){this.itemByteSize=e,this.itemCreate=t,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}}const p=4*i.ByteSizeUnit.KILOBYTES})),t.register("1jZlb",(function(r,n){e(r.exports,"create",(function(){return u})),e(r.exports,"fromValues",(function(){return f})),e(r.exports,"fromPoints",(function(){return l})),e(r.exports,"distance2",(function(){return m})),e(r.exports,"projectPoint",(function(){return p}));var i=t("8TN87"),s=t("a9my6"),o=t("8lcnQ"),c=t("iHxaG"),a=t("hjHdJ");function u(e){return e?{origin:(0,c.a)(e.origin),vector:(0,c.a)(e.vector)}:{origin:(0,c.c)(),vector:(0,c.c)()}}function f(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.c)(r.vector,t),r}function l(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.b)(r.vector,t,e),r}function m(e,t){const r=(0,o.b)(a.sv3d.get(),t,e.origin),n=(0,o.e)(e.vector,r),s=(0,o.e)(e.vector,e.vector),c=(0,i.clamp)(n/s,0,1),u=(0,o.b)(a.sv3d.get(),(0,o.g)(a.sv3d.get(),e.vector,c),r);return(0,o.e)(u,u)}function p(e,t,r){return function(e,t,r,n,s){const{vector:c,origin:u}=e,f=(0,o.b)(a.sv3d.get(),t,u),l=(0,o.e)(c,f)/(0,o.p)(c);return(0,o.g)(s,c,(0,i.clamp)(l,r,n)),(0,o.a)(s,s,e.origin)}(e,t,0,1,r)}(0,c.c)(),(0,c.c)(),new(0,s.ObjectStack)((()=>({origin:null,vector:null})))}));
//# sourceMappingURL=loadGLTFMesh.1ecbb1b0.js.map
