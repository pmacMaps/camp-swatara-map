!function(){function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("129jc",(function(r,o){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return L}));var n=t("7eJjO"),s=t("d2yMj"),l=t("kyj08"),a=t("jHOLN"),p=t("8NioF"),u=t("10vEZ"),c=t("iho5X"),y=t("iJAIC");t("lNwWH"),t("2VlWd");var d=t("eB8sj"),f=t("fcwIv"),h=t("e4Xv2"),v=t("5YMIf"),g=t("gINRd"),m=t("4LDxK"),b=t("jy0BF"),S=t("aLy89"),x=t("5N5S1"),w=t("9bAYR"),_=t("3GzOb"),j=t("fqCyP"),N=t("lmu5w"),V=t("gRgX5"),I=t("buMuJ"),O=t("8YmH8"),z=t("99jqU"),A=t("aBLHQ"),M=t("eBqu3"),R=t("9o2rC"),T=t("1xBGL"),q=t("2i7si"),J=t("37qRo");const D="esri.layers.VoxelLayer",F=a.default.getLogger(D);let P=class extends((0,j.SceneService)((0,S.ArcGISService)((0,x.OperationalLayer)((0,w.PortalLayer)((0,_.ScaleRangeLayer)((0,p.MultiOriginJSONMixin)((0,b.APIKeyMixin)(m.default)))))))){set url(e){this._set("url",(0,N.sanitizeUrl)(e,F))}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(u.throwIfAbortError).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(r),Promise.resolve(this)}read(e,t){super.read(e,t);for(const e of this.volumes)e.spatialReference=this.spatialReference}readVersion(e,t){return super.parseVersionString(e)}validateLayer(e){if(e.layerType&&e.layerType!==this.operationalLayerType)throw new(0,l.default)("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new(0,l.default)("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new(0,l.default)("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e){const o=g.default.fromJSON(e,r);if(0===o.zmin&&0===o.zmax&&Array.isArray(t.volumes)){const e=R.default.fromJSON(t.volumes[0]);if(e.isValid&&"xyt"!==e.volumeType){const t=e.dimensions[2];if(t.isRegular){let e=t.regularSpacing.offset,r=t.regularSpacing.offset+t.regularSpacing.scale*(t.size-1);if(e>r){const t=e;e=r,r=t}o.zmin=e,o.zmax=r}}}return o}return null}get voxelFields(){const e=[new(0,I.default)({name:"Voxel.ServiceValue",alias:"Value",domain:null,editable:!1,length:128,type:"string"}),new(0,I.default)({name:"Voxel.ServiceVariableLabel",alias:"Variable",domain:null,editable:!1,length:128,type:"string"}),new(0,I.default)({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"})],t=this.getVolume(null);if(null!=t){if("xyzt"===t.volumeType||"xyt"===t.volumeType){const t=new(0,I.default)({name:"Voxel.ServiceLocalTime",alias:"Local Time",domain:null,editable:!1,length:128,type:"string"});e.push(t);const r=new(0,I.default)({name:"Voxel.ServiceNativeTime",alias:"Native Time",domain:null,editable:!1,length:128,type:"string"});e.push(r)}if("xyt"!==t.volumeType){const t=new(0,I.default)({name:"Voxel.ServiceDepth",alias:"Depth",domain:null,editable:!1,length:128,type:"string"});e.push(t)}}return e}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.voxelFields,r=this.title;return(0,J.createPopupTemplate)({fields:t,title:r},e)}getConfiguration(){var e,t;const r={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:null===(e=this.index)||void 0===e?void 0:e.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return r.index&&(null===(t=this.index)||void 0===t?void 0:t.isValid())?JSON.stringify(r):""}getVariableStyle(e){let t=-1;if(t=null!=e?e:this.currentVariableId,!this.variableStyles||-1===t)return null;const r=this.variableStyles.findIndex((e=>e.variableId===t));return r<0?null:this.variableStyles.at(r)}getVariable(e){let t=-1;if(t=null!=e?e:this.currentVariableId,!this.variables||-1===t)return null;const r=this.variables.findIndex((e=>e.id===t));return r<0?null:this.variables.at(r)}getVolume(e){const t=this.getVariable(e);return null!=t?this.volumes.find((({id:e})=>e===t.volumeId)):null}getVolumeStyle(e){const t=this.getVariable(e);return null!=t?this.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}getColorForContinuousDataValue(e,t,r){var o;const i=this.getVariable(e);if(null==i||"continuous"!==(null===(o=i.renderingFormat)||void 0===o?void 0:o.continuity))return null;if(!this.variableStyles)return null;const n=this.variableStyles.findIndex((t=>t.variableId===e));if(n<0)return null;const s=this.variableStyles.at(n);return(null==s?void 0:s.transferFunction)?s.transferFunction.getColorForContinuousDataValue(t,r):null}getSections(){const e=[];for(const t of this.sections)e.push(new(0,O.default)({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}getVariableStyles(){const e=[];for(const t of this.variableStyles){const r=this._getVariable(t);if(null!=r){const o=t.clone();o.isosurfaces.length>4&&(o.isosurfaces=o.isosurfaces.slice(0,3),F.error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const e of o.isosurfaces)if(!e.colorLocked){const t=this.getColorForContinuousDataValue(o.variableId,e.value,!1);null===t||t.equals(e.color)||(e.color=t)}if("continuous"===r.renderingFormat.continuity)(null===o.transferFunction||o.transferFunction.colorStops.length<2)&&F.error(`VoxelVariableStyle for variable ${r.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==o.transferFunction&&(Array.isArray(o.transferFunction.stretchRange)&&2===o.transferFunction.stretchRange.length||(F.error(`VoxelVariableStyle for variable ${r.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),o.transferFunction.stretchRange=[0,1],o.transferFunction.colorStops.removeAll()));else if("discrete"===r.renderingFormat.continuity)if(0===t.uniqueValues.length)F.error(`VoxelVariableStyle for variable ${r.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const e of t.uniqueValues)null!==e.label&&void 0!==e.label||null===e.value||void 0===e.value||(e.label=e.value.toString());e.push(o)}else F.error(`VoxelVariable ID=${t.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return e}getVolumeStyles(){const e=[];for(const t of this.volumeStyles){const r=this._getVolumeFromVolumeId(t.volumeId);if(null!=r){const o=t.clone();for(const e of o.slices)this._isPlaneValid(e,[0,1,r.zDimension],r.dimensions)||(e.enabled=!1,e.label="invalid");for(const e of o.dynamicSections)this._isPlaneValid(e,[0,1,r.zDimension],r.dimensions)||(e.enabled=!1,e.label="invalid");e.push(o)}else F.error(`VoxelVolume ID=${t.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return e}_getVariable(e){const t=e.variableId;for(const e of this.variables)if(e.id===t)return e;return null}_getVolumeFromVolumeId(e){for(const t of this.volumes)if(t.id===e)return t;return null}_isPlaneValid(e,t,r){if(!e.point)return!1;if(!Array.isArray(e.point)||3!==e.point.length)return!1;if(!e.normal)return!1;if(!Array.isArray(e.normal)||3!==e.normal.length)return!1;const o=(0,v.f)(e.normal[0],e.normal[1],e.normal[2]);(0,h.n)(o,o);return!(Math.abs(o[0])+Math.abs(o[1])+Math.abs(o[2])<1e-6||(e.normal[0]=o[0],e.normal[1]=o[1],e.normal[2]=o[2],0))}constructor(e){super(e),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new(0,z.default),this.opacity=1,this.variables=new(0,s.default),this.volumes=new(0,s.default),this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!0,this.popupTemplate=null,this.test=null,this.volumeStyles=new(s.default.ofType(q.default)),this.variableStyles=new(s.default.ofType(M.default)),this.sections=new(s.default.ofType(O.default)),(null==e?void 0:e.constantUpscaling)&&(this.test={constantUpscaling:!0})}};(0,n._)([(0,c.property)({type:["Voxel"]})],P.prototype,"operationalLayerType",void 0),(0,n._)([(0,c.property)(V.legendEnabled)],P.prototype,"legendEnabled",void 0),(0,n._)([(0,c.property)({json:{write:!0}})],P.prototype,"title",void 0),(0,n._)([(0,c.property)(V.url)],P.prototype,"url",null),(0,n._)([(0,c.property)({type:s.default.ofType(O.default),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],P.prototype,"sections",void 0),(0,n._)([(0,c.property)({type:y.Integer,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],P.prototype,"currentVariableId",void 0),(0,n._)([(0,c.property)({type:s.default.ofType(q.default),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],P.prototype,"volumeStyles",void 0),(0,n._)([(0,c.property)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],P.prototype,"renderMode",void 0),(0,n._)([(0,c.property)({type:s.default.ofType(M.default),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],P.prototype,"variableStyles",void 0),(0,n._)([(0,c.property)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],P.prototype,"enableSlices",void 0),(0,n._)([(0,c.property)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],P.prototype,"enableSections",void 0),(0,n._)([(0,c.property)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],P.prototype,"enableDynamicSections",void 0),(0,n._)([(0,c.property)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],P.prototype,"enableIsosurfaces",void 0),(0,n._)([(0,c.property)({type:z.default,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],P.prototype,"shading",void 0),(0,n._)([(0,c.property)({type:["show","hide"]})],P.prototype,"listMode",void 0),(0,n._)([(0,c.property)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],P.prototype,"opacity",void 0),(0,n._)([(0,c.property)({type:s.default.ofType(A.default)})],P.prototype,"variables",void 0),(0,n._)([(0,c.property)({type:s.default.ofType(R.default)})],P.prototype,"volumes",void 0),(0,n._)([(0,c.property)({type:T.default})],P.prototype,"index",void 0),(0,n._)([(0,c.property)({type:Number,json:{name:"layerDefinition.minScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],P.prototype,"minScale",void 0),(0,n._)([(0,c.property)({type:Number,json:{name:"layerDefinition.maxScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],P.prototype,"maxScale",void 0),(0,n._)([(0,c.property)({json:{read:!1},readOnly:!0})],P.prototype,"type",void 0),(0,n._)([(0,c.property)({readOnly:!0,json:{name:"serviceVersion"}})],P.prototype,"version",void 0),(0,n._)([(0,d.reader)("service","version")],P.prototype,"readVersion",null),(0,n._)([(0,c.property)({type:g.default})],P.prototype,"fullExtent",void 0),(0,n._)([(0,d.reader)("service","fullExtent",["fullExtent"])],P.prototype,"readFullExtent",null),(0,n._)([(0,c.property)({readOnly:!0,clonable:!1,json:{read:!1}})],P.prototype,"voxelFields",null),(0,n._)([(0,c.property)(V.popupEnabled)],P.prototype,"popupEnabled",void 0),(0,n._)([(0,c.property)({readOnly:!0})],P.prototype,"defaultPopupTemplate",null),P=(0,n._)([(0,f.subclass)(D)],P);const L=P})),t.register("8YmH8",(function(r,o){e(r.exports,"default",(function(){return v}));var i=t("7eJjO"),n=t("3SeOo"),s=t("js02c"),l=t("1XAcN"),a=t("iho5X"),p=t("iJAIC");t("lNwWH"),t("2VlWd");var u=t("fcwIv"),c=t("8z7fo"),y=t("3vzNk"),d=t("51DE1"),f=t("9ELaA");let h=class extends((0,n.ClonableMixin)(l.JSONSupport)){get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,p.ensureNumber)(e),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,p.ensureNumber)(t),0,!0)}constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}};(0,i._)([(0,a.property)({type:Boolean,json:{default:!0,write:!0}})],h.prototype,"enabled",void 0),(0,i._)([(0,a.property)({type:String,json:{origins:{service:{read:f.r}},write:{enabled:!0,isRequired:!0}}}),(0,c.persistable)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],h.prototype,"href",void 0),(0,i._)([(0,a.property)({type:p.Integer,json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"id",void 0),(0,i._)([(0,a.property)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,i._)([(0,a.property)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],h.prototype,"orientation",null),(0,i._)([(0,a.property)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],h.prototype,"tilt",null),(0,i._)([(0,a.property)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"normal",void 0),(0,i._)([(0,a.property)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"point",void 0),(0,i._)([(0,a.property)({type:[p.Integer],json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"sizeInPixel",void 0),(0,i._)([(0,a.property)({type:[d.default],json:{write:!0}})],h.prototype,"slices",void 0),(0,i._)([(0,a.property)({type:p.Integer,json:{default:0,write:!0}})],h.prototype,"timeId",void 0),(0,i._)([(0,a.property)({type:p.Integer,json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"variableId",void 0),h=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelSection")],h);const v=h})),t.register("8z7fo",(function(r,o){e(r.exports,"persistable",(function(){return y}));var i=t("arTQ0"),n=t("kYueh"),s=t("9Rl0r"),l=t("gy5s8"),a=t("Ej9Ns"),p=t("iho5X"),u=t("2LZwQ"),c=t("9ELaA");function y(e){var t;const r=null!==(t=null==e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,o)=>{const s=function(e,t,r){if("resource"===(null==e?void 0:e.type))return function(e,t,r){const o=(0,l.getPropertyMetadata)(t,r);return{type:String,read:(e,t,r)=>{const i=(0,c.r)(e,t,r);return o.type===String?i:"function"==typeof o.type?new o.type({url:i}):void 0},write:{writer(t,s,l,p){if(!p||!p.resources)return"string"==typeof t?void(s[l]=(0,c.t)(t,p)):void(s[l]=t.write({},p));const y=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),v=(0,c.t)(y,{...p,verifyItemRelativeUrls:p&&p.verifyItemRelativeUrls?{writtenUrls:p.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},c.M.NO),g=o.type!==String&&(!(0,i.isMultiOriginJSONMixin)(this)||p&&p.origin&&this.originIdOf(r)>(0,a.nameToId)(p.origin)),m={object:this,propertyName:r,value:t,targetUrl:v,dest:s,targetPropertyName:l,context:p,params:e};p&&p.portalItem&&v&&!(0,n.isAbsolute)(v)?g?function(e){const{context:t,targetUrl:r,params:o,value:i,dest:s,targetPropertyName:l}=e;if(!t.portalItem)return;var a;const p=t.portalItem.resourceFromPath(r),c=h(i,r,t),y=(0,u.getResourceContentExtension)(c),v=(0,n.getPathExtension)(p.path),g=null!==(a=null==o?void 0:o.compress)&&void 0!==a&&a;y===v?(t.resources&&f({...e,resource:p,content:c,compress:g,updates:t.resources.toUpdate}),s[l]=r):d(e)}(m):function({context:e,targetUrl:t,dest:r,targetPropertyName:o}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[o]=t)}(m):p&&p.portalItem&&(null==v||null!=(0,c.i)(v)||(0,n.isBlobProtocol)(v)||g)?d(m):s[l]=v}}}}(e,t,r);var o;switch(null!==(o=null==e?void 0:e.type)&&void 0!==o?o:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.a;return{read:e,write:t}}}}(e,t,o);for(const e of r){const r=(0,p.propertyJSONMeta)(t,e,o);for(const e in s)r[e]=s[e]}}}function d(e){const{targetUrl:r,params:o,value:i,context:l,dest:a,targetPropertyName:p}=e;if(!l.portalItem)return;var y,d;const v=(0,c.p)(r),g=null!==(y=null==v?void 0:v.filename)&&void 0!==y?y:(0,s.generateUUID)(),m=null!==(d=null==o?void 0:o.prefix)&&void 0!==d?d:null==v?void 0:v.prefix,b=h(i,r,l),S=(0,n.join)(m,g),x=`${S}.${(0,u.getResourceContentExtension)(b)}`,w=l.portalItem.resourceFromPath(x);var _;(0,n.isBlobProtocol)(r)&&l.resources&&l.resources.pendingOperations.push(async function(e){const r=(await Promise.resolve(t("9pNSx"))).default,{data:o}=await r(e,{responseType:"blob"});return o}(r).then((e=>{w.path=`${S}.${(0,u.getResourceContentExtension)(e)}`,a[p]=w.itemRelativeUrl})).catch((()=>{})));const j=null!==(_=null==o?void 0:o.compress)&&void 0!==_&&_;l.resources&&f({...e,resource:w,content:b,compress:j,updates:l.resources.toAdd}),a[p]=w.itemRelativeUrl}function f({object:e,propertyName:t,updates:r,resource:o,content:i,compress:n}){r.push({resource:o,content:i,compress:n,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function h(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}})),t.register("arTQ0",(function(t,r){function o(e){return e&&"getAtOrigin"in e&&"originOf"in e}e(t.exports,"isMultiOriginJSONMixin",(function(){return o}))})),t.register("2LZwQ",(function(r,o){e(r.exports,"getResourceContentExtension",(function(){return n}));var i=t("kYueh");function n(e){return s[function(e){return e instanceof Blob?e.type:function(e){const t=(0,i.getPathExtension)(e);return p[t]||l}(e.url)}(e)]||a}const s={},l="text/plain",a=s[l],p={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in p)s[p[e]]=e})),t.register("3vzNk",(function(r,o){e(r.exports,"computeOrientationTiltFromNormal",(function(){return v})),e(r.exports,"computeNormalFromOrientationTilt",(function(){return g}));var i=t("koyqq"),n=t("ksUrQ"),s=t("5YMIf"),l=t("1CBkz"),a=t("e4Xv2");const p=(0,s.c)(),u=(0,n.a)(),c=(0,n.a)(),y=(0,n.a)(),d=(0,s.f)(0,0,1),f=(0,s.f)(0,1,0),h=(0,s.f)(1,0,0);function v(e){(0,a.c)(p,e),(0,a.n)(p,p);const t=Math.atan2(p[1],p[0]),r=(0,i.s)((0,n.a)(),d,-t);(0,a.q)(p,p,r);const o=-1*Math.atan2(p[2],p[0]);return[(0,l.a)(t)+270,(0,l.a)(o)+90]}function g(e,t){return(0,i.s)(c,d,(0,l.t)(e-270)),(0,i.s)(y,f,(0,l.t)(t-90)),(0,i.m)(u,c,y),(0,a.c)(p,h),(0,a.q)(p,p,u),(0,a.n)(p,p),[p[0],p[1],p[2]]}})),t.register("koyqq",(function(r,o){e(r.exports,"s",(function(){return u})),e(r.exports,"g",(function(){return c})),e(r.exports,"m",(function(){return y})),e(r.exports,"c",(function(){return f})),e(r.exports,"k",(function(){return v})),e(r.exports,"a",(function(){return g})),e(r.exports,"j",(function(){return z}));var i=t("gnwu9"),n=t("ksUrQ"),s=t("5YMIf"),l=t("1CBkz"),a=t("e4Xv2"),p=t("hRPEZ");function u(e,t,r){r*=.5;const o=Math.sin(r);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(r),e}function c(e,t){const r=2*Math.acos(t[3]),o=Math.sin(r/2);return o>(0,l.g)()?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),r}function y(e,t,r){const o=t[0],i=t[1],n=t[2],s=t[3],l=r[0],a=r[1],p=r[2],u=r[3];return e[0]=o*u+s*l+i*p-n*a,e[1]=i*u+s*a+n*l-o*p,e[2]=n*u+s*p+o*a-i*l,e[3]=s*u-o*l-i*a-n*p,e}function d(e,t,r,o){const i=t[0],n=t[1],s=t[2],a=t[3];let p,u,c,y,d,f=r[0],h=r[1],v=r[2],g=r[3];return u=i*f+n*h+s*v+a*g,u<0&&(u=-u,f=-f,h=-h,v=-v,g=-g),1-u>(0,l.g)()?(p=Math.acos(u),c=Math.sin(p),y=Math.sin((1-o)*p)/c,d=Math.sin(o*p)/c):(y=1-o,d=o),e[0]=y*i+d*f,e[1]=y*n+d*h,e[2]=y*s+d*v,e[3]=y*a+d*g,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function h(e,t){const r=t[0]+t[4]+t[8];let o;if(r>0)o=Math.sqrt(r+1),e[3]=.5*o,o=.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);const i=(r+1)%3,n=(r+2)%3;o=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*n+n]+1),e[r]=.5*o,o=.5/o,e[3]=(t[3*i+n]-t[3*n+i])*o,e[i]=(t[3*i+r]+t[3*r+i])*o,e[n]=(t[3*n+r]+t[3*r+n])*o}return e}function v(e,t,r,o){const i=.5*Math.PI/180;t*=i,r*=i,o*=i;const n=Math.sin(t),s=Math.cos(t),l=Math.sin(r),a=Math.cos(r),p=Math.sin(o),u=Math.cos(o);return e[0]=n*a*u-s*l*p,e[1]=s*l*u+n*a*p,e[2]=s*a*p-n*l*u,e[3]=s*a*u+n*l*p,e}const g=p.c,m=p.s,b=p.a,S=y,x=p.b,w=p.d,_=p.l,j=p.e,N=j,V=p.f,I=V,O=p.n,z=p.g,A=p.h;const M=(0,s.c)(),R=(0,s.f)(1,0,0),T=(0,s.f)(0,1,0);const q=(0,n.a)(),J=(0,n.a)();const D=(0,i.c)();Object.freeze(Object.defineProperty({__proto__:null,add:b,calculateW:function(e,t){const r=t[0],o=t[1],i=t[2];return e[0]=r,e[1]=o,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-o*o-i*i)),e},conjugate:f,copy:g,dot:w,equals:A,exactEquals:z,fromEuler:v,fromMat3:h,getAxisAngle:c,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:function(e,t){const r=t[0],o=t[1],i=t[2],n=t[3],s=r*r+o*o+i*i+n*n,l=s?1/s:0;return e[0]=-r*l,e[1]=-o*l,e[2]=-i*l,e[3]=n*l,e},len:N,length:j,lerp:_,mul:S,multiply:y,normalize:O,random:function(e){const t=l.R,r=t(),o=t(),i=t(),n=Math.sqrt(1-r),s=Math.sqrt(r);return e[0]=n*Math.sin(2*Math.PI*o),e[1]=n*Math.cos(2*Math.PI*o),e[2]=s*Math.sin(2*Math.PI*i),e[3]=s*Math.cos(2*Math.PI*i),e},rotateX:function(e,t,r){r*=.5;const o=t[0],i=t[1],n=t[2],s=t[3],l=Math.sin(r),a=Math.cos(r);return e[0]=o*a+s*l,e[1]=i*a+n*l,e[2]=n*a-i*l,e[3]=s*a-o*l,e},rotateY:function(e,t,r){r*=.5;const o=t[0],i=t[1],n=t[2],s=t[3],l=Math.sin(r),a=Math.cos(r);return e[0]=o*a-n*l,e[1]=i*a+s*l,e[2]=n*a+o*l,e[3]=s*a-i*l,e},rotateZ:function(e,t,r){r*=.5;const o=t[0],i=t[1],n=t[2],s=t[3],l=Math.sin(r),a=Math.cos(r);return e[0]=o*a+i*l,e[1]=i*a-o*l,e[2]=n*a+s*l,e[3]=s*a-n*l,e},rotationTo:function(e,t,r){const o=(0,a.e)(t,r);return o<-.999999?((0,a.f)(M,R,t),(0,a.u)(M)<1e-6&&(0,a.f)(M,T,t),(0,a.n)(M,M),u(e,M,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.f)(M,t,r),e[0]=M[0],e[1]=M[1],e[2]=M[2],e[3]=1+o,O(e,e))},scale:x,set:m,setAxes:function(e,t,r,o){const i=D;return i[0]=r[0],i[3]=r[1],i[6]=r[2],i[1]=o[0],i[4]=o[1],i[7]=o[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],O(e,h(e,i))},setAxisAngle:u,slerp:d,sqlerp:function(e,t,r,o,i,n){return d(q,t,i,n),d(J,r,o,n),d(e,q,J,2*n*(1-n)),e},sqrLen:I,squaredLength:V,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))})),t.register("gnwu9",(function(t,r){function o(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,r,o,i,n,s,l,a){return[e,t,r,o,i,n,s,l,a]}function n(e,t){return new Float64Array(e,t,9)}e(t.exports,"c",(function(){return o})),e(t.exports,"f",(function(){return i})),e(t.exports,"a",(function(){return n}));Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:o,createView:n,fromValues:i},Symbol.toStringTag,{value:"Module"}))})),t.register("ksUrQ",(function(t,r){function o(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function n(e,t){return new Float64Array(e,t,4)}e(t.exports,"a",(function(){return o})),e(t.exports,"b",(function(){return i})),e(t.exports,"c",(function(){return n})),e(t.exports,"I",(function(){return s}));const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:o,createView:n,fromValues:function(e,t,r,o){return[e,t,r,o]}},Symbol.toStringTag,{value:"Module"}))})),t.register("51DE1",(function(r,o){e(r.exports,"default",(function(){return f}));var i=t("7eJjO"),n=t("3SeOo"),s=t("js02c"),l=t("1XAcN"),a=t("iho5X"),p=t("ba18L");t("lNwWH"),t("2VlWd");var u=t("fcwIv"),c=t("iJAIC"),y=t("3vzNk");let d=class extends((0,n.ClonableMixin)(l.JSONSupport)){get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)}set orientation(e){const t=(0,y.computeNormalFromOrientationTilt)(e,this.tilt);this._set("normal",t),this._set("orientation",e)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,c.ensureNumber)(t),0,!0)}set tilt(e){const t=(0,y.computeNormalFromOrientationTilt)(this.orientation,e);this._set("normal",t),this._set("tilt",e)}constructor(e){super(e),this.enabled=!0,this.label="",this.normal=null,this.point=null}};(0,i._)([(0,a.property)({type:Boolean,json:{write:!0}})],d.prototype,"enabled",void 0),(0,i._)([(0,a.property)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,i._)([(0,a.property)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,p.cast)((e=>s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)))],d.prototype,"orientation",null),(0,i._)([(0,a.property)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,p.cast)((e=>s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)))],d.prototype,"tilt",null),(0,i._)([(0,a.property)({type:[Number],json:{write:!0}})],d.prototype,"normal",void 0),(0,i._)([(0,a.property)({type:[Number],json:{write:!0}})],d.prototype,"point",void 0),d=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelSlice")],d);const f=d})),t.register("99jqU",(function(r,o){e(r.exports,"default",(function(){return p}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv");let a=class extends n.JSONSupport{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,i._)([(0,s.property)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],a.prototype,"diffuseFactor",void 0),(0,i._)([(0,s.property)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],a.prototype,"specularFactor",void 0),a=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelSimpleShading")],a);const p=a})),t.register("aBLHQ",(function(r,o){e(r.exports,"default",(function(){return u}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv"),a=t("enxxi");let p=class extends n.JSONSupport{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,i._)([(0,s.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"id",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,i._)([(0,s.property)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"name",void 0),(0,i._)([(0,s.property)({type:a.default,json:{write:!0}})],p.prototype,"originalFormat",void 0),(0,i._)([(0,s.property)({type:a.default,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"renderingFormat",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],p.prototype,"unit",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],p.prototype,"volumeId",void 0),(0,i._)([(0,s.property)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],p.prototype,"type",void 0),p=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelVariable")],p);const u=p})),t.register("enxxi",(function(r,o){e(r.exports,"default",(function(){return p}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv");let a=class extends n.JSONSupport{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,i._)([(0,s.property)({type:["discrete","continuous"],json:{write:!0}})],a.prototype,"continuity",void 0),(0,i._)([(0,s.property)({type:Boolean,json:{write:!0}})],a.prototype,"hasNoData",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],a.prototype,"noData",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],a.prototype,"offset",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],a.prototype,"scale",void 0),(0,i._)([(0,s.property)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],a.prototype,"type",void 0),a=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelFormat")],a);const p=a})),t.register("eBqu3",(function(r,o){e(r.exports,"default",(function(){return v}));var i,n=t("7eJjO"),s=t("d2yMj"),l=t("1XAcN"),a=t("flPLJ"),p=t("iho5X"),u=t("iJAIC"),c=t("fcwIv"),y=t("2Jub9"),d=t("bnjkE"),f=t("1bBBs");let h=i=class extends l.JSONSupport{clone(){return new i({variableId:this.variableId,label:this.label,transferFunction:(0,a.clone)(this.transferFunction),uniqueValues:(0,a.clone)(this.uniqueValues),isosurfaces:(0,a.clone)(this.isosurfaces)})}constructor(e){super(e),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(s.default.ofType(f.default)),this.isosurfaces=new(s.default.ofType(y.default))}};(0,n._)([(0,p.property)({type:u.Integer,json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"variableId",void 0),(0,n._)([(0,p.property)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,n._)([(0,p.property)({type:d.default,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],h.prototype,"transferFunction",void 0),(0,n._)([(0,p.property)({type:s.default.ofType(f.default),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],h.prototype,"uniqueValues",void 0),(0,n._)([(0,p.property)({type:s.default.ofType(y.default),json:{write:{enabled:!0,overridePolicy(){const e=!this.uniqueValues||this.uniqueValues.length<1,t=!!this.isosurfaces&&this.isosurfaces.length>0;return{enabled:e&&t}}}}})],h.prototype,"isosurfaces",void 0),h=i=(0,n._)([(0,c.subclass)("esri.layers.voxel.VoxelVariableStyle")],h);const v=h})),t.register("2Jub9",(function(r,o){e(r.exports,"default",(function(){return y}));var i=t("7eJjO"),n=t("jgs9n"),s=t("3SeOo"),l=t("1XAcN"),a=t("iho5X"),p=t("iJAIC");t("lNwWH"),t("2VlWd");var u=t("fcwIv");let c=class extends((0,s.ClonableMixin)(l.JSONSupport)){constructor(){super(...arguments),this.color=n.default.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,i._)([(0,a.property)({type:n.default,json:{type:[p.Integer],write:{enabled:!0,isRequired:!0}}})],c.prototype,"color",void 0),(0,i._)([(0,a.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"value",void 0),(0,i._)([(0,a.property)({type:Boolean,json:{default:!0,write:!0}})],c.prototype,"enabled",void 0),(0,i._)([(0,a.property)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,i._)([(0,a.property)({type:Boolean,json:{default:!1,write:!0}})],c.prototype,"colorLocked",void 0),c=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelIsosurface")],c);const y=c})),t.register("bnjkE",(function(r,o){e(r.exports,"default",(function(){return b}));var i=t("7eJjO"),n=t("jgs9n"),s=t("3SeOo"),l=t("d2yMj"),a=t("30Aps"),p=t("1XAcN"),u=t("iVfa0"),c=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var y,d,f=t("fcwIv"),h=t("284jk"),v=t("kt6rv"),g=t("2caQv");(d=y||(y={}))[d.Color=1]="Color",d[d.Alpha=2]="Alpha",d[d.Both=3]="Both";let m=class extends((0,s.ClonableMixin)(p.JSONSupport)){set colorStops(e){this._set("colorStops",(0,a.referenceSetter)(e,this._get("colorStops"),l.default.ofType(h.default)))}set opacityStops(e){this._set("opacityStops",(0,a.referenceSetter)(e,this._get("opacityStops"),l.default.ofType(v.default)))}getPreviousNext(e,t,r){let o=e;for(;--o>0&&t[o].type!==r&&t[o].type!==y.Both;);let i=e;const n=t.length;for(;++i<n&&t[i].type!==r&&t[i].type!==y.Both;);return[o,i]}get rasterizedTransferFunction(){const e=[];if(this.colorStops.length<2)return e;const t=[],r=[];for(const t of this.colorStops){if(!t.color)return e;r.push({color:{r:t.color.r,g:t.color.g,b:t.color.b,a:Math.round(255*(1-t.color.a))},position:t.position,type:y.Color})}if(0===this.opacityStops.length)for(const e of r)t.push({color:e.color,position:e.position});else{for(const e of this.opacityStops){const t=(0,u.clamp)(e.position,0,1),o=Math.round(255*(0,u.clamp)(1-e.opacity,0,1));let i=!1;for(const e of r)if(e.type===y.Color&&Math.abs(e.position-t)<1e-5){e.color.a=o,e.type=y.Both,i=!0;break}i||r.push({color:{r:0,g:0,b:0,a:o},position:e.position,type:y.Alpha})}r.sort(((e,t)=>e.position<t.position?-1:1));const e=r.length;for(let t=0;t<e;++t){const o=r[t];if(o.type!==y.Both)if(o.type===y.Color){const[i,n]=this.getPreviousNext(t,r,y.Alpha);if(-1!==i&&n!==e){const e=(o.position-r[i].position)/(r[n].position-r[i].position);o.color.a=Math.round((0,u.lerp)(r[i].color.a,r[n].color.a,e))}else o.color.a=-1!==i?r[i].color.a:r[n].color.a}else{const[i,n]=this.getPreviousNext(t,r,y.Color);if(-1!==i&&n!==e){const e=(o.position-r[i].position)/(r[n].position-r[i].position),t=r[i].color,s=r[n].color;S.forEach((r=>{o.color[r]=Math.round((0,u.lerp)(t[r],s[r],e))}))}else-1!==i?S.forEach((e=>{o.color[e]=r[i].color[e]})):S.forEach((e=>{o.color[e]=r[n].color[e]}))}}for(const e of r)t.push({color:e.color,position:e.position})}t[0].position=0,t[t.length-1].position=1;let o=0,i=1;for(let r=0;r<this._colorMapSize;++r){const s=r/this._colorMapSize;for(;s>t[i].position;)o=i++;const l=(s-t[o].position)/(t[i].position-t[o].position),a=t[o].color,p=t[i].color,c=new(0,n.default);S.forEach((e=>{c[e]=Math.round((0,u.lerp)(a[e],p[e],l))})),c.a=(0,u.clamp)(1-(0,u.lerp)(a.a,p.a,l)/255,0,1),e.push(c)}return e}getColorForContinuousDataValue(e,t){const r=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||r.length<256)return null;let o=this.stretchRange[0],i=this.stretchRange[1];if(o>i){const e=o;o=i,i=e}e=(0,u.clamp)(e,o,i);const n=r[Math.round((e-o)/(i-o)*(this._colorMapSize-1))].clone();return t||(n.a=1),n}constructor(e){super(e),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(l.default.ofType(h.default)),this.opacityStops=new(l.default.ofType(v.default))}};(0,i._)([(0,c.property)({type:["linear","nearest"],json:{write:!0}})],m.prototype,"interpolation",void 0),(0,i._)([(0,c.property)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,"stretchRange",void 0),(0,i._)([(0,c.property)({type:l.default.ofType(h.default),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],m.prototype,"colorStops",null),(0,i._)([(0,c.property)({type:l.default.ofType(v.default),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],m.prototype,"opacityStops",null),(0,i._)([(0,c.property)({type:g.default,json:{write:!0}})],m.prototype,"rangeFilter",void 0),(0,i._)([(0,c.property)({type:[n.default],clonable:!1,json:{read:!1}})],m.prototype,"rasterizedTransferFunction",null),m=(0,i._)([(0,f.subclass)("esri.layers.voxel.VoxelTransferFunctionStyle")],m);const b=m,S=["r","g","b"]})),t.register("284jk",(function(r,o){e(r.exports,"default",(function(){return y}));var i=t("7eJjO"),n=t("jgs9n"),s=t("3SeOo"),l=t("1XAcN"),a=t("iho5X"),p=t("iJAIC");t("lNwWH"),t("2VlWd");var u=t("fcwIv");let c=class extends((0,s.ClonableMixin)(l.JSONSupport)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,i._)([(0,a.property)({type:n.default,json:{type:[p.Integer],write:{enabled:!0,isRequired:!0}}})],c.prototype,"color",void 0),(0,i._)([(0,a.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"position",void 0),c=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelColorStop")],c);const y=c})),t.register("kt6rv",(function(r,o){e(r.exports,"default",(function(){return u}));var i=t("7eJjO"),n=t("3SeOo"),s=t("1XAcN"),l=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var a=t("fcwIv");let p=class extends((0,n.ClonableMixin)(s.JSONSupport)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,i._)([(0,l.property)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],p.prototype,"opacity",void 0),(0,i._)([(0,l.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"position",void 0),p=(0,i._)([(0,a.subclass)("esri.layers.voxel.VoxelOpacityStop")],p);const u=p})),t.register("2caQv",(function(r,o){e(r.exports,"default",(function(){return u}));var i=t("7eJjO"),n=t("3SeOo"),s=t("1XAcN"),l=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var a=t("fcwIv");let p=class extends((0,n.ClonableMixin)(s.JSONSupport)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,i._)([(0,l.property)({type:Boolean,json:{default:!1,write:!0}})],p.prototype,"enabled",void 0),(0,i._)([(0,l.property)({type:[Number],json:{write:!0}})],p.prototype,"range",void 0),p=(0,i._)([(0,a.subclass)("esri.layers.voxel.VoxelRangeFilter")],p);const u=p})),t.register("1bBBs",(function(r,o){e(r.exports,"default",(function(){return y}));var i=t("7eJjO"),n=t("jgs9n"),s=t("3SeOo"),l=t("1XAcN"),a=t("iho5X"),p=t("iJAIC");t("lNwWH"),t("2VlWd");var u=t("fcwIv");let c=class extends((0,s.ClonableMixin)(l.JSONSupport)){constructor(){super(...arguments),this.color=n.default.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,i._)([(0,a.property)({type:n.default,json:{type:[p.Integer],write:{enabled:!0,isRequired:!0}}})],c.prototype,"color",void 0),(0,i._)([(0,a.property)({type:p.Integer,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"value",void 0),(0,i._)([(0,a.property)({type:Boolean,json:{default:!0,write:!0}})],c.prototype,"enabled",void 0),(0,i._)([(0,a.property)({type:String,json:{write:!0}})],c.prototype,"label",void 0),c=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelUniqueValue")],c);const y=c})),t.register("9o2rC",(function(r,o){e(r.exports,"default",(function(){return m}));var i=t("7eJjO"),n=t("1XAcN"),s=t("jHOLN"),l=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var a=t("fcwIv"),p=t("e4Xv2"),u=t("5YMIf"),c=t("d1Fqh"),y=t("j40xv"),d=t("eY5Yp"),f=t("4gENa");const h="esri.layers.voxel.VoxelVolume",v=s.default.getLogger(h);let g=class extends n.JSONSupport{get zDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}get isValid(){return!(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length||this.dimensions[0].size<1||this.dimensions[1].size<1||-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),t=this.dimensions[1].getRange(),r=this.dimensions[2],o=r.isRegular?r.getRange():[0,r.size];return[e[0],t[0],o[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),t=this.dimensions[1].getRange(),r=this.dimensions[2],o=r.isRegular?r.getRange():[0,r.size],i=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let e=0;e<3;++e)i[e]<2?i[e]=1:i[e]-=1;return r.isRegular&&!r.isPositiveUp&&(i[2]*=-1),[(e[1]-e[0])/i[0],(t[1]-t[0])/i[1],(o[1]-o[0])/i[2]]}get volumeType(){if(this.isValid){const e=this.dimensions[2].size>0,t=this.dimensions[3].size>0;if(!e&&t)return"xyt";if(e&&t)return"xyzt"}return"xyz"}get sizeInVoxels(){if(!this.isValid)return[0,0,0];const e=this.zDimension;return[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[e].size]}computeVoxelSpaceLocation(e){var t,r;if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return v.error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,d.equals)(this.spatialReference,e.spatialReference))return v.error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const o=(0,u.f)(e.x,e.y,null!==(r=e.z)&&void 0!==r?r:0);(0,p.b)(o,o,this.originInLayerSpace3D),(0,p.D)(o,o,this.voxelSizeInLayerSpaceSigned);const i=this.dimensions[this.zDimension];if(!i.isRegular&&Array.isArray(null===(t=i.irregularSpacing)||void 0===t?void 0:t.values)&&i.irregularSpacing.values.length>1){var n;const t=null!==(n=e.z)&&void 0!==n?n:0,r=i.irregularSpacing.values,s=i.isPositiveUp?1:-1,l=r.reduce(((e,r)=>Math.abs(s*r-t)<Math.abs(s*e-t)?r:e));for(let e=0;e<r.length;++e)if(r[e]===l){o[2]=e;break}}return[o[0],o[1],o[2]]}computeLayerSpaceLocation(e){var t;if(!this.isValid)return new(0,c.default)({x:0,y:0,spatialReference:this.spatialReference});const r=(0,u.g)(e);if((0,p.C)(r,r,this.voxelSizeInLayerSpaceSigned),(0,p.a)(r,r,this.originInLayerSpace3D),"xyt"===this.volumeType)return new(0,c.default)({x:r[0],y:r[1],spatialReference:this.spatialReference});const o=this.dimensions[this.zDimension];return o.isRegular||Array.isArray(null===(t=o.irregularSpacing)||void 0===t?void 0:t.values)&&(e[2]<0?r[2]=o.irregularSpacing.values[0]:e[2]<o.irregularSpacing.values.length?r[2]=o.irregularSpacing.values[e[2]]:r[2]=o.irregularSpacing.values[o.irregularSpacing.values.length-1],o.isPositiveUp||(r[2]*=-1)),new(0,c.default)({x:r[0],y:r[1],z:r[2],spatialReference:this.spatialReference})}constructor(e){super(e),this.id=0,this.dimensions=null,this.spatialReference=y.default.WGS84}};(0,i._)([(0,l.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],g.prototype,"id",void 0),(0,i._)([(0,l.property)({type:[f.default],json:{write:{enabled:!0,isRequired:!0}}})],g.prototype,"dimensions",void 0),(0,i._)([(0,l.property)({type:y.default,json:{read:{enabled:!1}}})],g.prototype,"spatialReference",void 0),(0,i._)([(0,l.property)({type:Number,json:{read:!1}})],g.prototype,"zDimension",null),(0,i._)([(0,l.property)({type:[Boolean],json:{read:!1}})],g.prototype,"isValid",null),(0,i._)([(0,l.property)({type:[Number],json:{read:!1}})],g.prototype,"originInLayerSpace3D",null),(0,i._)([(0,l.property)({type:[Number],json:{read:!1}})],g.prototype,"voxelSizeInLayerSpaceSigned",null),(0,i._)([(0,l.property)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],g.prototype,"volumeType",null),(0,i._)([(0,l.property)({type:[Number],json:{read:!1}})],g.prototype,"sizeInVoxels",null),g=(0,i._)([(0,a.subclass)(h)],g);const m=g})),t.register("4gENa",(function(r,o){e(r.exports,"default",(function(){return c}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv"),a=t("5gTrz"),p=t("gu2qL");let u=class extends n.JSONSupport{get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){var e;return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(null===(e=this.irregularSpacing)||void 0===e?void 0:e.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}};(0,i._)([(0,s.property)({type:a.default,json:{write:!0}})],u.prototype,"irregularSpacing",void 0),(0,i._)([(0,s.property)({type:Boolean,json:{write:!0}})],u.prototype,"isPositiveUp",void 0),(0,i._)([(0,s.property)({type:Boolean,json:{write:!0}})],u.prototype,"isWrappedDateLine",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],u.prototype,"name",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],u.prototype,"quantity",void 0),(0,i._)([(0,s.property)({type:p.default,json:{write:!0}})],u.prototype,"regularSpacing",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],u.prototype,"size",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],u.prototype,"unit",void 0),(0,i._)([(0,s.property)({type:Boolean,json:{read:!1}})],u.prototype,"isRegular",null),u=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelDimension")],u);const c=u})),t.register("5gTrz",(function(r,o){e(r.exports,"default",(function(){return p}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv");let a=class extends n.JSONSupport{constructor(){super(...arguments),this.values=null}};(0,i._)([(0,s.property)({type:[Number],json:{write:!0}})],a.prototype,"values",void 0),a=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelIrregularSpacing")],a);const p=a})),t.register("gu2qL",(function(r,o){e(r.exports,"default",(function(){return p}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l=t("fcwIv");let a=class extends n.JSONSupport{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],a.prototype,"scale",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:!0}})],a.prototype,"offset",void 0),a=(0,i._)([(0,l.subclass)("esri.layers.voxel.VoxelRegularSpacing")],a);const p=a})),t.register("1xBGL",(function(r,o){e(r.exports,"default",(function(){return u}));var i=t("7eJjO"),n=t("1XAcN"),s=t("iho5X");t("iJAIC"),t("lNwWH"),t("2VlWd");var l,a=t("fcwIv");let p=l=class extends n.JSONSupport{isValid(){const e=new l;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}};(0,i._)([(0,s.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"apronWidth",void 0),(0,i._)([(0,s.property)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"brickSize",void 0),(0,i._)([(0,s.property)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"maxLodLevel",void 0),(0,i._)([(0,s.property)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"nodeSize",void 0),p=l=(0,i._)([(0,a.subclass)("esri.layers.voxel.VoxelVolumeIndex")],p);const u=p})),t.register("2i7si",(function(r,o){e(r.exports,"default",(function(){return v}));var i,n=t("7eJjO"),s=t("d2yMj"),l=t("30Aps"),a=t("1XAcN"),p=t("flPLJ"),u=t("iho5X"),c=t("iJAIC"),y=t("fcwIv"),d=t("7qy6l"),f=t("51DE1");let h=i=class extends a.JSONSupport{set slices(e){this._set("slices",(0,l.referenceSetter)(e,this._get("slices"),s.default.ofType(f.default)))}set dynamicSections(e){this._set("dynamicSections",(0,l.referenceSetter)(e,this._get("dynamicSections"),s.default.ofType(d.default)))}clone(){return new i({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,p.clone)(this.slices),dynamicSections:(0,p.clone)(this.dynamicSections)})}constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(s.default.ofType(f.default)),this.dynamicSections=new(s.default.ofType(d.default))}};(0,n._)([(0,u.property)({type:c.Integer,json:{write:{enabled:!0,isRequired:!0}}})],h.prototype,"volumeId",void 0),(0,n._)([(0,u.property)({type:Number,json:{default:1,write:!0}})],h.prototype,"verticalExaggeration",void 0),(0,n._)([(0,u.property)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],h.prototype,"exaggerationMode",void 0),(0,n._)([(0,u.property)({type:Number,json:{default:0,write:!0}})],h.prototype,"verticalOffset",void 0),(0,n._)([(0,u.property)({type:s.default.ofType(f.default),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],h.prototype,"slices",null),(0,n._)([(0,u.property)({type:s.default.ofType(d.default),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],h.prototype,"dynamicSections",null),h=i=(0,n._)([(0,y.subclass)("esri.layers.voxel.VoxelVolumeStyle")],h);const v=h})),t.register("7qy6l",(function(r,o){e(r.exports,"default",(function(){return f}));var i=t("7eJjO"),n=t("3SeOo"),s=t("js02c"),l=t("1XAcN"),a=t("iho5X"),p=t("ba18L");t("lNwWH"),t("2VlWd");var u=t("fcwIv"),c=t("iJAIC"),y=t("3vzNk");let d=class extends((0,n.ClonableMixin)(l.JSONSupport)){get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)}set orientation(e){const t=(0,y.computeNormalFromOrientationTilt)(e,this.tilt);this._set("normal",t),this._set("orientation",e)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=(0,y.computeOrientationTiltFromNormal)(this.normal);return s.cyclicalDegrees.normalize((0,c.ensureNumber)(t),0,!0)}set tilt(e){const t=(0,y.computeNormalFromOrientationTilt)(this.orientation,e);this._set("normal",t),this._set("tilt",e)}constructor(e){super(e),this.enabled=!0,this.label="",this.normal=null,this.point=null}};(0,i._)([(0,a.property)({type:Boolean,json:{default:!0,write:!0}})],d.prototype,"enabled",void 0),(0,i._)([(0,a.property)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,i._)([(0,a.property)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,p.cast)((e=>s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)))],d.prototype,"orientation",null),(0,i._)([(0,a.property)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,p.cast)((e=>s.cyclicalDegrees.normalize((0,c.ensureNumber)(e),0,!0)))],d.prototype,"tilt",null),(0,i._)([(0,a.property)({type:[Number],json:{write:!0}})],d.prototype,"normal",void 0),(0,i._)([(0,a.property)({type:[Number],json:{write:!0}})],d.prototype,"point",void 0),d=(0,i._)([(0,u.subclass)("esri.layers.voxel.VoxelDynamicSection")],d);const f=d})),t.register("amEsL",(function(r,o){e(r.exports,"updateOrigins",(function(){return n}));var i=t("arTQ0");function n(e){e&&e.writtenProperties&&e.writtenProperties.forEach((({target:e,propName:t,newOrigin:r})=>{(0,i.isMultiOriginJSONMixin)(e)&&r&&e.originOf(t)!==r&&e.updateOrigin(t,r)}))}}))}();
//# sourceMappingURL=VoxelLayer.a7e01275.js.map
