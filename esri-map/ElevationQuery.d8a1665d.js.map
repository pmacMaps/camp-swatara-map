{"mappings":"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","sources":["node_modules/@arcgis/core/layers/support/ElevationQuery.js","node_modules/@arcgis/core/layers/support/ElevationSampler.js","node_modules/@arcgis/core/layers/support/ElevationTile.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{result as e}from\"../../core/asyncUtils.js\";import t from\"../../core/Error.js\";import{isNone as i,isSome as o}from\"../../core/maybe.js\";import{whenOrAbort as s,throwIfAbortError as l,eachAlways as n}from\"../../core/promiseUtils.js\";import{getMetersPerUnitForSR as a}from\"../../core/unitUtils.js\";import r from\"../../geometry/Multipoint.js\";import c from\"../../geometry/Point.js\";import u from\"../../geometry/Polyline.js\";import{initializeProjection as h,project as p}from\"../../geometry/projection.js\";import{fromExtent as m,create as f,contains as d}from\"../../geometry/support/aaBoundingRect.js\";import{MultiTileElevationSampler as y}from\"./ElevationSampler.js\";import{ElevationTile as T}from\"./ElevationTile.js\";class v{async queryAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");const s=x.fromGeometry(i);let l=!1;o&&o.returnSampleInfo||(l=!0);const n={...R,...o,returnSampleInfo:!0},a=await this.query(e[e.length-1],s,n),r=await this._queryAllContinue(e,a,n);return r.geometry=r.geometry.export(),l&&delete r.sampleInfo,r}async query(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||!(i instanceof x)&&\"point\"!==i.type&&\"multipoint\"!==i.type&&\"polyline\"!==i.type)throw new t(\"elevation-query:invalid-geometry\",\"Only point, polyline and multipoint geometries can be used to query elevation\");const s={...R,...o},l=new w(e,i.spatialReference,s),n=s.signal;return await e.load({signal:n}),await this._createGeometryDescriptor(l,i,n),await this._selectTiles(l,n),await this._populateElevationTiles(l,n),this._sampleGeometryWithElevation(l),this._createQueryResult(l,n)}async createSampler(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o};return this._createSampler(e,i,s)}async createSamplerAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o,returnSampleInfo:!0},l=await this._createSampler(e[e.length-1],i,s);return this._createSamplerAllContinue(e,i,l,s)}async _createSampler(e,t,i,o){const s=i.signal;await e.load({signal:s});const l=t.spatialReference,n=e.tileInfo.spatialReference;l.equals(n)||(await h([{source:l,dest:n}],{signal:s}),t=p(t,n));const a=new _(e,t,i,o);return await this._selectTiles(a,s),await this._populateElevationTiles(a,s),new y(a.elevationTiles,a.layer.tileInfo,a.options.noDataValue)}async _createSamplerAllContinue(e,t,i,o){if(e.pop(),!e.length)return i;const s=i.samplers.map((e=>m(e.extent))),l=await this._createSampler(e[e.length-1],t,o,s);if(0===l.samplers.length)return i;const n=i.samplers.concat(l.samplers),a=new y(n,o.noDataValue);return this._createSamplerAllContinue(e,t,a,o)}async _queryAllContinue(e,t,i){const o=e.pop(),s=t.geometry.coordinates,l=[],n=[];for(let c=0;c<s.length;c++){const i=t.sampleInfo[c];i.demResolution>=0?i.source||(i.source=o):e.length&&(l.push(s[c]),n.push(c))}if(!e.length||0===l.length)return t;const a=t.geometry.clone(l),r=await this.query(e[e.length-1],a,i);return n.forEach(((e,i)=>{s[e].z=r.geometry.coordinates[i].z,t.sampleInfo[e].demResolution=r.sampleInfo[i].demResolution})),this._queryAllContinue(e,t,i)}async _createQueryResult(e,t){const i={geometry:(await e.geometry.project(e.outSpatialReference,t)).export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(i.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach((e=>{e.tile=null,e.elevationTile=null})),i}async _createGeometryDescriptor(e,i,o){let s;const l=e.layer.tileInfo.spatialReference;if(i instanceof x?s=await i.project(l,o):(await h([{source:i.spatialReference,dest:l}],{signal:o}),s=p(i,l)),!s)throw new t(\"elevation-query:spatial-reference-mismatch\",`Cannot query elevation in '${i.spatialReference.wkid}' on an elevation service in '${l.wkid}'`);e.geometry=x.fromGeometry(s)}async _selectTiles(e,i){const o=e.options.demResolution;if(\"geometry\"===e.type&&this._preselectOutsideLayerExtent(e),\"number\"==typeof o)this._selectTilesClosestResolution(e);else if(\"finest-contiguous\"===o)await this._selectTilesFinestContiguous(e,i);else{if(\"auto\"!==o)throw new t(\"elevation-query:invalid-dem-resolution\",`Invalid dem resolution value '${o}', expected a number, \"finest-contiguous\" or \"auto\"`);await this._selectTilesAuto(e,i)}}_preselectOutsideLayerExtent(e){if(i(e.layer.fullExtent))return;const t=new T(null);t.sample=()=>e.options.noDataValue,e.outsideExtentTile=t;const o=e.layer.fullExtent;e.geometry.coordinates.forEach((e=>{const i=e.x,s=e.y;(i<o.xmin||i>o.xmax||s<o.ymin||s>o.ymax)&&(e.elevationTile=t)}))}_selectTilesClosestResolution(e){const t=e.layer.tileInfo,i=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(i)}_findNearestDemResolutionLODIndex(e,t){const i=t/a(e.spatialReference);let o=e.lods[0],s=0;for(let l=1;l<e.lods.length;l++){const t=e.lods[l];Math.abs(t.resolution-i)<Math.abs(o.resolution-i)&&(o=t,s=l)}return s}async _selectTilesFinestContiguous(e,t){const i=E(e.layer.tileInfo,e.options.minDemResolution);await this._selectTilesFinestContiguousAt(e,i,t)}async _selectTilesFinestContiguousAt(e,i,o){const n=e.layer;if(e.selectTilesAtLOD(i),i<0)return;const a=n.tilemapCache,r=e.getTilesToFetch();try{if(a)await s(Promise.all(r.map((e=>a.fetchAvailability(e.level,e.row,e.col,{signal:o})))),o);else if(await this._populateElevationTiles(e,o),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new t(\"elevation-query:has-unavailable-tiles\")}catch(c){l(c),await this._selectTilesFinestContiguousAt(e,i-1,o)}}async _populateElevationTiles(e,t){const i=e.getTilesToFetch(),l={},a=e.options.cache,r=e.options.noDataValue,c=i.map((async i=>{const s=`${e.layer.uid}:${i.id}:${r}`,n=o(a)?a.get(s):null,c=o(n)?n:await e.layer.fetchTile(i.level,i.row,i.col,{noDataValue:r,signal:t});o(a)&&a.put(s,c),l[i.id]=new T(i,c)}));await s(n(c),t),e.populateElevationTiles(l)}async _selectTilesAuto(t,i){this._selectTilesAutoFinest(t),this._reduceTilesForMaximumRequests(t);const o=t.layer.tilemapCache;if(!o)return this._selectTilesAutoPrefetchUpsample(t,i);const n=t.getTilesToFetch(),a={},r=n.map((async t=>{const s={id:null,level:0,row:0,col:0,extent:f()},n=await e(o.fetchAvailabilityUpsample(t.level,t.row,t.col,s,{signal:i}));!1===n.ok?l(n.error):a[t.id]=s}));await s(Promise.all(r),i),t.remapTiles(a)}_reduceTilesForMaximumRequests(e){const t=e.layer.tileInfo;let i=0;const o={},s=e=>{e.id in o?o[e.id]++:(o[e.id]=1,i++)},l=e=>{const t=o[e.id];1===t?(delete o[e.id],i--):o[e.id]=t-1};e.forEachTileToFetch(s,l);let n=!0;for(;n&&(n=!1,e.forEachTileToFetch((o=>{i<=e.options.maximumAutoTileRequests||(l(o),t.upsampleTile(o)&&(n=!0),s(o))}),l),n););}_selectTilesAutoFinest(e){const t=E(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests)}async _selectTilesAutoPrefetchUpsample(e,t){const i=e.layer.tileInfo;await this._populateElevationTiles(e,t);let o=!1;e.forEachTileToFetch(((e,t)=>{i.upsampleTile(e)?o=!0:t()})),o&&await this._selectTilesAutoPrefetchUpsample(e,t)}_sampleGeometryWithElevation(e){e.geometry.coordinates.forEach((t=>{const i=t.elevationTile;let s=e.options.noDataValue;if(i){const e=i.sample(t.x,t.y);o(e)?s=e:t.elevationTile=null}t.z=s}))}_extractSampleInfo(e){const t=e.layer.tileInfo,i=a(t.spatialReference);return e.geometry.coordinates.map((o=>{let s=-1;if(o.elevationTile&&o.elevationTile!==e.outsideExtentTile){s=t.lodAt(o.elevationTile.tile.level).resolution*i}return{demResolution:s}}))}}class x{export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){const t=new x;return t.geometry=this.geometry,t.spatialReference=this.spatialReference,t.coordinates=e||this.coordinates.map((e=>this._cloneCoordinate(e))),t._exporter=this._exporter,t}async project(e,t){if(this.spatialReference.equals(e))return this.clone();await h([{source:this.spatialReference,dest:e}],{signal:t});const i=new r({spatialReference:this.spatialReference,points:this.coordinates.map((e=>[e.x,e.y]))}),o=p(i,e);if(!o)return null;const s=this.coordinates.map(((e,t)=>{const i=this._cloneCoordinate(e),s=o.points[t];return i.x=s[0],i.y=s[1],i})),l=this.clone(s);return l.spatialReference=e,l}_cloneCoordinate(e){return{x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}}static fromGeometry(e){const t=new x;if(t.geometry=e,t.spatialReference=e.spatialReference,e instanceof x)t.coordinates=e.coordinates.map((e=>t._cloneCoordinate(e))),t._exporter=(t,i)=>{const o=e.clone(t);return o.spatialReference=i,o};else switch(e.type){case\"point\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?[{x:i.x,y:i.y,z:i.z,m:i.m}]:o?[{x:i.x,y:i.y,z:i.z}]:s?[{x:i.x,y:i.y,m:i.m}]:[{x:i.x,y:i.y}],t._exporter=(t,i)=>e.hasM?new c(t[0].x,t[0].y,t[0].z,t[0].m,i):new c(t[0].x,t[0].y,t[0].z,i);break}case\"multipoint\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?i.points.map((e=>({x:e[0],y:e[1],z:e[2],m:e[3]}))):o?i.points.map((e=>({x:e[0],y:e[1],z:e[2]}))):s?i.points.map((e=>({x:e[0],y:e[1],m:e[2]}))):i.points.map((e=>({x:e[0],y:e[1]}))),t._exporter=(t,i)=>e.hasM?new r({points:t.map((e=>[e.x,e.y,e.z,e.m])),hasZ:!0,hasM:!0,spatiaReference:i}):new r(t.map((e=>[e.x,e.y,e.z])),i);break}case\"polyline\":{const i=e,o=[],s=[],{hasZ:l,hasM:n}=e;let a=0;for(const e of i.paths)if(s.push([a,a+e.length]),a+=e.length,l&&n)for(const t of e)o.push({x:t[0],y:t[1],z:t[2],m:t[3]});else if(l)for(const t of e)o.push({x:t[0],y:t[1],z:t[2]});else if(n)for(const t of e)o.push({x:t[0],y:t[1],m:t[2]});else for(const t of e)o.push({x:t[0],y:t[1]});t.coordinates=o,t._exporter=(t,i)=>{const o=e.hasM?t.map((e=>[e.x,e.y,e.z,e.m])):t.map((e=>[e.x,e.y,e.z])),l=s.map((e=>o.slice(e[0],e[1])));return new u({paths:l,hasM:e.hasM,hasZ:!0,spatialReference:i})};break}}return t}}class g{constructor(e,t){this.layer=e,this.options=t}}class w extends g{constructor(e,t,i){super(e,i),this.outSpatialReference=t,this.type=\"geometry\"}selectTilesAtLOD(e){if(e<0)this.geometry.coordinates.forEach((e=>e.tile=null));else{const t=this.layer.tileInfo,i=t.lods[e].level;this.geometry.coordinates.forEach((e=>{e.tile=t.tileAt(i,e.x,e.y)}))}}allElevationTilesFetched(){return!this.geometry.coordinates.some((e=>!e.elevationTile))}clearElevationTiles(){for(const e of this.geometry.coordinates)e.elevationTile!==this.outsideExtentTile&&(e.elevationTile=null)}populateElevationTiles(e){for(const t of this.geometry.coordinates)!t.elevationTile&&t.tile&&(t.elevationTile=e[t.tile.id])}remapTiles(e){for(const t of this.geometry.coordinates)t.tile=e[t.tile.id]}getTilesToFetch(){const e={},t=[];for(const i of this.geometry.coordinates){const o=i.tile;i.elevationTile||!i.tile||e[o.id]||(e[o.id]=o,t.push(o))}return t}forEachTileToFetch(e){for(const t of this.geometry.coordinates)t.tile&&!t.elevationTile&&e(t.tile,(()=>t.tile=null))}}class _ extends g{constructor(e,t,i,o){super(e,i),this.type=\"extent\",this.elevationTiles=[],this.candidateTiles=[],this.fetchedCandidates=new Set,this.extent=t.intersection(e.fullExtent),this.maskExtents=o}selectTilesAtLOD(e,t){const i=this._maximumLodForRequests(t),o=Math.min(i,e);o<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(o)}_maximumLodForRequests(e){const t=this.layer.tileInfo;if(!e)return t.lods.length-1;const o=this.extent;if(i(o))return-1;for(let i=t.lods.length-1;i>=0;i--){const s=t.lods[i],l=s.resolution*t.size[0],n=s.resolution*t.size[1];if(Math.ceil(o.width/l)*Math.ceil(o.height/n)<=e)return i}return-1}allElevationTilesFetched(){return this.candidateTiles.length===this.elevationTiles.length}clearElevationTiles(){this.elevationTiles.length=0,this.fetchedCandidates.clear()}populateElevationTiles(e){for(const t of this.candidateTiles){const i=e[t.id];i&&(this.fetchedCandidates.add(t),this.elevationTiles.push(i))}}remapTiles(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map((t=>e[t.id])))}getTilesToFetch(){return this.candidateTiles}forEachTileToFetch(e,t){const i=this.candidateTiles;this.candidateTiles=[],i.forEach((i=>{if(this.fetchedCandidates.has(i))return void(t&&t(i));let o=!1;e(i,(()=>o=!0)),o?t&&t(i):this.candidateTiles.push(i)})),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t)}_uniqueNonOverlappingTiles(e,t){const i={},o=[];for(const l of e)i[l.id]?t&&t(l):(i[l.id]=l,o.push(l));const s=o.sort(((e,t)=>e.level-t.level));return s.filter(((e,i)=>{for(let o=0;o<i;o++)if(d(s[o].extent,e.extent))return t&&t(e),!1;return!0}))}_selectCandidateTilesCoveringExtentAt(e){this.candidateTiles.length=0;const t=this.extent;if(i(t))return;const o=this.layer.tileInfo,s=o.lods[e],l=o.tileAt(s.level,t.xmin,t.ymin),n=s.resolution*o.size[0],a=s.resolution*o.size[1],r=Math.ceil((t.xmax-l.extent[0])/n),c=Math.ceil((t.ymax-l.extent[1])/a);for(let i=0;i<c;i++)for(let e=0;e<r;e++){const t={id:null,level:l.level,row:l.row-i,col:l.col+e};o.updateTileInfo(t),this._tileIsMasked(t)||this.candidateTiles.push(t)}}_tileIsMasked(e){return!!this.maskExtents&&this.maskExtents.some((t=>d(t,e.extent)))}}function E(e,t){let i=e.lods.length-1;if(t>0){const o=e.lods.findIndex((e=>e.resolution<t));0===o?i=0:o>0&&(i=o-1)}return i}const R={maximumAutoTileRequests:20,noDataValue:0,returnSampleInfo:!1,demResolution:\"auto\",minDemResolution:0};export{v as ElevationQuery,x as GeometryDescriptor,v as default,E as getFinestLodIndex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import{isNone as t,unwrapOr as n}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as s}from\"../../core/unitUtils.js\";import{toExtent as i,create as o}from\"../../geometry/support/aaBoundingRect.js\";import{extentContainsPoint as r}from\"../../geometry/support/contains.js\";import{project as a}from\"../../geometry/support/webMercatorUtils.js\";import l from\"../../geometry/Point.js\";const c=e.getLogger(\"esri.layers.support.ElevationSampler\");class m{queryElevation(e){return h(e.clone(),this)}on(){return g}projectIfRequired(e,t){return f(e,t)}}class p extends m{constructor(e,t,n){super(),this.tile=e,this.noDataValue=n,this.extent=i(e.tile.extent,t.spatialReference);const o=s(t.spatialReference),r=t.lodAt(e.tile.level).resolution*o;this.demResolution={min:r,max:r}}get spatialReference(){return this.extent.spatialReference}contains(e){const t=this.projectIfRequired(e,this.spatialReference);return r(this.extent,t)}elevationAt(e){const n=this.projectIfRequired(e,this.spatialReference);if(t(n))return null;if(!this.contains(e)){const t=this.extent,n=`${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;return c.warn(\"#elevationAt()\",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${n})`),this.noDataValue}return this.tile.sample(n.x,n.y)}}class u extends m{constructor(e,t,n){let s;super(),\"number\"==typeof t?(this.noDataValue=t,s=null):(s=t,this.noDataValue=n),this.samplers=s?e.map((e=>new p(e,s,this.noDataValue))):e;const r=this.samplers[0];if(r){this.extent=r.extent.clone();const{min:e,max:t}=r.demResolution;this.demResolution={min:e,max:t};for(let n=1;n<this.samplers.length;n++){const e=this.samplers[n];this.extent.union(e.extent),this.demResolution.min=Math.min(this.demResolution.min,e.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,e.demResolution.max)}}else this.extent=i(o(),s.spatialReference),this.demResolution={min:0,max:0}}get spatialReference(){return this.extent.spatialReference}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(const n of this.samplers)if(n.contains(t))return n.elevationAt(t);return c.warn(\"#elevationAt()\",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler`),this.noDataValue}}function h(e,t){const n=f(e,t.spatialReference);if(!n)return null;switch(e.type){case\"point\":x(e,n,t);break;case\"polyline\":R(e,n,t);break;case\"multipoint\":d(e,n,t)}return e}function f(e,n){if(t(e))return null;const s=e.spatialReference;if(s.equals(n))return e;const i=a(e,n);return i||c.error(`Cannot project geometry spatial reference (wkid:${s.wkid}) to elevation sampler spatial reference (wkid:${n.wkid})`),i}function x(e,t,s){e.z=n(s.elevationAt(t),0)}function R(e,t,s){y.spatialReference=t.spatialReference;const i=e.hasM&&!e.hasZ;for(let o=0;o<e.paths.length;o++){const r=e.paths[o],a=t.paths[o];for(let e=0;e<r.length;e++){const t=r[e],o=a[e];y.x=o[0],y.y=o[1],i&&(t[3]=t[2]),t[2]=n(s.elevationAt(y),0)}}e.hasZ=!0}function d(e,t,s){y.spatialReference=t.spatialReference;const i=e.hasM&&!e.hasZ;for(let o=0;o<e.points.length;o++){const r=e.points[o],a=t.points[o];y.x=a[0],y.y=a[1],i&&(r[3]=r[2]),r[2]=n(s.elevationAt(y),0)}e.hasZ=!0}const y=new l,g={remove(){}};export{m as ElevationSamplerBase,u as MultiTileElevationSampler,p as TileElevationSampler,h as updateGeometryElevation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as a}from\"../../core/maybe.js\";class e{constructor(a,e=null){if(this.tile=a,t(e)){const t=a.extent;this.samplerData={pixelData:e.values,width:e.width,height:e.height,safeWidth:.99999999*(e.width-1),noDataValue:e.noDataValue,dx:(e.width-1)/(t[2]-t[0]),dy:(e.width-1)/(t[3]-t[1]),x0:t[0],y1:t[3]}}}sample(t,e){if(a(this.samplerData))return;const{safeWidth:s,width:h,pixelData:l,noDataValue:o,dx:r,dy:n,y1:d,x0:u}=this.samplerData,f=i(n*(d-e),0,s),c=i(r*(t-u),0,s),p=Math.floor(f),x=Math.floor(c),D=p*h+x,m=D+h,w=l[D],y=l[m],V=l[D+1],g=l[m+1];if(w!==o&&y!==o&&V!==o&&g!==o){const t=c-x,a=w+(V-w)*t;return a+(y+(g-y)*t-a)*(f-p)}}}function i(t,a,e){return t<a?a:t>e?e:t}export{e as ElevationTile,e as default};\n"],"names":["$8TSCy","parcelRequire","$549f00a40727e7dc$export$90c57334b102652d","key","e1","i1","o1","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","s1","l1","n1","a1","r1","ignoreInvisibleLayers","filter","e2","visible","slice","length","$kyj08","default","$549f00a40727e7dc$export$f323609ab3961c39","fromGeometry","returnSampleInfo","objectSpread","$549f00a40727e7dc$var$R","_this","query","_ctx","sent","_queryAllContinue","geometry","export","sampleInfo","e3","i2","o2","s2","l2","n2","type","$549f00a40727e7dc$var$w","spatialReference","signal","load","_createGeometryDescriptor","_selectTiles","_populateElevationTiles","_sampleGeometryWithElevation","_createQueryResult","e4","i3","o3","s3","_createSampler","e5","i4","o4","s4","l3","e6","_createSamplerAllContinue","e7","t1","i5","o5","s5","l4","n3","a2","tileInfo","equals","$7RvA5","initializeProjection","source","dest","project","$549f00a40727e7dc$var$_","$4UKmJ","MultiTileElevationSampler","elevationTiles","layer","options","noDataValue","e8","t2","i6","o6","s6","l5","n4","a3","pop","samplers","map","e9","$8TwEW","fromExtent","extent","concat","e10","t3","i7","o7","s7","l6","n5","c1","i8","a4","r2","coordinates","demResolution","push","clone","forEach","e11","i9","z","e12","t4","i10","outSpatialReference","t0","_extractSampleInfo","e13","tile","elevationTile","e14","i11","o8","s8","l7","wkid","e15","i12","o9","_preselectOutsideLayerExtent","_selectTilesClosestResolution","_selectTilesFinestContiguous","_selectTilesAuto","e16","$7qybv","isNone","fullExtent","t5","$3ZmPA","ElevationTile","sample","outsideExtentTile","o10","e17","_$i","x","s9","y","xmin","xmax","ymin","ymax","e18","t6","i13","this","_findNearestDemResolutionLODIndex","selectTilesAtLOD","e19","t7","i14","$5vzSQ","getMetersPerUnitForSR","o11","lods","s10","l8","_$t","Math","abs","resolution","e20","t8","i15","$549f00a40727e7dc$export$dc084dcdae9518f0","minDemResolution","_selectTilesFinestContiguousAt","e21","i16","o12","n6","a5","r3","tilemapCache","getTilesToFetch","$10vEZ","whenOrAbort","Promise","all","e22","fetchAvailability","level","row","col","allElevationTilesFetched","clearElevationTiles","throwIfAbortError","e23","t9","_callee1","i17","l9","a6","r4","c2","cache","i18","_$s","_$n","c3","uid","id","isSome","get","fetchTile","put","eachAlways","populateElevationTiles","t10","i19","_callee2","o13","n7","a7","r5","_selectTilesAutoFinest","_reduceTilesForMaximumRequests","_selectTilesAutoPrefetchUpsample","t11","n8","create","$dqkq5","result","fetchAvailabilityUpsample","ok","error","remapTiles","e24","t12","i20","o14","s11","e25","l10","e26","t13","forEachTileToFetch","n9","o15","maximumAutoTileRequests","upsampleTile","e27","t14","e28","t15","i21","o16","e29","t16","e30","t17","i22","s12","_$e","e31","t18","i23","o17","s13","lodAt","_exporter","e32","t19","e33","_cloneCoordinate","e34","t20","i24","o18","s14","l11","$eaHvJ","points","e35","e36","t21","i25","s15","e37","m","e38","t26","e39","t27","i29","o22","i28","o21","hasZ","s18","hasM","t28","i30","$d1Fqh","i26","o19","s16","e40","e41","e42","e43","t29","i31","e44","spatiaReference","e45","i27","o20","s17","l12","n10","a8","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step","_iterator","paths","Symbol","iterator","next","done","value","_step1","_iterator1","t22","err","return","_step2","_iterator2","t23","err1","_step3","_iterator3","t24","err2","_step4","_iterator4","t25","err3","t30","i32","o23","e46","e47","l13","e48","$95Tg0","$549f00a40727e7dc$var$g","g","e49","t31","w","e50","t32","i33","_super","call","e51","e52","t33","i34","e53","tileAt","some","e54","e55","e56","t34","e57","t35","e58","t36","i35","o24","e59","_step5","t37","_loop","_","e60","t38","i36","o25","candidateTiles","fetchedCandidates","Set","intersection","maskExtents","e61","t39","i37","_maximumLodForRequests","o26","min","_selectCandidateTilesCoveringExtentAt","e62","t40","o27","s19","l14","size","n11","ceil","width","height","clear","e63","t41","i38","add","e64","_uniqueNonOverlappingTiles","t42","e65","t43","i39","i40","has","o28","e66","t44","i41","o29","l15","s20","sort","e67","t45","e68","i42","o30","contains","e69","t47","o31","s21","l16","n12","a9","r6","c4","t46","updateTileInfo","_tileIsMasked","e70","t48","e71","t49","i43","o32","findIndex","e72","$39405ba02bc56a80$var$c","$jHOLN","getLogger","$39405ba02bc56a80$export$5080dd068f28024e","$39405ba02bc56a80$var$f","unwrapOr","elevationAt","$39405ba02bc56a80$var$y","$39405ba02bc56a80$var$R","$39405ba02bc56a80$var$d","$39405ba02bc56a80$export$d1068f55ee617163","$39405ba02bc56a80$var$g","$39405ba02bc56a80$export$bc8964dbfe76caf6","toExtent","max","projectIfRequired","$8Iadx","extentContainsPoint","warn","$39405ba02bc56a80$export$9b91f47d758847c1","_demResolution","_$e1","union","$eF88h","remove","$2e78c75df73da3b2$export$6842cbbf9ffc8f6b","arguments","samplerData","pixelData","values","safeWidth","dx","dy","x0","y1","_samplerData","s","h","l","o","r","n","d","u","f","$2e78c75df73da3b2$var$i","c","p","floor","D","V","_$a","e"],"version":3,"file":"ElevationQuery.d8a1665d.js.map"}