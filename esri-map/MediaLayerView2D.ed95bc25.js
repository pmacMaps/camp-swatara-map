function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("7k3Ue",(function(n,r){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(n.exports,"default",(function(){return M}));var s=t("j6uz9");t("ixrNB");var o=t("26zvD"),a=t("6TszD"),u=t("035lZ"),l=t("1CpCt"),c=t("lHg4e"),h=t("cc23H"),p=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var y=t("qA6zg"),v=t("19dbe"),f=t("6fwEV"),x=t("75Lco");t("liS5B"),t("9foJ7"),t("fdGvv");var d=t("iuoYy"),m=t("hidC2"),g=t("5ybFE"),S=t("aWVIg"),T=t("35vaU"),_=t("YRjSC"),V=t("2WnyR");let L=class extends((0,T.LayerView2DMixin)(_.default)){attach(){this.handles.add((0,h.on)((()=>this.layer.source),"refresh",(()=>{for(const e of this._tileStrategy.tiles)this._updateTile(e);this.requestUpdate()}))),this._overlayContainer=new(0,S.default),this.container.addChild(this._overlayContainer),this._fetchQueue=new(0,d.default)({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t)}),this._tileStrategy=new(0,m.default)({cachePolicy:"purge",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){this.handles.removeAll(),this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear()}supportsSpatialReference(e){return!0}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){this._tileStrategy.update(e)}async hitTest(e,t){const n=[],r=[e.x,e.y];for(const t of this.elements){const i=(0,l.unwrap)(t.georeference)?.coords;(0,l.isSome)(i)&&(0,f.ringsContainsCoords)(i.rings,r)&&n.push({type:"media",element:t,layer:this.layer,mapPoint:e})}return n.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){}_acquireTile(e){const t=new w(e.clone());return this._updateTile(t),t}_updateTile(e){this.updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[n,r]=e.setElements(t);this._acquireElements(e,n),this._releaseElements(e,r),this.requestUpdate()}),(e=>{(0,c.isAbortError)(e)||a.default.getLogger(this.declaredClass).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._releaseElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const n=this.layer.source;if((0,l.isNone)(n))return[];this.view.featuresTilingScheme.getTileBounds(b,e,!0);const r=new(0,V.default)({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:this.view.spatialReference});return n.queryElements(r,t)}_acquireElements(e,t){const n=this.layer.source,r=this.view.spatialReference;if(!(0,l.isNone)(n))for(const n of t)(0,u.getOrCreateMapValue)(this._elementReferences,n.uid,(()=>{const e=new(0,x.MediaElementView)({element:n,spatialReference:r}),t=new(0,g.default)(e);return this._overlayContainer.addChild(t),this.elements.add(n),{tiles:new Set,projectedElement:e,overlay:t}})).tiles.add(e)}_releaseElements(e,t){for(const n of t){const t=this._elementReferences.get(n.uid);t.tiles.delete(e),t.tiles.size||(this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.projectedElement.destroy(),this._elementReferences.delete(n.uid),this.elements.remove(n))}}constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this.layer=null,this.elements=new(0,o.default)}};(0,s._)([(0,p.property)()],L.prototype,"_fetchQueue",void 0),(0,s._)([(0,p.property)()],L.prototype,"layer",void 0),(0,s._)([(0,p.property)({readOnly:!0})],L.prototype,"elements",void 0),L=(0,s._)([(0,y.subclass)("esri.views.2d.layers.MediaLayerView2D")],L);const b=(0,v.create)();class w{setElements(e){const t=[],n=new Set(this.elements);this.elements=e;for(const r of e)n.has(r)?n.delete(r):t.push(r);return this.isReady=!0,[t,Array.from(n)]}constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}}const M=L})),t.register("75Lco",(function(n,r){e(n.exports,"MediaElementView",(function(){return y}));var i=t("j6uz9"),s=t("27btt"),o=t("1CpCt"),a=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var u=t("qA6zg"),l=t("etknW"),c=t("5cP7j"),h=t("19dbe"),p=t("5zXcg");let y=class extends s.default{get bounds(){const e=this.coords;return(0,o.isNone)(e)?null:(0,h.fromExtent)(e.extent)}get coords(){const e=(0,o.unwrap)(this.element.georeference)?.coords;return(0,c.projectOrLoad)(e,this.spatialReference).geometry}get normalizedCoords(){return l.default.fromJSON((0,p.normalizeCentralMeridianSync)(this.coords))}get normalizedBounds(){return(0,o.isSome)(this.normalizedCoords)?(0,h.fromExtent)(this.normalizedCoords.extent):null}constructor(e){super(e)}};(0,i._)([(0,a.property)()],y.prototype,"spatialReference",void 0),(0,i._)([(0,a.property)()],y.prototype,"element",void 0),(0,i._)([(0,a.property)()],y.prototype,"bounds",null),(0,i._)([(0,a.property)()],y.prototype,"coords",null),(0,i._)([(0,a.property)()],y.prototype,"normalizedCoords",null),(0,i._)([(0,a.property)()],y.prototype,"normalizedBounds",null),y=(0,i._)([(0,u.subclass)("esri.layers.support.media.MediaElementView")],y)})),t.register("5zXcg",(function(n,r){e(n.exports,"normalizeCentralMeridianSync",(function(){return h})),e(n.exports,"normalizeCentralMeridianForDisplay",(function(){return p}));var i=t("1CpCt"),s=t("19dbe"),o=t("772GK"),a=t("gPay9"),u=t("86d4E"),l=t("jCqxN"),c=t("fau59");function h(e){return y(e,!0)}function p(e){return y(e,!1)}function y(e,t){if((0,i.isNone)(e))return null;const n=e.spatialReference,r=(0,c.getInfo)(n),s="toJSON"in e?e.toJSON():e;if(!r)return s;const a=(0,c.isWebMercator)(n)?102100:4326,h=l.cutParams[a].maxX,p=l.cutParams[a].minX;if((0,u.isPoint)(s))return v(s,h,p);if((0,u.isMultipoint)(s))return s.points=s.points.map((e=>v(e,h,p))),s;if((0,u.isExtent)(s))return function(e,t){if(!t)return e;const n=function(e,t){const n=[],{ymin:r,ymax:i,xmin:s,xmax:o}=e,a=e.xmax-e.xmin,[u,l]=t.valid,{x:c,frameId:h}=f(e.xmin,t),{x:p,frameId:y}=f(e.xmax,t),v=c===p&&a>0;if(a>2*l){const e={xmin:s<o?c:p,ymin:r,xmax:l,ymax:i},t={xmin:u,ymin:r,xmax:s<o?p:c,ymax:i},a={xmin:0,ymin:r,xmax:l,ymax:i},v={xmin:u,ymin:r,xmax:0,ymax:i},f=[],d=[];x(e,a)&&f.push(h),x(e,v)&&d.push(h),x(t,a)&&f.push(y),x(t,v)&&d.push(y);for(let e=h+1;e<y;e++)f.push(e),d.push(e);n.push(new g(e,[h]),new g(t,[y]),new g(a,f),new g(v,d))}else c>p||v?n.push(new g({xmin:c,ymin:r,xmax:l,ymax:i},[h]),new g({xmin:u,ymin:r,xmax:p,ymax:i},[y])):n.push(new g({xmin:c,ymin:r,xmax:p,ymax:i},[h]));return n}(e,t).map((e=>e.extent));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}}(s,r);if((0,u.isPolygon)(s)||(0,u.isPolyline)(s)){const e=(0,o.getBoundsXY)(S,s),n={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},r=(0,l.offsetMagnitude)(n.xmin,p)*(2*h),i=0===r?s:(0,l.updatePolyGeometry)(s,r);return n.xmin+=r,n.xmax+=r,n.xmax>h?m(i,h,t):n.xmin<p?m(i,p,t):i}return s}function v(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,l.offsetMagnitude)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,l.offsetMagnitude)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,l.offsetMagnitude)(r,t);e.x+=n*(-2*t)}else if(r<n){const t=(0,l.offsetMagnitude)(r,n);e.x+=t*(-2*n)}}return e}function f(e,t){const[n,r]=t.valid,i=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i,o=s):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i,o=-s),{x:e,frameId:o}}function x(e,t){const{xmin:n,ymin:r,xmax:i,ymax:s}=t;return d(e,n,r)&&d(e,n,s)&&d(e,i,s)&&d(e,i,r)}function d(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function m(e,t,n=!0){const r=!(0,u.isPolyline)(e);if(r&&(0,a.closeRings)(e),n)return(new T).cut(e,t);const i=r?e.rings:e.paths,s=r?4:2,o=i.length,l=-2*t;for(let e=0;e<o;e++){const t=i[e];if(t&&t.length>=s){const e=[];for(const n of t)e.push([n[0]+l,n[1]]);i.push(e)}}return r?e.rings=i:e.paths=i,e}class g{constructor(e,t){this.extent=e,this.frameIds=t}}const S=(0,s.create)();class T{cut(e,t){let n;if(this.xCut=t,e.rings)this.closed=!0,n=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,n=e.paths,this.minPts=2}for(const e of n){if(!e||e.length<this.minPts)continue;let t=!0;for(const n of e)t?(this.moveTo(n),t=!1):this.lineTo(n);this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),n=[];for(const e of this.linesIn)e&&e.length>=this.minPts&&n.push(e);const r=-2*this.xCut;for(const e of this.linesOut)if(e&&e.length>=this.minPts){for(const t of e)t[0]+=r;n.push(e)}return this.closed?e.rings=n:e.paths=n,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){const t=this._side(e[0]);if(t*this._prevSide==-1){const n=this._intersect(this._prevPt,e);this._lineTo(this.xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){const e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)}_moveTo(e,t,n){this.closed?(this.lineIn.push([n<=0?e:this.xCut,t]),this.lineOut.push([n>=0?e:this.xCut,t])):(n<=0&&this.lineIn.push([e,t]),n>=0&&this.lineOut.push([e,t]))}_lineTo(e,t,n){this.closed?(this._addPolyVertex(this.lineIn,n<=0?e:this.xCut,t),this._addPolyVertex(this.lineOut,n>=0?e:this.xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([e,t])):this._prevSide<0?(this.lineIn.push([e,t]),this.lineOut.push([e,t])):this._prevSide>0&&(this.lineOut.push([e,t]),this.lineIn.push([e,t]))}_addPolyVertex(e,t,n){const r=e.length;r>1&&e[r-1][0]===t&&e[r-2][0]===t?e[r-1][1]=n:e.push([t,n])}_checkClosingPt(e){const t=e.length;t>3&&e[0][0]===this.xCut&&e[t-2][0]===this.xCut&&e[1][0]===this.xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this.xCut?-1:e>this.xCut?1:0}_intersect(e,t){const n=(this.xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}_pushLineIn(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]}_pushLineOut(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]}constructor(){this.linesIn=[],this.linesOut=[]}}})),t.register("5ybFE",(function(n,r){e(n.exports,"default",(function(){return x}));var i=t("bPmsI"),s=t("dVMKO"),o=t("6TszD"),a=t("8TN87"),u=t("1CpCt"),l=t("cc23H"),c=t("5aS5k"),h=t("g0mVO"),p=t("l3QXd"),y=t("2HKUi"),v=t("4radX"),f=t("5Bkmy");class x extends c.DisplayObject{destroy(){this._handles.forEach((e=>e.remove())),this.texture?.dispose(),this.texture=null}get dvsMat3(){return this.parent.dvsMat3}beforeRender(e){const{context:t}=e,n=this.elementView.element.content;if((0,u.isSome)(n)){const e=n instanceof HTMLImageElement,r=n instanceof HTMLVideoElement,i=e?n.naturalWidth:r?n.videoWidth:n.width,s=e?n.naturalHeight:r?n.videoHeight:n.height;this.texture?r&&!n.paused&&(this.texture.setData(n),this.requestRender(),((0,f.default)(t.gl)||(0,a.isPowerOfTwo)(i)&&(0,a.isPowerOfTwo)(s))&&this.texture.generateMipmap()):(this.texture=new(0,y.Texture)(t,{pixelFormat:p.PixelFormat.RGBA,dataType:p.PixelType.UNSIGNED_BYTE,samplingMode:p.TextureSamplingMode.LINEAR,wrapMode:p.TextureWrapMode.CLAMP_TO_EDGE,width:i,height:s},n),((0,f.default)(t.gl)||(0,a.isPowerOfTwo)(i)&&(0,a.isPowerOfTwo)(s))&&this.texture.generateMipmap(),r&&!n.paused&&this.requestRender())}super.beforeRender(e)}_createTransforms(){return null}updateDrawCoords(e,t){const n=this.elementView.coords;if((0,u.isNone)(n))return;const[r,i,s,o]=n.rings[0],a=this._vertices,{x:l,y:c}=e,h=0!==t;h?a.set([i[0]-l,i[1]-c,r[0]-l,r[1]-c,s[0]-l,s[1]-c,o[0]-l,o[1]-c,o[0]-l,o[1]-c,i[0]+t-l,i[1]-c,i[0]+t-l,i[1]-c,r[0]+t-l,r[1]-c,s[0]+t-l,s[1]-c,o[0]+t-l,o[1]-c]):a.set([i[0]-l,i[1]-c,r[0]-l,r[1]-c,s[0]-l,s[1]-c,o[0]-l,o[1]-c]),this.isWrapAround=h}getVAO(e,t,n){if((0,u.isNone)(this.elementView.coords))return null;const r=this._vertices;if(this._vao)this._geometryVbo.setData(r);else{this._geometryVbo=h.BufferObject.createVertex(e,p.Usage.DYNAMIC_DRAW,r);const i=h.BufferObject.createVertex(e,p.Usage.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new(0,v.VertexArrayObject)(e,n,t,{geometry:this._geometryVbo,tex:i})}return this._vao}constructor(e){super(),this.elementView=e,this.isWrapAround=!1,this._vertices=new Float32Array(20),this._handles=[],this._handles.push((0,l.watch)((()=>this.elementView.element.opacity),(e=>this.opacity=e),l.initial),(0,l.watch)((()=>[this.elementView.coords]),(()=>{this.requestRender()}),l.initial),(0,l.when)((()=>this.elementView.element.loaded),(()=>{const e=this.elementView.element;this.ready(),"video"===e.type&&(0,u.isSome)(e.content)&&this._handles.push((0,s.on)(e.content,"play",(()=>this.requestRender())))}),l.initial)),e.element.load().catch((t=>{o.default.getLogger("esri.views.2d.layers.MediaLayerView2D").error(new(0,i.default)("element-load-error","Element cannot be displayed",{element:e,error:t}))}))}}})),t.register("aWVIg",(function(n,r){e(n.exports,"default",(function(){return x}));var i=t("1CpCt"),s=t("jCR4P"),o=t("52822"),a=t("jsolS"),u=t("gLni9"),l=t("bQCak"),c=t("hq5aB"),h=t("fau59"),p=t("6MGuH"),y=t("4ZNdX"),v=t("eyQUy"),f=t("eqJSJ");class x extends f.default{get dvsMat3(){return this._dvsMat3}beforeRender(e){this._updateMatrices(e),this._updateOverlays(e,this.children);for(const t of this.children)t.beforeRender(e)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"overlay",brushes:[y.brushes.overlay],target:()=>this.children,drawPhase:v.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(e),t]}_updateMatrices(e){const{state:t}=e,{id:n,size:r,pixelRatio:i,resolution:s,rotation:a,viewpoint:h,displayMat3:p}=t;if(this._viewStateId===n)return;const y=Math.PI/180*a,v=i*r[0],f=i*r[1],{x:x,y:d}=h.targetGeometry,m=(0,c.normalizeMapX)(x,t.spatialReference);this._localOrigin.x=m,this._localOrigin.y=d;const g=s*v,S=s*f,T=(0,o.b)(this._dvsMat3);(0,o.m)(T,T,p),(0,o.c)(T,T,(0,u.f)(v/2,f/2)),(0,o.d)(T,T,(0,l.f)(v/g,-f/S,1)),(0,o.r)(T,T,-y),this._viewStateId=n}_updateOverlays(e,t){const{state:n}=e,{rotation:r,spatialReference:s,worldScreenWidth:o,size:a,viewpoint:u}=n,l=this._localOrigin;let c=0;if(s.isWrappable){const e=a[0],y=a[1],v=180/Math.PI*r,f=Math.abs(Math.cos(v)),x=Math.abs(Math.sin(v)),d=Math.round(e*f+y*x),[m,g]=(0,h.getInfo)(s).valid,S=(0,p.getWorldWidth)(s),{x:T,y:_}=u.targetGeometry,V=[T,_],L=[0,0];n.toScreen(L,V);const b=[0,0];let w;w=d>o?.5*o:.5*d;const M=Math.floor((T+.5*S)/S),C=m+M*S,I=g+M*S,E=[L[0]+w,0];n.toMap(b,E),b[0]>I&&(c=S),E[0]=L[0]-w,n.toMap(b,E),b[0]<C&&(c=-S);for(const e of t){const t=e.elementView.bounds;if((0,i.isNone)(t))continue;const[n,,r]=t;n<m&&r>m?e.updateDrawCoords(l,S):r>g&&n<g?e.updateDrawCoords(l,-S):e.updateDrawCoords(l,c)}}else for(const e of t)e.updateDrawCoords(l,c)}constructor(){super(...arguments),this._localOrigin=(0,s.createScreenPoint)(0,0),this._viewStateId=-1,this._dvsMat3=(0,a.c)(),this.requiresDedicatedFBO=!1}}})),t.register("bQCak",(function(t,n){function r(){return new Float32Array(3)}function i(e,t,n){const r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}function s(){return r()}function o(){return i(1,1,1)}function a(){return i(1,0,0)}function u(){return i(0,1,0)}function l(){return i(0,0,1)}e(t.exports,"c",(function(){return r})),e(t.exports,"f",(function(){return i}));const c=s(),h=o(),p=a(),y=u(),v=l();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,3)},zeros:s,ones:o,unitX:a,unitY:u,unitZ:l,ZEROS:c,ONES:h,UNIT_X:p,UNIT_Y:y,UNIT_Z:v},Symbol.toStringTag,{value:"Module"}))})),t.register("3mbeV",(function(t,n){e(t.exports,"u32to4Xu8",(function(){return i})),e(t.exports,"i1616to32",(function(){return s})),e(t.exports,"i8888to32",(function(){return o}));const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function s(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}})),t.register("bVIMy",(function(t,n){var r,i,s;function o(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function a(e){switch(e){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function u(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,i.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,i.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,i.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,i.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,i.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,i.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,i.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,i.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,i.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,i.Center]}}function l(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function c(e){switch(e){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function h(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function p(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}e(t.exports,"HAlign",(function(){return r})),e(t.exports,"VAlign",(function(){return i})),e(t.exports,"getXAnchorDirection",(function(){return o})),e(t.exports,"getYAnchorDirection",(function(){return a})),e(t.exports,"getAlignmentFromPlacement",(function(){return u})),e(t.exports,"getXDirection",(function(){return l})),e(t.exports,"getYDirection",(function(){return c})),e(t.exports,"getJustification",(function(){return h})),e(t.exports,"isMapAligned",(function(){return p})),(s=r||(r={}))[s.Left=-1]="Left",s[s.Center=0]="Center",s[s.Right=1]="Right",function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(i||(i={}))})),t.register("eDdav",(function(n,r){e(n.exports,"isOutlineFillSymbology",(function(){return u})),e(n.exports,"hasSimpleSymbology",(function(){return l})),e(n.exports,"hasOutlineFillSymbology",(function(){return c})),e(n.exports,"createMaterialKey",(function(){return h})),e(n.exports,"FillMaterialKey",(function(){return m})),e(n.exports,"LineMaterialKey",(function(){return S})),e(n.exports,"MarkerMaterialKey",(function(){return g})),e(n.exports,"TextMaterialKey",(function(){return T})),e(n.exports,"LabelMaterialKey",(function(){return _})),e(n.exports,"hydrateMaterialKey",(function(){return p})),e(n.exports,"MaterialKeyBase",(function(){return y}));var i=t("bPmsI"),s=t("bVIMy"),o=t("eyQUy");const a=Object.keys(o.WGLSymbologyType).filter((e=>"number"==typeof o.WGLSymbologyType[e])).reduce(((e,t)=>({...e,[t]:o.WGLSymbologyType[t]})),{});function u(e){return e===o.WGLSymbologyType.OUTLINE_FILL||e===o.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function l(e){return function(e){return e===o.WGLSymbologyType.SIMPLE||e===o.WGLSymbologyType.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function c(e){return u(e.symbologyType)}function h(e,t){switch(e){case o.WGLGeometryType.FILL:return m.from(t);case o.WGLGeometryType.LINE:return S.from(t);case o.WGLGeometryType.MARKER:return g.from(t);case o.WGLGeometryType.TEXT:return T.from(t);case o.WGLGeometryType.LABEL:return _.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function p(e){switch(y.load(e).geometryType){case o.WGLGeometryType.MARKER:return new g(e);case o.WGLGeometryType.FILL:return new m(e);case o.WGLGeometryType.LINE:return new S(e);case o.WGLGeometryType.TEXT:return new T(e);case o.WGLGeometryType.LABEL:return new _(e)}}class y{static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case o.WGLGeometryType.FILL:return"fill";case o.WGLGeometryType.MARKER:return"marker";case o.WGLGeometryType.LINE:return"line";case o.WGLGeometryType.TEXT:return"text";case o.WGLGeometryType.LABEL:return"label";default:throw new(0,i.default)(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const n=1<<e;t?this._data|=n:this._data&=~n}bit(e){return(this._data&1<<e)>>e}setBits(e,t,n){for(let r=t,i=0;r<n;r++,i++)this.setBit(r,0!=(e&1<<i))}bits(e,t){let n=0;for(let r=e,i=0;r<t;r++,i++)n|=this.bit(r)<<i;return n}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:o.WGLSymbologyType[this.symbologyType],options:a,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}constructor(e){this._data=0,this._data=e}}y.shared=new y(0);const v=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const n=function(e,t,n){const r=o.WGLVVFlag.SIZE_FIELD_STOPS|o.WGLVVFlag.SIZE_MINMAX_VALUE|o.WGLVVFlag.SIZE_SCALE_STOPS|o.WGLVVFlag.SIZE_UNIT_VALUE,i=(t&(o.WGLVVTarget.FIELD_TARGETS_OUTLINE|o.WGLVVTarget.MINMAX_TARGETS_OUTLINE|o.WGLVVTarget.SCALE_TARGETS_OUTLINE|o.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e===o.WGLGeometryType.LINE&&n.isOutline||e===o.WGLGeometryType.FILL&&u(n.symbologyType)?r&i:r&~i}(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(n&o.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(n&o.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(n&o.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(n&o.WGLVVFlag.SIZE_SCALE_STOPS)}},f=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&o.WGLVVFlag.ROTATION)}},x=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&o.WGLVVFlag.COLOR)}},d=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&o.WGLVVFlag.OPACITY)}};class m extends(x(d(v(y)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:n}=e,r=this.load(0);return r.geometryType=o.WGLGeometryType.FILL,r.symbologyType=t,t!==o.WGLSymbologyType.DOT_DENSITY&&r.setVV(n,e),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class g extends(x(d(f(v(y))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:n}=e,r=this.load(0);return r.geometryType=o.WGLGeometryType.MARKER,r.symbologyType=t,t!==o.WGLSymbologyType.HEATMAP&&r.setVV(n,e),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0);class S extends(x(d(v(y)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}S.shared=new S(0);class T extends(x(d(f(v(y))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0);class _ extends(v(y)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,s.isMapAligned)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}_.shared=new _(0)})),t.register("c4cvq",(function(t,n){e(t.exports,"radToByte",(function(){return a})),e(t.exports,"degToByte",(function(){return u})),e(t.exports,"log2",(function(){return l})),e(t.exports,"between",(function(){return c}));Number.POSITIVE_INFINITY;const r=Math.PI,i=128/r,s=1/Math.LN2;function o(e,t){return(e%=t)>=0?e:e+t}function a(e){return o(e*i,256)}function u(e){return o(.7111111111111111*e,256)}function l(e){return Math.log(e)*s}function c(e,t,n){return e>=t&&e<=n||e>=n&&e<=t}})),t.register("3Icya",(function(t,n){e(t.exports,"e",(function(){return o}));var r,i,s={exports:{}};r=s,void 0!==(i=function(){function e(e,n,i){i=i||2;var s,o,a,l,c,h,p,y=n&&n.length,v=y?n[0]*i:e.length,f=t(e,0,v,i,!0),x=[];if(!f||f.next===f.prev)return x;if(y&&(f=u(e,n,f,i)),e.length>80*i){s=a=e[0],o=l=e[1];for(var d=i;d<v;d+=i)(c=e[d])<s&&(s=c),(h=e[d+1])<o&&(o=h),c>a&&(a=c),h>l&&(l=h);p=0!==(p=Math.max(a-s,l-o))?1/p:0}return r(f,x,i,s,o,p),x}function t(e,t,n,r,i){var s,o;if(i===C(e,t,n,r)>0)for(s=t;s<n;s+=r)o=b(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=b(s,e[s],e[s+1],o);if(o&&g(o,o.next)){var a=o.next;w(o),o=a}return o}function n(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(w(r),(r=t=i)===r.next)break;n=!0}}while(n||r!==t);return t}function r(e,t,u,l,c,h,p){if(e){!p&&h&&y(e,l,c,h);for(var v,f,x=e;e.prev!==e.next;)if(v=e.prev,f=e.next,h?s(e,l,c,h):i(e))t.push(v.i/u),t.push(e.i/u),t.push(f.i/u),w(e),e=f.next,x=f.next;else if((e=f)===x){p?1===p?r(e=o(n(e),t,u),t,u,l,c,h,2):2===p&&a(e,t,u,l,c,h):r(n(e),t,u,l,c,h,1);break}}}function i(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(x(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(e,t,n,r){var i=e.prev,s=e,o=e.next;if(m(i,s,o)>=0)return!1;for(var a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,u=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,l=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,c=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,h=v(a,u,t,n,r),p=v(l,c,t,n,r),y=e.prevZ,f=e.nextZ;y&&y.z>=h&&f&&f.z<=p;){if(y!==e.prev&&y!==e.next&&x(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,f!==e.prev&&f!==e.next&&x(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&x(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&x(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function o(e,t,r){var i=e;do{var s=i.prev,o=i.next.next;!g(s,o)&&S(s,i,i.next,o)&&V(s,o)&&V(o,s)&&(t.push(s.i/r),t.push(i.i/r),t.push(o.i/r),w(i),w(i.next),i=e=o),i=i.next}while(i!==e);return n(i)}function a(e,t,i,s,o,a){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&d(u,l)){var c=L(u,l);return u=n(u,u.next),c=n(c,c.next),r(u,t,i,s,o,a),void r(c,t,i,s,o,a)}l=l.next}u=u.next}while(u!==e)}function u(e,r,i,s){var o,a,u,c=[];for(o=0,a=r.length;o<a;o++)(u=t(e,r[o]*s,o<a-1?r[o+1]*s:e.length,s,!1))===u.next&&(u.steiner=!0),c.push(f(u));for(c.sort(l),o=0;o<c.length;o++)i=n(i=h(c[o],i),i.next);return i}function l(e,t){return e.x-t.x}function c(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function h(e,t){var r=function(e,t){var n,r=t,i=e.x,s=e.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>o){if(o=a,a===i){if(s===r.y)return r;if(s===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,h=n.y,y=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&x(s<h?i:o,s,c,h,s<h?o:i,s,r.x,r.y)&&(u=Math.abs(s-r.y)/(i-r.x),V(r,e)&&(u<y||u===y&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,y=u)),r=r.next}while(r!==l);return n}(e,t);if(!r)return t;var i=L(r,e),s=n(r,r.next);let o=c(i);return n(o,o.next),s=c(s),c(t===r?s:t)}function p(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function y(e,t,n,r){var i=e;do{null===i.z&&(i.z=v(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,s,o,a,u,l=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,a=0,t=0;t<l&&(a++,r=r.nextZ);t++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,l*=2}while(o>1)}(i)}function v(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function x(e,t,n,r,i,s,o,a){return(i-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(r-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function d(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&S(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(V(e,t)&&V(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,n,r){var i=_(m(e,t,n)),s=_(m(e,t,r)),o=_(m(n,r,e)),a=_(m(n,r,t));return i!==s&&o!==a||!(0!==i||!T(e,n,t))||!(0!==s||!T(e,r,t))||!(0!==o||!T(n,e,r))||!(0!==a||!T(n,t,r))}function T(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function V(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function L(e,t){var n=new M(e.i,e.x,e.y),r=new M(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function b(e,t,n,r){var i=new M(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,n,r){for(var i=0,s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}return e.deviation=function(e,t,n,r){var i=t&&t.length,s=i?t[0]*n:e.length,o=Math.abs(C(e,0,s,n));if(i)for(var a=0,u=t.length;a<u;a++){var l=t[a]*n,c=a<u-1?t[a+1]*n:e.length;o-=Math.abs(C(e,l,c,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,y=r[a+1]*n,v=r[a+2]*n;h+=Math.abs((e[p]-e[v])*(e[y+1]-e[p+1])-(e[p]-e[y])*(e[v+1]-e[p+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)n.vertices.push(e[i][s][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},e}())&&(r.exports=i);const o=s.exports})),t.register("iqtPh",(function(t,n){e(t.exports,"DECLUTTER_TILES",(function(){return r})),e(t.exports,"COLLISION_GRID_CELL_SIZE",(function(){return i})),e(t.exports,"DECLUTTER_BUDGET",(function(){return s})),e(t.exports,"FADE_DURATION",(function(){return o}));const r=!0,i=32,s=1.5,o=200}));
//# sourceMappingURL=MediaLayerView2D.ed95bc25.js.map
