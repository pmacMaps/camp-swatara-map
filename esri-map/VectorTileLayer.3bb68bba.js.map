{"mappings":"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","sources":["node_modules/@arcgis/core/layers/VectorTileLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import r from\"../core/Error.js\";import{clone as o}from\"../core/lang.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as i,createTask as l}from\"../core/promiseUtils.js\";import{urlToObject as a,addQueryParameters as n,isProtocolRelative as p,normalize as y}from\"../core/urlUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as c}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/Extent.js\";import S from\"../geometry/SpatialReference.js\";import f from\"./Layer.js\";import{APIKeyMixin as g}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as v}from\"./mixins/ArcGISCachedService.js\";import{ArcGISService as _}from\"./mixins/ArcGISService.js\";import{BlendLayer as j}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as b}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as w}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{checkWebPSupport as I}from\"./support/imageUtils.js\";import x from\"./support/SpriteSource.js\";import U from\"./support/TileInfo.js\";import{loadMetadata as P}from\"./support/vectorTileLayerLoader.js\";import{createForItem as R}from\"../portal/support/jsonContext.js\";import{areSchemasOverlapping as O,unionTileInfos as M}from\"../views/2d/engine/vectorTiles/tileInfoUtils.js\";import V from\"../views/2d/engine/vectorTiles/style/StyleRepository.js\";import{getWebGL1Capabilities as D}from\"../views/webgl/capabilities.js\";let k=class extends(j(L(v(_(w(T(b(g(s(f)))))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType=\"VectorTileLayer\",this.type=\"vector-tile\",this.url=null,this.symbolCollisionBoxesVisible=!1,this.path=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}destroy(){if(this.sourceNameToSource)for(const e of Object.values(this.sourceNameToSource))null==e||e.destroy();this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(globalThis.devicePixelRatio||1,e)}load(e){const r=this.loadFromPortal({supportedTypes:[\"Vector Tile Service\"],supportsData:!1},e).catch(i).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const r=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await t(r,{...e,query:{f:\"json\",...this.customParameters,token:this.apiKey}})).data&&this.read({url:r},R(this.portalItem))})).catch(i).then((()=>this._loadStyle(e)));return this.addResolvingPromise(r),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e&&e.serviceUrl&&a(e.serviceUrl);if(!t)return null;const r=this._getDefaultAttribution(t.path);return r?n(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const e=this.primarySource;return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){var e;return(null==(e=this.primarySource)?void 0:e.fullExtent)||null}get parsedUrl(){return this.serviceUrl?a(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(e,t){e&&p(e)&&(e=`https:${e}`),t.styleUrl=e}get tileInfo(){var e;const t=[];for(const o in this.sourceNameToSource)t.push(this.sourceNameToSource[o]);let r=(null==(e=this.primarySource)?void 0:e.tileInfo)||new U;if(t.length>1)for(let o=0;o<t.length;o++)O(r,t[o].tileInfo)&&(r=M(r,t[o].tileInfo));return r}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}async loadSpriteSource(e=1,t){if(!this._spriteSourceMap.has(e)){var r;const o=D().maxTextureSize,s=null!=(r=this.currentStyleInfo)&&r.spriteUrl?n(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,i=new x(s,e,o,this.currentStyleInfo.spriteFormat);await i.load(t),this._spriteSourceMap.set(e,i)}return Promise.resolve(this._spriteSourceMap.get(e))}async setSpriteSource(e,t=\"png\",r=1,o){const s=D().maxTextureSize,l=e?n(e,{...this.customParameters,token:this.apiKey}):null;if(!l)return null;const a=new x(l,r,s,t);try{return await a.load(o),this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,a),this.currentStyleInfo.spriteUrl=l,this.emit(\"spriteSource-change\",{spriteSource:a}),a}catch(p){i(p)}return null}async loadStyle(e,t){var r;const o=e||this.style||this.url;return this._loadingTask&&\"string\"==typeof o&&this.url===o||(null==(r=this._loadingTask)||r.abort(),this._loadingTask=l((e=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(o,{signal:e}))),t)),this._loadingTask.promise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return o(this.styleRepository.getPaintProperties(e))}setPaintProperties(e,t){const r=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const o=this.styleRepository.isPainterDataDriven(e);this.emit(\"paint-change\",{layer:e,paint:t,isDataDriven:r||o})}getStyleLayer(e){return o(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit(\"style-layer-change\",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit(\"delete-style-layer\",{layer:e})}getLayoutProperties(e){return o(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit(\"layout-change\",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit(\"style-layer-visibility-change\",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}write(e,t){return null!=t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new r(\"vectortilelayer:unsupported\",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}getTileUrl(e,t,r){return null}async _getSourceAndStyle(e,t){if(!e)throw new Error(\"invalid style!\");const r=await P(e,{...t,query:{...this.customParameters,token:this.apiKey}});if(\"webp\"===r.spriteFormat){await I(\"lossy\")||(r.spriteFormat=\"png\")}this._set(\"currentStyleInfo\",{...r}),\"string\"==typeof e?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set(\"sourceNameToSource\",r.sourceNameToSource),this._set(\"primarySource\",r.sourceNameToSource[r.primarySourceName]),this._set(\"styleRepository\",new V(r.style)),this.read(r.layerDefinition,{origin:\"service\"}),this.emit(\"load-style\")}_getDefaultAttribution(e){const t=e.match(/^https?:\\/\\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\\.arcgis\\.com(\\/[^\\/]+)?\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/vectortileserver/i),r=[\"OpenStreetMap_v2\",\"OpenStreetMap_Daylight_v2\",\"OpenStreetMap_Export_v2\",\"OpenStreetMap_FTS_v2\",\"OpenStreetMap_GCS_v2\",\"World_Basemap\",\"World_Basemap_v2\",\"World_Basemap_Export_v2\",\"World_Basemap_GCS_v2\",\"World_Basemap_WGS84\",\"World_Contours_v2\"];if(!t)return;const o=t[2]&&t[2].toLowerCase();if(!o)return;const s=t[1]||\"\";for(const i of r)if(i.toLowerCase().includes(o))return y(`//static.arcgis.com/attribution/Vector${s}/${i}`)}async _loadStyle(e){var t,r;return null!=(t=null==(r=this._loadingTask)?void 0:r.promise)?t:this.loadStyle(null,e)}};e([u({readOnly:!0})],k.prototype,\"attributionDataUrl\",null),e([u({type:[\"show\",\"hide\"]})],k.prototype,\"listMode\",void 0),e([u({readOnly:!0,json:{read:!1}})],k.prototype,\"capabilities\",null),e([u({readOnly:!0})],k.prototype,\"currentStyleInfo\",void 0),e([u({json:{read:!1},readOnly:!0,type:d})],k.prototype,\"fullExtent\",null),e([u()],k.prototype,\"style\",void 0),e([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],k.prototype,\"isReference\",void 0),e([u({type:[\"VectorTileLayer\"]})],k.prototype,\"operationalLayerType\",void 0),e([u({readOnly:!0})],k.prototype,\"parsedUrl\",null),e([u({readOnly:!0})],k.prototype,\"serviceUrl\",null),e([u({type:S,readOnly:!0})],k.prototype,\"spatialReference\",null),e([u({readOnly:!0})],k.prototype,\"styleRepository\",void 0),e([u({readOnly:!0})],k.prototype,\"sourceNameToSource\",void 0),e([u({readOnly:!0})],k.prototype,\"primarySource\",void 0),e([u({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],k.prototype,\"styleUrl\",null),e([h([\"portal-item\",\"web-document\"],\"styleUrl\")],k.prototype,\"writeStyleUrl\",null),e([u({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:U})],k.prototype,\"tileInfo\",null),e([u({json:{read:!1},readOnly:!0,value:\"vector-tile\"})],k.prototype,\"type\",void 0),e([u({json:{origins:{\"web-document\":{read:{source:\"styleUrl\"}},\"portal-item\":{read:{source:\"url\"}}},write:!1,read:!1}})],k.prototype,\"url\",void 0),e([u({readOnly:!0})],k.prototype,\"version\",void 0),e([c(\"version\",[\"version\",\"currentVersion\"])],k.prototype,\"readVersion\",null),e([u({type:Boolean})],k.prototype,\"symbolCollisionBoxesVisible\",void 0),e([u({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],k.prototype,\"path\",void 0),k=e([m(\"esri.layers.VectorTileLayer\")],k);const C=k;export{C as default};\n"],"names":["$8TSCy","parcelRequire","$142071dcb1623d3c$var$k","_superClass","_len","arguments","length","_$e","Array","_key","_this","_super","call","apply","toConsumableArray","_spriteSourceMap","Map","currentStyleInfo","style","isReference","operationalLayerType","type","url","symbolCollisionBoxesVisible","path","key","e1","t1","objectSpread","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","this","sourceNameToSource","_step","_iterator","Object","values","Symbol","iterator","next","done","value","destroy","err","return","clear","e2","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","loadSpriteSource","globalThis","devicePixelRatio","e3","r1","loadFromPortal","supportedTypes","supportsData","catch","$10vEZ","throwIfAbortError","then","r2","_this1","portalItem","id","concat","itemUrl","$9pNSx","default","query","f","customParameters","token","apiKey","_ctx","sent","data","read","$UdTKD","createForItem","_loadStyle","addResolvingPromise","Promise","resolve","t2","serviceUrl","$kYueh","urlToObject","r3","_getDefaultAttribution","addQueryParameters","primarySource","capabilities","operations","supportsExportTiles","supportsTileMap","exportTiles","fullExtent","tileInfo","spatialReference","styleUrl","e4","t3","isProtocolRelative","t4","o2","push","r4","$xQ42o","o1","$aOITd","areSchemasOverlapping","unionTileInfos","e","t5","version","parseFloat","currentVersion","t6","r5","o3","_$s","i1","has","$3NAox","getWebGL1Capabilities","maxTextureSize","spriteUrl","$bxPyI","spriteFormat","load","set","get","e5","t7","r6","o4","l1","a1","emit","spriteSource","t0","e6","t8","r7","o5","_loadingTask","abort","createTask","e7","_getSourceAndStyle","signal","promise","e8","styleRepository","getStyleLayerId","e9","getStyleLayerIndex","e10","$flPLJ","clone","getPaintProperties","e11","t9","r8","isPainterDataDriven","setPaintProperties","o6","layer","paint","isDataDriven","e12","getStyleLayer","e13","t10","setStyleLayer","index","e14","deleteStyleLayer","e15","getLayoutProperties","e16","t11","setLayoutProperties","layout","e17","t12","setStyleLayerVisibility","visibility","e18","getStyleLayerVisibility","e19","t13","origin","messages","$kyj08","title","getPrototypeOf","_class","prototype","t","r","e20","t14","r9","Error","$bNyRh","loadMetadata","$2Yxel","checkWebPSupport","_set","primarySourceName","$7dqtP","layerDefinition","e21","t15","match","o7","toLowerCase","i2","includes","normalize","e22","t16","r11","loadStyle","$gIXJ2","BlendLayer","$3GzOb","ScaleRangeLayer","$1a7AW","ArcGISCachedService","$aLy89","ArcGISService","$5N5S1","OperationalLayer","$9bAYR","PortalLayer","$cv2jJ","CustomParametersMixin","$jy0BF","APIKeyMixin","$8NioF","MultiOriginJSONMixin","$4LDxK","$7eJjO","_","$iho5X","property","readOnly","json","$gINRd","Boolean","write","enabled","overridePolicy","$j40xv","String","ignoreOrigin","origins","isRequired","$kced1","writer","service","source","$eB8sj","reader","$142071dcb1623d3c$export$2e2bcd8739ae039","$fcwIv","subclass"],"version":3,"file":"VectorTileLayer.3bb68bba.js.map"}