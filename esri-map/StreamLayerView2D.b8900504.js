function e(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("2n2TQ",(function(i,r){var n;n=i.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(i.exports,"default",(function(){return v}));var s=t("j6uz9"),a=t("bPmsI"),o=t("1CpCt"),l=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var u=t("qA6zg"),c=t("gEU1A"),h=t("lstEf"),d=t("8it4a");function p(e,t){if((0,o.isNone)(e)&&(0,o.isNone)(t))return null;const i={};return(0,o.isSome)(t)&&(i.geometry=t.toJSON()),(0,o.isSome)(e)&&(i.where=e),i}let f=class extends h.default{initialize(){this.handles.add([this.layer.watch("purgeOptions",(()=>this._update())),this.watch("suspended",(e=>{e?this._proxy.pauseStream():this._proxy.resumeStream()}))])}get connectionError(){if(this.errorString)return new(0,a.default)("stream-controller",this.errorString)}on(e,t){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));const i=super.on(e,t),r=this;return{remove(){i.remove(),"data-received"===e&&(r._proxy.closed||r.hasEventListener("data-received")||r._proxy.enableEvent("data-received",!1))}}}queryLatestObservations(e,t){if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new(0,a.default)("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((e=>{const t=c.default.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus="disconnected"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(p(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,i=e.fields.map((e=>e.toJSON())),r=(0,d.toJSONGeometryType)(e.geometryType),n=e.timeInfo&&e.timeInfo.toJSON()||null,s=e.spatialReference?e.spatialReference.toJSON():null;return{type:"stream",fields:i,geometryType:r,objectIdField:t,timeInfo:n,source:this.layer.parsedUrl,serviceFilter:p(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:s,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}constructor(){super(...arguments),this._enabledDataReceived=!1,this.errorString=null,this.connectionStatus="disconnected"}};(0,s._)([(0,l.property)()],f.prototype,"errorString",void 0),(0,s._)([(0,l.property)({readOnly:!0})],f.prototype,"connectionError",null),(0,s._)([(0,l.property)()],f.prototype,"connectionStatus",void 0),f=(0,s._)([(0,u.subclass)("esri.views.2d.layers.StreamLayerView2D")],f);const v=f})),t.register("8it4a",(function(i,r){e(i.exports,"toJSONGeometryType",(function(){return s})),e(i.exports,"canUseMajorityInterpolationOnDataSource",(function(){return a}));const n=new(0,t("4jlRt").JSONMap)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function s(e){return n.toJSON(e)}function a(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:n}=e.rasterInfo;return 1===t&&(null!=i||null!=r||"u8"===n||"s8"===n)}})),t.register("1kNSi",(function(i,r){e(i.exports,"toQuantizationTransform",(function(){return u})),e(i.exports,"quantizePoint",(function(){return g})),e(i.exports,"quantizeGeometry",(function(){return x})),e(i.exports,"unquantizeMultipoint",(function(){return b})),e(i.exports,"unquantizePoint",(function(){return _})),e(i.exports,"unquantizePolygon",(function(){return T})),e(i.exports,"unquantizePolyline",(function(){return R}));var n=t("1CpCt"),s=t("86d4E");const a=(e,t,i)=>[t,i],o=(e,t,i)=>[t,i,e[2]],l=(e,t,i)=>[t,i,e[2],e[3]];function u(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,n.isSome)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function h({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function d(e,t,i){const r=[];let n,s,a,o;for(let l=0;l<i.length;l++){const u=i[l];l>0?(a=c(e,u[0]),o=h(e,u[1]),a===n&&o===s||(r.push(t(u,a-n,o-s)),n=a,s=o)):(n=c(e,u[0]),s=h(e,u[1]),r.push(t(u,n,s)))}return r.length>0?r:null}function p({scale:e,translate:t},i){return i*e[0]+t[0]}function f({scale:e,translate:t},i){return t[1]-i*e[1]}function v(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[n,s]=e.scale;let a=p(e,i[0][0]),o=f(e,i[0][1]);r[0]=t(i[0],a,o);for(let e=1;e<i.length;e++){const l=i[e];a+=l[0]*n,o-=l[1]*s,r[e]=t(l,a,o)}return r}function m(e,t,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=v(e,t,i[n]);return r}function y(e,t,i,r,n){return t.points=(s=e,u=i.points,c=n,d(s,r?c?l:o:c?o:a,u)),t;var s,u,c}function g(e,t,i,r,n){return t.x=c(e,i.x),t.y=h(e,i.y),t!==i&&(r&&(t.z=i.z),n&&(t.m=i.m)),t}function S(e,t,i,r,n){const s=function(e,t,i,r){const n=[],s=i?r?l:o:r?o:a;for(let i=0;i<t.length;i++){const r=d(e,s,t[i]);r&&r.length>=3&&n.push(r)}return n.length?n:null}(e,i.rings,r,n);return s?(t.rings=s,t):null}function V(e,t,i,r,n){const s=function(e,t,i,r){const n=[],s=i?r?l:o:r?o:a;for(let i=0;i<t.length;i++){const r=d(e,s,t[i]);r&&r.length>=2&&n.push(r)}return n.length?n:null}(e,i.paths,r,n);return s?(t.paths=s,t):null}function x(e,t){return e&&t?(0,s.isPoint)(t)?g(e,{},t,!1,!1):(0,s.isPolyline)(t)?V(e,{},t,!1,!1):(0,s.isPolygon)(t)?S(e,{},t,!1,!1):(0,s.isMultipoint)(t)?y(e,{},t,!1,!1):(0,s.isExtent)(t)?(a=!1,o=!1,(r={}).xmin=c(i=e,(n=t).xmin),r.ymin=h(i,n.ymin),r.xmax=c(i,n.xmax),r.ymax=h(i,n.ymax),r!==n&&(a&&(r.zmin=n.zmin,r.zmax=n.zmax),o&&(r.mmin=n.mmin,r.mmax=n.mmax)),r):null:null;var i,r,n,a,o}function b(e,t,i,r,s){return(0,n.isSome)(i)&&(t.points=(u=e,c=i.points,h=s,v(u,r?h?l:o:h?o:a,c))),t;var u,c,h}function _(e,t,i,r,s){return(0,n.isNone)(i)||(t.x=p(e,i.x),t.y=f(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m))),t}function T(e,t,i,r,s){return(0,n.isSome)(i)&&(t.rings=(u=e,c=i.rings,h=s,m(u,r?h?l:o:h?o:a,c))),t;var u,c,h}function R(e,t,i,r,s){return(0,n.isSome)(i)&&(t.paths=(u=e,c=i.paths,h=s,m(u,r?h?l:o:h?o:a,c))),t;var u,c,h}})),t.register("3mbeV",(function(t,i){e(t.exports,"u32to4Xu8",(function(){return n})),e(t.exports,"i1616to32",(function(){return s})),e(t.exports,"i8888to32",(function(){return a}));const r=new Float32Array(1);new Uint32Array(r.buffer);function n(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function s(e,t){return 65535&e|t<<16}function a(e,t,i,r){return 255&e|(255&t)<<8|(255&i)<<16|r<<24}})),t.register("bVIMy",(function(t,i){var r,n,s,a;function o(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function l(e){switch(e){case"top":return n.Top;case"middle":return n.Center;case"baseline":return n.Baseline;case"bottom":return n.Bottom}}function u(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,n.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,n.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,n.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,n.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,n.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,n.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,n.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,n.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,n.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,n.Center]}}function c(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function h(e){switch(e){case n.Top:return 1;case n.Center:return 0;case n.Bottom:case n.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function d(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function p(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}e(t.exports,"HAlign",(function(){return r})),e(t.exports,"VAlign",(function(){return n})),e(t.exports,"getXAnchorDirection",(function(){return o})),e(t.exports,"getYAnchorDirection",(function(){return l})),e(t.exports,"getAlignmentFromPlacement",(function(){return u})),e(t.exports,"getXDirection",(function(){return c})),e(t.exports,"getYDirection",(function(){return h})),e(t.exports,"getJustification",(function(){return d})),e(t.exports,"isMapAligned",(function(){return p})),(a=r||(r={}))[a.Left=-1]="Left",a[a.Center=0]="Center",a[a.Right=1]="Right",(s=n||(n={}))[s.Top=1]="Top",s[s.Center=0]="Center",s[s.Bottom=-1]="Bottom",s[s.Baseline=2]="Baseline"})),t.register("eDdav",(function(i,r){e(i.exports,"createMaterialKey",(function(){return o})),e(i.exports,"FillMaterialKey",(function(){return p})),e(i.exports,"LineMaterialKey",(function(){return v})),e(i.exports,"MarkerMaterialKey",(function(){return f})),e(i.exports,"TextMaterialKey",(function(){return m})),e(i.exports,"LabelMaterialKey",(function(){return y})),e(i.exports,"MaterialKeyBase",(function(){return l}));var n=t("bPmsI"),s=t("bVIMy"),a=t("eyQUy");function o(e,t){switch(e){case a.WGLGeometryType.FILL:return p.from(t);case a.WGLGeometryType.LINE:return v.from(t);case a.WGLGeometryType.MARKER:return f.from(t);case a.WGLGeometryType.TEXT:return m.from(t);case a.WGLGeometryType.LABEL:return y.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}class l{static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get geometryTypeString(){switch(this.geometryType){case a.WGLGeometryType.FILL:return"fill";case a.WGLGeometryType.MARKER:return"marker";case a.WGLGeometryType.LINE:return"line";case a.WGLGeometryType.TEXT:return"text";case a.WGLGeometryType.LABEL:return"label";default:throw new(0,n.default)(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let r=t,n=0;r<i;r++,n++)this.setBit(r,0!=(e&1<<n))}bits(e,t){let i=0;for(let r=e,n=0;r<t;r++,n++)i|=this.bit(r)<<n;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}constructor(e){this._data=0,this._data=e}}l.shared=new l(0);const u=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=function(e,t){const i=a.WGLVVFlag.SIZE_FIELD_STOPS|a.WGLVVFlag.SIZE_MINMAX_VALUE|a.WGLVVFlag.SIZE_SCALE_STOPS|a.WGLVVFlag.SIZE_UNIT_VALUE,r=(e&(a.WGLVVTarget.FIELD_TARGETS_OUTLINE|a.WGLVVTarget.MINMAX_TARGETS_OUTLINE|a.WGLVVTarget.SCALE_TARGETS_OUTLINE|a.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?i&r:i&~r}(e,t)&e;this.vvSizeMinMaxValue=!!(i&a.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&a.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&a.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&a.WGLVVFlag.SIZE_SCALE_STOPS)}},c=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&a.WGLVVFlag.ROTATION)}},h=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&a.WGLVVFlag.COLOR)}},d=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&a.WGLVVFlag.OPACITY)}};class p extends(h(d(u(l)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(15)}set dotDensity(e){this.setBit(15,e)}get simple(){return!!this.bit(22)}set simple(e){this.setBit(22,e)}get outlinedFill(){return!!this.bit(21)}set outlinedFill(e){this.setBit(21,e)}}p.shared=new p(0);class f extends(h(d(c(u(l))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}f.shared=new f(0);class v extends(h(d(u(l)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}v.shared=new v(0);class m extends(h(d(c(u(l))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class y extends(u(l)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.LABEL,t.setVV(e.vvFlags,e),t.mapAligned=(0,s.isMapAligned)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0)})),t.register("d1j0h",(function(i,r){e(i.exports,"expandSymbol",(function(){return l})),e(i.exports,"cimLayerToRasterizationInfo",(function(){return u}));var n=t("9LGQK"),s=t("6LuoZ"),a=t("nXMis");const o=async(e,t,i)=>new(0,s.ExpandedCIM)(await(0,n.analyzeCIMSymbol)(e.data,t,i),e.data,e.rendererKey,e.maxVVSize),l=async(e,t,i,r)=>{if(!e)return null;if("cim"===e.type)return o(e,t,i);if("web-style"===e.type){const n={type:"cim",data:await(0,a.fetchCIMSymbolReference)(e,null,r),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return o(n,t,i)}return e};function u(e){if(!e)return null;const{type:t,cim:i,url:r,materialHash:n}=e,s={cim:i,type:t,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(t){case"marker":s.size=e.size,s.path=e.path;break;case"line":s.dashTemplate=e.dashTemplate;break;case"text":s.text=e.text,s.fontName=e.fontName}return s}})),t.register("6LuoZ",(function(i,r){e(i.exports,"ExpandedCIM",(function(){return o}));var n=t("eyQUy"),s=t("eDdav");const a={marker:n.WGLGeometryType.MARKER,fill:n.WGLGeometryType.FILL,line:n.WGLGeometryType.LINE,text:n.WGLGeometryType.TEXT};class o{get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}constructor(e,t,i,r){const n={minScale:null==t?void 0:t.minScale,maxScale:null==t?void 0:t.maxScale},o=(l=n).minScale||l.maxScale?l.minScale+"-"+l.maxScale:"";var l;this.layers=e,this.data=t,this.hash=this._createHash()+o,this.rendererKey=i;const u={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:i};for(const t of e){const e=a[t.type];t.materialKey=(0,s.createMaterialKey)(e,u),t.maxVVSize=r,t.scaleInfo=n,t.templateHash+=o}}}})),t.register("nXMis",(function(i,r){e(i.exports,"fetchCIMSymbolReference",(function(){return h}));var n=t("gnGFZ"),s=t("bPmsI"),a=t("lHg4e"),o=t("7dRCe"),l=t("39WmQ"),u=t("hej7M"),c=t("i9hTa");async function h(e,t,i){if(!e.name)return Promise.reject(new(0,s.default)("style-symbol-reference-name-missing","Missing name in style symbol reference"));if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return async function(e,t){const i=c.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,e.name);try{const e=await(0,c.requestJSON)(i,t);return(0,c.makeCIMSymbolRef)(e.data)}catch(e){return(0,a.throwIfAborted)(e),null}}(e,i);try{return async function(e,t,i,r){const h=e.data,d={portal:i&&i.portal||l.default.getDefault(),url:(0,o.urlToObject)(e.baseUrl),origin:"portal-item"},p=h.items.find((e=>e.name===t));if(!p)throw new(0,s.default)("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});let f=(0,u.f)((0,c.symbolUrlFromStyleItem)(p,"cimRef"),d);(0,n.isDevEnvironment)()&&(f=(0,n.adjustStaticAGOUrl)(f));try{const e=await(0,c.requestJSON)(f,r);return(0,c.makeCIMSymbolRef)(e.data)}catch(e){return(0,a.throwIfAborted)(e),null}}(await(0,c.fetchStyle)(e,t,i),e.name,t,i)}catch(e){return(0,a.throwIfAborted)(e),null}}})),t.register("jdyxA",(function(i,r){e(i.exports,"getTypeOfSizeVisualVariable",(function(){return u}));var n=t("bPmsI"),s=t("6TszD"),a=t("eyQUy"),o=t("cPgEa");const l=s.default.getLogger("esri.views.2d.engine.webgl");function u(e){return(0,o.isNumber)(e.minDataValue)&&(0,o.isNumber)(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?a.WGLVVFlag.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?a.WGLVVFlag.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?a.WGLVVFlag.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?a.WGLVVFlag.SIZE_UNIT_VALUE:(l.error(new(0,n.default)("mapview-bad-type","Found invalid size VisualVariable",e)),a.WGLVVFlag.NONE)}})),t.register("4TsVR",(function(t,i){e(t.exports,"outputTypes",(function(){return r})),e(t.exports,"createMD5Hash",(function(){return c}));const r={Base64:0,Hex:1,String:2,Raw:3};function n(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function s(e,t,i,r,s,a){return n((o=n(n(t,e),n(r,a)))<<(l=s)|o>>>32-l,i);var o,l}function a(e,t,i,r,n,a,o){return s(t&i|~t&r,e,t,n,a,o)}function o(e,t,i,r,n,a,o){return s(t&r|i&~r,e,t,n,a,o)}function l(e,t,i,r,n,a,o){return s(t^i^r,e,t,n,a,o)}function u(e,t,i,r,n,a,o){return s(i^(t|~r),e,t,n,a,o)}function c(e,t=r.Hex){const i=t||r.Base64,s=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,c=271733878;for(let t=0;t<e.length;t+=16){const h=i,d=r,p=s,f=c;i=a(i,r,s,c,e[t+0],7,-680876936),c=a(c,i,r,s,e[t+1],12,-389564586),s=a(s,c,i,r,e[t+2],17,606105819),r=a(r,s,c,i,e[t+3],22,-1044525330),i=a(i,r,s,c,e[t+4],7,-176418897),c=a(c,i,r,s,e[t+5],12,1200080426),s=a(s,c,i,r,e[t+6],17,-1473231341),r=a(r,s,c,i,e[t+7],22,-45705983),i=a(i,r,s,c,e[t+8],7,1770035416),c=a(c,i,r,s,e[t+9],12,-1958414417),s=a(s,c,i,r,e[t+10],17,-42063),r=a(r,s,c,i,e[t+11],22,-1990404162),i=a(i,r,s,c,e[t+12],7,1804603682),c=a(c,i,r,s,e[t+13],12,-40341101),s=a(s,c,i,r,e[t+14],17,-1502002290),r=a(r,s,c,i,e[t+15],22,1236535329),i=o(i,r,s,c,e[t+1],5,-165796510),c=o(c,i,r,s,e[t+6],9,-1069501632),s=o(s,c,i,r,e[t+11],14,643717713),r=o(r,s,c,i,e[t+0],20,-373897302),i=o(i,r,s,c,e[t+5],5,-701558691),c=o(c,i,r,s,e[t+10],9,38016083),s=o(s,c,i,r,e[t+15],14,-660478335),r=o(r,s,c,i,e[t+4],20,-405537848),i=o(i,r,s,c,e[t+9],5,568446438),c=o(c,i,r,s,e[t+14],9,-1019803690),s=o(s,c,i,r,e[t+3],14,-187363961),r=o(r,s,c,i,e[t+8],20,1163531501),i=o(i,r,s,c,e[t+13],5,-1444681467),c=o(c,i,r,s,e[t+2],9,-51403784),s=o(s,c,i,r,e[t+7],14,1735328473),r=o(r,s,c,i,e[t+12],20,-1926607734),i=l(i,r,s,c,e[t+5],4,-378558),c=l(c,i,r,s,e[t+8],11,-2022574463),s=l(s,c,i,r,e[t+11],16,1839030562),r=l(r,s,c,i,e[t+14],23,-35309556),i=l(i,r,s,c,e[t+1],4,-1530992060),c=l(c,i,r,s,e[t+4],11,1272893353),s=l(s,c,i,r,e[t+7],16,-155497632),r=l(r,s,c,i,e[t+10],23,-1094730640),i=l(i,r,s,c,e[t+13],4,681279174),c=l(c,i,r,s,e[t+0],11,-358537222),s=l(s,c,i,r,e[t+3],16,-722521979),r=l(r,s,c,i,e[t+6],23,76029189),i=l(i,r,s,c,e[t+9],4,-640364487),c=l(c,i,r,s,e[t+12],11,-421815835),s=l(s,c,i,r,e[t+15],16,530742520),r=l(r,s,c,i,e[t+2],23,-995338651),i=u(i,r,s,c,e[t+0],6,-198630844),c=u(c,i,r,s,e[t+7],10,1126891415),s=u(s,c,i,r,e[t+14],15,-1416354905),r=u(r,s,c,i,e[t+5],21,-57434055),i=u(i,r,s,c,e[t+12],6,1700485571),c=u(c,i,r,s,e[t+3],10,-1894986606),s=u(s,c,i,r,e[t+10],15,-1051523),r=u(r,s,c,i,e[t+1],21,-2054922799),i=u(i,r,s,c,e[t+8],6,1873313359),c=u(c,i,r,s,e[t+15],10,-30611744),s=u(s,c,i,r,e[t+6],15,-1560198380),r=u(r,s,c,i,e[t+13],21,1309151649),i=u(i,r,s,c,e[t+4],6,-145523070),c=u(c,i,r,s,e[t+11],10,-1120210379),s=u(s,c,i,r,e[t+2],15,718787259),r=u(r,s,c,i,e[t+9],21,-343485551),i=n(i,h),r=n(r,d),s=n(s,p),c=n(c,f)}return[i,r,s,c]}(function(e){const t=[];for(let i=0,r=8*e.length;i<r;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}(e),8*e.length);switch(i){case r.Raw:return s;case r.Hex:return function(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}(s);case r.String:return function(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=8)t.push(String.fromCharCode(e[i>>5]>>>i%32&255));return t.join("")}(s);case r.Base64:return function(e){const t=[];for(let i=0,r=4*e.length;i<r;i+=3){const r=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let n=0;n<4;n++)8*i+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-n)&63))}return t.join("")}(s)}}})),t.register("jrPhy",(function(i,r){e(i.exports,"Container",(function(){return o}));var n=t("jsolS"),s=t("coJUt"),a=t("5aS5k");class o extends a.DisplayObject{get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new(0,s.EffectView)),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:(0,n.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}}})),t.register("5aS5k",(function(i,r){e(i.exports,"DisplayObject",(function(){return u}));var n=t("cS4u3"),s=t("5HTPH"),a=t("1CpCt"),o=t("lHg4e");const l=1/(0,s.default)("mapview-transitions-duration");class u extends n.default{get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,a.isNone)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,o.createResolver)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,o.createResolver)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const r=e*l;this.computedOpacity=i>t?Math.max(t,i-r):Math.min(t,i+r),this.computedVisible=this.computedOpacity>0;const n=t===this.computedOpacity;this.inFadeTransition=!n,n||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}}})),t.register("aDxLR",(function(i,r){e(i.exports,"RefreshableLayerView",(function(){return c}));var n=t("j6uz9"),s=t("6TszD"),a=t("lHg4e"),o=t("cc23H"),l=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var u=t("qA6zg");const c=e=>{let t=class extends e{initialize(){this.handles.add((0,o.on)((()=>this.layer),"refresh",(e=>{this.doRefresh(e.dataChanged).catch((e=>{(0,a.isAbortError)(e)||s.default.getLogger(this.declaredClass).error(e)}))})),"RefreshableLayerView")}};return(0,n._)([(0,l.property)()],t.prototype,"layer",void 0),t=(0,n._)([(0,u.subclass)("esri.layers.mixins.RefreshableLayerView")],t),t}})),t.register("6hadY",(function(i,r){e(i.exports,"getRequiredFields",(function(){return a})),e(i.exports,"getFetchPopupTemplate",(function(){return o}));var n=t("1CpCt"),s=t("15IfA");async function a(e,t=e.popupTemplate){if(!(0,n.isSome)(t))return[];const i=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:r}=t,{objectIdField:a,typeIdField:o,globalIdField:l,relationships:u}=e;if(i.includes("*"))return["*"];const c=r?await(0,s.getFeatureEditFields)(e):[],h=(0,s.fixFields)(e.fieldsIndex,[...i,...c]);return o&&h.push(o),h&&a&&e.fieldsIndex.has(a)&&-1===h.indexOf(a)&&h.push(a),h&&l&&e.fieldsIndex.has(l)&&-1===h.indexOf(l)&&h.push(l),u&&u.forEach((t=>{const{keyField:i}=t;h&&i&&e.fieldsIndex.has(i)&&-1===h.indexOf(i)&&h.push(i)})),h}function o(e,t){return e.popupTemplate?e.popupTemplate:(0,n.isSome)(t)&&t.defaultPopupTemplateEnabled&&(0,n.isSome)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}));
//# sourceMappingURL=StreamLayerView2D.b8900504.js.map
