function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("lJf0F",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return a}));var s=t("knmSn"),f=t("9CgjL"),u=t("lJhVI"),o=t("gd7J6");class a{async extract(e){const t=c(e),r=(0,o.extract)(t),n=[t.data.buffer];return{result:l(r,n),transferList:n}}async extractComponentsEdgeLocations(e){const t=c(e),r=(0,o.extractEdgeInformation)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,u.extractEdges)(r,h,p),i=[];return{result:(0,s.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}async extractEdgeLocations(e){const t=c(e),r=(0,o.extractEdgeInformation)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,u.extractEdges)(r,d,p),i=[];return{result:(0,s.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}}function c(e){return{data:f.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function l(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,s.packInterleavedBuffer)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,s.packInterleavedBuffer)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}const d=new class{allocate(e){return o.extractEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}},h=new class{allocate(e){return o.extractComponentsEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}},p={allocate:()=>null,write:()=>{},trim:()=>null}})),t.register("knmSn",(function(r,n){e(r.exports,"packInterleavedBuffer",(function(){return s}));var i=t("4kzzT");function s(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new(0,i.PackedLayout)(e.layout)}}})),t.register("4kzzT",(function(r,n){e(r.exports,"InterleavedLayout",(function(){return o})),e(r.exports,"newLayout",(function(){return a})),e(r.exports,"PackedLayout",(function(){return c}));var i=t("k4Lc2"),s=t("2bApG"),f=t("i7RkY");class u{get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new u(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,r=0,n=e.count){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}return this}constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fields.keys()){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}}class o{vec2f(e,t){return this._appendField(e,i.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,i.BufferViewVec2f64,t),this}vec3f(e,t){return this._appendField(e,i.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,i.BufferViewVec3f64,t),this}vec4f(e,t){return this._appendField(e,i.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,i.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,i.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,i.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,i.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,i.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,i.BufferViewVec4u8,t),this}f32(e,t){return this._appendField(e,i.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,i.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,i.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,i.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,i.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,i.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,i.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,i.BufferViewVec2u8,t),this}vec4u16(e,t){return this._appendField(e,i.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,i.BufferViewUint32,t),this}_appendField(e,t,r){if(this._fields.has(e))return void(0,f.assert)(!1,`${e} already added to vertex buffer layout`);const n=t.ElementCount*(0,s.elementTypeSize)(t.ElementType),i=this._stride;this._stride+=n,this._fields.set(e,{size:n,constructor:t,offset:i,optional:r})}createBuffer(e){return new u(this,e)}createView(e){return new u(this,e)}clone(){const e=new o;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,r)=>e._fields.set(r,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,(0,s.elementTypeSize)(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}constructor(e=null){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:h(e[1].constructor)}))))}}function a(){return new o}class c{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const r={...e,constructor:d(e.constructor)};this.fields.push([t,r])})),this.stride=e.stride}}const l=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32];function d(e){return`${e.ElementType}_${e.ElementCount}`}function h(e){return p.get(e)}const p=new Map;l.forEach((e=>p.set(d(e),e)))})),t.register("2bApG",(function(t,r){function n(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}e(t.exports,"elementTypeSize",(function(){return n}))})),t.register("i7RkY",(function(r,n){e(r.exports,"assert",(function(){return s})),e(r.exports,"rayBoxTest",(function(){return f}));t("lOOi9"),t("7X4gL");(0,t("64ROT").c)();class i{toString(){return`AssertException: ${this.message}`}constructor(e){this.message=e}}function s(e,t){if(!e){t=t||"Assertion";const e=new Error(t).stack;throw new i(`${t} at ${e}`)}}function f(e,t,r,n){let i,s=(r[0]-e[0])/t[0],f=(n[0]-e[0])/t[0];s>f&&(i=s,s=f,f=i);let u=(r[1]-e[1])/t[1],o=(n[1]-e[1])/t[1];if(u>o&&(i=u,u=o,o=i),s>o||u>f)return!1;u>s&&(s=u),o<f&&(f=o);let a=(r[2]-e[2])/t[2],c=(n[2]-e[2])/t[2];return a>c&&(i=a,a=c,c=i),!(s>c||a>f||(c<f&&(f=c),f<0))}})),t.register("44Q9I",(function(t,r){var n,i;e(t.exports,"VertexAttribute",(function(){return n})),(i=n||(n={})).POSITION="position",i.NORMAL="normal",i.NORMALCOMPRESSED="normalCompressed",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude",i.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",i.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})),t.register("eN5rB",(function(r,n){e(r.exports,"deduplicate",(function(){return f}));var i=t("8TN87"),s=t("b5NjT");function f(e,t,r){const n=Array.isArray(e),f=n?e.length/t:e.byteLength/(4*t),l=n?e:new Uint32Array(e,0,f*t),d=r?.minReduction??0,h=r?.originalIndices||null,p=h?h.length:0,A=r?.componentOffsets||null;let w=0;if(A)for(let e=0;e<A.length-1;e++){const t=A[e+1]-A[e];t>w&&(w=t)}else w=f;const V=Math.floor(1.1*w)+1;(null==c||c.length<2*V)&&(c=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*V)));for(let e=0;e<2*V;e++)c[e]=0;let E=0;const g=!!A&&!!h,T=g?p:f;let y=(0,s.newIndexArray)(f);const B=new Uint32Array(p),I=1.96;let O=0!==d?Math.ceil(4*I*I/(d*d)*d*(1-d)):T,R=1,L=A?A[1]:T;for(let e=0;e<T;e++){if(e===O){const t=1-E/e;if(t+I*Math.sqrt(t*(1-t)/e)<d)return null;O*=2}if(e===L){for(let e=0;e<2*V;e++)c[e]=0;if(h)for(let e=A[R-1];e<A[R];e++)B[e]=y[h[e]];L=A[++R]}const r=g?h[e]:e,n=r*t,i=a(l,n,t);let s=i%V,f=E;for(;0!==c[2*s+1];){if(c[2*s]===i){const e=c[2*s+1]-1;if(u(l,n,e*t,t)){f=y[e];break}}s++,s>=V&&(s-=V)}f===E&&(c[2*s]=i,c[2*s+1]=r+1,E++),y[r]=f}if(0!==d&&1-E/f<d)return null;if(g){for(let e=A[R-1];e<B.length;e++)B[e]=y[h[e]];y=(0,s.compactIndices)(B)}const _=n?new Array(E):new Uint32Array(E*t);E=0;for(let e=0;e<T;e++)y[e]===E&&(o(l,(g?h[e]:e)*t,_,E*t,t),E++);if(h&&!g){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=y[h[t]];y=(0,s.compactIndices)(e)}return{buffer:Array.isArray(_)?_:_.buffer,indices:y,uniqueCount:E}}function u(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function o(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[t+s]}function a(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let c=null})),t.register("b5NjT",(function(r,n){e(r.exports,"compactIndices",(function(){return s})),e(r.exports,"newIndexArray",(function(){return u})),e(r.exports,"getContinuousIndexArray",(function(){return l}));var i=t("2DP3b");function s(e){return(0,i.isArray)(e)?e.length<i.NATIVE_ARRAY_MAX_SIZE?e:f(e):e.length<i.NATIVE_ARRAY_MAX_SIZE?Array.from(e):e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?e:f(e)}function f(e){let t=!0;for(const r of e){if(r>=65536)return(0,i.isArray)(e)?new Uint32Array(e):e;r>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}function u(e){return e<=i.NATIVE_ARRAY_MAX_SIZE?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}let o=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const a=[0],c=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function l(e){if(1===e)return a;if(e<i.NATIVE_ARRAY_MAX_SIZE)return Array.from(new Uint16Array(c.buffer,0,e));if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>o.length){const t=Math.max(2*o.length,e);o=new Uint32Array(t);for(let e=0;e<o.length;e++)o[e]=e}return new Uint32Array(o.buffer,0,e)}new Uint8Array(65536)}));
//# sourceMappingURL=EdgeProcessingWorker.034340ab.js.map
