function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("dqihR",(function(n,r){t(n.exports,"unitKebabDict",(function(){return u})),t(n.exports,"getUnitConversionFactor",(function(){return f})),t(n.exports,"uvComponentToVector",(function(){return d})),t(n.exports,"convertToLocalDirections",(function(){return m})),t(n.exports,"convertVectorFieldData",(function(){return g})),t(n.exports,"convertVectorFieldUnit",(function(){return w})),t(n.exports,"snapImageToSymbolTile",(function(){return x})),t(n.exports,"createVFMeshScalar",(function(){return V})),t(n.exports,"createVFMesh",(function(){return D})),t(n.exports,"sampleVectorField",(function(){return S}));var o=e("4jlRt"),a=e("1CpCt"),i=e("1wOrp"),l=e("2wUG0");const s=new Map;s.set("meter-per-second",1),s.set("kilometer-per-hour",.277778),s.set("knots",.514444),s.set("feet-per-second",.3048),s.set("mile-per-hour",.44704);const c=180/Math.PI,u=new(0,o.JSONMap)({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function f(t,e){return s.get(t)/s.get(e)||1}function h(t){return(450-t)%360}function d(t,e="geographic"){const[n,r]=t,o=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n)*c;return a=(360+a)%360,"geographic"===e&&(a=h(a)),[o,a]}function p(t,e="geographic"){let n=t[1];"geographic"===e&&(n=h(n)),n%=360;const r=t[0];return[r*Math.cos(n/c),r*Math.sin(n/c)]}function m(t,e,n,r="geographic"){if(!(0,l.isValidPixelBlock)(t)||(0,a.isNone)(n))return t;const o="vector-magdir"===e?t.clone():(0,a.unwrap)(g(t,e)),i=o.pixels[1];for(let t=0;t<i.length;t++)i[t]="geographic"===r?(i[t]+n[t]+270)%360:(i[t]+360-n[t])%360;return"vector-magdir"===e?o:g(o,"vector-magdir")}function g(t,e,n="geographic",r=1){if(!(0,l.isValidPixelBlock)(t))return t;const{pixels:o,width:a,height:s}=t,c=a*s,u=o[0],f=o[1],h=t.pixelType.startsWith("f")?t.pixelType:"f32",m=i.default.createEmptyBand(h,c),g=i.default.createEmptyBand(h,c);let w=0;for(let t=0;t<s;t++)for(let t=0;t<a;t++)"vector-uv"===e?([m[w],g[w]]=d([u[w],f[w]],n),m[w]*=r):([m[w],g[w]]=p([u[w],f[w]],n),m[w]*=r,g[w]*=r),w++;const x=new(0,i.default)({pixelType:h,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[m,g]});return x.updateStatistics(),x}function w(t,e,n=1){if(1===n||!(0,l.isValidPixelBlock)(t))return t;const r=t.clone(),{pixels:o,width:a,height:i}=r,s=o[0],c=o[1];let u=0;for(let t=0;t<i;t++)for(let t=0;t<a;t++)"vector-uv"===e?(s[u]*=n,c[u]*=n):s[u]*=n,u++;return r.updateStatistics(),r}function x(t,e,n,r,o){if((0,a.isNone)(o)||!o.spatialReference.equals(t.spatialReference))return{extent:t,width:Math.round(e/r),height:Math.round(n/r),resolution:t.width/e};const i=o.xmin,l=o.ymax,s=(t.xmax-t.xmin)/e*r,c=(t.ymax-t.ymin)/n*r,u=(s+c)/2;return t.xmin=i+Math.floor((t.xmin-i)/s)*s,t.xmax=i+Math.ceil((t.xmax-i)/s)*s,t.ymin=l+Math.floor((t.ymin-l)/c)*c,t.ymax=l+Math.ceil((t.ymax-l)/c)*c,{extent:t,width:Math.round(t.width/s),height:Math.round(t.height/c),resolution:u}}const M=function(t=0,e=0,n=Math.PI,r=!0){r&&(n=(2*Math.PI-n)%(2*Math.PI));const o=r?-1:1,a=13*o,i=-7*o,l=-2*o,s=-16*o,c=21.75,[u,f]=k(0,e+a,n,c),[h,d]=k(t-5.5,e+i,n,c),[p,m]=k(t+5.5,e+i,n,c),[g,w]=k(t-1.5,e+l,n,c),[x,M]=k(t+1.5,e+l,n,c),[y,b]=k(t-1.5,e+s,n,c),[I,v]=k(t+1.5,e+s,n,c);return[u,f,h,d,g,w,x,M,p,m,y,b,I,v]}(0,0,0);function y(t=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));const r=n?-1:1,o=5*r,a=20*r,i=25*r,l=45,s=2*r;let[c,u]=[5,0-a],[f,h]=[c+2,u],[d,p]=[f-0,h+s],[m,g]=[-5,0-i],[w,x]=[m+0,g-s],M=Math.ceil(t/5),y=Math.floor(M/10);M-=8*y;const b=[],I=[];for(let t=0;t<M/2;t++,y--){y<=0&&M%2==1&&t===(M-1)/2&&(m=0,w=m+0,g=(g+u)/2,x=g-s);const[n,r]=k(m,g,e,l);if(y>0){const[t,o]=k(f,g,e,l),[a,i]=k(c,u,e,l);b.push(t),b.push(o),b.push(n),b.push(r),b.push(a),b.push(i)}else{const[t,o]=k(f,h,e,l),[a,i]=k(d,p,e,l),[s,c]=k(w,x,e,l);I.push(n),I.push(r),I.push(s),I.push(c),I.push(a),I.push(i),I.push(t),I.push(o)}g+=o,u+=o,h+=o,p+=o,x+=o}const[v,P]=k(5,0+a,e,l),[A,F]=k(7,0+a,e,l),[V,D]=k(5,0-i,e,l),[S,T]=k(7,0-i,e,l);return{pennants:b,barbs:I,shaft:[v,P,A,F,V,D,S,T]}}function k(t,e,n,r=1){const o=Math.sqrt(t*t+e*e)/r,a=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return[o,(2*Math.PI+a-n)%(2*Math.PI)]}const b=[0,1,3,6,10,16,21,27,33,40,47,55,63],I=[0,.5,1,1.5,2],v=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function P(t,e,n,r){const o=f(r||"knots",n);let a;for(a=1;a<e.length;a++)if(a===e.length-1){if(t<e[a]*o)break}else if(t<=e[a]*o)break;return Math.min(a-1,e.length-2)}function A(t,e,n,r,o){let a=0;switch(e){case"beaufort_kn":a=P(t,b,"knots",n);break;case"beaufort_km":a=P(t,b,"kilometer-per-hour",n);break;case"beaufort_ft":a=P(t,b,"feet-per-second",n);break;case"beaufort_m":a=P(t,b,"meter-per-second",n);break;case"classified_arrow":a=P(t,o,r,n);break;case"ocean_current_m":a=P(t,I,"meter-per-second",n);break;case"ocean_current_kn":a=P(t,v,"knots",n)}return a}const F=[];function V(t,e){let n=0,r=0;const{width:o,height:a,mask:i}=t,l=t.pixels[0],s=[],c=[],h=f(u.fromJSON(e.inputUnit),"knots"),d="wind_speed"===e.style?5:Number.MAX_VALUE;for(let t=0;t<a;t++)for(let e=0;e<o;e++){const u=l[t*o+e]*h;if((!i||i[t*o+e])&&u<d){for(let r=0;r<4;r++)s[n++]=(e+.5)/o,s[n++]=(t+.5)/a,s[n++]=r<2?-.5:.5,s[n++]=r%2==0?-.5:.5,s[n++]=0,s[n++]=u;const i=4*(n/24-1);c[r++]=i,c[r++]=i+1,c[r++]=i+2,c[r++]=i+1,c[r++]=i+2,c[r++]=i+3}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(c)}}function D(t,e){return"simple_scalar"===e.style?V(t,e):"wind_speed"===e.style?function(t,e){if(0===F.length)for(let t=0;t<30;t++)F.push(y(5*t,0));const n=f(u.fromJSON(e.inputUnit),"knots"),{width:r,height:o,mask:a}=t,i=t.pixels[0],l=t.pixels[1],s=[],c=[];let h=0,d=0;for(let t=0;t<o;t++)for(let e=0;e<r;e++){const u=t*r+e,f=i[u]*n;if((!a||a[t*r+e])&&f>=5){const n=(l[u]+360)%360/180*Math.PI??2*Math.PI*Math.random(),{pennants:a,barbs:i,shaft:p}=F[Math.min(Math.floor(f/5),29)];if(a.length+i.length===0)continue;let m=s.length/6;const g=(e+.5)/r,w=(t+.5)/o;for(let t=0;t<a.length;t+=2)s[h++]=g,s[h++]=w,s[h++]=a[t],s[h++]=a[t+1]+n,s[h++]=0,s[h++]=f;for(let t=0;t<i.length;t+=2)s[h++]=g,s[h++]=w,s[h++]=i[t],s[h++]=i[t+1]+n,s[h++]=0,s[h++]=f;for(let t=0;t<p.length;t+=2)s[h++]=g,s[h++]=w,s[h++]=p[t],s[h++]=p[t+1]+n,s[h++]=0,s[h++]=f;for(let t=0;t<a.length/6;t++)c[d++]=m,c[d++]=m+1,c[d++]=m+2,m+=3;for(let t=0;t<i.length/8;t++)c[d++]=m,c[d++]=m+1,c[d++]=m+2,c[d++]=m+1,c[d++]=m+2,c[d++]=m+3,m+=4;c[d++]=m+0,c[d++]=m+1,c[d++]=m+2,c[d++]=m+1,c[d++]=m+3,c[d++]=m+2,m+=4}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(c)}}(t,e):function(t,e){const{style:n,inputUnit:r,outputUnit:o,breakValues:a}=e,i=u.fromJSON(r),l=u.fromJSON(o);let s=0,c=0;const{width:f,height:h,mask:d}=t,p=t.pixels[0],m=t.pixels[1],g=d?d.filter((t=>t>0)).length:f*h,w=new Float32Array(42*g),x=new Uint32Array(15*g);for(let t=0;t<h;t++)for(let e=0;e<f;e++){const r=t*f+e;if(!d||d[t*f+e]){const o=(m[r]+360)%360/180*Math.PI??2*Math.PI*Math.random(),u=A(p[r],n,i,l,a);for(let n=0;n<M.length;n+=2)w[s++]=(e+.5)/f,w[s++]=(t+.5)/h,w[s++]=M[n],w[s++]=M[n+1]+o,w[s++]=u,w[s++]=p[r];const d=7*(s/42-1);x[c++]=d,x[c++]=d+1,x[c++]=d+2,x[c++]=d+0,x[c++]=d+4,x[c++]=d+3,x[c++]=d+0,x[c++]=d+2,x[c++]=d+3,x[c++]=d+2,x[c++]=d+5,x[c++]=d+3,x[c++]=d+5,x[c++]=d+6,x[c++]=d+3}}return{vertexData:w,indexData:x}}(t,e)}function S(t,e,n,r=[0,0],o=.5){const{width:a,height:l,mask:s}=t,[c,u]=t.pixels,[f,h]=r,m=Math.round((a-f)/n),g=Math.round((l-h)/n),w=m*g,x=new Float32Array(w),M=new Float32Array(w),y=new Uint8Array(w),k="vector-uv"===e;for(let t=0;t<g;t++)for(let e=0;e<m;e++){let r=0;const i=t*m+e,g=Math.max(0,t*n+h),w=Math.max(0,e*n+f),b=Math.min(l,g+n),I=Math.min(a,w+n);for(let t=g;t<b;t++)for(let e=w;e<I;e++){const n=t*a+e;if(!s||s[n]){r++;const t=k?[c[n],u[n]]:[c[n],(360+u[n])%360],[e,o]=k?t:p(t);x[i]+=e,M[i]+=o}}if(r>=(b-g)*(I-w)*(1-o)){y[i]=1;const[t,e]=d([x[i]/r,M[i]/r]);x[i]=t,M[i]=e}else y[i]=0,x[i]=0,M[i]=0}const b=new(0,i.default)({width:m,height:g,pixels:[x,M],mask:y});return b.updateStatistics(),b}})),e.register("fDLIP",(function(n,r){t(n.exports,"createFlowMesh",(function(){return d})),t(n.exports,"loadImagery",(function(){return g})),e("ixrNB");var o=e("5HTPH"),a=e("6TszD"),i=e("8TN87"),l=e("1CpCt"),s=e("lHg4e"),c=e("lQo64"),u=e("fau59"),f=e("2WnyR");const h=a.default.getLogger("esri.views.2d.engine.flow.dataUtils");async function d(t,e,n,r){const a=performance.now(),i=function(t,e){const n=function(t,e,n,r){if(0===r)return t;const o=Math.round(3*r),a=new Array(2*o+1);let i=0;for(let t=-o;t<=o;t++){const e=Math.exp(-t*t/(r*r));a[t+o]=e,i+=e}for(let t=-o;t<=o;t++)a[t+o]/=i;const l=new Float32Array(t.length);for(let r=0;r<n;r++)for(let n=0;n<e;n++){let i=0,s=0;for(let l=-o;l<=o;l++){if(n+l<0||n+l>=e)continue;const c=a[l+o];i+=c*t[2*(r*e+(n+l))+0],s+=c*t[2*(r*e+(n+l))+1]}l[2*(r*e+n)+0]=i,l[2*(r*e+n)+1]=s}const s=new Float32Array(t.length);for(let t=0;t<e;t++)for(let r=0;r<n;r++){let i=0,c=0;for(let s=-o;s<=o;s++){if(r+s<0||r+s>=n)continue;const u=a[s+o];i+=u*l[2*((r+s)*e+t)+0],c+=u*l[2*((r+s)*e+t)+1]}s[2*(r*e+t)+0]=i,s[2*(r*e+t)+1]=c}return s}(e.data,e.width,e.height,t.smoothing);return t.interpolate?(t,r)=>{const o=Math.floor(t),a=Math.floor(r);if(o<0||o>=e.width)return[0,0];if(a<0||a>=e.height)return[0,0];const i=t-o,l=r-a,s=o,c=a,u=o<e.width-1?o+1:o,f=a<e.height-1?a+1:a,h=n[2*(c*e.width+s)],d=n[2*(c*e.width+u)],p=n[2*(f*e.width+s)],m=n[2*(f*e.width+u)],g=n[2*(c*e.width+s)+1],w=n[2*(c*e.width+u)+1];return[(h*(1-l)+p*l)*(1-i)+(d*(1-l)+m*l)*i,(g*(1-l)+n[2*(f*e.width+s)+1]*l)*(1-i)+(w*(1-l)+n[2*(f*e.width+u)+1]*l)*i]}:(t,r)=>{const o=Math.round(t),a=Math.round(r);return o<0||o>=e.width||a<0||a>=e.height?[0,0]:[n[2*(a*e.width+o)+0],n[2*(a*e.width+o)+1]]}}(e,n),l=performance.now(),u=function(t,e,n,r){const o=[],a=new(0,c.default),i=1/Math.max(t.lineCollisionWidth,1),l=Math.round(n*i),s=Math.round(r*i),u=new Int32Array(l*s);for(let t=0;t<u.length;t++)u[t]=-1;const f=[];for(let e=0;e<r;e+=t.lineSpacing)for(let r=0;r<n;r+=t.lineSpacing)f.push({x:r,y:e,sort:a.getFloat()});f.sort(((t,e)=>t.sort-e.sort));for(const{x:n,y:r}of f)if(a.getFloat()<t.density){const a=p(t,e,n,r,o.length,u,l,s,i);if(a.length<2)continue;o.push(a)}return o}(e,i,n.width,n.height),f=performance.now(),d=function(t,e){const n=new(0,c.default),r=t.reduce(((t,e)=>t+e.length),0),o=new Float32Array(4*r),a=new Array(t.length);let i=0,l=0;for(const r of t){const t=i;for(const t of r)o[4*i+0]=t.x,o[4*i+1]=t.y,o[4*i+2]=t.t,o[4*i+3]=t.speed,i++;a[l++]={startVertex:t,numberOfVertices:r.length,totalTime:r[r.length-1].t,timeSeed:e?n.getFloat():0}}return{lineVertices:o,lineDescriptors:a}}(u,!0),m=performance.now(),g="Streamlines"===t?function(t,e){const n=9,{lineVertices:r,lineDescriptors:o}=t;let a=0,i=0;for(const t of o)a+=2*t.numberOfVertices,i+=6*(t.numberOfVertices-1);const l=new Float32Array(a*n),s=new Uint32Array(i);let c=0,u=0;function f(){s[u++]=c-2,s[u++]=c,s[u++]=c-1,s[u++]=c,s[u++]=c+1,s[u++]=c-1}function h(t,e,r,o,a,i,s,u){const f=c*n;let h=0;l[f+h++]=t,l[f+h++]=e,l[f+h++]=1,l[f+h++]=r,l[f+h++]=i,l[f+h++]=s,l[f+h++]=o/2,l[f+h++]=a/2,l[f+h++]=u,c++,l[f+h++]=t,l[f+h++]=e,l[f+h++]=-1,l[f+h++]=r,l[f+h++]=i,l[f+h++]=s,l[f+h++]=-o/2,l[f+h++]=-a/2,l[f+h++]=u,c++}for(const t of o){const{totalTime:n,timeSeed:o}=t;let a=null,i=null,l=null,s=null,c=null,u=null;for(let d=0;d<t.numberOfVertices;d++){const p=r[4*(t.startVertex+d)+0],m=r[4*(t.startVertex+d)+1],g=r[4*(t.startVertex+d)+2],w=r[4*(t.startVertex+d)+3];let x=null,M=null,y=null,k=null;if(d>0){x=p-a,M=m-i;const t=Math.sqrt(x*x+M*M);if(x/=t,M/=t,d>1){let t=x+c,n=M+u;const r=Math.sqrt(t*t+n*n);t/=r,n/=r;const o=Math.min(1/(t*x+n*M),e);t*=o,n*=o,y=-n,k=t}else y=-M,k=x;null!==y&&null!==k&&(h(a,i,l,y,k,n,o,w),f())}a=p,i=m,l=g,c=x,u=M,s=w}h(a,i,l,-u,c,n,o,s)}return{vertexData:l,indexData:s}}(d,10):function(t){const e=16,n=1,r=2,{lineVertices:o,lineDescriptors:a}=t;let i=0,l=0;for(const t of a){const e=t.numberOfVertices-1;i+=4*e*2,l+=6*e*2}const s=new Float32Array(i*e),c=new Uint32Array(l);let u,f,h,d,p,m,g,w,x,M,y,k,b,I,v=0,P=0;function A(){c[P++]=v-8,c[P++]=v-7,c[P++]=v-6,c[P++]=v-7,c[P++]=v-5,c[P++]=v-6,c[P++]=v-4,c[P++]=v-3,c[P++]=v-2,c[P++]=v-3,c[P++]=v-1,c[P++]=v-2}function F(t,o,a,i,l,c,u,f,h,d,p,m,g,w){const x=v*e;let M=0;for(const e of[n,r])for(const n of[1,2,3,4])s[x+M++]=t,s[x+M++]=o,s[x+M++]=a,s[x+M++]=i,s[x+M++]=u,s[x+M++]=f,s[x+M++]=h,s[x+M++]=d,s[x+M++]=e,s[x+M++]=n,s[x+M++]=g,s[x+M++]=w,s[x+M++]=l/2,s[x+M++]=c/2,s[x+M++]=p/2,s[x+M++]=m/2,v++}function V(t,e){let n=x+y,r=M+k;const o=Math.sqrt(n*n+r*r);n/=o,r/=o;const a=x*n+M*r;n/=a,r/=a;let i=y+b,l=k+I;const s=Math.sqrt(i*i+l*l);i/=s,l/=s;const c=y*i+k*l;i/=c,l/=c,F(u,f,h,d,-r,n,p,m,g,w,-l,i,t,e),A()}function D(t,e,n,r,o,a){if(x=y,M=k,y=b,k=I,null==x&&null==M&&(x=y,M=k),null!=p&&null!=m){b=t-p,I=e-m;const n=Math.sqrt(b*b+I*I);b/=n,I/=n}null!=x&&null!=M&&V(o,a),u=p,f=m,h=g,d=w,p=t,m=e,g=n,w=r}function S(t,e){x=y,M=k,y=b,k=I,null==x&&null==M&&(x=y,M=k),null!=x&&null!=M&&V(t,e)}for(const t of a){u=null,f=null,h=null,d=null,p=null,m=null,g=null,w=null,x=null,M=null,y=null,k=null,b=null,I=null;const{totalTime:e,timeSeed:n}=t;for(let r=0;r<t.numberOfVertices;r++)D(o[4*(t.startVertex+r)+0],o[4*(t.startVertex+r)+1],o[4*(t.startVertex+r)+2],o[4*(t.startVertex+r)+3],e,n);S(e,n)}return{vertexData:s,indexData:c}}(d),w=performance.now();return(0,o.default)("esri-2d-profiler")&&(h.info("I.1","_createFlowFieldFromData (ms)",Math.round(l-a)),h.info("I.2","_getStreamlines (ms)",Math.round(f-l)),h.info("I.3","createAnimatedLinesData (ms)",Math.round(m-f)),h.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(w-m)),h.info("I.5","createFlowMesh (ms)",Math.round(w-a)),h.info("I.6","Mesh size (bytes)",g.vertexData.buffer.byteLength+g.indexData.buffer.byteLength)),await Promise.resolve(),(0,s.throwIfAborted)(r),g}function p(t,e,n,r,o,a,i,l,s){const c=[];let u=n,f=r,h=0,[d,p]=e(u,f);d*=t.velocityScale,p*=t.velocityScale;const m=Math.sqrt(d*d+p*p);let g,w;c.push({x:u,y:f,t:h,speed:m});for(let n=0;n<t.verticesPerLine;n++){let[n,r]=e(u,f);n*=t.velocityScale,r*=t.velocityScale;const d=Math.sqrt(n*n+r*r);if(d<t.minSpeedThreshold)return c;const p=n/d,m=r/d;if(u+=p*t.segmentLength,f+=m*t.segmentLength,h+=t.segmentLength/d,Math.acos(p*g+m*w)>t.maxTurnAngle)return c;if(t.collisions){const t=Math.round(u*s),e=Math.round(f*s);if(t<0||t>i-1||e<0||e>l-1)return c;const n=a[e*i+t];if(-1!==n&&n!==o)return c;a[e*i+t]=o}c.push({x:u,y:f,t:h,speed:d}),g=p,w=m}return c}function m(t,e){const n=e.pixels,{width:r,height:o}=e,a=new Float32Array(r*o*2),l=e.mask||new Uint8Array(r*o*2);if(e.mask||l.fill(255),"vector-uv"===t)for(let t=0;t<r*o;t++)a[2*t+0]=n[0][t],a[2*t+1]=-n[1][t];else if("vector-magdir"===t)for(let t=0;t<r*o;t++){const e=n[0][t],r=(0,i.deg2rad)(n[1][t]),o=Math.cos(r-Math.PI/2),l=Math.sin(r-Math.PI/2);a[2*t+0]=o*e,a[2*t+1]=l*e}return{data:a,mask:l,width:r,height:o}}async function g(t,e,n,r,a,i){const l=performance.now(),s=(0,u.getInfo)(e.spatialReference);if(!s){const s=await w(t,e,n,r,a,i);return(0,o.default)("esri-2d-profiler")&&h.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-l)),(0,o.default)("esri-2d-profiler")&&h.info("I.9","Number of parts",1),s}const[c,d]=s.valid,p=d-c,m=Math.ceil(e.width/p),g=e.width/m,x=Math.round(n/m);let M=e.xmin;const y=[],k=performance.now();for(let n=0;n<m;n++){const n=new(0,f.default)({xmin:M,xmax:M+g,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});y.push(w(t,n,x,r,a,i)),M+=g}const b=await Promise.all(y);(0,o.default)("esri-2d-profiler")&&h.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-k)),(0,o.default)("esri-2d-profiler")&&h.info("I.9","Number of parts",b.length);const I={data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r};let v=0;for(const t of b){for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)v+r>=n||(I.data[2*(e*n+v+r)+0]=t.data[2*(e*t.width+r)+0],I.data[2*(e*n+v+r)+1]=t.data[2*(e*t.width+r)+1],I.mask[e*n+v+r]=t.mask[e*t.width+r]);v+=t.width}return(0,o.default)("esri-2d-profiler")&&h.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-l)),I}async function w(t,e,n,r,o,a){const i={requestProjectedLocalDirections:!0,signal:a};if((0,l.isSome)(o)&&(i.timeExtent=o),"imagery"===t.type){await t.load({signal:a});const o=t.rasterInfo.dataType,s=await t.fetchImage(e,n,r,i);return!s||(0,l.isNone)(s.pixelData)||(0,l.isNone)(s.pixelData.pixelBlock)?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:m(o,s.pixelData.pixelBlock)}await t.load({signal:a});const s=t.rasterInfo.dataType,c=await t.fetchPixels(e,n,r,i);return!c||(0,l.isNone)(c.pixelBlock)?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:m(s,c.pixelBlock)}}));
//# sourceMappingURL=RasterWorker.9fd5b2c8.js.map
