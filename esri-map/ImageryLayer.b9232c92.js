!function(){function e(e,r,t,a){Object.defineProperty(e,r,{get:t,set:a,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("2hwKJ",(function(r,a){e(r.exports,"unitKebabDict",(function(){return c})),e(r.exports,"getUnitConversionFactor",(function(){return f})),e(r.exports,"uvComponentToVector",(function(){return v})),e(r.exports,"convertToLocalDirections",(function(){return y})),e(r.exports,"convertVectorFieldData",(function(){return g})),e(r.exports,"convertVectorFieldUnit",(function(){return m})),e(r.exports,"snapImageToSymbolTile",(function(){return x})),e(r.exports,"createVFMeshScalar",(function(){return F})),e(r.exports,"createVFMesh",(function(){return V})),e(r.exports,"sampleVectorField",(function(){return D}));var n=t("8TSCy"),i=t("79ASa"),o=t("7qybv"),l=t("idX6c"),s=t("alctY"),u=new Map;u.set("meter-per-second",1),u.set("kilometer-per-hour",.277778),u.set("knots",.514444),u.set("feet-per-second",.3048),u.set("mile-per-hour",.44704);var h=180/Math.PI,c=new(0,i.JSONMap)({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function f(e,r){return u.get(e)/u.get(r)||1}function d(e){return(450-e)%360}function v(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",t=n.slicedToArray(e,2),a=t[0],i=t[1],o=Math.sqrt(a*a+i*i),l=Math.atan2(i,a)*h;return l=(360+l)%360,"geographic"===r&&(l=d(l)),[o,l]}function p(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",t=e[1];"geographic"===r&&(t=d(t)),t%=360;var a=e[0];return[a*Math.cos(t/h),a*Math.sin(t/h)]}function y(e,r,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"geographic";if(!(0,s.isValidPixelBlock)(e)||(0,o.isNone)(t))return e;for(var n="vector-magdir"===r?e.clone():(0,o.unwrap)(g(e,r)),i=n.pixels[1],l=0;l<i.length;l++)i[l]="geographic"===a?(i[l]+t[l]+270)%360:(i[l]+360-t[l])%360;return"vector-magdir"===r?n:g(n,"vector-magdir")}function g(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(0,s.isValidPixelBlock)(e))return e;for(var i,o,u=e.pixels,h=e.width,c=e.height,f=h*c,d=u[0],y=u[1],g=e.pixelType.startsWith("f")?e.pixelType:"f32",m=l.default.createEmptyBand(g,f),x=l.default.createEmptyBand(g,f),w=0,M=0;M<c;M++)for(var A=0;A<h;A++)"vector-uv"===r?(i=n.slicedToArray(v([d[w],y[w]],t),2),m[w]=i[0],x[w]=i[1],m[w]*=a):(o=n.slicedToArray(p([d[w],y[w]],t),2),m[w]=o[0],x[w]=o[1],m[w]*=a,x[w]*=a),w++;var b=new(0,l.default)({pixelType:g,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,x]});return b.updateStatistics(),b}function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===t||!(0,s.isValidPixelBlock)(e))return e;for(var a=e.clone(),n=a.pixels,i=a.width,o=a.height,l=n[0],u=n[1],h=0,c=0;c<o;c++)for(var f=0;f<i;f++)"vector-uv"===r?(l[h]*=t,u[h]*=t):l[h]*=t,h++;return a.updateStatistics(),a}function x(e,r,t,a,n){if(!(0,o.isSome)(n)||!n.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(r/a),height:Math.round(t/a),resolution:e.width/r};var i=n.xmin,l=n.ymax,s=(e.xmax-e.xmin)/r*a,u=(e.ymax-e.ymin)/t*a,h=(s+u)/2;return e.xmin=i+Math.floor((e.xmin-i)/s)*s,e.xmax=i+Math.ceil((e.xmax-i)/s)*s,e.ymin=l+Math.floor((e.ymin-l)/u)*u,e.ymax=l+Math.ceil((e.ymax-l)/u)*u,{extent:e,width:Math.round(e.width/s),height:Math.round(e.height/u),resolution:h}}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];a&&(t=(2*Math.PI-t)%(2*Math.PI));var i=a?-1:1,o=13*i,l=-7*i,s=-2*i,u=-16*i,h=21.75,c=n.slicedToArray(A(0,r+o,t,h),2),f=c[0],d=c[1],v=n.slicedToArray(A(e-5.5,r+l,t,h),2),p=v[0],y=v[1],g=n.slicedToArray(A(e+5.5,r+l,t,h),2),m=g[0],x=g[1],w=n.slicedToArray(A(e-1.5,r+s,t,h),2),M=w[0],b=w[1],T=n.slicedToArray(A(e+1.5,r+s,t,h),2),k=T[0],S=T[1],P=n.slicedToArray(A(e-1.5,r+u,t,h),2),I=P[0],F=P[1],V=n.slicedToArray(A(e+1.5,r+u,t,h),2),D=V[0],_=V[1];return[f,d,p,y,M,b,k,S,m,x,I,F,D,_]}(0,0,0);function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(r=(2*Math.PI-r)%(2*Math.PI));var a=10,i=t?-1:1,o=5*i,l=20*i,s=25*i,u=45,h=0,c=0,f=2,d=0,v=f*i,p=[h+a/2,c-l],y=p[0],g=p[1],m=[y+f,g],x=m[0],w=m[1],M=[x-d,w+v],b=M[0],T=M[1],k=[h-a/2,c-s],S=k[0],P=k[1],I=[S+d,P-v],F=I[0],V=I[1],D=Math.ceil(e/5),_=Math.floor(D/10);D-=8*_;for(var L=[],O=[],U=0;U<D/2;U++,_--){_<=0&&D%2==1&&U===(D-1)/2&&(F=(S=h)+d,V=(P=(P+g)/2)-v);var N=n.slicedToArray(A(S,P,r,u),2),q=N[0],B=N[1];if(_>0){var R=n.slicedToArray(A(x,P,r,u),2),C=R[0],E=R[1],J=n.slicedToArray(A(y,g,r,u),2),K=J[0],j=J[1];L.push(C),L.push(E),L.push(q),L.push(B),L.push(K),L.push(j)}else{var G=n.slicedToArray(A(x,w,r,u),2),H=G[0],X=G[1],Y=n.slicedToArray(A(b,T,r,u),2),W=Y[0],Z=Y[1],z=n.slicedToArray(A(F,V,r,u),2),Q=z[0],$=z[1];O.push(q),O.push(B),O.push(Q),O.push($),O.push(W),O.push(Z),O.push(H),O.push(X)}P+=o,g+=o,w+=o,T+=o,V+=o}var ee=n.slicedToArray(A(h+a/2,c+l,r,u),2),re=ee[0],te=ee[1],ae=a/2+f,ne=n.slicedToArray(A(h+ae,c+l,r,u),2),ie=ne[0],oe=ne[1],le=n.slicedToArray(A(h+a/2,c-s,r,u),2),se=le[0],ue=le[1],he=n.slicedToArray(A(h+ae,c-s,r,u),2),ce=he[0],fe=he[1];return{pennants:L,barbs:O,shaft:[re,te,ie,oe,se,ue,ce,fe]}}function A(e,r,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=Math.sqrt(e*e+r*r)/a,i=(2*Math.PI+Math.atan2(r,e))%(2*Math.PI);return[n,(2*Math.PI+i-t)%(2*Math.PI)]}var b=[0,1,3,6,10,16,21,27,33,40,47,55,63],T=[0,.5,1,1.5,2],k=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function S(e,r,t,a){var n,i=f(a||"knots",t);for(n=1;n<r.length;n++)if(n===r.length-1){if(e<r[n]*i)break}else if(e<=r[n]*i)break;return Math.min(n-1,r.length-2)}function P(e,r,t,a,n){var i=0;switch(r){case"beaufort_kn":i=S(e,b,"knots",t);break;case"beaufort_km":i=S(e,b,"kilometer-per-hour",t);break;case"beaufort_ft":i=S(e,b,"feet-per-second",t);break;case"beaufort_m":i=S(e,b,"meter-per-second",t);break;case"classified_arrow":i=S(e,n,a,t);break;case"ocean_current_m":i=S(e,T,"meter-per-second",t);break;case"ocean_current_kn":i=S(e,k,"knots",t)}return i}var I=[];function F(e,r){for(var t=0,a=0,n=e.width,i=e.height,o=e.mask,l=e.pixels[0],s=[],u=[],h=f(c.fromJSON(r.inputUnit),"knots"),d="wind_speed"===r.style?5:Number.MAX_VALUE,v=0;v<i;v++)for(var p=0;p<n;p++){var y=l[v*n+p]*h;if((!o||o[v*n+p])&&y<d){for(var g=0;g<4;g++)s[t++]=(p+.5)/n,s[t++]=(v+.5)/i,s[t++]=g<2?-.5:.5,s[t++]=g%2==0?-.5:.5,s[t++]=0,s[t++]=y;var m=4*(t/24-1);u[a++]=m,u[a++]=m+1,u[a++]=m+2,u[a++]=m+1,u[a++]=m+2,u[a++]=m+3}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(u)}}function V(e,r){return"simple_scalar"===r.style?F(e,r):"wind_speed"===r.style?function(e,r){if(0===I.length)for(var t=0;t<30;t++)I.push(M(5*t,0));for(var a=f(c.fromJSON(r.inputUnit),"knots"),n=e.width,i=e.height,o=e.mask,l=e.pixels[0],s=e.pixels[1],u=[],h=[],d=0,v=0,p=0;p<i;p++)for(var y=0;y<n;y++){var g=p*n+y,m=l[g]*a;if((!o||o[p*n+y])&&m>=5){var x=(s[g]+360)%360/180*Math.PI,w=I[Math.min(Math.floor(m/5),29)],A=w.pennants,b=w.barbs,T=w.shaft;if(A.length+b.length===0)continue;for(var k=u.length/6,S=(y+.5)/n,P=(p+.5)/i,F=0;F<A.length;F+=2)u[d++]=S,u[d++]=P,u[d++]=A[F],u[d++]=A[F+1]+x,u[d++]=0,u[d++]=m;for(var V=0;V<b.length;V+=2)u[d++]=S,u[d++]=P,u[d++]=b[V],u[d++]=b[V+1]+x,u[d++]=0,u[d++]=m;for(var D=0;D<T.length;D+=2)u[d++]=S,u[d++]=P,u[d++]=T[D],u[d++]=T[D+1]+x,u[d++]=0,u[d++]=m;for(var _=0;_<A.length/6;_++)h[v++]=k,h[v++]=k+1,h[v++]=k+2,k+=3;for(var L=0;L<b.length/8;L++)h[v++]=k,h[v++]=k+1,h[v++]=k+2,h[v++]=k+1,h[v++]=k+2,h[v++]=k+3,k+=4;h[v++]=k+0,h[v++]=k+1,h[v++]=k+2,h[v++]=k+1,h[v++]=k+3,h[v++]=k+2,k+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(h)}}(e,r):function(e,r){for(var t=r.style,a=r.inputUnit,n=r.outputUnit,i=r.breakValues,o=c.fromJSON(a),l=c.fromJSON(n),s=0,u=0,h=e.width,f=e.height,d=e.mask,v=e.pixels[0],p=e.pixels[1],y=d?d.filter((function(e){return e>0})).length:h*f,g=new Float32Array(42*y),m=new Uint32Array(15*y),x=0;x<f;x++)for(var M=0;M<h;M++){var A=x*h+M;if(!d||d[x*h+M]){for(var b=(p[A]+360)%360/180*Math.PI,T=P(v[A],t,o,l,i),k=0;k<w.length;k+=2)g[s++]=(M+.5)/h,g[s++]=(x+.5)/f,g[s++]=w[k],g[s++]=w[k+1]+b,g[s++]=T,g[s++]=v[A];var S=7*(s/42-1);m[u++]=S,m[u++]=S+1,m[u++]=S+2,m[u++]=S+0,m[u++]=S+4,m[u++]=S+3,m[u++]=S+0,m[u++]=S+2,m[u++]=S+3,m[u++]=S+2,m[u++]=S+5,m[u++]=S+3,m[u++]=S+5,m[u++]=S+6,m[u++]=S+3}}return{vertexData:g,indexData:m}}(e,r)}function D(e,r,t){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=e.width,s=e.height,u=e.mask,h=n.slicedToArray(e.pixels,2),c=h[0],f=h[1],d=n.slicedToArray(a,2),y=d[0],g=d[1],m=Math.round((o-y)/t),x=Math.round((s-g)/t),w=m*x,M=new Float32Array(w),A=new Float32Array(w),b=new Uint8Array(w),T="vector-uv"===r,k=0;k<x;k++)for(var S=0;S<m;S++){for(var P=0,I=k*m+S,F=Math.max(0,k*t+g),V=Math.max(0,S*t+y),D=Math.min(s,F+t),_=Math.min(o,V+t),L=F;L<D;L++)for(var O=V;O<_;O++){var U=L*o+O;if(!u||u[U]){P++;var N=T?[c[U],f[U]]:[c[U],(360+f[U])%360],q=n.slicedToArray(T?N:p(N),2),B=q[0],R=q[1];M[I]+=B,A[I]+=R}}if(P>=(D-F)*(_-V)*(1-i)){b[I]=1;var C=n.slicedToArray(v([M[I]/P,A[I]/P]),2),E=C[0],J=C[1];M[I]=E,A[I]=J}else b[I]=0,M[I]=0,A[I]=0}var K=new(0,l.default)({width:m,height:x,pixels:[M,A],mask:b});return K.updateStatistics(),K}})),t.register("k8DEI",(function(a,n){e(a.exports,"createStreamlinesMesh",(function(){return p})),e(a.exports,"loadImagery",(function(){return b}));var i=t("8TSCy"),o=t("2TvXO");t("2ILM8");var l=t("jHOLN"),s=t("iVfa0"),u=t("7qybv"),h=t("10vEZ"),c=t("hvORu"),f=t("eY5Yp"),d=t("gINRd"),v=l.default.getLogger("esri.views.2d.engine.flow.dataUtils");function p(e,r,t){return y.apply(this,arguments)}function y(){return(y=i.asyncToGenerator(r(o).mark((function e(t,a,n){var i,l,s,u,c,f,d,p,y,m;return r(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=performance.now(),l=g(t,a),s=performance.now(),u=x(t,l,a.width,a.height),c=performance.now(),f=w(u,!0),d=performance.now(),p=M(f),y=performance.now(),t.profile&&(m={"_createFlowFieldFromData()":Math.round(s-i),"_getStreamlines()":Math.round(c-s),"createAnimatedLinesData()":Math.round(d-c),"createLinesMesh()":Math.round(y-d),"Total elapsed time":Math.round(y-i)},v.info("createStreamlinesMesh profile",m)),e.next=4,Promise.resolve();case 4:return(0,h.throwIfAborted)(n),e.abrupt("return",(e.sent,p));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r){var t=function(e,r,t,a){if(0===a)return e;for(var n=Math.round(3*a),i=new Array(2*n+1),o=0,l=-n;l<=n;l++){var s=Math.exp(-l*l/(a*a));i[l+n]=s,o+=s}for(var u=-n;u<=n;u++)i[u+n]/=o;for(var h=new Float32Array(e.length),c=0;c<t;c++)for(var f=0;f<r;f++){for(var d=0,v=0,p=-n;p<=n;p++)if(!(f+p<0||f+p>=r)){var y=i[p+n];d+=y*e[2*(c*r+(f+p))+0],v+=y*e[2*(c*r+(f+p))+1]}h[2*(c*r+f)+0]=d,h[2*(c*r+f)+1]=v}for(var g=new Float32Array(e.length),m=0;m<r;m++)for(var x=0;x<t;x++){for(var w=0,M=0,A=-n;A<=n;A++)if(!(x+A<0||x+A>=t)){var b=i[A+n];w+=b*h[2*((x+A)*r+m)+0],M+=b*h[2*((x+A)*r+m)+1]}g[2*(x*r+m)+0]=w,g[2*(x*r+m)+1]=M}return g}(r.data,r.width,r.height,e.smoothing);return e.interpolate?function(e,a){var n=Math.floor(e),i=Math.floor(a);if(n<0||n>=r.width)return[0,0];if(i<0||i>=r.height)return[0,0];var o=e-n,l=a-i,s=n,u=i,h=n<r.width-1?n+1:n,c=i<r.height-1?i+1:i,f=t[2*(u*r.width+s)],d=t[2*(u*r.width+h)],v=t[2*(c*r.width+s)],p=t[2*(c*r.width+h)],y=t[2*(u*r.width+s)+1],g=t[2*(u*r.width+h)+1];return[(f*(1-l)+v*l)*(1-o)+(d*(1-l)+p*l)*o,(y*(1-l)+t[2*(c*r.width+s)+1]*l)*(1-o)+(g*(1-l)+t[2*(c*r.width+h)+1]*l)*o]}:function(e,a){var n=Math.round(e),i=Math.round(a);return n<0||n>=r.width||i<0||i>=r.height?[0,0]:[t[2*(i*r.width+n)+0],t[2*(i*r.width+n)+1]]}}function m(e,r,t,a,n,o,l,s,u){var h=[],c=t,f=a,d=0,v=i.slicedToArray(r(c,f),2),p=v[0],y=v[1];p*=e.velocityScale,y*=e.velocityScale;var g,m,x=Math.sqrt(p*p+y*y);h.push({x:c,y:f,t:d,speed:x});for(var w=0;w<e.verticesPerLine;w++){var M=i.slicedToArray(r(c,f),2),A=M[0],b=M[1];A*=e.velocityScale,b*=e.velocityScale;var T=Math.sqrt(A*A+b*b);if(T<e.minSpeedThreshold)return h;var k=A/T,S=b/T;if(c+=k*e.segmentLength,f+=S*e.segmentLength,d+=e.segmentLength/T,Math.acos(k*g+S*m)>e.maxTurnAngle)return h;if(e.mergeLines){var P=Math.round(c*u),I=Math.round(f*u);if(P<0||P>l-1||I<0||I>s-1)return h;var F=o[I*l+P];if(-1!==F&&F!==n)return h;o[I*l+P]=n}h.push({x:c,y:f,t:d,speed:T}),g=k,m=S}return h}function x(e,r,t,a){for(var n=[],i=new(0,c.default),o=1/Math.max(e.lineCollisionWidth,1),l=Math.round(t*o),s=Math.round(a*o),u=new Int32Array(l*s),h=0;h<u.length;h++)u[h]=-1;for(var f=[],d=0;d<a;d+=e.lineSpacing)for(var v=0;v<t;v+=e.lineSpacing)f.push({x:v,y:d,sort:i.getFloat()});f.sort((function(e,r){return e.sort-r.sort}));var p=!0,y=!1,g=void 0;try{for(var x,w=f[Symbol.iterator]();!(p=(x=w.next()).done);p=!0){var M=x.value,A=M.x,b=M.y;if(i.getFloat()<e.density){var T=m(e,r,A,b,n.length,u,l,s,o);if(T.length<2)continue;n.push(T)}}}catch(e){y=!0,g=e}finally{try{p||null==w.return||w.return()}finally{if(y)throw g}}return n}function w(e,r){var t=new(0,c.default),a=e.reduce((function(e,r){return e+r.length}),0),n=new Float32Array(4*a),i=new Array(e.length),o=0,l=0,s=!0,u=!1,h=void 0;try{for(var f,d=e[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var v=f.value,p=o,y=!0,g=!1,m=void 0;try{for(var x,w=v[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var M=x.value;n[4*o+0]=M.x,n[4*o+1]=M.y,n[4*o+2]=M.t,n[4*o+3]=M.speed,o++}}catch(e){g=!0,m=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw m}}i[l++]={startVertex:p,numberOfVertices:v.length,totalTime:v[v.length-1].t,timeSeed:r?t.getFloat():0}}}catch(e){u=!0,h=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw h}}return{lineVertices:n,lineDescriptors:i}}function M(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=e.lineVertices,a=e.lineDescriptors,n=0,i=0,o=!0,l=!1,s=void 0;try{for(var u,h=a[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value;n+=2*c.numberOfVertices,i+=6*(c.numberOfVertices-1)}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}var f=new Float32Array(9*n),d=new Uint32Array(i),v=0,p=0;function y(){d[p++]=v-2,d[p++]=v,d[p++]=v-1,d[p++]=v,d[p++]=v+1,d[p++]=v-1}function g(e,r,t,a,n,i,o,l){var s=9*v,u=0;f[s+u++]=e,f[s+u++]=r,f[s+u++]=1,f[s+u++]=t,f[s+u++]=i,f[s+u++]=o,f[s+u++]=a/2,f[s+u++]=n/2,f[s+u++]=l,v++,f[s+u++]=e,f[s+u++]=r,f[s+u++]=-1,f[s+u++]=t,f[s+u++]=i,f[s+u++]=o,f[s+u++]=-a/2,f[s+u++]=-n/2,f[s+u++]=l,v++}var m=!0,x=!1,w=void 0;try{for(var M,A=a[Symbol.iterator]();!(m=(M=A.next()).done);m=!0){for(var b=M.value,T=b.totalTime,k=b.timeSeed,S=null,P=null,I=null,F=null,V=null,D=null,_=0;_<b.numberOfVertices;_++){var L=t[4*(b.startVertex+_)+0],O=t[4*(b.startVertex+_)+1],U=t[4*(b.startVertex+_)+2],N=t[4*(b.startVertex+_)+3],q=null,B=null,R=null,C=null;if(_>0){q=L-S,B=O-P;var E=Math.sqrt(q*q+B*B);if(q/=E,B/=E,_>1){var J=q+V,K=B+D,j=Math.sqrt(J*J+K*K);J/=j,K/=j;var G=Math.min(1/(J*q+K*B),r);R=-(K*=G),C=J*=G}else R=-B,C=q;null!==R&&null!==C&&(g(S,P,I,R,C,T,k,N),y())}S=L,P=O,I=U,V=q,D=B,F=N}g(S,P,I,-D,V,T,k,F)}}catch(e){x=!0,w=e}finally{try{m||null==A.return||A.return()}finally{if(x)throw w}}return{vertexData:f,indexData:d}}function A(e,r){var t=r.pixels,a=r.width,n=r.height,i=new Float32Array(a*n*2);if("vector-uv"===e)for(var o=0;o<a*n;o++)i[2*o+0]=t[0][o],i[2*o+1]=-t[1][o];else if("vector-magdir"===e)for(var l=0;l<a*n;l++){var u=t[0][l],h=(0,s.deg2rad)(t[1][l]),c=Math.cos(h-Math.PI/2),f=Math.sin(h-Math.PI/2);i[2*l+0]=c*u,i[2*l+1]=f*u}return{data:i,width:a,height:n}}function b(e,r,t,a,n,i){return T.apply(this,arguments)}function T(){return(T=i.asyncToGenerator(r(o).mark((function e(t,a,n,l,s,u){var h,c,v,p,y,g,m,x,w,M,A,b,T,S,P,I,F,V,D,_,L,O,U;return r(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=(0,f.getInfo)(a.spatialReference)){e.next=3;break}return e.abrupt("return",k(t,a,n,l,s,u));case 3:for(c=i.slicedToArray(h.valid,2),v=c[0],p=c[1],y=p-v,g=Math.ceil(a.width/y),m=a.width/g,x=Math.round(n/g),w=a.xmin,M=[],A=0;A<g;A++)b=new(0,d.default)({xmin:w,xmax:w+m,ymin:a.ymin,ymax:a.ymax,spatialReference:a.spatialReference}),M.push(k(t,b,x,l,s,u)),w+=m;return e.next=9,Promise.all(M);case 9:for(T=e.sent,S={data:new Float32Array(n*l*2),width:n,height:l},P=0,I=!0,F=!1,V=void 0,e.prev=13,D=T[Symbol.iterator]();!(I=(_=D.next()).done);I=!0){for(L=_.value,O=0;O<L.height;O++)for(U=0;U<L.width;U++)P+U>=n||(S.data[2*(O*n+P+U)+0]=L.data[2*(O*L.width+U)+0],S.data[2*(O*n+P+U)+1]=L.data[2*(O*L.width+U)+1]);P+=L.width}e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),F=!0,V=e.t0;case 21:e.prev=21,e.prev=22,I||null==D.return||D.return();case 24:if(e.prev=24,!F){e.next=27;break}throw V;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",S);case 30:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})))).apply(this,arguments)}function k(e,r,t,a,n,i){return S.apply(this,arguments)}function S(){return(S=i.asyncToGenerator(r(o).mark((function e(t,a,n,i,l,s){var h,c,f,d,v;return r(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h={requestProjectedLocalDirections:!0,signal:s},(0,u.isSome)(l)&&(h.timeExtent=l),"imagery"!==t.type){e.next=9;break}return e.next=4,t.load({signal:s});case 4:return c=t.rasterInfo.dataType,e.next=7,t.fetchImage(a,n,i,h);case 7:return f=e.sent,e.abrupt("return",!f||(0,u.isNone)(f.pixelData)||(0,u.isNone)(f.pixelData.pixelBlock)?{data:new Float32Array(n*i*2),width:n,height:i}:A(c,f.pixelData.pixelBlock));case 9:return e.next=11,t.load({signal:s});case 11:return d=t.rasterInfo.dataType,e.next=14,t.fetchPixels(a,n,i,h);case 14:return v=e.sent,e.abrupt("return",!v||(0,u.isNone)(v.pixelBlock)?{data:new Float32Array(n*i*2),width:n,height:i}:A(d,v.pixelBlock));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}))}();
//# sourceMappingURL=ImageryLayer.b9232c92.js.map
