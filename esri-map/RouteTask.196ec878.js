!function(){function e(e,r,t,o){Object.defineProperty(e,r,{get:t,set:o,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("ksSJg",(function(r,o){var s;s=r.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return p}));var n=t("8TSCy"),a=t("7eJjO");t("jHOLN"),t("iJAIC"),t("lNwWH"),t("2VlWd"),t("62edV");var i=t("fcwIv"),u=t("gToNb"),l=function(e){"use strict";n.inherits(t,e);var r=n.createSuper(t);function t(e){return n.classCallCheck(this,t),r.call(this,e)}return n.createClass(t,[{key:"solve",value:function(e,r){return(0,u.solve)(this.url,e,r)}}]),t}(t("hAlVw").default),p=l=(0,a._)([(0,i.subclass)("esri.tasks.RouteTask")],l)})),t.register("gToNb",(function(o,s){e(o.exports,"solve",(function(){return m}));var n=t("8TSCy"),a=t("2TvXO"),i=t("9pNSx"),u=t("7qybv"),l=t("eTzot"),p=t("5On35"),c=t("7aNbi"),f=t("dsJ7q"),y=t("1q4Rz"),d=(0,l.createQueryParamsHelper)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});function v(e){return"esri.rest.support.FeatureSet"===(null==e?void 0:e.declaredClass)}function m(e,r,t){return g.apply(this,arguments)}function g(){return(g=n.asyncToGenerator(r(a).mark((function e(t,o,s){var u,l,y,m,g,b,T,S,R,_,w,N,A,C,I;return r(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],l=[],y={},m={},g=(0,f.parseUrl)(t),b=g.path,v(o.stops)&&(0,c.collectGeometries)(o.stops.features,l,"stops.features",y),v(o.pointBarriers)&&(0,c.collectGeometries)(o.pointBarriers.features,l,"pointBarriers.features",y),v(o.polylineBarriers)&&(0,c.collectGeometries)(o.polylineBarriers.features,l,"polylineBarriers.features",y),v(o.polygonBarriers)&&(0,c.collectGeometries)(o.polygonBarriers.features,l,"polygonBarriers.features",y),e.next=4,(0,p.normalizeCentralMeridian)(l);case 4:for(S in T=e.sent,y)R=y[S],u.push(S),m[S]=T.slice(R[0],R[1]);if(!(0,c.isInputGeometryZAware)(m,u)){e.next=17;break}return _=null,e.prev=8,e.next=11,(0,c.fetchServiceDescription)(b,o.apiKey,s);case 11:_=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:_&&!_.hasZ&&(0,c.dropZValuesOffInputGeometry)(m,u);case 17:var r=function(e){m[e].forEach((function(r,t){o.get(e)[t].geometry=r}))};for(w in m)r(w);return N=n.objectSpread({},s,{query:n.objectSpread({},g.query,d.toQueryParams(o),{f:"json"})}),A=b.endsWith("/solve")?b:"".concat(b,"/solve"),e.next=22,(0,i.default)(A,N);case 22:return C=e.sent,I=C.data,e.abrupt("return",h(I));case 25:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function h(e){var r,t,o,s,n,a=new Map,i=e.directionLines,l=e.directionPoints,p=e.directions,c=e.routes,f=e.stops,d=e.barriers,v=e.polygonBarriers,m=e.polylineBarriers,g=e.messages,h=null!=(r=null!=(t=null!=(o=null!=(s=null==c?void 0:c.spatialReference)?s:null==f?void 0:f.spatialReference)?o:null==d?void 0:d.spatialReference)?t:null==v?void 0:v.spatialReference)?r:null==m?void 0:m.spatialReference;null==c||c.features.forEach((function(e){var r=e.attributes.Name,t=e.attributes.ObjectID;a.has(r)?(a.get(r).route=e,a.get(r).routeId=t):a.set(r,{route:e,routeId:t,routeName:r}),(0,u.isSome)(e.geometry)&&(e.geometry.spatialReference=h)})),null==p||p.forEach((function(e){var r=e.routeName;a.has(r)?a.get(r).directions=e:a.set(r,{routeName:r,directions:e})})),null==f||f.features.forEach((function(e){var r,t=null!=(r=e.attributes.RouteName)?r:null;a.has(t)?a.get(t).stops?a.get(t).stops.push(e):a.get(t).stops=[e]:a.set(t,{stops:[e],routeName:t}),(0,u.isSome)(e.geometry)&&(e.geometry.spatialReference=h)}));var b=null==(n=null==f?void 0:f.features.every((function(e){return null==e.attributes.RouteName})))||n;if((null==f?void 0:f.features.length)>0&&b){var T=Array.from(a.keys())[0];a.get(T).stops=a.get(null).stops,a.delete(null)}null==i||i.features.forEach((function(e){var r,t=e.attributes.RouteID,o=null==(r=Array.from(a.values()).find((function(e){return e.routeId===t})))?void 0:r.routeName;if(o)if(a.has(o))if(a.get(o).directionLines)a.get(o).directionLines.features.push(e);else{var s=i.fieldAliases,n=i.geometryType,u=i.spatialReference;a.get(o).directionLines={features:[e],fieldAliases:s,geometryType:n,spatialReference:u}}else{var l=i.fieldAliases,p=i.geometryType,c=i.spatialReference;a.set(o,{routeName:o,directionLines:{features:[e],fieldAliases:l,geometryType:p,spatialReference:c}})}})),null==l||l.features.forEach((function(e){var r,t=e.attributes.RouteID,o=null==(r=Array.from(a.values()).find((function(e){return e.routeId===t})))?void 0:r.routeName;if(o)if(a.has(o))if(a.get(o).directionPoints)a.get(o).directionPoints.features.push(e);else{var s=l.fieldAliases,n=l.geometryType,i=l.spatialReference;a.get(o).directionPoints={features:[e],fieldAliases:s,geometryType:n,spatialReference:i}}else{var u=l.fieldAliases,p=l.geometryType,c=l.spatialReference;a.set(o,{routeName:o,directionPoints:{features:[e],fieldAliases:u,geometryType:p,spatialReference:c}})}}));var S=Array.from(a.values());return y.default.fromJSON({routeResults:S,barriers:d,polygonBarriers:v,polylineBarriers:m,messages:g})}})),t.register("1q4Rz",(function(r,o){e(r.exports,"default",(function(){return m}));var s=t("8TSCy"),n=t("7eJjO"),a=t("bsvXr"),i=t("1XAcN"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var l=t("eB8sj"),p=t("fcwIv"),c=t("f4h86"),f=t("2sP7x"),y=t("iJXKP");function d(e){return e&&c.default.fromJSON(e).features.map((function(e){return e}))}var v=function(e){"use strict";s.inherits(t,e);var r=s.createSuper(t);function t(e){var o;return s.classCallCheck(this,t),(o=r.call(this,e)).messages=null,o.pointBarriers=null,o.polylineBarriers=null,o.polygonBarriers=null,o.routeResults=null,s.possibleConstructorReturn(o)}return s.createClass(t,[{key:"readPointBarriers",value:function(e,r){return d(r.barriers)}},{key:"readPolylineBarriers",value:function(e){return d(e)}},{key:"readPolygonBarriers",value:function(e){return d(e)}}]),t}(i.JSONSupport);(0,n._)([(0,u.property)({type:[f.default]})],v.prototype,"messages",void 0),(0,n._)([(0,u.property)({type:[a.default]})],v.prototype,"pointBarriers",void 0),(0,n._)([(0,l.reader)("pointBarriers",["barriers"])],v.prototype,"readPointBarriers",null),(0,n._)([(0,u.property)({type:[a.default]})],v.prototype,"polylineBarriers",void 0),(0,n._)([(0,l.reader)("polylineBarriers")],v.prototype,"readPolylineBarriers",null),(0,n._)([(0,u.property)({type:[a.default]})],v.prototype,"polygonBarriers",void 0),(0,n._)([(0,l.reader)("polygonBarriers")],v.prototype,"readPolygonBarriers",null),(0,n._)([(0,u.property)({type:[y.default]})],v.prototype,"routeResults",void 0);var m=v=(0,n._)([(0,p.subclass)("esri.rest.support.RouteSolveResult")],v)})),t.register("iJXKP",(function(r,o){e(r.exports,"default",(function(){return y}));var s=t("8TSCy"),n=t("7eJjO"),a=t("bsvXr"),i=t("1XAcN"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var l=t("fcwIv"),p=t("gGEoS"),c=t("f4h86"),f=function(e){"use strict";s.inherits(t,e);var r=s.createSuper(t);function t(e){var o;return s.classCallCheck(this,t),(o=r.call(this,e)).directionLines=null,o.directionPoints=null,o.directions=null,o.route=null,o.routeName=null,o.stops=null,s.possibleConstructorReturn(o)}return t}(i.JSONSupport);(0,n._)([(0,u.property)({type:c.default,json:{write:!0}})],f.prototype,"directionLines",void 0),(0,n._)([(0,u.property)({type:c.default,json:{write:!0}})],f.prototype,"directionPoints",void 0),(0,n._)([(0,u.property)({type:p.default,json:{write:!0}})],f.prototype,"directions",void 0),(0,n._)([(0,u.property)({type:a.default,json:{write:!0}})],f.prototype,"route",void 0),(0,n._)([(0,u.property)({type:String,json:{write:!0}})],f.prototype,"routeName",void 0),(0,n._)([(0,u.property)({type:[a.default],json:{write:!0}})],f.prototype,"stops",void 0);var y=f=(0,n._)([(0,l.subclass)("esri.rest.support.RouteResult")],f)})),t.register("gGEoS",(function(r,o){e(r.exports,"default",(function(){return g}));var s=t("8TSCy"),n=t("7eJjO");t("2ILM8");var a=t("7qybv"),i=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("eB8sj"),l=t("fcwIv"),p=t("lmDbA"),c=t("f4h86"),f=t("gINRd"),y=t("j40xv"),d=t("95Tg0"),v=t("d1Fqh"),m=function(e){"use strict";s.inherits(t,e);var r=s.createSuper(t);function t(e){var o;return s.classCallCheck(this,t),(o=r.call(this,e)).extent=null,o.features=null,o.geometryType="polyline",o.routeId=null,o.routeName=null,o.totalDriveTime=null,o.totalLength=null,o.totalTime=null,s.possibleConstructorReturn(o)}return s.createClass(t,[{key:"readFeatures",value:function(e,r){var t,o=this;if(!e)return[];var n=null!=(t=r.summary.envelope.spatialReference)?t:r.spatialReference,a=n&&y.default.fromJSON(n);return e.map((function(e){var r,t,n=o._decompressGeometry(e.compressedGeometry),i=new(0,d.default)(s.objectSpread({},n,{spatialReference:a})),u=null!=(r=null==(t=e.events)?void 0:t.map((function(e){var r=e.arriveTimeUTC,t=e.ETA,o=e.point,s=o.x,n=o.y,i=o.z,u=e.strings;return new(0,p.default)({geometry:new(0,v.default)({x:s,y:n,z:i,hasZ:void 0!==i,spatialReference:a}),attributes:{ETA:t,arriveTimeUTC:r},strings:u})})))?r:[];return new(0,p.default)({attributes:e.attributes,events:u,geometry:i,strings:e.strings})}))}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var r=e.geometry;return(0,a.unwrap)(r)})),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}},{key:"_decompressGeometry",value:function(e){var r,t,o,s,n,a,i,u,l=0,p=0,c=0,f=0,y=[],d=0,v=0,m=0;if((n=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(n=[]),0===parseInt(n[d],32)){d=2;var g=parseInt(n[d],32);d++,a=parseInt(n[d],32),d++,1&g&&(v=n.indexOf("|")+1,i=parseInt(n[v],32),v++),2&g&&(m=n.indexOf("|",v)+1,u=parseInt(n[m],32),m++)}else a=parseInt(n[d],32),d++;for(;d<n.length&&"|"!==n[d];){r=parseInt(n[d],32)+l,d++,l=r,t=parseInt(n[d],32)+p,d++,p=t;var h=[r/a,t/a];v&&(s=parseInt(n[v],32)+c,v++,c=s,h.push(s/i)),m&&(o=parseInt(n[m],32)+f,m++,f=o,h.push(o/u)),y.push(h)}return{paths:[y],hasZ:v>0,hasM:m>0}}},{key:"_mergePolylinesToSinglePath",value:function(e,r){var t;if(0===e.length)return new(0,d.default)({spatialReference:r});var o=[],n=!0,a=!1,i=void 0,u=!0,l=!1,p=void 0;try{for(var c,f=e[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var y=c.value;try{for(var v,m=y.paths[Symbol.iterator]();!(n=(v=m.next()).done);n=!0){var g=v.value;(t=o).push.apply(t,s.toConsumableArray(g))}}catch(e){a=!0,i=e}finally{try{n||null==m.return||m.return()}finally{if(a)throw i}}}}catch(e){l=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw p}}var h=[];o.forEach((function(e,r){0!==r&&e[0]===o[r-1][0]&&e[1]===o[r-1][1]||h.push(e)}));var b=e[0],T=b.hasM,S=b.hasZ;return new(0,d.default)({hasM:T,hasZ:S,paths:[h],spatialReference:r})}}]),t}(c.default);(0,n._)([(0,i.property)({type:f.default,json:{read:{source:"summary.envelope"}}})],m.prototype,"extent",void 0),(0,n._)([(0,i.property)()],m.prototype,"features",void 0),(0,n._)([(0,u.reader)("features")],m.prototype,"readFeatures",null),(0,n._)([(0,i.property)()],m.prototype,"geometryType",void 0),(0,n._)([(0,i.property)({readOnly:!0})],m.prototype,"mergedGeometry",null),(0,n._)([(0,i.property)()],m.prototype,"routeId",void 0),(0,n._)([(0,i.property)()],m.prototype,"routeName",void 0),(0,n._)([(0,i.property)({value:null,readOnly:!0})],m.prototype,"strings",null),(0,n._)([(0,i.property)({json:{read:{source:"summary.totalDriveTime"}}})],m.prototype,"totalDriveTime",void 0),(0,n._)([(0,i.property)({json:{read:{source:"summary.totalLength"}}})],m.prototype,"totalLength",void 0),(0,n._)([(0,i.property)({json:{read:{source:"summary.totalTime"}}})],m.prototype,"totalTime",void 0);var g=m=(0,n._)([(0,l.subclass)("esri.rest.support.DirectionsFeatureSet")],m)})),t.register("lmDbA",(function(r,o){e(r.exports,"default",(function(){return p}));var s=t("8TSCy"),n=t("7eJjO"),a=t("bsvXr"),i=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("fcwIv"),l=function(e){"use strict";s.inherits(t,e);var r=s.createSuper(t);function t(){return s.classCallCheck(this,t),r.apply(this,arguments)}return t}(a.default);(0,n._)([(0,i.property)()],l.prototype,"events",void 0),(0,n._)([(0,i.property)()],l.prototype,"strings",void 0);var p=l=(0,n._)([(0,u.subclass)("esri.rest.support.DirectionsFeature")],l)})),t.register("gnh78",(function(r,o){e(r.exports,"default",(function(){return f}));var s=t("8TSCy"),n=t("7eJjO"),a=t("79ASa"),i=t("1XAcN"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var l=t("fcwIv"),p=new(0,a.JSONMap)({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),c=function(e){"use strict";s.inherits(t,e);var r=s.createSuper(t);function t(e){var o;return s.classCallCheck(this,t),(o=r.call(this,e)).description=null,o.type=null,s.possibleConstructorReturn(o)}return t}(i.JSONSupport);(0,n._)([(0,u.property)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,n._)([(0,u.property)({type:String,json:{read:p.read,write:p.write}})],c.prototype,"type",void 0);var f=c=(0,n._)([(0,l.subclass)("esri.rest.support.GPMessage")],c)}))}();
//# sourceMappingURL=RouteTask.196ec878.js.map
