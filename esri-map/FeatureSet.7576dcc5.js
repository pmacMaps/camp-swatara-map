!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("f4h86",(function(t,r){var n,o,i,a,l;n=t.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),o=t.exports,i="default",a=function(){return N},Object.defineProperty(o,i,{get:a,set:l,enumerable:!0,configurable:!0});var s=e("8TSCy"),u=e("7eJjO"),y=e("2ILM8"),p=e("bsvXr"),f=e("79ASa"),c=e("1XAcN"),d=e("flPLJ"),v=e("7qybv"),m=e("iho5X");e("iJAIC");var h,g=e("eB8sj"),w=e("fcwIv"),S=e("kced1"),x=e("j40xv"),_=e("79LpT"),T=e("buMuJ"),R=new(0,f.JSONMap)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),b=h=function(e){"use strict";s.inherits(r,e);var t=s.createSuper(r);function r(e){var n;return s.classCallCheck(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,s.possibleConstructorReturn(n)}return s.createClass(r,[{key:"readFeatures",value:function(e,t){for(var r=x.default.fromJSON(t.spatialReference),n=[],o=0;o<e.length;o++){var i=e[o],a=p.default.fromJSON(i),l=i.geometry&&i.geometry.spatialReference;(0,v.isSome)(a.geometry)&&!l&&(a.geometry.spatialReference=r);var s=i.aggregateGeometries,u=a.aggregateGeometries;if(s&&(0,v.isSome)(u))for(var y in u){var f=u[y],c=s[y],d=null==c?void 0:c.spatialReference;(0,v.isSome)(f)&&!d&&(f.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)R.write(e,t,r,n);else{var o=this.features;if(o){var i=!0,a=!1,l=void 0;try{for(var s,u=o[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var y=s.value;if(y&&(0,v.isSome)(y.geometry))return void R.write(y.geometry.type,t,r,n)}}catch(e){a=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,_.fromJSON)(e);return!r&&t.spatialReference&&(n.spatialReference=x.default.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n=!0,o=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;if(s&&(0,v.isSome)(s.geometry)&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}}}}},{key:"clone",value:function(){return new h(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,d.clone)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var o=e&&e[r];n.geometry=o&&o.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=s.slicedToArray(e.scale,2),r=t[0],n=t[1],o=s.slicedToArray(e.translate,2),i=o[0],a=o[1],l=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-i)/r)}),(function(e){return Math.round((a-e)/n)})),y=0,p=l.length;y<p;y++)u((0,v.unwrap)(l[y].geometry))||(l.splice(y,1),y--,p--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this,t=e.geometryType,r=e.features,n=e.transform;if(!n)return this;var o=s.slicedToArray(n.translate,2),i=o[0],a=o[1],l=s.slicedToArray(n.scale,2),u=l[0],y=l[1],p=this._getHydrationFunction(t,(function(e){return e*u+i}),(function(e){return a-e*y})),f=!0,c=!1,d=void 0;try{for(var m,h=r[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var g=m.value.geometry;(0,v.isSome)(g)&&p(g)}}catch(e){c=!0,d=e}finally{try{f||null==h.return||h.return()}finally{if(c)throw d}}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,o,i=[],a=0,l=e.length;a<l;a++){var s=e[a];if(a>0){var u=t(s[0]),y=r(s[1]);u===n&&y===o||(i.push([u-n,y-o]),n=u,o=y)}else n=t(s[0]),o=r(s[1]),i.push([n,o])}return i.length>0?i:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var o=(0,_.isPolygon)(e)?e.rings:e.paths,i=[],a=0,l=o.length;a<l;a++){var s=o[a],u=n._quantizePoints(s,t,r);u&&i.push(u)}return i.length>0?((0,_.isPolygon)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?function(e){var o=n._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,o,i=(0,_.isPolygon)(e)?e.rings:e.paths,a=0,l=i.length;a<l;a++)for(var s=i[a],u=0,y=s.length;u<y;u++){var p=s[u];u>0?(n+=p[0],o+=p[1]):(n=p[0],o=p[1]),p[0]=t(n),p[1]=r(o)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,o,i=e.points,a=0,l=i.length;a<l;a++){var s=i[a];a>0?(n+=s[0],o+=s[1]):(n=s[0],o=s[1]),s[0]=t(n),s[1]=r(o)}}:void 0}}]),r}(c.JSONSupport);(0,u._)([(0,m.property)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,u._)([(0,m.property)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"exceededTransferLimit",void 0),(0,u._)([(0,m.property)({type:[p.default],json:{write:!0}})],b.prototype,"features",void 0),(0,u._)([(0,g.reader)("features")],b.prototype,"readFeatures",null),(0,u._)([(0,m.property)({type:[T.default],json:{write:!0}})],b.prototype,"fields",void 0),(0,u._)([(0,m.property)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:R.read}}})],b.prototype,"geometryType",void 0),(0,u._)([(0,S.writer)("geometryType")],b.prototype,"writeGeometryType",null),(0,u._)([(0,m.property)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasM",void 0),(0,u._)([(0,m.property)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasZ",void 0),(0,u._)([(0,m.property)({types:y.geometryTypes,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,u._)([(0,g.reader)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,u._)([(0,m.property)({type:x.default,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,u._)([(0,S.writer)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,u._)([(0,m.property)({json:{write:!0}})],b.prototype,"transform",void 0),(b=h=(0,u._)([(0,w.subclass)("esri.rest.support.FeatureSet")],b)).prototype.toJSON.isDefaultToJSON=!0;var N=b}))}();
//# sourceMappingURL=FeatureSet.7576dcc5.js.map
