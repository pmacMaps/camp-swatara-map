!function(){function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("8aBT4",(function(r,i){e(r.exports,"Texture",(function(){return d}));var a=t("8TSCy");t("2VlWd");var o=t("iVfa0"),n=t("7qybv"),s=t("kGNC4"),l=t("fnzEM"),u=t("8JzMA"),p=t("J8NSi"),d=function(){"use strict";function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a.classCallCheck(this,e),this._context=t,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,t.instanceCounter.increment(u.ResourceType.Texture,this),this._descriptor=a.objectSpread({target:u.TextureType.TEXTURE_2D,samplingMode:u.TextureSamplingMode.LINEAR,wrapMode:u.TextureWrapMode.REPEAT,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,isImmutable:!1},r),t.type!==l.ContextType.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),_(this._descriptor.target)))throw new Error("3D and array textures are not supported in WebGL1");this._descriptor.target===u.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}return a.createClass(e,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}},{key:"dispose",value:function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(u.ResourceType.Texture,this))}},{key:"release",value:function(){this.dispose()}},{key:"resize",value:function(e,t){var r=this._descriptor;if(r.width!==e||r.height!==t){if(this._wasImmutablyAllocated)throw new Error("Immutable textures can't be resized!");r.width=e,r.height=t,this._descriptor.target===u.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}},{key:"_setDataCubeMap",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=u.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;t<=u.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;t++)this._setData(e,t)}},{key:"setData",value:function(e){this._setData(e)}},{key:"_setData",value:function(t,r){if(this._context&&this._context.gl){var i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null);var a=this._descriptor;null!=r||(r=a.target);var o,l=_(r);null===t&&(a.width=a.width||4,a.height=a.height||4,l&&(a.depth=null!=(o=a.depth)?o:1));var d=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),e._validateTexture(this._context,a),this._configurePixelStorage();var T=a.pixelFormat,g=a.internalFormat?a.internalFormat:this._deriveInternalFormat(T,a.dataType);if(m(t)){var x=t.width,E=t.height;t instanceof HTMLVideoElement&&(x=t.videoWidth,E=t.videoHeight),a.width&&a.height,l&&a.depth,a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,g,a.hasMipmap,x,E,1),this._texImage(r,0,g,x,E,1,t),(0,s.checkWebGLError)(i),a.hasMipmap&&this.generateMipmap(),void 0===a.width&&(a.width=x),void 0===a.height&&(a.height=E),l&&void 0===a.depth&&(a.depth=1)}else{var f=this,M=a.width,A=a.height,y=a.depth;if(null!=M&&null!=A||console.error("Width and height must be specified!"),l&&null==y&&console.error("Depth must be specified!"),a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,g,a.hasMipmap,M,A,y),i.DEPTH24_STENCIL8&&g===i.DEPTH_STENCIL&&(g=i.DEPTH24_STENCIL8),h(t)){var v=this,w=t.levels,I=c(r,M,A,y),b=Math.min(I-1,w.length-1);(0,p.default)(i)?i.texParameteri(a.target,i.TEXTURE_MAX_LEVEL,b):a.hasMipmap=a.hasMipmap&&I===w.length;var R=g;if(!(R in u.CompressedTextureFormat))throw new Error("Attempting to use compressed data with an umcompressed format!");this._forEachMipmapLevel((function(e,t,i,a){var o=w[Math.min(e,w.length-1)];v._compressedTexImage(r,e,R,t,i,a,o)}),b)}else(0,n.isSome)(t)?(this._texImage(r,0,g,M,A,y,t),(0,s.checkWebGLError)(i),a.hasMipmap&&this.generateMipmap()):this._forEachMipmapLevel((function(e,t,a,o){f._texImage(r,e,g,t,a,o,null),(0,s.checkWebGLError)(i)}))}e._applySamplingMode(i,this._descriptor),e._applyWrapMode(i,this._descriptor),e._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,s.checkWebGLError)(i),this._context.bindTexture(d,e.TEXTURE_UNIT_FOR_UPDATES)}}},{key:"updateData",value:function(t,r,i,a,o,n){n||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var s=this._context.gl,l=this._descriptor,u=l.pixelFormat,p=l.internalFormat,d=l.dataType,_=l.isImmutable,c=l.target;if(_&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");var T=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);(r<0||i<0||a>l.width||o>l.height||r+a>l.width||i+o>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),m(n)?s.texSubImage2D(c,t,r,i,u,d,n):h(n)?s.compressedTexSubImage2D(c,t,r,i,a,o,p,n.levels[t]):s.texSubImage2D(c,t,r,i,a,o,u,d,n),this._context.bindTexture(T,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"updateData3D",value:function(t,r,i,a,o,n,s,l){l||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var u=this._context.gl;if(!(0,p.default)(u))throw new Error("3D textures are not supported in WebGL1");var d=this._descriptor,m=d.pixelFormat,c=d.dataType,T=d.isImmutable,g=d.target,x=d.internalFormat;if(T&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");_(g)||console.warn("Attempting to set 3D texture data on a non-3D texture");var E=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);if(this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||a<0||o>d.width||n>d.height||s>d.depth||r+o>d.width||i+n>d.height||a+s>d.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),h(l))l=l.levels[t],u.compressedTexSubImage3D(g,t,r,i,a,o,n,s,x,l);else{var f=l;u.texSubImage3D(g,t,r,i,a,o,n,s,m,c,f)}this._context.bindTexture(E,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"generateMipmap",value:function(){var t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new Error("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,e._validateTexture(this._context,t)}t.samplingMode===u.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=u.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):t.samplingMode===u.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=u.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);var r=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._context.gl.generateMipmap(t.target),this._context.bindTexture(r,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"setSamplingMode",value:function(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}},{key:"setWrapMode",value:function(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,e._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}},{key:"applyChanges",value:function(){var t=this._context.gl,r=this._descriptor;this._samplingModeDirty&&(e._applySamplingMode(t,r),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,r),this._wrapModeDirty=!1)}},{key:"_deriveInternalFormat",value:function(e,t){if(this._context.type===l.ContextType.WEBGL1)return e;switch(t){case u.PixelType.FLOAT:switch(e){case u.PixelFormat.RGBA:return u.SizedPixelFormat.RGBA32F;case u.PixelFormat.RGB:return u.SizedPixelFormat.RGB32F;default:throw new Error("Unable to derive format")}case u.PixelType.UNSIGNED_BYTE:switch(e){case u.PixelFormat.RGBA:return u.SizedPixelFormat.RGBA8;case u.PixelFormat.RGB:return u.SizedPixelFormat.RGB8}default:return e}}},{key:"_configurePixelStorage",value:function(){var e=this._context.gl,t=this._descriptor,r=t.unpackAlignment,i=t.flipped,a=t.preMultiplyAlpha;e.pixelStorei(e.UNPACK_ALIGNMENT,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a?1:0)}},{key:"_texStorage",value:function(e,t,r,i,a,o){var n=this._context.gl;if(!(0,p.default)(n))throw new Error("Immutable textures are not supported in WebGL1");if(!(t in u.SizedPixelFormat))throw new Error("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){var s=r?c(e,i,a,o):1;_(e)?n.texStorage3D(e,s,t,i,a,o):n.texStorage2D(e,s,t,i,a),this._wasImmutablyAllocated=!0}}},{key:"_texImage",value:function(e,t,r,i,a,o,s){var u=this._context.gl,p=null,d=this._context.type===l.ContextType.WEBGL2,h=_(e),c=this._descriptor,T=c.isImmutable,g=c.pixelFormat,x=c.dataType;if(d&&(p=u),d||!m(s))if(T){if((0,n.isSome)(s)){var E=s;h?p.texSubImage3D(e,t,0,0,0,i,a,o,g,x,E):u.texSubImage2D(e,t,0,0,i,a,g,x,E)}}else{var f=(0,n.unwrap)(s);h?p.texImage3D(e,t,r,i,a,o,0,g,x,f):u.texImage2D(e,t,r,i,a,0,g,x,f)}else u.texImage2D(e,0,r,g,x,s)}},{key:"_compressedTexImage",value:function(e,t,r,i,a,o,s){var u=this._context.gl,p=null,d=_(e),h=this._descriptor.isImmutable;if(d){if(this._context.type!==l.ContextType.WEBGL2)throw new Error("3D textures are not supported in WebGL1");p=u}h?(0,n.isSome)(s)&&(d?p.compressedTexSubImage3D(e,t,0,0,0,i,a,o,r,s):u.compressedTexSubImage2D(e,t,0,0,i,a,r,s)):d?p.compressedTexImage3D(e,t,r,i,a,o,0,s):u.compressedTexImage2D(e,t,r,i,a,0,s)}},{key:"_forEachMipmapLevel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=this._descriptor,i=r.width,a=r.height,o=r.depth,n=r.hasMipmap,s=r.target,l=s===u.TextureType.TEXTURE_3D,p=0;e(p,i,a,o),n&&(1!==i||1!==a||l&&1!==o)&&!(p>=t);++p)i=Math.max(1,i>>1),a=Math.max(1,a>>1),l&&(o=Math.max(1,o>>1))}}],[{key:"_validateTexture",value:function(e,t){(t.width<0||t.height<0||t.depth<0)&&console.error("Negative dimension parameters are not allowed!");var r=(0,p.default)(e.gl),i=(0,o.isPowerOfTwo)(t.width)&&(0,o.isPowerOfTwo)(t.height);r||!t.isImmutable&&!_(t.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!"),r||i||("number"==typeof t.wrapMode?t.wrapMode!==u.TextureWrapMode.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):t.wrapMode.s===u.TextureWrapMode.CLAMP_TO_EDGE&&t.wrapMode.t===u.TextureWrapMode.CLAMP_TO_EDGE||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}},{key:"_applySamplingMode",value:function(e,t){var r=t.samplingMode,i=t.samplingMode;r===u.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||r===u.TextureSamplingMode.LINEAR_MIPMAP_LINEAR?(r=u.TextureSamplingMode.LINEAR,t.hasMipmap||(i=u.TextureSamplingMode.LINEAR)):r!==u.TextureSamplingMode.NEAREST_MIPMAP_NEAREST&&r!==u.TextureSamplingMode.NEAREST_MIPMAP_LINEAR||(r=u.TextureSamplingMode.NEAREST,t.hasMipmap||(i=u.TextureSamplingMode.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}},{key:"_applyWrapMode",value:function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}},{key:"_applyAnisotropicFilteringParameters",value:function(e,t){var r,i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}]),e}();function h(e){return(0,n.isSome)(e)&&"type"in e&&"compressed"===e.type}function m(e){return(0,n.isSome)(e)&&!h(e)&&(t=e,!((0,n.isSome)(t)&&"byteLength"in t));var t}function _(e){return e===u.TextureType.TEXTURE_3D||e===u.TextureType.TEXTURE_2D_ARRAY}function c(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Math.max(t,r);return e===u.TextureType.TEXTURE_3D&&(a=Math.max(a,i)),Math.round(Math.log(a)/Math.LN2)+1}d.TEXTURE_UNIT_FOR_UPDATES=0})),t.register("kGNC4",(function(r,i){e(r.exports,"webglDebugEnabled",(function(){return l})),e(r.exports,"webglValidateShadersEnabled",(function(){return u})),e(r.exports,"checkWebGLError",(function(){return p}));var a=t("kyj08"),o=t("2VlWd"),n=t("jHOLN").default.getLogger("esri/views/webgl");var s=!!(0,o.default)("enable-feature:webgl-debug");function l(){return s}function u(){return s}function p(e){if(l()){var t=e.getError();if(t){var r=function(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}(e,t),i=(new Error).stack;n.error(new(0,a.default)("webgl-error","WebGL error occured",{message:r,stack:i}))}}}})),t.register("J8NSi",(function(t,r){function i(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}e(t.exports,"default",(function(){return i}))}))}();
//# sourceMappingURL=Pipeline.dc39a421.js.map
