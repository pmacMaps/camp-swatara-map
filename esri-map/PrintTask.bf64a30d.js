!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("iynDo",(function(n,a){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),t(n.exports,"default",(function(){return m}));var o=r("8TSCy"),s=r("2TvXO"),u=r("7eJjO"),l=r("79ASa"),c=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var p=r("fcwIv"),f=r("aHcy1"),y=r("hAlVw"),d=new(0,l.JSONMap)({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),b=function(t){"use strict";o.inherits(n,t);var r=o.createSuper(n);function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i;return o.classCallCheck(this,n),(i=r.call.apply(r,[this].concat(o.toConsumableArray(t))))._gpMetadata=null,i.updateDelay=1e3,o.possibleConstructorReturn(i)}return o.createClass(n,[{key:"mode",get:function(){return this._gpMetadata&&this._gpMetadata.executionType?d.fromJSON(this._gpMetadata.executionType):"sync"}},{key:"execute",value:function(e,t){return e&&(e.updateDelay=this.updateDelay),(0,f.execute)(this.url,e,o.objectSpread({},this.requestOptions,t))}},{key:"_getGpPrintParams",value:function(t){var r=this;return o.asyncToGenerator(e(s).mark((function n(){var a,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,f.getGpServerUrl)(r.url),i=f.printCacheMap.get(a),e.abrupt("return",(0,f.getGpPrintParams)(t,i));case 2:case"end":return e.stop()}}),n)})))()}}]),n}(y.default);(0,u._)([(0,c.property)()],b.prototype,"_gpMetadata",void 0),(0,u._)([(0,c.property)({readOnly:!0})],b.prototype,"mode",null),(0,u._)([(0,c.property)()],b.prototype,"updateDelay",void 0);var m=b=(0,u._)([(0,p.subclass)("esri.tasks.PrintTask")],b)})),r.register("aHcy1",(function(n,a){t(n.exports,"printCacheMap",(function(){return O})),t(n.exports,"execute",(function(){return I})),t(n.exports,"getGpServerUrl",(function(){return j})),t(n.exports,"getGpPrintParams",(function(){return N}));var i=r("8TSCy"),o=r("2TvXO"),s=r("cu9iz"),u=r("dLARP"),l=r("9pNSx"),c=r("kyj08"),p=r("79ASa"),f=r("7qybv"),y=r("iXlXu"),d=r("kYueh"),b=r("fTq43"),m=r("7vTUY"),v=r("fO9V6"),h=r("2rC15"),g=r("3uX6S"),x=r("giOvG"),S=r("jcYl8"),w=r("2FR5S"),k=r("c5s7G"),P=r("7bIfi"),T=r("eMbRX"),L={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},G=new(0,p.JSONMap)({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),M=new(0,p.JSONMap)({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),O=new Map;function I(e,t,r){return J.apply(this,arguments)}function J(){return(J=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j(r),s=O.get(i),e.abrupt("return",Promise.resolve().then((function(){return s?{data:s.gpMetadata}:(s={gpServerUrl:i,is11xService:!1,legendLayerNameMap:{},legendLayers:[]},(0,l.default)(i,{query:{f:"json"}}))})).then((function(e){return s.gpMetadata=e.data,s.cimVersion=s.gpMetadata.cimVersion,s.is11xService=!!s.cimVersion,O.set(i,s),N(n,s)})).then((function(e){var t,i=we(s),o=function(e){return"sync"===i?e.results&&e.results[0]&&e.results[0].value:t.fetchResultData("Output_File",null,a).then((function(e){return e.value}))};return"async"===i?(0,g.submitJob)(r,e,null,a).then((function(e){return t=e,e.waitForJobCompletion({interval:n.updateDelay}).then(o)})):(0,h.execute)(r,e,null,a).then(o)})));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function N(e,t){return D.apply(this,arguments)}function D(){return(D=i.asyncToGenerator(e(o).mark((function t(r,n){var a,i,s,u,l,p,f,y,d,b,m,v,h,g,w,P,T;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]},null==(a=r.template||new(0,k.default)).showLabels&&(a.showLabels=!0),i=a.exportOptions,u=(0,S.toJSON)(a.layout),i&&(s={dpi:i.dpi},("map_only"===u.toLowerCase()||""===u)&&(l=i.width,p=i.height,s.outputSize=[l,p])),(f=a.layoutOptions)&&("Miles"===f.scalebarUnit||"Kilometers"===f.scalebarUnit?(d="Kilometers",b="Miles"):"Meters"!==f.scalebarUnit&&"Feet"!==f.scalebarUnit||(d="Meters",b="Feet"),y={titleText:f.titleText,authorText:f.authorText,copyrightText:f.copyrightText,customTextElements:f.customTextElements,scaleBarOptions:{metricUnit:G.toJSON(d),metricLabel:L[d],nonMetricUnit:G.toJSON(b),nonMetricLabel:L[b]}}),m=null,null!=f&&f.legendLayers&&(m=f.legendLayers.map((function(e){n.legendLayerNameMap[e.layerId]=e.title;var t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t}))),e.next=14,V(r,a,n);case 14:return(v=e.sent).operationalLayers&&(h=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),g=/[\u0600-\u06FF]/,w=function(e){var t=e.text,r=e.font,n=r&&r.family&&r.family.toLowerCase();t&&r&&("arial"===n||"arial unicode ms"===n)&&(r.family=h.test(t)?"Arial Unicode MS":"Arial","normal"!==r.style&&g.test(t)&&(r.family="Arial Unicode MS"))},P=function(){throw new(0,c.default)("print:cim-symbol-unsupported","CIMSymbol is not supported by a print service published from ArcMap")},v.operationalLayers.forEach((function(e){var t,r,a;null!=(t=e.featureCollection)&&t.layers?e.featureCollection.layers.forEach((function(e){var t,r,a,i;if(null!=(t=e.layerDefinition)&&null!=(r=t.drawingInfo)&&null!=(a=r.renderer)&&a.symbol){var o=e.layerDefinition.drawingInfo.renderer;"esriTS"===o.symbol.type?w(o.symbol):"CIMSymbolReference"!==o.symbol.type||n.is11xService||P()}null!=(i=e.featureSet)&&i.features&&e.featureSet.features.forEach((function(e){e.symbol&&("esriTS"===e.symbol.type?w(e.symbol):"CIMSymbolReference"!==e.symbol.type||n.is11xService||P())}))})):!n.is11xService&&null!=(r=e.layerDefinition)&&null!=(a=r.drawingInfo)&&a.renderer&&JSON.stringify(e.layerDefinition.drawingInfo.renderer).includes('"type":"CIMSymbolReference"')&&P()}))),r.outSpatialReference&&(v.mapOptions.spatialReference=r.outSpatialReference.toJSON()),Object.assign(v,{exportOptions:s,layoutOptions:y||{}}),Object.assign(v.layoutOptions,{legendOptions:{operationalLayers:null!=m?m:n.legendLayers.slice()}}),n.legendLayers.length=0,O.set(n.gpServerUrl,n),T={Web_Map_as_JSON:JSON.stringify(v),Format:(0,x.toJSON)(a.format),Layout_Template:u},e.abrupt("return",(r.extraParameters&&Object.assign(T,r.extraParameters),T));case 19:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function V(e,t,r){return C.apply(this,arguments)}function C(){return(C=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u,l,c,p;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.view,s=i.spatialReference,e.next=4,A(i,n,a);case 4:return e.t0=e.sent,u={operationalLayers:e.t0},l=a.ssExtent||r.extent||i.extent,s&&s.isWrappable&&(l=l.clone()._normalize(!0),s=l.spatialReference),u.mapOptions={extent:l&&l.toJSON(),spatialReference:s&&s.toJSON(),showAttribution:n.attributionVisible},a.ssExtent=null,i.background&&(u.background=i.background.toJSON()),i.rotation&&(u.mapOptions.rotation=-i.rotation),n.scalePreserved&&(u.mapOptions.scale=n.outScale||i.scale),(0,f.isSome)(i.timeExtent)&&(c=(0,f.isSome)(i.timeExtent.start)?i.timeExtent.start.getTime():null,p=(0,f.isSome)(i.timeExtent.end)?i.timeExtent.end.getTime():null,u.mapOptions.time=[c,p]),e.abrupt("return",u);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function j(e){var t=e,r=t.lastIndexOf("/GPServer/");return r>0&&(t=t.slice(0,r+9)),t}function A(e,t,r){return _.apply(this,arguments)}function _(){return(_=i.asyncToGenerator(e(o).mark((function t(r,n,a){var s,u,l,c,p,f,y,d,b,m,v,h,g,x;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],u={layerView:null,printTemplate:n,view:r},l=0,n.scalePreserved&&(l=n.outScale||r.scale),c=(0,w.getVisibleLayerViews)(r,l),p=!0,f=!1,y=void 0,e.prev=5,d=c[Symbol.iterator]();case 7:if(p=(b=d.next()).done){e.next=132;break}if(m=b.value,(h=m.layer).loaded&&!(0,w.isGroupLayer)(h)){e.next=13;break}return e.abrupt("continue",129);case 13:if(u.layerView=m,!(0,w.isScreenshotRequired)(m)){e.next=21;break}return e.next=18,ae(h,u,a);case 18:e.t0=e.sent,e.next=127;break;case 21:if(!(0,w.isBingMapsLayer)(h)){e.next=25;break}e.t1=R(h),e.next=126;break;case 25:if(!(0,w.isCSVLayer)(h)){e.next=31;break}return e.next=28,E(h,u,a);case 28:e.t2=e.sent,e.next=125;break;case 31:if(!(0,w.isFeatureLayer)(h)){e.next=37;break}return e.next=34,X(h,u,a);case 34:e.t3=e.sent,e.next=124;break;case 37:if(!(0,w.isGeoJSONLayer)(h)){e.next=43;break}return e.next=40,z(h,u,a);case 40:e.t4=e.sent,e.next=123;break;case 43:if(!(0,w.isGraphicsLayer)(h)){e.next=49;break}return e.next=46,K(h,u,a);case 46:e.t5=e.sent,e.next=122;break;case 49:if(!(0,w.isImageryLayer)(h)){e.next=53;break}e.t6=Y(h,a),e.next=121;break;case 53:if(!(0,w.isImageryTileLayer)(h)){e.next=59;break}return e.next=56,Z(h,u,a);case 56:e.t7=e.sent,e.next=120;break;case 59:if(!(0,w.isKMLLayer)(h)){e.next=65;break}return e.next=62,$(h,u,a);case 62:e.t8=e.sent,e.next=119;break;case 65:if(!(0,w.isMapImageLayer)(h)){e.next=69;break}e.t9=te(h,u,a),e.next=118;break;case 69:if(!(0,w.isMapNotesLayer)(h)){e.next=75;break}return e.next=72,re(u,a);case 72:e.t10=e.sent,e.next=117;break;case 75:if(!(0,w.isOpenStreetMapLayer)(h)){e.next=79;break}e.t11={type:"OpenStreetMap"},e.next=116;break;case 79:if(!(0,w.isStreamLayer)(h)){e.next=85;break}return e.next=82,oe(h,u,a);case 82:e.t12=e.sent,e.next=115;break;case 85:if(!(0,w.isTileLayer)(h)){e.next=89;break}e.t13=ue(h,a),e.next=114;break;case 89:if(!(0,w.isVectorTileLayer)(h)){e.next=95;break}return e.next=92,le(h,u,a);case 92:e.t14=e.sent,e.next=113;break;case 95:if(!(0,w.isWebTileLayer)(h)){e.next=99;break}e.t15=pe(h),e.next=112;break;case 99:if(!(0,w.isWMSLayer)(h)){e.next=103;break}e.t16=fe(h),e.next=111;break;case 103:if(!(0,w.isWMTSLayer)(h)){e.next=107;break}e.t17=ye(h),e.next=110;break;case 107:return e.next=109,ae(h,u,a);case 109:e.t17=e.sent;case 110:e.t16=e.t17;case 111:e.t15=e.t16;case 112:e.t14=e.t15;case 113:e.t13=e.t14;case 114:e.t12=e.t13;case 115:e.t11=e.t12;case 116:e.t10=e.t11;case 117:e.t9=e.t10;case 118:e.t8=e.t9;case 119:e.t7=e.t8;case 120:e.t6=e.t7;case 121:e.t5=e.t6;case 122:e.t4=e.t5;case 123:e.t3=e.t4;case 124:e.t2=e.t3;case 125:e.t1=e.t2;case 126:e.t0=e.t1;case 127:(g=e.t0)&&(Array.isArray(g)?(v=s).push.apply(v,i.toConsumableArray(g)):(g.id=h.id,g.title=a.legendLayerNameMap[h.id]||h.title,g.opacity=h.opacity,g.minScale=h.minScale||0,g.maxScale=h.maxScale||0,(0,w.isBlendLayer)(h)&&h.blendMode&&"normal"!==h.blendMode&&(g.blendMode=h.blendMode),s.push(g)));case 129:p=!0,e.next=7;break;case 132:e.next=138;break;case 134:e.prev=134,e.t18=e.catch(5),f=!0,y=e.t18;case 138:e.prev=138,e.prev=139,p||null==d.return||d.return();case 141:if(e.prev=141,!f){e.next=144;break}throw y;case 144:return e.finish(141);case 145:return e.finish(138);case 146:if(l&&s.forEach((function(e){e.minScale=0,e.maxScale=0})),!r.graphics||!r.graphics.length){e.next=151;break}return e.next=149,U(null,r.graphics,n,a);case 149:(x=e.sent)&&s.push(x);case 151:return e.abrupt("return",s);case 152:case"end":return e.stop()}}),t,null,[[5,134,138,146],[139,,141,145]])})))).apply(this,arguments)}function R(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}}function E(e,t,r){return F.apply(this,arguments)}function F(){return(F=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.legendEnabled&&a.legendLayers.push({id:r.id}),i=n.layerView,s=n.printTemplate,a.is11xService&&!i.filter){e.next=12;break}return e.t0=U,e.t1=r,e.next=8,xe(i);case 8:return e.t2=e.sent,e.t3=s,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 12:return e.abrupt("return",(u={type:"CSV"},r.write(u,{origin:"web-map"}),delete u.popupInfo,delete u.layerType,u.showLabels=s.showLabels&&r.labelsVisible,u));case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function U(e,t,r,n){return W.apply(this,arguments)}function W(){return(W=i.asyncToGenerator(e(o).mark((function t(r,n,a,i){var s,u,l,c,p,f,y,d,v,h,g,x,S,k,P,T,L,G,M,O,I,J,N,D,V,C,j,A,_,R,E,F;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,w.createPolygonLayer)(),l=(0,w.createPolylineLayer)(),c=(0,w.createPointLayer)(),p=(0,w.createMultipointLayer)(),(f=(0,w.createPointLayer)()).layerDefinition.name="textLayer",delete f.layerDefinition.drawingInfo,r&&("esri.layers.FeatureLayer"===r.declaredClass||"esri.layers.StreamLayer"===r.declaredClass?u.layerDefinition.name=l.layerDefinition.name=c.layerDefinition.name=p.layerDefinition.name=i.legendLayerNameMap[r.id]||r.get("arcgisProps.title")||r.title:"esri.layers.GraphicsLayer"===r.declaredClass&&(n=r.graphics.items),r.renderer&&(y=r.renderer.toJSON(),u.layerDefinition.drawingInfo.renderer=y,l.layerDefinition.drawingInfo.renderer=y,c.layerDefinition.drawingInfo.renderer=y,p.layerDefinition.drawingInfo.renderer=y),a.showLabels&&r.labelsVisible&&"function"==typeof r.write&&(h=null==(d=r.write({},{origin:"web-map"}).layerDefinition)||null==(v=d.drawingInfo)?void 0:v.labelingInfo)&&(s=!0,u.layerDefinition.drawingInfo.labelingInfo=h,l.layerDefinition.drawingInfo.labelingInfo=h,c.layerDefinition.drawingInfo.labelingInfo=h,p.layerDefinition.drawingInfo.labelingInfo=h)),null!=r&&r.renderer||s||(delete u.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo,delete c.layerDefinition.drawingInfo,delete p.layerDefinition.drawingInfo),x=null==r?void 0:r.fieldsIndex,S=null==r?void 0:r.renderer,!x){e.next=19;break}if(k=new Set,e.t0=s,!e.t0){e.next=12;break}return e.next=12,(0,m.collectLabelingFields)(k,r);case 12:if(e.t1=S&&"function"==typeof S.collectRequiredFields,!e.t1){e.next=16;break}return e.next=16,S.collectRequiredFields(k,x);case 16:g=Array.from(k),P=x.fields.map((function(e){return e.toJSON()})),u.layerDefinition.fields=P,l.layerDefinition.fields=P,c.layerDefinition.fields=P,p.layerDefinition.fields=P;case 19:T=n&&n.length,G=0;case 22:if(!(G<T)){e.next=55;break}if(!1!==(O=n[G]||n.getItemAt(G)).visible&&O.geometry){e.next=27;break}return e.abrupt("continue",52);case 27:if((L=O.toJSON()).hasOwnProperty("popupTemplate")&&delete L.popupTemplate,L.geometry&&L.geometry.z&&delete L.geometry.z,!L.symbol||!L.symbol.outline||"esriCLS"!==L.symbol.outline.type||i.is11xService){e.next=29;break}return e.abrupt("continue",52);case 29:if(!i.is11xService&&L.symbol&&L.symbol.outline&&L.symbol.outline.color&&L.symbol.outline.color[3]&&(L.symbol.outline.color[3]=255),I=r&&r.renderer&&("valueExpression"in r.renderer&&r.renderer.valueExpression||"hasVisualVariables"in r.renderer&&r.renderer.hasVisualVariables()),L.symbol||!r||!r.renderer||!I||i.is11xService){e.next=39;break}return J=r.renderer,e.next=35,J.getSymbolAsync(O);case 35:if(N=e.sent){e.next=38;break}return e.abrupt("continue",52);case 38:L.symbol=N.toJSON(),"hasVisualVariables"in J&&J.hasVisualVariables()&&(0,w.applyVisualVariables)(L.symbol,{renderer:J,graphic:O,symbol:N});case 39:if(e.t2=L.symbol,!e.t2){e.next=49;break}if(L.symbol.angle||delete L.symbol.angle,!ke(L.symbol)){e.next=48;break}return e.next=45,me(L.symbol,i);case 45:L.symbol=e.sent,e.next=49;break;case 48:L.symbol.text&&delete L.attributes;case 49:if(e.t2,a&&a.forceFeatureAttributes||null==(M=g)||!M.length){e.next=51;break}D={},g.forEach((function(e){L.attributes&&L.attributes.hasOwnProperty(e)&&(D[e]=L.attributes[e])})),L.attributes=D;case 51:"polygon"===O.geometry.type?u.featureSet.features.push(L):"polyline"===O.geometry.type?l.featureSet.features.push(L):"point"===O.geometry.type?L.symbol&&L.symbol.text?f.featureSet.features.push(L):c.featureSet.features.push(L):"multipoint"===O.geometry.type?p.featureSet.features.push(L):"extent"===O.geometry.type&&(L.geometry=b.default.fromExtent(O.geometry).toJSON(),u.featureSet.features.push(L));case 52:G++,e.next=22;break;case 55:V=[u,l,p,c,f].filter((function(e){return e.featureSet.features.length>0})),C=!0,j=!1,A=void 0,e.prev=57,_=V[Symbol.iterator]();case 59:if(C=(R=_.next()).done){e.next=71;break}if(E=R.value,!(F=E.featureSet.features.every((function(e){return e.symbol})))||a&&a.forceFeatureAttributes||E.featureSet.features.forEach((function(e){delete e.attributes})),F&&delete E.layerDefinition.drawingInfo,e.t3=E.layerDefinition.drawingInfo&&E.layerDefinition.drawingInfo.renderer,!e.t3){e.next=68;break}return e.next=68,he(E.layerDefinition.drawingInfo.renderer,i);case 68:C=!0,e.next=59;break;case 71:e.next=77;break;case 73:e.prev=73,e.t4=e.catch(57),j=!0,A=e.t4;case 77:e.prev=77,e.prev=78,C||null==_.return||_.return();case 80:if(e.prev=80,!j){e.next=83;break}throw A;case 83:return e.finish(80);case 84:return e.finish(77);case 85:return e.abrupt("return",V.length?{featureCollection:{layers:V},showLabels:s}:null);case 86:case"end":return e.stop()}}),t,null,[[57,73,77,85],[78,,80,84]])})))).apply(this,arguments)}function X(e,t,r){return q.apply(this,arguments)}function q(){return(q=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u,l,c,p,f,y,d,b,m,h,g,x,S,w,k;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.renderer,c=parseFloat(a.cimVersion),!(r.featureReduction&&(!a.is11xService||c<2.9)||"dot-density"===(null==l?void 0:l.type)&&(!a.is11xService||c<2.6))){e.next=5;break}return e.abrupt("return",ae(r,n,a));case 5:if(r.legendEnabled&&a.legendLayers.push({id:r.id}),p=n.layerView,f=n.printTemplate,y=n.view,d=l&&("valueExpression"in l&&l.valueExpression||"hasVisualVariables"in l&&l.hasVisualVariables()),b="feature-layer"!==(null==(i=r.source)?void 0:i.type)&&"ogc-feature"!==(null==(s=r.source)?void 0:s.type),!(!a.is11xService&&d||p.filter||b)&&l&&(!("field"in l)||null==l.field||"string"==typeof l.field&&r.getField(l.field))){e.next=16;break}return e.next=10,xe(p);case 10:return m=e.sent,e.next=13,U(r,m,f,a);case 13:u=e.sent,e.next=31;break;case 16:if((u={id:(k=r.write()).id,title:k.title,opacity:k.opacity,minScale:k.minScale,maxScale:k.maxScale,url:k.url,layerType:k.layerType,customParameters:k.customParameters,layerDefinition:k.layerDefinition}).showLabels=f.showLabels&&r.labelsVisible,de(u,r),e.t0=null!=(h=u.layerDefinition)&&null!=(g=h.drawingInfo)&&g.renderer,!e.t0){e.next=27;break}return delete u.layerDefinition.minScale,delete u.layerDefinition.maxScale,e.next=26,he(u.layerDefinition.drawingInfo.renderer,a);case 26:e.t0=(e.sent,"visualVariables"in l&&l.visualVariables&&l.visualVariables[0]);case 27:if(!e.t0){e.next=29;break}"size"===(x=l.visualVariables[0]).type&&x.maxSize&&"number"!=typeof x.maxSize&&x.minSize&&"number"!=typeof x.minSize&&(S=(0,v.getSizeRangeAtScale)(x,y.scale),u.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=S.minSize,u.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=S.maxSize);case 29:(w=(0,T.getFloorFilterClause)(p))&&(u.layerDefinition||(u.layerDefinition={}),u.layerDefinition.definitionExpression=u.layerDefinition.definitionExpression?"(".concat(u.layerDefinition.definitionExpression,") AND (").concat(w,")"):w);case 31:return e.abrupt("return",u);case 33:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function z(e,t,r){return B.apply(this,arguments)}function B(){return(B=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.layerView,s=n.printTemplate,r.legendEnabled&&a.legendLayers.push({id:r.id}),e.t0=U,e.t1=r,e.next=6,xe(i);case 6:return e.t2=e.sent,e.t3=s,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function K(e,t,r){return H.apply(this,arguments)}function H(){return(H=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.printTemplate,e.abrupt("return",U(r,null,i,a));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Y(e,t){e.legendEnabled&&t.legendLayers.push({id:e.id});var r,n={layerType:(r=e.write()).layerType,customParameters:r.customParameters};if(n.bandIds=e.bandIds,n.compressionQuality=e.compressionQuality,n.format=e.format,n.interpolation=e.interpolation,(e.mosaicRule||e.definitionExpression)&&(n.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(t.is11xService)e.renderingRule&&(n.renderingRule=e.renderingRule.toJSON()),e.renderer&&(n.layerDefinition=n.layerDefinition||{},n.layerDefinition.drawingInfo=n.layerDefinition.drawingInfo||{},n.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{var a=e.exportImageServiceParameters.combineRendererWithRenderingRule();a&&(n.renderingRule=a.toJSON())}return de(n,e),n}function Z(e,t,r){return Q.apply(this,arguments)}function Q(){return(Q=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("flow"!==(null==(i=r.renderer)?void 0:i.type)){e.next=3;break}return e.abrupt("return",ae(r,n,a));case 3:return r.legendEnabled&&a.legendLayers.push({id:r.id}),s={bandIds:(u=r.write()||{}).bandIds,customParameters:u.customParameters,interpolation:u.interpolation,layerDefinition:u.layerDefinition},e.abrupt("return",(s.layerType="ArcGISImageServiceLayer",de(s,r),s));case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $(e,t,r){return ee.apply(this,arguments)}function ee(){return(ee=i.asyncToGenerator(e(o).mark((function t(r,n,a){var s,u,l,c,p,f;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.printTemplate,!a.is11xService){e.next=4;break}return u={type:"kml"},e.abrupt("return",(r.write(u,{origin:"web-map"}),delete u.layerType,u.url=(0,d.normalize)(r.url),u));case 4:return l=[],(c=n.layerView).allVisibleMapImages.forEach((function(e,t){var n={id:"".concat(r.id,"_image").concat(t),type:"image",title:r.id,minScale:r.minScale||0,maxScale:r.maxScale||0,opacity:r.opacity,extent:e.extent};"data:image/png;base64,"===e.href.substr(0,22)?n.imageData=e.href.substr(22):n.url=e.href,l.push(n)})),p=i.toConsumableArray(c.allVisiblePoints.items).concat(i.toConsumableArray(c.allVisiblePolylines.items),i.toConsumableArray(c.allVisiblePolygons.items)),e.t0=i,e.t1={id:r.id},e.next=11,U(null,p,s,a);case 11:return e.t2=e.sent,f=e.t0.objectSpread.call(e.t0,e.t1,e.t2),e.abrupt("return",(l.push(f),l));case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function te(e,t,r){var n,a,i=t.view,o={id:e.id,subLayerIds:[]},s=[],u=i.scale,l=function(e){var t=0===u,r=0===e.minScale||u<=e.minScale,n=0===e.maxScale||u>=e.maxScale;if(e.visible&&(t||r&&n))if(e.sublayers)e.sublayers.forEach(l);else{var a=e.toExportImageJSON(),i={id:e.id,name:e.title,layerDefinition:{drawingInfo:a.drawingInfo,definitionExpression:a.definitionExpression,source:a.source}};s.unshift(i),o.subLayerIds.push(e.id)}};return e.sublayers&&e.sublayers.forEach(l),s.length&&(s=s.map((function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}})),(n={layerType:(a=e.write()).layerType,customParameters:a.customParameters}).layers=s,n.visibleLayers=e.capabilities.exportMap.supportsDynamicLayers?void 0:o.subLayerIds,de(n,e),e.legendEnabled&&r.legendLayers.push(o)),n}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=i.asyncToGenerator(e(o).mark((function t(r,n){var a,s,u,l,c,p,y,d,b,m,v,h,g,x,S,w,k,P,T,L;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.layerView,s=r.printTemplate,u=[],l=a.layer,c=!0,p=!1,y=void 0,d=!0,b=!1,m=void 0,!(0,f.isSome)(l.featureCollections)){e.next=32;break}e.prev=4,v=l.featureCollections[Symbol.iterator]();case 6:if(c=(h=v.next()).done){e.next=16;break}return g=h.value,e.next=11,U(g,g.source,s,n);case 11:(S=e.sent)&&(x=u).push.apply(x,i.toConsumableArray(S.featureCollection.layers));case 13:c=!0,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),p=!0,y=e.t0;case 22:e.prev=22,e.prev=23,c||null==v.return||v.return();case 25:if(e.prev=25,!p){e.next=28;break}throw y;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=59;break;case 32:if(!(0,f.isSome)(l.sublayers)){e.next=59;break}e.prev=33,w=l.sublayers[Symbol.iterator]();case 35:if(d=(k=w.next()).done){e.next=45;break}return P=k.value,e.next=40,U(null,P.graphics,s,n);case 40:(L=e.sent)&&(T=u).push.apply(T,i.toConsumableArray(L.featureCollection.layers));case 42:d=!0,e.next=35;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(33),b=!0,m=e.t1;case 51:e.prev=51,e.prev=52,d||null==w.return||w.return();case 54:if(e.prev=54,!b){e.next=57;break}throw m;case 57:return e.finish(54);case 58:return e.finish(51);case 59:return e.abrupt("return",{featureCollection:{layers:u}});case 60:case"end":return e.stop()}}),t,null,[[4,18,22,30],[23,,25,29],[33,47,51,59],[52,,54,58]])})))).apply(this,arguments)}function ae(e,t,r){return ie.apply(this,arguments)}function ie(){return(ie=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u,l,c,p,f,b,m,v,h,g,x;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.printTemplate,s=n.view,u={type:"image"},l={format:"png",ignoreBackground:!0,layers:[r],rotation:0},c=a.ssExtent||s.extent.clone(),p=96,f=!0,b=!0,i.exportOptions&&((m=i.exportOptions).dpi>0&&(p=m.dpi),m.width>0&&(f=m.width%2==s.width%2),m.height>0&&(b=m.height%2==s.height%2)),"map-only"!==i.layout||!i.scalePreserved||i.outScale&&i.outScale!==s.scale||96!==p||f&&b||(l.area={x:0,y:0,width:s.width,height:s.height},f||(l.area.width-=1),b||(l.area.height-=1),a.ssExtent)||(v=s.toMap((0,y.createScreenPoint)(l.area.width,l.area.height)),c.ymin=v.y,c.xmax=v.x,a.ssExtent=c),u.extent=c.clone()._normalize(!0).toJSON(),e.next=8,s.takeScreenshot(l);case 8:return h=e.sent,g=(0,d.dataComponents)(h.dataUrl),x=g.data,e.abrupt("return",(u.imageData=x,u));case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function oe(e,t,r){return se.apply(this,arguments)}function se(){return(se=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.layerView,s=n.printTemplate,r.legendEnabled&&a.legendLayers.push({id:r.id}),e.t0=U,e.t1=r,e.next=6,xe(i);case 6:return e.t2=e.sent,e.t3=s,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ue(e,t){e.legendEnabled&&t.legendLayers.push({id:e.id});var r,n={layerType:(r=e.write()).layerType,customParameters:r.customParameters};return de(n,e),n}function le(e,t,r){return ce.apply(this,arguments)}function ce(){return(ce=i.asyncToGenerator(e(o).mark((function t(r,n,a){var i,s,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.is11xService&&r.serviceUrl&&r.styleUrl)){e.next=5;break}if(i=be(r.styleUrl,r.apiKey),s=be(r.serviceUrl,r.apiKey),(i||s)&&"2.1.0"===a.cimVersion){e.next=5;break}return u={type:"VectorTileLayer"},e.abrupt("return",(u.styleUrl=(0,d.normalize)(r.styleUrl),u.token=i,s!==i&&(u.additionalTokens=[{url:r.serviceUrl,token:s}]),u));case 5:return e.abrupt("return",ae(r,n,a));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function pe(e){var t={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(t.subDomains=e.subDomains),t}function fe(e){var t,r=[],n=function(e){e.visible&&(e.sublayers?e.sublayers.forEach(n):e.name&&r.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(n),r.length&&(t={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:r,url:(0,d.normalize)(e.url),version:e.version}),t}function ye(e){var t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:(0,d.normalize)(e.url)}}function de(e,t){t.url&&(e.url=(0,d.normalize)(e.url||t.url),e.token=be(e.url,t.apiKey))}function be(e,t){var r,n;return(0,P.supportsApiKey)(e)&&(t||s.default.apiKey)?t||s.default.apiKey:null==(r=u.id)||null==(n=r.findCredential(e))?void 0:n.token}function me(e,t){return ve.apply(this,arguments)}function ve(){return(ve=i.asyncToGenerator(e(o).mark((function t(r,n){var a,i,s,u,c,p,f,d,b,m,v,h,g,x,S;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.canvas||(n.canvas=document.createElement("canvas")),a=1024,n.canvas.width=a,n.canvas.height=a,i=n.canvas.getContext("2d"),!r.path){e.next=22;break}if((p=new Path2D(r.path)).closePath(),i.fillStyle=Array.isArray(r.color)?"rgba(".concat(r.color[0],",").concat(r.color[1],",").concat(r.color[2],",").concat(r.color[3]/255,")"):"rgb(0,0,0)",i.fill(p),f=(0,w.getContextBoundingBox)(i)){e.next=12;break}return e.abrupt("return",null);case 12:i.clearRect(0,0,a,a),d=(0,y.pt2px)(r.size)/Math.max(f.width,f.height),i.scale(d,d),m=(b=a/d)/2-f.width/2-f.x,v=b/2-f.height/2-f.y,i.translate(m,v),Array.isArray(r.color)&&i.fill(p),null!=(c=r.outline)&&c.width&&Array.isArray(r.outline.color)&&(h=r.outline,i.lineWidth=(0,y.pt2px)(h.width)/d,i.lineJoin="round",i.strokeStyle="rgba(".concat(h.color[0],",").concat(h.color[1],",").concat(h.color[2],",").concat(h.color[3]/255,")"),i.stroke(p),f.width+=i.lineWidth,f.height+=i.lineWidth),f.width*=d,f.height*=d,g=i.getImageData(a/2-f.width/2,a/2-f.height/2,Math.ceil(f.width),Math.ceil(f.height)),s=g.width,u=g.height,i.canvas.width=s,i.canvas.height=u,i.putImageData(g,0,0),e.next=27;break;case 22:return x="image/svg+xml"===r.contentType?"data:image/svg+xml;base64,"+r.imageData:r.url,e.next=25,(0,l.default)(x,{responseType:"image"});case 25:S=e.sent.data,s=(0,y.pt2px)(r.width),u=(0,y.pt2px)(r.height),i.canvas.width=s,i.canvas.height=u,i.drawImage(S,0,0,i.canvas.width,i.canvas.height);case 27:return e.abrupt("return",{type:"esriPMS",imageData:i.canvas.toDataURL("image/png").substr(22),angle:r.angle,contentType:"image/png",height:(0,y.px2pt)(u),width:(0,y.px2pt)(s),xoffset:r.xoffset,yoffset:r.yoffset});case 28:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function he(e,t){return ge.apply(this,arguments)}function ge(){return(ge=i.asyncToGenerator(e(o).mark((function t(r,n){var a,i,s,u,l,c,p,f;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("simple"!==(a=r.type)||!ke(r.symbol)){e.next=7;break}return e.next=4,me(r.symbol,n);case 4:r.symbol=e.sent,e.next=42;break;case 7:if("uniqueValue"!==a&&"classBreaks"!==a){e.next=42;break}if(e.t0=ke(r.defaultSymbol),!e.t0){e.next=13;break}return e.next=12,me(r.defaultSymbol,n);case 12:r.defaultSymbol=e.sent;case 13:if(i=r["uniqueValue"===a?"uniqueValueInfos":"classBreakInfos"],s=!0,u=!1,l=void 0,!i){e.next=42;break}e.prev=16,c=i[Symbol.iterator]();case 18:if(s=(p=c.next()).done){e.next=28;break}if(f=p.value,e.t1=ke(f.symbol),!e.t1){e.next=25;break}return e.next=24,me(f.symbol,n);case 24:f.symbol=e.sent;case 25:s=!0,e.next=18;break;case 28:e.next=34;break;case 30:e.prev=30,e.t2=e.catch(16),u=!0,l=e.t2;case 34:e.prev=34,e.prev=35,s||null==c.return||c.return();case 37:if(e.prev=37,!u){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(34);case 42:case"end":return e.stop()}}),t,null,[[16,30,34,42],[35,,37,41]])})))).apply(this,arguments)}function xe(e){return Se.apply(this,arguments)}function Se(){return(Se=i.asyncToGenerator(e(o).mark((function t(r){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.queryFeatures(r.createQuery()).then((function(e){return e.features})));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function we(e){return e.gpMetadata&&e.gpMetadata.executionType?M.fromJSON(e.gpMetadata.executionType):"sync"}function ke(e){return e&&(e.path||"image/svg+xml"===e.contentType||e.url&&e.url.endsWith(".svg"))}})),r.register("2rC15",(function(n,a){t(n.exports,"execute",(function(){return c}));var i=r("8TSCy"),o=r("2TvXO"),s=r("h2N55"),u=r("hmW52"),l=r("gnh78");function c(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=i.asyncToGenerator(e(o).mark((function t(r,n,a,i){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(a=s.default.from(a||{}),(0,u.constructRequest)(r,"execute",a,n,i).then((function(e){var t=e.data.results||[],r=e.data.messages||[];return{results:t.map(u.decode),messages:r.map((function(e){return l.default.fromJSON(e)}))}}))));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}})),r.register("h2N55",(function(e,n){t(e.exports,"default",(function(){return y}));var a=r("8TSCy"),i=r("7eJjO"),o=r("jymfC"),s=r("iho5X");r("lNwWH"),r("2VlWd");var u=r("iJAIC"),l=r("fcwIv"),c=r("gINRd"),p=r("j40xv"),f=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(){var e;return a.classCallCheck(this,r),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).outSpatialReference=null,e.processExtent=null,e.processSpatialReference=null,e.returnFeatureCollection=!1,e.returnM=!1,e.returnZ=!1,a.possibleConstructorReturn(e)}return r}(o.default);(0,i._)([(0,s.property)({type:p.default})],f.prototype,"outSpatialReference",void 0),(0,i._)([(0,s.property)({type:c.default})],f.prototype,"processExtent",void 0),(0,i._)([(0,s.property)({type:p.default})],f.prototype,"processSpatialReference",void 0),(0,i._)([(0,s.property)({nonNullable:!0})],f.prototype,"returnFeatureCollection",void 0),(0,i._)([(0,s.property)({nonNullable:!0})],f.prototype,"returnM",void 0),(0,i._)([(0,s.property)({nonNullable:!0})],f.prototype,"returnZ",void 0),(f=(0,i._)([(0,l.subclass)("esri.rest.geoprocessor.GPOptions")],f)).from=(0,u.ensureType)(f);var y=f})),r.register("hmW52",(function(n,a){t(n.exports,"constructRequest",(function(){return v})),t(n.exports,"gpEncode",(function(){return S})),t(n.exports,"decode",(function(){return x}));var i=r("8TSCy"),o=r("2TvXO"),s=r("9pNSx");r("2VlWd");var u=r("5On35"),l=r("buMuJ"),c=r("2TiHl"),p=r("dsJ7q"),f=r("g1V0j"),y=r("f4h86"),d=r("i5XEe"),b=r("lf4GX"),m=r("l4IcK");function v(e,t,r,n,a){return h.apply(this,arguments)}function h(){return(h=i.asyncToGenerator(e(o).mark((function t(r,n,a,l,c){var f,y,d;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},y={},d=[],e.abrupt("return",(g(l,d,f),(0,u.normalizeCentralMeridian)(d).then((function(e){var t=a.outSpatialReference,o=a.processExtent,u=a.processSpatialReference,d=a.returnFeatureCollection,b=a.returnM,m=a.returnZ,v=(0,p.parseUrl)(r).path;for(var h in f){var g=f[h];y[h]=e.slice(g[0],g[1])}var x=t?t.wkid||t:null,w=u?u.wkid||u:null,k="execute"===n?{returnFeatureCollection:d||void 0,returnM:b||void 0,returnZ:m||void 0}:null,P=S(i.objectSpread({},o?{context:{extent:o,outSR:x,processSR:w}}:{"env:outSR":x,"env:processSR":w},l,k,{f:"json"}),null,y),T=i.objectSpread({},c,{query:P});return(0,s.default)("".concat(v,"/").concat(n),T)}))));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(e,t,r){for(var n in e){var a=e[n];if(a&&"object"==typeof a&&a instanceof y.default){var i=a.features;r[n]=[t.length,t.length+i.length],i.forEach((function(e){t.push(e.geometry)}))}}}function x(e){var t=e.dataType,r=b.default.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return r;case"GPDate":r.value=new Date(r.value);break;case"GPDataFile":r.value=f.default.fromJSON(r.value);break;case"GPLinearUnit":r.value=d.default.fromJSON(r.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":var n=e.value.url;r.value=n?f.default.fromJSON(r.value):y.default.fromJSON(r.value);break;case"GPRasterData":case"GPRasterDataLayer":var a=e.value.mapImage;r.value=a?c.default.fromJSON(a):m.default.fromJSON(r.value);break;case"GPField":r.value=l.default.fromJSON(r.value);break;case"GPMultiValue:GPDate":var i=r.value;r.value=i.map((function(e){return new Date(e)}));break;case"GPMultiValue:GPDataFile":r.value=r.value.map((function(e){return f.default.fromJSON(e)}));break;case"GPMultiValue:GPLinearUnit":r.value=r.value.map((function(e){return d.default.fromJSON(e)}));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":r.value=r.value.map((function(e){return y.default.fromJSON(e)}));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":r.value=r.value.map((function(e){return e?c.default.fromJSON(e):m.default.fromJSON(r.value)}));break;case"GPMultiValue:GPField":r.value=r.value.map((function(e){return l.default.fromJSON(e)}))}return r}function S(e,t,r){for(var n in e){var a=e[n];Array.isArray(a)?e[n]=JSON.stringify(a.map((function(e){return S({item:e},!0).item}))):a instanceof Date&&(e[n]=a.getTime())}return(0,p.encode)(e,t,r)}})),r.register("2TiHl",(function(e,n){t(e.exports,"default",(function(){return p}));var a=r("8TSCy"),i=r("7eJjO"),o=r("1XAcN"),s=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var u=r("fcwIv"),l=r("gINRd"),c=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(){var e;return a.classCallCheck(this,r),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).extent=null,e.height=null,e.href=null,e.opacity=1,e.rotation=0,e.scale=null,e.visible=!0,e.width=null,a.possibleConstructorReturn(e)}return r}(o.JSONSupport);(0,i._)([(0,s.property)({type:l.default})],c.prototype,"extent",void 0),(0,i._)([(0,s.property)()],c.prototype,"height",void 0),(0,i._)([(0,s.property)()],c.prototype,"href",void 0),(0,i._)([(0,s.property)()],c.prototype,"opacity",void 0),(0,i._)([(0,s.property)()],c.prototype,"rotation",void 0),(0,i._)([(0,s.property)()],c.prototype,"scale",void 0),(0,i._)([(0,s.property)()],c.prototype,"visible",void 0),(0,i._)([(0,s.property)()],c.prototype,"width",void 0);var p=c=(0,i._)([(0,u.subclass)("esri.layer.support.MapImage")],c)})),r.register("g1V0j",(function(e,n){t(e.exports,"default",(function(){return c}));var a=r("8TSCy"),i=r("7eJjO"),o=r("1XAcN"),s=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var u=r("fcwIv"),l=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).itemId=null,n.url=null,a.possibleConstructorReturn(n)}return r}(o.JSONSupport);(0,i._)([(0,s.property)({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],l.prototype,"itemId",void 0),(0,i._)([(0,s.property)({type:String,json:{write:!0}})],l.prototype,"url",void 0);var c=l=(0,i._)([(0,u.subclass)("esri.rest.support.DataFile")],l)})),r.register("i5XEe",(function(e,n){t(e.exports,"default",(function(){return f}));var a=r("8TSCy"),i=r("7eJjO"),o=r("79ASa"),s=r("1XAcN"),u=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var l=r("fcwIv"),c=new(0,o.JSONMap)({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1}),p=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).distance=0,n.units=null,a.possibleConstructorReturn(n)}return r}(s.JSONSupport);(0,i._)([(0,u.property)({json:{write:!0}})],p.prototype,"distance",void 0),(0,i._)([(0,u.property)({json:{read:c.read,write:c.write}})],p.prototype,"units",void 0);var f=p=(0,i._)([(0,l.subclass)("esri.rest.support.LinearUnit")],p)})),r.register("lf4GX",(function(e,n){t(e.exports,"default",(function(){return f}));var a=r("8TSCy"),i=r("7eJjO"),o=r("79ASa"),s=r("1XAcN"),u=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var l=r("fcwIv"),c=new(0,o.JSONMap)({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"}),p=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).dataType=null,n.value=null,a.possibleConstructorReturn(n)}return r}(s.JSONSupport);(0,i._)([(0,u.property)({json:{read:c.read,write:c.write}})],p.prototype,"dataType",void 0),(0,i._)([(0,u.property)()],p.prototype,"value",void 0);var f=p=(0,i._)([(0,l.subclass)("esri.rest.support.ParameterValue")],p)})),r.register("l4IcK",(function(e,n){t(e.exports,"default",(function(){return c}));var a=r("8TSCy"),i=r("7eJjO"),o=r("1XAcN"),s=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var u=r("fcwIv"),l=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).format=null,n.itemId=null,n.url=null,a.possibleConstructorReturn(n)}return r}(o.JSONSupport);(0,i._)([(0,s.property)()],l.prototype,"format",void 0),(0,i._)([(0,s.property)({json:{read:{source:"itemID"},write:{target:"itemID"}}})],l.prototype,"itemId",void 0),(0,i._)([(0,s.property)()],l.prototype,"url",void 0);var c=l=(0,i._)([(0,u.subclass)("esri.rest.support.RasterData")],l)})),r.register("gnh78",(function(e,n){t(e.exports,"default",(function(){return f}));var a=r("8TSCy"),i=r("7eJjO"),o=r("79ASa"),s=r("1XAcN"),u=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var l=r("fcwIv"),c=new(0,o.JSONMap)({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),p=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).description=null,n.type=null,a.possibleConstructorReturn(n)}return r}(s.JSONSupport);(0,i._)([(0,u.property)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,i._)([(0,u.property)({type:String,json:{read:c.read,write:c.write}})],p.prototype,"type",void 0);var f=p=(0,i._)([(0,l.subclass)("esri.rest.support.GPMessage")],p)})),r.register("3uX6S",(function(n,a){t(n.exports,"submitJob",(function(){return c}));var i=r("8TSCy"),o=r("2TvXO"),s=r("h2N55"),u=r("hmW52"),l=r("eAlQ0");function c(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=i.asyncToGenerator(e(o).mark((function t(r,n,a,i){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(a=s.default.from(a||{}),(0,u.constructRequest)(r,"submitJob",a,n,i).then((function(e){var t=l.default.fromJSON(e.data);return t.sourceUrl=r,t}))));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}})),r.register("eAlQ0",(function(n,a){t(n.exports,"default",(function(){return S}));var i=r("8TSCy"),o=r("2TvXO"),s=r("7eJjO"),u=r("9pNSx");r("2VlWd");var l=r("79ASa"),c=r("1XAcN"),p=r("10vEZ"),f=r("iho5X");r("lNwWH"),r("iJAIC");var y,d=r("fcwIv"),b=r("dsJ7q"),m=r("h2N55"),v=r("hmW52"),h=r("gnh78"),g=new(0,l.JSONMap)({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"}),x=y=function(t){"use strict";i.inherits(a,t);var n=i.createSuper(a);function a(e){var t;return i.classCallCheck(this,a),(t=n.call(this,e)).jobId=null,t.jobStatus=null,t.messages=null,t.requestOptions=null,t.sourceUrl=null,t._timer=null,i.possibleConstructorReturn(t)}return i.createClass(a,[{key:"cancelJob",value:function(e){var t=this,r=this.jobId,n=this.sourceUrl,a=(0,b.parseUrl)(n).path,o=i.objectSpread({},this.requestOptions,e,{query:{f:"json"}});return this._clearTimer(),(0,u.default)("".concat(a,"/jobs/").concat(r,"/cancel"),o).then((function(e){var r=y.fromJSON(e.data);return t.messages=r.messages,t.jobStatus=r.jobStatus,t}))}},{key:"destroy",value:function(){clearInterval(this._timer)}},{key:"checkJobStatus",value:function(e){var t=this,r=(0,b.parseUrl)(this.sourceUrl).path,n=i.objectSpread({},this.requestOptions,e,{query:{f:"json"}}),a="".concat(r,"/jobs/").concat(this.jobId);return(0,u.default)(a,n).then((function(e){var r=e.data,n=y.fromJSON(r);return t.messages=n.messages,t.jobStatus=n.jobStatus,t}))}},{key:"fetchResultData",value:function(e,t,r){var n=(t=m.default.from(t||{})).returnFeatureCollection,a=t.returnM,o=t.returnZ,s=t.outSpatialReference,l=(0,b.parseUrl)(this.sourceUrl).path,c=(0,v.gpEncode)({returnFeatureCollection:n,returnM:a,returnZ:o,outSR:s,returnType:"data",f:"json"},null),p=i.objectSpread({},this.requestOptions,r,{query:c}),f="".concat(l,"/jobs/").concat(this.jobId,"/results/").concat(e);return(0,u.default)(f,p).then((function(e){return(0,v.decode)(e.data)}))}},{key:"fetchResultImage",value:function(e,t,r){var n=(0,b.parseUrl)(this.sourceUrl).path,a=i.objectSpread({},t.toJSON(),{f:"json"}),o=(0,v.gpEncode)(a),s=i.objectSpread({},this.requestOptions,r,{query:o}),l="".concat(n,"/jobs/").concat(this.jobId,"/results/").concat(e);return(0,u.default)(l,s).then((function(e){return(0,v.decode)(e.data)}))}},{key:"fetchResultMapImageLayer",value:function(){var t=this;return i.asyncToGenerator(e(o).mark((function n(){var a,i,s,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,b.parseUrl)(t.sourceUrl),i=a.path,s=i.indexOf("/GPServer/"),u="".concat(i.substring(0,s),"/MapServer/jobs/").concat(t.jobId),e.next=3,r("iY37K");case 3:return e.t0=e.sent.default,e.t1={url:u},e.abrupt("return",new e.t0(e.t1));case 6:case"end":return e.stop()}}),n)})))()}},{key:"waitForJobCompletion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this;return i.asyncToGenerator(e(o).mark((function n(){var a,i,s,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.interval,i=void 0===a?1e3:a,s=t.signal,u=t.statusCallback,e.abrupt("return",new Promise((function(e,t){(0,p.onAbort)(s,(function(){r._clearTimer(),t((0,p.createAbortError)())})),r._clearTimer();var n=setInterval((function(){r._timer||t((0,p.createAbortError)()),r.checkJobStatus(r.requestOptions).then((function(n){var a=n.jobStatus;switch(r.jobStatus=a,a){case"job-succeeded":r._clearTimer(),e(r);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":u&&u(r);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":r._clearTimer(),t(r)}}))}),i);r._timer=n})));case 2:case"end":return e.stop()}}),n)})))()}},{key:"_clearTimer",value:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}}]),a}(c.JSONSupport);(0,s._)([(0,f.property)()],x.prototype,"jobId",void 0),(0,s._)([(0,f.property)({json:{read:g.read}})],x.prototype,"jobStatus",void 0),(0,s._)([(0,f.property)({type:[h.default]})],x.prototype,"messages",void 0),(0,s._)([(0,f.property)()],x.prototype,"requestOptions",void 0),(0,s._)([(0,f.property)({json:{write:!0}})],x.prototype,"sourceUrl",void 0);var S=x=y=(0,s._)([(0,d.subclass)("esri.rest.support.JobInfo")],x)})),r.register("iY37K",(function(e,t){e.exports=r("4WKyX")(r("aNJCr").getBundleURL("e9ULP")+r("iE7OH").resolve("aWe0x")).then((function(){return r("2CGtF")}))})),r.register("giOvG",(function(e,n){t(e.exports,"toJSON",(function(){return i}));var a=new(0,r("79ASa").JSONMap)({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),i=(a.fromJSON.bind(a),a.toJSON.bind(a))})),r.register("jcYl8",(function(e,n){t(e.exports,"toJSON",(function(){return i}));var a=new(0,r("79ASa").JSONMap)({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),i=(a.fromJSON.bind(a),a.toJSON.bind(a))})),r.register("2FR5S",(function(e,n){t(e.exports,"applyVisualVariables",(function(){return u})),t(e.exports,"createMultipointLayer",(function(){return l})),t(e.exports,"createPolygonLayer",(function(){return c})),t(e.exports,"createPointLayer",(function(){return p})),t(e.exports,"createPolylineLayer",(function(){return f})),t(e.exports,"getContextBoundingBox",(function(){return y})),t(e.exports,"getVisibleLayerViews",(function(){return d})),t(e.exports,"isBingMapsLayer",(function(){return b})),t(e.exports,"isBlendLayer",(function(){return m})),t(e.exports,"isCSVLayer",(function(){return v})),t(e.exports,"isFeatureLayer",(function(){return h})),t(e.exports,"isGeoJSONLayer",(function(){return g})),t(e.exports,"isGraphicsLayer",(function(){return x})),t(e.exports,"isGroupLayer",(function(){return S})),t(e.exports,"isImageryLayer",(function(){return w})),t(e.exports,"isImageryTileLayer",(function(){return k})),t(e.exports,"isKMLLayer",(function(){return P})),t(e.exports,"isMapImageLayer",(function(){return T})),t(e.exports,"isMapNotesLayer",(function(){return L})),t(e.exports,"isOpenStreetMapLayer",(function(){return G})),t(e.exports,"isScreenshotRequired",(function(){return M})),t(e.exports,"isStreamLayer",(function(){return O})),t(e.exports,"isTileLayer",(function(){return I})),t(e.exports,"isVectorTileLayer",(function(){return J})),t(e.exports,"isWebTileLayer",(function(){return N})),t(e.exports,"isWMSLayer",(function(){return D})),t(e.exports,"isWMTSLayer",(function(){return V}));var a=r("iXlXu"),i=r("fO9V6"),o="simple-marker",s="simple-line";function u(e,t){var r=t.graphic,n=t.renderer,u=t.symbol,l=u.type;if("text"!==l&&"shield-label-symbol"!==l&&"visualVariables"in n&&n.visualVariables){var c=n.getVisualVariablesForType("size"),p=n.getVisualVariablesForType("color"),f=n.getVisualVariablesForType("opacity"),y=n.getVisualVariablesForType("rotation"),d=c[0],b=p[0],m=f[0],v=y[0];if(d){var h=l===o?u.style:null,g=(0,i.getSize)(d,r,{shape:h});null!=g&&(l===o?e.size=(0,a.px2pt)(g):"picture-marker"===l?(e.width=(0,a.px2pt)(g),e.height=(0,a.px2pt)(g)):l===s?e.width=(0,a.px2pt)(g):e.outline&&(e.outline.width=(0,a.px2pt)(g)))}if(b){var x=(0,i.getColor)(b,r);(x&&l===o||l===s||"simple-fill"===l)&&(e.color=x?x.toJSON():void 0)}if(m){var S=(0,i.getOpacity)(m,r);null!=S&&e.color&&(e.color[3]=Math.round(255*S))}v&&(e.angle=-(0,i.getRotationAngle)(n,r))}}function l(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}}function c(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}}function p(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}}function f(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}}function y(e){var t,r,n,a,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,u=e.canvas.width,l=e.canvas.height,c=e.getImageData(0,0,u,l).data;e:for(r=l;r--;)for(t=u;t--;)if(c[4*(u*r+t)+3]>s){o=r;break e}if(!o)return null;e:for(t=u;t--;)for(r=o+1;r--;)if(c[4*(u*r+t)+3]>s){i=t;break e}e:for(t=0;t<=i;++t)for(r=o+1;r--;)if(c[4*(u*r+t)+3]>s){n=t;break e}e:for(r=0;r<=o;++r)for(t=n;t<=i;++t)if(c[4*(u*r+t)+3]>s){a=r;break e}return{x:n,y:a,width:i-n,height:o-a}}function d(e,t){var r=e.allLayerViews.items;if(t===e.scale)return r.filter((function(e){return!e.suspended}));var n,a=new Array,i=!0,o=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;(n=c.parent)&&"esri.views.2d.layers.GroupLayerView2D"===n.declaredClass&&!a.includes(c.parent)||!c.visible||t&&"isVisibleAtScale"in c&&!c.isVisibleAtScale(t)||a.push(c)}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return a}function b(e){return e&&"bing-maps"===e.type}function m(e){return e&&"blendMode"in e&&"effect"in e}function v(e){return e&&"csv"===e.type}function h(e){return e&&"feature"===e.type}function g(e){return e&&"geojson"===e.type}function x(e){return e&&"graphics"===e.type}function S(e){return e&&"group"===e.type}function w(e){return e&&"imagery"===e.type}function k(e){return e&&"imagery-tile"===e.type}function P(e){return e&&"kml"===e.type}function T(e){return e&&"map-image"===e.type}function L(e){return e&&"map-notes"===e.type}function G(e){return e&&"open-street-map"===e.type}function M(e){var t=e.layer;if(m(t)){var r=t.blendMode;if((!r||"normal"===r)&&(t.effect||"featureEffect"in e&&e.featureEffect))return!0}return!1}function O(e){return e&&"stream"===e.type}function I(e){return e&&"tile"===e.type}function J(e){return e&&"vector-tile"===e.type}function N(e){return e&&"web-tile"===e.type}function D(e){return e&&"wms"===e.type}function V(e){return e&&"wmts"===e.type}})),r.register("c5s7G",(function(e,n){t(e.exports,"default",(function(){return c}));var a=r("8TSCy"),i=r("7eJjO"),o=r("jymfC"),s=r("iho5X");r("lNwWH"),r("2VlWd"),r("iJAIC");var u=r("fcwIv"),l=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){var n;return a.classCallCheck(this,r),(n=t.call(this,e)).attributionVisible=!0,n.exportOptions={width:800,height:1100,dpi:96},n.forceFeatureAttributes=!1,n.format="png32",n.label=null,n.layout="map-only",n.layoutOptions=null,n.outScale=0,n.scalePreserved=!0,n.showLabels=!0,a.possibleConstructorReturn(n)}return r}(o.default);(0,i._)([(0,s.property)()],l.prototype,"attributionVisible",void 0),(0,i._)([(0,s.property)()],l.prototype,"exportOptions",void 0),(0,i._)([(0,s.property)()],l.prototype,"forceFeatureAttributes",void 0),(0,i._)([(0,s.property)()],l.prototype,"format",void 0),(0,i._)([(0,s.property)()],l.prototype,"label",void 0),(0,i._)([(0,s.property)()],l.prototype,"layout",void 0),(0,i._)([(0,s.property)()],l.prototype,"layoutOptions",void 0),(0,i._)([(0,s.property)()],l.prototype,"outScale",void 0),(0,i._)([(0,s.property)()],l.prototype,"scalePreserved",void 0),(0,i._)([(0,s.property)()],l.prototype,"showLabels",void 0);var c=l=(0,i._)([(0,u.subclass)("esri.rest.support.PrintTemplate")],l)}))}();
//# sourceMappingURL=PrintTask.bf64a30d.js.map
