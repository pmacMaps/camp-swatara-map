{"mappings":"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","sources":["node_modules/@arcgis/core/layers/save/featureLayerUtils.js","node_modules/@arcgis/core/core/accessorSupport/originUtils.js","node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","node_modules/@arcgis/core/layers/support/fetchService.js","node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{debounce as a,eachAlways as o}from\"../../core/promiseUtils.js\";import{updateOrigins as l}from\"../../core/accessorSupport/originUtils.js\";import s from\"../FeatureLayer.js\";import{parse as n}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as i}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as u,isFeatureServiceLayer as p}from\"../support/layerUtils.js\";import c from\"../../portal/Portal.js\";import d from\"../../portal/PortalItem.js\";import{createForItemWrite as y}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as m,TypeKeyword as f,getWGS84ExtentForItem as w,removeTypeKeyword as h}from\"../../portal/support/portalItemUtils.js\";const v=r.getLogger(\"esri.layers.FeatureLayer\"),b=\"Feature Service\";function I(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function S(e,r){if(r.type!==b)throw new t(\"feature-layer:portal-item-wrong-type\",I(e,`should have portal item of type \"${b}\"`))}async function g(e){if(await e.load(),u(e))throw new t(\"feature-layer:save\",I(e,\"using an in-memory source cannot be saved to a portal item\"))}function j(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function L(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return j(t,r),a}function P(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function J(e){m(e,f.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function N(e){const r=e.portalItem;if(!r)throw v.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",I(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",I(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));S(e,r)}async function O(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?P(t[0]):E(e,t)}async function E(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let l=await e.fetchData(\"json\");l&&null!=l.layers&&null!=l.tables||(l=await T(l,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const s of t)A(s.layer,s.layerJSON,l);return l}async function T(e,t,r){e||={},e.layers||=[],e.tables||=[];const{url:a,customParameters:o,apiKey:l}=t,{serviceJSON:s,layersJSON:n}=await i(a,{customParameters:o,apiKey:l}),u=$(e.layers,s.layers,r),p=$(e.tables,s.tables,r);e.layers=u.itemResources,e.tables=p.itemResources;const c=[...u.added,...p.added],d=n?[...n.layers,...n.tables]:[];return await x(e,c,a,d),e}function $(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const l=o.added.map((({id:e})=>({id:e})));return l.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:l.filter((({id:e})=>!a.includes(e)))}}async function x(e,t,r,a){const l=t.map((({id:e})=>new s({url:r,layerId:e,sourceJSON:a.find((({id:t})=>t===e))})));await o(l.map((e=>e.load()))),l.forEach((t=>{const{layerId:r,loaded:a,defaultPopupTemplate:o}=t;if(!a||null==o)return;A(t,{id:r,popupInfo:o.toJSON()},e)}))}function A(e,t,r){e.isTable?U(r.tables,t):U(r.layers,t)}function U(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function K(e){const{portalItem:t}=e;return p(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===b}async function F(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!K(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${I(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function R(e,t){let r=d.from(t);return r.id&&(r=r.clone(),r.id=null),r.type??=b,r.portal??=c.getDefault(),S(e,r),r}async function D(e,t){const{url:r,layerId:a,title:o,fullExtent:l,isTable:s}=e,i=n(r),u=null!=i&&\"FeatureServer\"===i.serverType;t.url=u?r:`${r}/${a}`,t.title||=o,t.extent=null,s||null==l||(t.extent=await w(l)),h(t,f.METADATA),h(t,f.MULTI_LAYER),m(t,f.SINGLE_LAYER),s&&m(t,f.TABLE),J(t)}async function q(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const z=a(C);async function C(e,t){await g(e),N(e);const r=e.portalItem,a=y(r),o=await L(e,a,t),s=await O(r,[{layer:e,layerJSON:o}]);return J(r),await r.update({data:s}),l(a),r}const M=a((async(e,t)=>{await F(e);const r=e[0].portalItem,a=y(r),o=await Promise.all(e.map((e=>L(e,a,t)))),s=await O(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return J(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),l(a),r.clone()})),Y=a(_);async function _(e,t,r){await g(e);const a=R(e,t),o=y(a),s=P({layer:e,layerJSON:await L(e,o,r)});return await D(e,a),await q(a,s,r),e.portalItem=a,l(o),a}export{z as save,M as saveAll,Y as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["$aX9sh","parcelRequire","$8dae145e2c9ced33$var$v","$6TszD","default","getLogger","$8dae145e2c9ced33$var$b","$8dae145e2c9ced33$var$I","e","t","title","id","declaredClass","$8dae145e2c9ced33$var$S","r","type","$bPmsI","async","$8dae145e2c9ced33$var$g","load","$1TI7x","isFeatureCollectionLayer","$8dae145e2c9ced33$var$L","beforeSave","a","write","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","$8dae145e2c9ced33$var$j","$8dae145e2c9ced33$var$P","layer","layerJSON","isTable","layers","tables","$8dae145e2c9ced33$var$J","$g0k3L","addTypeKeyword","TypeKeyword","JSAPI","typeKeywords","indexOf","$8dae145e2c9ced33$var$O","test","url","customParameters","apiKey","o","l","fetchData","serviceJSON","s","layersJSON","n","$f369A","fetchFeatureService","u","$8dae145e2c9ced33$var$$","p","itemResources","c","added","d","$iaM5n","layerId","sourceJSON","find","$lHg4e","eachAlways","forEach","loaded","defaultPopupTemplate","$8dae145e2c9ced33$var$A","popupInfo","toJSON","$8dae145e2c9ced33$var$x","$8dae145e2c9ced33$var$T","$8dae145e2c9ced33$var$E","difference","removed","some","push","includes","$8dae145e2c9ced33$var$U","findIndex","$8dae145e2c9ced33$var$K","portalItem","isFeatureServiceLayer","dynamicDataSource","$8dae145e2c9ced33$export$a1544dad697b423d","debounce","error","$8dae145e2c9ced33$var$N","$7zHk6","createForItemWrite","update","data","$iYitI","updateOrigins","Promise","all","Set","size","$8dae145e2c9ced33$var$F","slice","reload","clone","$8dae145e2c9ced33$export$2bc2a80e311129ac","$h7Mrf","from","portal","$39WmQ","getDefault","$8dae145e2c9ced33$var$R","fullExtent","i","$c8U9w","parse","serverType","extent","getWGS84ExtentForItem","removeTypeKeyword","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE","$8dae145e2c9ced33$var$D","signIn","user","addItem","item","folder","$8dae145e2c9ced33$var$q","$fMNx8","$dcfc2a0304601333$export$3437e8e38d02a5f0","writtenProperties","target","propName","newOrigin","isMultiOriginJSONMixin","originOf","updateOrigin","$b7e1c304918b8a2f$export$3872c8e43f6916e8","$7TC5p","$af4be8d0f2437f79$export$ed7913757383bb7f","fetchArcGISServiceJSON","$af4be8d0f2437f79$var$t","currentVersion","$bYA0c","$5bfb369ccf33c6b4$export$5eb6d69d0c7c3def","responseType","query","f","token"],"version":3,"file":"featureLayerUtils.710a071c.js.map"}