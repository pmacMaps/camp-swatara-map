{"mappings":"kyBAIA,IAAAA,EAAAC,EAAA,oGAAue,MAAMC,EAAE,6CAA6C,SAASC,EAAEC,EAAEC,GAAG,GAAGA,GAAG,WAAWD,EAAEE,KAAK,MAAM,GAAGF,EAAEG,QAAQH,EAAEI,QAAQJ,EAAEK,QAAQL,EAAEM,OAAO,GAAGL,GAAG,UAAUD,EAAEE,KAAK,MAAM,GAAGF,EAAEO,KAAKP,EAAEQ,IAAI,MAAMC,EAAET,EAAEU,SAAS,cAAcD,EAAEE,iBAAiBC,KAAKC,UAAUJ,GAAG,SAASK,EAAEC,EAAEC,GAAG,MAAMC,EAAEF,EAAEG,SAASC,EAAEJ,EAAEL,gBAAgBS,EAAEC,8BAA8BD,EAAEE,+BAA+B,MAAMC,EAAEH,EAAEI,EAAER,EAAES,oBAAoB,IAAIC,EAAEC,EAAE,IAAG,EAAAC,EAAAC,QAAEX,KAAKQ,EAAER,EAAEN,iBAAiBe,EAAET,EAAEN,iBAAiBkB,MAAMjB,KAAKC,UAAUI,EAAEN,kBAAkBW,EAAEQ,cAAa,EAAAC,EAAAC,aAAEf,GAAGK,EAAEJ,SAASnB,EAAEkB,EAAEF,EAAEK,wBAAwBE,EAAEW,KAAKP,GAAGP,EAAEe,6BAA6BZ,EAAEY,2BAA2Bf,EAAEe,2BAA2BC,KAAK,MAAMhB,EAAEiB,YAAYd,EAAEc,UAAUjB,EAAEiB,UAAUD,KAAK,MAAMhB,EAAEkB,gBAAgBf,EAAEe,cAAclB,EAAEkB,cAAcF,KAAK,OAAOhB,EAAEmB,YAAYnB,EAAEoB,uBAAuB,MAAMvB,GAAGA,EAAEwB,iBAAiB,MAAMxB,GAAGA,EAAEyB,kBAAkB,MAAMzB,GAAGA,EAAE0B,sBAAsBpB,EAAEgB,WAAU,IAAKnB,EAAEmB,UAAUK,QAAQ,KAAKrB,EAAEgB,UAAU,IAAIhB,EAAEgB,UAAUnB,EAAEmB,UAAUH,KAAK,KAAKhB,EAAEyB,MAAMtB,EAAEsB,MAAMzB,EAAEyB,MAAMf,MAAMjB,KAAKC,UAAUM,EAAEyB,OAAO3B,IAAIE,EAAE0B,gBAAgB1B,EAAE2B,kBAAkBxB,EAAEsB,MAAMtB,EAAEW,MAAMd,EAAE0B,uBAAuB1B,EAAE0B,eAAe1B,EAAE4B,gBAAgBzB,EAAEyB,cAAcnC,KAAKC,UAAUM,EAAE4B,gBAAgB5B,EAAE6B,YAAY1B,EAAE0B,UAAUpC,KAAKC,UAAUM,EAAE6B,YAAY7B,EAAE8B,yBAAyBlC,EAAEM,iCAAgC,EAAAM,EAAAC,QAAEH,KAAI,EAAAE,EAAAC,QAAEb,EAAEkC,0BAAyB,EAAAtB,EAAAC,QAAEb,EAAEkC,uBAAuBC,SAASzB,EAAE0B,OAAOpC,EAAEkC,uBAAuBC,OAAOvC,0BAA0BQ,EAAE8B,uBAAuBC,OAAOvC,iBAAiBW,EAAE2B,uBAAuBrC,KAAKC,UAAUM,EAAE8B,yBAAyB9B,EAAEiC,kBAAkB9B,EAAE8B,gBAAgBxC,KAAKC,UAAUM,EAAEiC,kBAAkBjC,EAAEkC,cAAc/B,EAAE+B,YAAYzC,KAAKC,UAAUM,EAAEkC,cAAclC,EAAEmC,oBAAoBhC,EAAEiC,MAAM3C,KAAKC,UAAU,CAAC2C,OAAOrC,EAAEmC,2BAA2BnC,EAAEmC,mBAAmBnC,EAAEsC,WAAW,CAAC,MAAMC,EAAEvC,EAAEsC,YAAYE,MAAMC,EAAEC,IAAIC,GAAGJ,EAAE,MAAME,GAAG,MAAME,IAAIxC,EAAEyC,KAAKH,IAAIE,EAAEF,EAAE,GAAG,MAAMA,EAAE,OAAOA,KAAK,MAAME,EAAE,OAAOA,YAAY3C,EAAEsC,WAAW,OAAO1C,EAAEM,iCAAgC,EAAAM,EAAAC,QAAEH,KAAI,EAAAE,EAAAC,QAAEL,IAAIE,EAAE0B,OAAO5B,KAAKD,EAAE0C,UAAU1C,EAAEW,YAAYX,EAAEW,YAAYX,EAAEsB,OAAOtB,EAAE2C,eAAeC,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,GAAE,EAAA5C,EAAAC,QAAEwC,EAAEX,aAAaW,EAAEX,WAAWe,QAAQ,CAACC,KAAK,CAACC,SAAS,WAAWC,EAAER,EAAEC,EAAE,OAAOE,GAAG,OAAO,EAAAM,EAAAC,6BAAET,EAAEC,EAAEE,EAAEE,MAAMF,EAAEN,eAAea,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAG,EAAAvD,EAAAC,QAAEoD,EAAEvB,aAAauB,EAAEvB,WAAWe,QAAQ,OAAOW,QAAQC,QAAQ,CAACX,KAAKQ,EAAEI,wBAAwB,MAAMC,QAAQC,EAAER,EAAEC,EAAEE,GAAGM,EAAEF,EAAE,OAAOE,EAAEf,MAAK,EAAAgB,EAAAC,sBAAEJ,EAAEb,KAAKQ,GAAGO,EAAE,SAASD,EAAEI,EAAEC,EAAEC,GAAG,OAAOlB,EAAEgB,EAAEC,EAAE,MAAMC,GAAG,SAASC,EAAEC,EAAEC,EAAEC,GAAG,OAAO,EAAAtE,EAAAC,QAAEoE,EAAEvC,aAAauC,EAAEvC,WAAWe,QAAQW,QAAQC,QAAQ,CAACX,KAAK,CAACrC,UAAU,MAAMuC,EAAEoB,EAAEC,EAAE,OAAOC,EAAE,CAACvD,eAAc,IAAK,SAASwD,EAAEC,EAAEC,EAAEC,GAAG,OAAO,EAAA1E,EAAAC,QAAEwE,EAAE3C,aAAa2C,EAAE3C,WAAWe,QAAQW,QAAQC,QAAQ,CAACX,KAAK,CAAC6B,MAAM,KAAK3B,EAAEwB,EAAEC,EAAE,OAAOC,EAAE,CAAC3D,eAAc,EAAGF,iBAAgB,IAAK,SAAS+D,EAAEC,EAAEC,EAAEC,GAAG,OAAO,EAAA/E,EAAAC,QAAE6E,EAAEhD,aAAagD,EAAEhD,WAAWe,QAAQW,QAAQC,QAAQ,CAACX,KAAK,CAAC6B,MAAM,EAAEpD,OAAO,QAAQyB,EAAE6B,EAAEC,EAAE,OAAOC,EAAE,CAACjE,kBAAiB,EAAGD,iBAAgB,IAAKmE,MAAMC,IAAI,MAAMC,EAAED,EAAEnC,KAAK,GAAGoC,EAAEC,eAAe,UAAU,OAAOF,EAAE,GAAGC,EAAEnC,SAAS,MAAM,IAAIqC,MAAMjH,GAAG,GAAG+G,EAAEC,eAAe,SAAS,MAAM,IAAIC,MAAMjH,GAAG,OAAO8G,KAAK,SAASjC,EAAEqC,EAAEC,EAAEC,EAAEC,EAAE,GAAGC,EAAE,IAAI,MAAMC,EAAE,iBAAiBL,GAAE,EAAAM,EAAAC,aAAEP,GAAGA,EAAEQ,EAAEP,EAAE/F,SAAS,CAAC+F,EAAE/F,UAAU,GAAG,OAAOiG,EAAEM,aAAa,QAAQP,EAAE,eAAe,QAAO,EAAAQ,EAAAC,0BAAEH,EAAE,KAAKL,GAAGR,MAAMiB,IAAI,MAAMC,EAAED,GAAGA,EAAE,IAAG,EAAAjG,EAAAC,QAAEiG,MAAMZ,EAAEA,EAAEa,SAAS5G,SAAS2G,GAAG,MAAME,GAAE,EAAAC,EAAAC,eAAE,IAAIZ,EAAEa,MAAMC,EAAEjB,KAAKE,KAAKtG,EAAEmG,EAAEG,KAAK,OAAO,EAAAxH,EAAAwI,UAAE,EAAAd,EAAAnF,MAAEkF,EAAEgB,KAAK,SAAS,IAAIlB,EAAEe,MAAM,IAAIH,KAAKZ,EAAEe","sources":["node_modules/@arcgis/core/rest/query/operations/query.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import{isSome as t}from\"../../../core/maybe.js\";import{join as r,urlToObject as n}from\"../../../core/urlUtils.js\";import{getJsonType as i}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as o}from\"../../../geometry/support/normalizeUtils.js\";import{mapParameters as a}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as s}from\"./pbfQueryUtils.js\";import{applyFeatureSetZUnitScaling as u}from\"./queryZScale.js\";const l=\"Layer does not support extent calculation.\";function m(e,t){if(t&&\"extent\"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&\"point\"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function y(e,r){const n=e.geometry,o=e.toJSON();delete o.compactGeometryEnabled,delete o.defaultSpatialReferenceEnabled;const a=o,s=e.outSpatialReference;let u,l;if(t(n)&&(u=n.spatialReference,l=n.spatialReference.wkid||JSON.stringify(n.spatialReference),a.geometryType=i(n),a.geometry=m(n,e.compactGeometryEnabled),a.inSR=l),o.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(\",\")),o.objectIds&&(a.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(a.orderByFields=o.orderByFields.join(\",\")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete a.outFields:-1!==o.outFields.indexOf(\"*\")?a.outFields=\"*\":a.outFields=o.outFields.join(\",\"),o.outSR?a.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(a.outSR=a.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(a.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(a.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&t(u)&&t(e.quantizationParameters)&&t(e.quantizationParameters.extent)&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete o.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(a.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(a.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(a.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const e=o.timeExtent,{start:t,end:r}=e;null==t&&null==r||(a.time=t===r?t:`${null==t?\"null\":t},${null==r?\"null\":r}`),delete o.timeExtent}return e.defaultSpatialReferenceEnabled&&t(u)&&t(s)&&u.equals(s)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function c(e,r,n,i){const o=t(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await E(e,r,\"json\",i);return u(r,n,o.data),o}async function d(e,r,n,i){if(t(r.timeExtent)&&r.timeExtent.isEmpty)return Promise.resolve({data:n.createFeatureResult()});const o=await f(e,r,i),a=o;return a.data=s(o.data,n),a}function f(e,t,r){return E(e,t,\"pbf\",r)}function p(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(e,r,\"json\",n,{returnIdsOnly:!0})}function S(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(e,r,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}function x(e,r,n){return t(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):E(e,r,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty(\"extent\"))return e;if(t.features)throw new Error(l);if(t.hasOwnProperty(\"count\"))throw new Error(l);return e}))}function E(i,s,u,l={},m={}){const c=\"string\"==typeof i?n(i):i,d=s.geometry?[s.geometry]:[];return l.responseType=\"pbf\"===u?\"array-buffer\":\"json\",o(d,null,l).then((n=>{const i=n&&n[0];t(i)&&((s=s.clone()).geometry=i);const o=a({...c.query,f:u,...m,...y(s,m)});return e(r(c.path,\"query\"),{...l,query:{...o,...l.query}})}))}export{m as encodeGeometry,c as executeQuery,S as executeQueryForCount,x as executeQueryForExtent,p as executeQueryForIds,d as executeQueryPBF,f as executeQueryPBFBuffer,y as queryToQueryStringParameters,E as runQuery};\n"],"names":["$bYA0c","parcelRequire","$49e3c1593f070f3f$var$l","$49e3c1593f070f3f$export$a51a692f286d7124","e1","t1","type","xmin","ymin","xmax","ymax","x","y","r1","toJSON","spatialReference","JSON","stringify","$49e3c1593f070f3f$export$bc6cbcec9d7c47c4","e2","r2","n1","geometry","o1","compactGeometryEnabled","defaultSpatialReferenceEnabled","a1","s1","outSpatialReference","u1","l1","$1CpCt","isSome","wkid","geometryType","$86d4E","getJsonType","inSR","groupByFieldsForStatistics","join","objectIds","orderByFields","outFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","indexOf","outSR","returnGeometry","returnCentroid","outStatistics","pixelSize","quantizationParameters","extent","equals","parameterValues","rangeValues","dynamicDataSource","layer","source","timeExtent","e3","start","t2","end","r3","time","defaultSR","async","$49e3c1593f070f3f$export$786299a18b5685fc","e4","r4","n2","i1","o2","isEmpty","data","features","$49e3c1593f070f3f$export$1b084def02c50fa0","$1FRrh","applyFeatureSetZUnitScaling","$49e3c1593f070f3f$export$9f73cf7d7c68d5aa","e5","r5","n3","i2","Promise","resolve","createFeatureResult","o3","$49e3c1593f070f3f$export$ad12b2ae30da47a9","a2","$foukt","parsePBFFeatureQuery","e6","t3","r6","$49e3c1593f070f3f$export$33ea1d65b3f763","e7","r7","n4","$49e3c1593f070f3f$export$76c93621284f88bc","e8","r8","n5","count","$49e3c1593f070f3f$export$dd0e0238b43e3274","e9","r9","n6","then","e10","t4","hasOwnProperty","Error","i3","s2","u2","l2","m1","c1","$7dRCe","urlToObject","d1","responseType","$hq5aB","normalizeCentralMeridian","n7","i4","clone","o4","$bAQEw","mapParameters","query","f","default","path"],"version":3,"file":"query.f51fe31f.js.map"}