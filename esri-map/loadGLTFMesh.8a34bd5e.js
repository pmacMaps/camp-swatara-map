!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("alzOM",(function(r,n){e(r.exports,"loadGLTFMesh",(function(){return E}));var i=t("jgs9n"),s=t("9pNSx"),o=t("edmn4"),c=t("iVfa0"),a=t("7qybv"),u=t("j3x2p"),f=t("gnwu9"),l=t("5YMIf"),m=t("iLaO9"),p=t("lqmgd"),h=t("4aGER"),g=t("iJpq3"),d=t("9VOjl"),w=t("YI2am"),x=t("hhwnq"),S=t("cUsSX"),_=t("eKMts"),b=t("4pnUn"),V=t("cZCWI"),v=t("h7U64"),y=t("fmpb6"),B=t("gUx67"),M=t("lHcHb"),T=t("8JzMA"),P=t("fxkX0"),A=t("6ma5C"),C=t("fVcSp");async function E(e,t,r){const n=new(0,V.DefaultLoadingContext)(function(e){return(null==e?void 0:e.resolveFile)?{busy:!1,request:async(t,r,n)=>{const i=e.resolveFile(t),o="image"===r?"image":"binary"===r?"array-buffer":"json";return(await(0,s.default)(i,{responseType:o,signal:(0,a.isSome)(n)?n.signal:null})).data}}:null}(r)),c=(await(0,v.load)(n,t,r,!0)).model,u=c.lods.shift(),f=new Map,p=new Map;c.textures.forEach(((e,t)=>f.set(t,function(e){return new(0,g.default)({data:e.data,wrap:z(e.parameters.wrap)})}(e)))),c.materials.forEach(((e,t)=>p.set(t,function(e,t){const r=new(0,i.default)(function(e,t){return(0,m.f)(j(e[0]),j(e[1]),j(e[2]),t)}(e.color,e.opacity)),n=e.emissiveFactor?new(0,i.default)(function(e){return(0,l.f)(j(e[0]),j(e[1]),j(e[2]))}(e.emissiveFactor)):null;return new(0,h.default)({color:r,colorTexture:(0,a.unwrap)((0,a.applySome)(e.textureColor,(e=>t.get(e)))),normalTexture:(0,a.unwrap)((0,a.applySome)(e.textureNormal,(e=>t.get(e)))),emissiveColor:n,emissiveTexture:(0,a.unwrap)((0,a.applySome)(e.textureEmissive,(e=>t.get(e)))),occlusionTexture:(0,a.unwrap)((0,a.applySome)(e.textureOcclusion,(e=>t.get(e)))),alphaMode:k(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:(0,a.unwrap)((0,a.applySome)(e.textureMetallicRoughness,(e=>t.get(e))))})}(e,f))));const x=function(e){let t=0;const r={color:!1,tangent:!1,normal:!1,texCoord0:!1},n=new Map,i=new Map,s=[];for(const c of e.parts){const{attributes:{position:e,normal:a,color:u,tangent:f,texCoord0:l}}=c,m=`\n      ${O(e,n)}/\n      ${O(a,n)}/\n      ${O(u,n)}/\n      ${O(f,n)}/\n      ${O(l,n)}/\n      ${R(c.transform)}\n    `;let p=!1;const h=(0,o.getOrCreateMapValue)(i,m,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),a&&(r.normal=!0),u&&(r.color=!0),f&&(r.tangent=!0),l&&(r.texCoord0=!0),s.push({gltf:c,writeVertices:p,region:h})}return{vertexAttributes:{position:(0,_.createBuffer)(w.BufferViewVec3f64,t),normal:r.normal?(0,_.createBuffer)(w.BufferViewVec3f,t):null,tangent:r.tangent?(0,_.createBuffer)(w.BufferViewVec4f,t):null,color:r.color?(0,_.createBuffer)(w.BufferViewVec4u8,t):null,texCoord0:r.texCoord0?(0,_.createBuffer)(w.BufferViewVec2f,t):null},parts:s,components:[]}}(u);for(const e of x.parts)I(x,e,p);const{position:S,normal:y,tangent:B,color:M,texCoord0:T}=x.vertexAttributes,P={position:S.typedBuffer,normal:(0,a.isSome)(y)?y.typedBuffer:null,tangent:(0,a.isSome)(B)?B.typedBuffer:null,uv:(0,a.isSome)(T)?T.typedBuffer:null,color:(0,a.isSome)(M)?M.typedBuffer:null},A=(0,b.georeferenceByTransform)(P,e,r);return{transform:A.transform,components:x.components,spatialReference:e.spatialReference,vertexAttributes:new(0,d.MeshVertexAttributes)({position:A.vertexAttributes.position,normal:A.vertexAttributes.normal,tangent:A.vertexAttributes.tangent,color:P.color,uv:P.uv})}}function O(e,t){if((0,a.isNone)(e))return"-";const r=e.typedBuffer;return`${(0,o.getOrCreateMapValue)(t,r.buffer,(()=>t.size))}/${r.byteOffset}/${r.byteLength}`}function R(e){return(0,a.isSome)(e)?e.toString():"-"}function I(e,t,r){t.writeVertices&&function(e,t){const{position:r,normal:n,tangent:i,color:s,texCoord0:o}=e.vertexAttributes,l=t.region.start,{attributes:m,transform:p}=t.gltf,h=m.position.count;if((0,x.t)(r.slice(l,h),m.position,p),(0,a.isSome)(m.normal)&&(0,a.isSome)(n)){const e=(0,u.a)((0,f.c)(),p),t=n.slice(l,h);(0,x.a)(t,m.normal,e),(0,c.hasScaling)(e)&&(0,x.n)(t,t)}else(0,a.isSome)(n)&&(0,P.f)(n,0,0,1,{dstIndex:l,count:h});if((0,a.isSome)(m.tangent)&&(0,a.isSome)(i)){const e=(0,u.a)((0,f.c)(),p),t=i.slice(l,h);(0,S.t)(t,m.tangent,e),(0,c.hasScaling)(e)&&(0,S.n)(t,t)}else(0,a.isSome)(i)&&(0,A.f)(i,0,0,1,1,{dstIndex:l,count:h});if((0,a.isSome)(m.texCoord0)&&(0,a.isSome)(o)?(0,C.n)(o.slice(l,h),m.texCoord0):(0,a.isSome)(o)&&(0,C.f)(o,0,0,{dstIndex:l,count:h}),(0,a.isSome)(m.color)&&(0,a.isSome)(s)){const e=m.color,t=s.slice(l,h);if(4===e.elementCount)e instanceof w.BufferViewVec4f?(0,S.s)(t,e,255):e instanceof w.BufferViewVec4u8?(0,A.c)(t,e):e instanceof w.BufferViewVec4u16&&(0,S.a)(t,e,8);else{(0,A.f)(t,255,255,255,255);const r=w.BufferViewVec3u8.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof w.BufferViewVec3f?(0,x.s)(r,e,255):e instanceof w.BufferViewVec3u8?(0,P.c)(r,e):e instanceof w.BufferViewVec3u16&&(0,x.b)(r,e,8)}}else(0,a.isSome)(s)&&(0,A.f)(s.slice(l,h),255,255,255,255)}(e,t);const n=t.gltf,i=function(e,t){switch(t){case T.PrimitiveType.TRIANGLES:return(0,y.trianglesToTriangles)(e,B.generateIndexArray);case T.PrimitiveType.TRIANGLE_STRIP:return(0,y.triangleStripToTriangles)(e);case T.PrimitiveType.TRIANGLE_FAN:return(0,y.triangleFanToTriangles)(e)}}(n.indices||n.attributes.position.count,n.primitiveType),s=t.region.start;if(s)for(let e=0;e<i.length;e++)i[e]+=s;e.components.push(new(0,p.default)({faces:i,material:r.get(n.material),trustSourceNormals:!0}))}function k(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function z(e){return{horizontal:L(e.s),vertical:L(e.t)}}function L(e){switch(e){case T.TextureWrapMode.CLAMP_TO_EDGE:return"clamp";case T.TextureWrapMode.MIRRORED_REPEAT:return"mirror";case T.TextureWrapMode.REPEAT:return"repeat"}}function j(e){return e**(1/M.COLOR_GAMMA)*255}})),t.register("2TwbA",(function(r,n){function i(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function c(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}e(r.exports,"elementTypeSize",(function(){return i})),e(r.exports,"isSigned",(function(){return s})),e(r.exports,"isInteger",(function(){return o})),e(r.exports,"maximumValue",(function(){return c})),t("2VlWd")})),t.register("jubE1",(function(r,n){e(r.exports,"ObjectStack",(function(){return s}));var i=t("e02MS");class s{get(){return 0===this._itemsPtr&&(0,i.nextTick)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,o));e++)this._items.push(this.allocator())}constructor(e){this.allocator=e,this._items=[],this._itemsPtr=0,this._grow()}}const o=1024})),t.register("4Tl7p",(function(r,n){e(r.exports,"sv3d",(function(){return s})),e(r.exports,"sv4d",(function(){return o})),e(r.exports,"sm4d",(function(){return c}));var i=t("61Wey");i.VectorStack.createVec2f64();const s=i.VectorStack.createVec3f64(),o=i.VectorStack.createVec4f64(),c=(i.VectorStack.createMat3f64(),i.VectorStack.createMat4f64());i.VectorStack.createQuatf64()})),t.register("61Wey",(function(r,n){e(r.exports,"VectorStack",(function(){return m}));var i=t("dbxRf"),s=t("e02MS"),o=t("gnwu9"),c=t("89KCq"),a=t("ksUrQ"),u=t("iE3Nt"),f=t("5YMIf"),l=t("iLaO9");class m{get(){0===this._itemsPtr&&(0,s.nextTick)((()=>this._reset()));const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const e=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let t=0;t<this._itemsPerBuffer;++t)this._items.push(this.itemCreate(e,t*this.itemByteSize));this._buffers.push(e)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=p){return new m(16,u.c,e)}static createVec3f64(e=p){return new m(24,f.b,e)}static createVec4f64(e=p){return new m(32,l.a,e)}static createMat3f64(e=p){return new m(72,o.a,e)}static createMat4f64(e=p){return new m(128,c.a,e)}static createQuatf64(e=p){return new m(32,a.c,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}constructor(e,t,r){this.itemByteSize=e,this.itemCreate=t,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}}const p=4*i.ByteSizeUnit.KILOBYTES})),t.register("cFPW4",(function(r,n){e(r.exports,"create",(function(){return u})),e(r.exports,"fromValues",(function(){return f})),e(r.exports,"fromPoints",(function(){return l})),e(r.exports,"distance2",(function(){return m})),e(r.exports,"projectPoint",(function(){return p}));var i=t("iVfa0"),s=t("jubE1"),o=t("e4Xv2"),c=t("5YMIf"),a=t("4Tl7p");function u(e){return e?{origin:(0,c.a)(e.origin),vector:(0,c.a)(e.vector)}:{origin:(0,c.c)(),vector:(0,c.c)()}}function f(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.c)(r.vector,t),r}function l(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.b)(r.vector,t,e),r}function m(e,t){const r=(0,o.b)(a.sv3d.get(),t,e.origin),n=(0,o.e)(e.vector,r),s=(0,o.e)(e.vector,e.vector),c=(0,i.clamp)(n/s,0,1),u=(0,o.b)(a.sv3d.get(),(0,o.g)(a.sv3d.get(),e.vector,c),r);return(0,o.e)(u,u)}function p(e,t,r){return function(e,t,r,n,s){const{vector:c,origin:u}=e,f=(0,o.b)(a.sv3d.get(),t,u),l=(0,o.e)(c,f)/(0,o.p)(c);return(0,o.g)(s,c,(0,i.clamp)(l,r,n)),(0,o.a)(s,s,e.origin)}(e,t,0,1,r)}(0,c.c)(),(0,c.c)(),new(0,s.ObjectStack)((()=>({origin:null,vector:null})))}))}();
//# sourceMappingURL=loadGLTFMesh.8a34bd5e.js.map
