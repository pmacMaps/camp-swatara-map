!function(){function e(e){return e&&e.__esModule?e.default:e}function r(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("jwlkH",(function(n,a){r(n.exports,"fetchResources",(function(){return p})),r(n.exports,"addOrUpdateResource",(function(){return f})),r(n.exports,"contentToBlob",(function(){return b})),r(n.exports,"removeResource",(function(){return v})),r(n.exports,"removeAllResources",(function(){return m})),r(n.exports,"splitPrefixFileNameAndExtension",(function(){return w})),r(n.exports,"getSiblingOfSameType",(function(){return k})),r(n.exports,"getSiblingOfSameTypeI",(function(){return I}));var o=t("8TSCy"),s=t("2TvXO"),i=t("9pNSx"),u=t("kyj08"),l=t("7qybv"),c=t("kYueh");function p(e){return d.apply(this,arguments)}function d(){return d=o.asyncToGenerator(e(s).mark((function r(t){var n,a,o,i,u,p,d,f,y,v,h,m,x=arguments;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.length>1&&void 0!==x[1]?x[1]:{},a=x.length>2?x[2]:void 0,e.next=3,t.load(a);case 3:return o=(0,c.join)(t.itemUrl,"resources"),i=n.start,u=void 0===i?1:i,p=n.num,d=void 0===p?10:p,f=n.sortOrder,y=void 0===f?"asc":f,v=n.sortField,h={query:{start:u,num:d,sortOrder:y,sortField:void 0===v?"created":v,token:t.apiKey},signal:(0,l.get)(a,"signal")},e.next=15,t.portal._request(o,h);case 15:return m=e.sent,e.abrupt("return",{total:m.total,nextStart:m.nextStart,resources:m.resources.map((function(e){var r=e.created,n=e.size,a=e.resource;return{created:new Date(r),size:n,resource:t.resourceFromPath(a)}}))});case 17:case"end":return e.stop()}}),r)}))),d.apply(this,arguments)}function f(e,r,t,n){return y.apply(this,arguments)}function y(){return(y=o.asyncToGenerator(e(s).mark((function r(t,n,a,i){var p,d,f,y,v,h,m;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new(0,u.default)("portal-item-resource-".concat(n,":invalid-path"),"Resource does not have a valid path");case 2:return p=t.portalItem,e.next=5,p.load(i);case 5:return d=(0,c.join)(p.userItemUrl,"add"===n?"addResources":"updateResources"),f=o.slicedToArray(g(t.path),2),y=f[0],v=f[1],e.next=11,b(a);case 11:return h=e.sent,m=new FormData,y&&"."!==y&&m.append("resourcesPrefix",y),m.append("fileName",v),m.append("file",h,v),m.append("f","json"),(0,l.isSome)(i)&&i.access&&m.append("access",i.access),e.next=20,p.portal._request(d,{method:"post",body:m,signal:(0,l.get)(i,"signal")});case 20:return e.abrupt("return",(e.sent,t));case 21:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function v(e,r,t){return h.apply(this,arguments)}function h(){return(h=o.asyncToGenerator(e(s).mark((function r(t,n,a){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.hasPath()){e.next=2;break}throw new(0,u.default)("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,t.load(a);case 4:return o=(0,c.join)(t.userItemUrl,"removeResources"),e.next=7,t.portal._request(o,{method:"post",query:{resource:n.path},signal:(0,l.get)(a,"signal")});case 7:n.portalItem=null;case 8:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function m(e,r){return x.apply(this,arguments)}function x(){return(x=o.asyncToGenerator(e(s).mark((function r(t,n){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(n);case 2:return a=(0,c.join)(t.userItemUrl,"removeResources"),e.abrupt("return",t.portal._request(a,{method:"post",query:{deleteAll:!0},signal:(0,l.get)(n,"signal")}));case 4:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function g(e){var r=e.lastIndexOf("/");return-1===r?[".",e]:[e.slice(0,r),e.slice(r+1)]}function w(e){var r,t,n=o.slicedToArray((r=e,t=(0,c.getPathExtension)(r),(0,l.isNone)(t)?[r,""]:[r.slice(0,r.length-t.length-1),".".concat(t)]),2),a=n[0],s=n[1],i=o.slicedToArray(g(a),2);return[i[0],i[1],s]}function b(e){return S.apply(this,arguments)}function S(){return(S=o.asyncToGenerator(e(s).mark((function r(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Blob)){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,(0,i.default)(t.url,{responseType:"blob"});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function k(e,r){if(!e.hasPath())return null;var t=o.slicedToArray(w(e.path),3),n=t[0],a=t[2];return e.portalItem.resourceFromPath((0,c.join)(n,r+a))}function I(e,r){if(!e.hasPath())return null;var t=o.slicedToArray(w(e.path),3),n=t[0],a=t[2];return e.portalItem.resourceFromPath((0,c.join)(n,r+a))}})),t.register("4VOEu",(function(n,a){r(n.exports,"fetchIndexInfo",(function(){return c}));var o=t("8TSCy"),s=t("2TvXO"),i=t("9pNSx"),u=t("kyj08"),l=t("7qybv");function c(e,r,t,n,a,o){return p.apply(this,arguments)}function p(){return(p=o.asyncToGenerator(e(s).mark((function r(t,n,a,o,c,p){var d,f,y,v,h;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=null,!(0,l.isSome)(a)){e.next=17;break}return f="".concat(t,"/nodepages/"),y=f+Math.floor(a.rootIndex/a.nodesPerPage),e.prev=3,e.next=6,(0,i.default)(y,{query:{f:"json",token:o},responseType:"json",signal:p});case 6:return e.t0=e.sent.data,e.t1=a.rootIndex,e.t2=a.nodesPerPage,e.t3=a.lodSelectionMetricType,e.t4=f,e.abrupt("return",{type:"page",rootPage:e.t0,rootIndex:e.t1,pageSize:e.t2,lodMetric:e.t3,urlPrefix:e.t4});case 14:e.prev=14,e.t5=e.catch(3),(0,l.isSome)(c)&&c.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",y,e.t5),d=e.t5;case 17:if(n){e.next=19;break}return e.abrupt("return",null);case 19:return v="".concat(t,"/nodes/"),h=v+(n&&n.split("/").pop()),e.prev=20,e.next=23,(0,i.default)(h,{query:{f:"json",token:o},responseType:"json",signal:p});case 23:return e.t6=e.sent.data,e.t7=v,e.abrupt("return",{type:"node",rootNode:e.t6,urlPrefix:e.t7});case 28:throw e.prev=28,e.t8=e.catch(20),new(0,u.default)("sceneservice:root-node-missing","Root node missing.",{pageError:d,nodeError:e.t8,url:h});case 31:case"end":return e.stop()}}),r,null,[[3,14],[20,28]])})))).apply(this,arguments)}})),t.register("fqCyP",(function(n,a){r(n.exports,"SceneService",(function(){return A})),r(n.exports,"SaveOperationType",(function(){return U}));var o=t("8TSCy"),s=t("2TvXO"),i=t("7eJjO"),u=t("9pNSx"),l=t("kyj08");t("2VlWd");var c=t("jHOLN"),p=t("7qybv"),d=t("10vEZ"),f=t("kYueh"),y=t("iho5X");t("lNwWH"),t("iJAIC");var v,h,m=t("eB8sj"),x=t("fcwIv"),g=t("kced1"),w=t("amEsL"),b=t("gINRd"),S=t("dt8qO"),k=t("j40xv"),I=t("lmu5w"),T=t("gRgX5"),_=t("4VOEu"),j=t("ajJOT"),R=t("iYaGG"),O=t("dUfDG"),E=c.default.getLogger("esri.layers.mixins.SceneService"),A=function(r){var n=function(r){"use strict";o.inherits(a,r);var n=o.createSuper(a);function a(){var r;o.classCallCheck(this,a);var t,i=o.assertThisInitialized(r);return(r=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).spatialReference=null,r.fullExtent=null,r.heightModelInfo=null,r.minScale=0,r.maxScale=0,r.version={major:Number.NaN,minor:Number.NaN,versionString:""},r.copyright=null,r.sublayerTitleMode="item-title",r.title=null,r.layerId=null,r.indexInfo=null,r._debouncedSaveOperations=(0,d.debounce)((t=o.asyncToGenerator(e(s).mark((function r(t,n,a){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===U.SAVE?3:e.t0===U.SAVE_AS?4:5;break;case 3:return e.abrupt("return",i._save(n));case 4:return e.abrupt("return",i._saveAs(a,n));case 5:case"end":return e.stop()}}),r)}))),function(e,r,n){return t.apply(this,arguments)})),o.possibleConstructorReturn(r)}return o.createClass(a,[{key:"readSpatialReference",value:function(e,r){return this._readSpatialReference(r)}},{key:"_readSpatialReference",value:function(e){if(null!=e.spatialReference)return k.default.fromJSON(e.spatialReference);var r=e.store,t=r.indexCRS||r.geographicCRS,n=t&&parseInt(t.substring(t.lastIndexOf("/")+1,t.length),10);return null!=n?new(0,k.default)(n):null}},{key:"readFullExtent",value:function(e,r,t){if(null!=e&&"object"==typeof e){var n=null==e.spatialReference?o.objectSpread({},e,{spatialReference:this._readSpatialReference(r)}):e;return b.default.fromJSON(n,t)}var a=r.store,s=this._readSpatialReference(r);return null==s||null==a||null==a.extent||!Array.isArray(a.extent)||a.extent.some((function(e){return e<N}))?null:new(0,b.default)({xmin:a.extent[0],ymin:a.extent[1],xmax:a.extent[2],ymax:a.extent[3],spatialReference:s})}},{key:"parseVersionString",value:function(e){var r={major:Number.NaN,minor:Number.NaN,versionString:e},t=e.split(".");return t.length>=2&&(r.major=parseInt(t[0],10),r.minor=parseInt(t[1],10)),r}},{key:"readVersion",value:function(e,r){var t=r.store,n=null!=t.version?t.version.toString():"";return this.parseVersionString(n)}},{key:"readTitlePortalItem",value:function(e){return"item-title"!==this.sublayerTitleMode?void 0:e}},{key:"readTitleService",value:function(e,r){var t=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return(0,I.titleFromUrlAndName)(this.url,r.name);var n=r.name;if(!n&&this.url){var a=(0,I.parse)(this.url);(0,p.isSome)(a)&&(n=a.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&t&&(n=t+" - "+n),(0,I.cleanTitle)(n)}},{key:"url",set:function(e){var r=(0,I.sanitizeUrlWithLayerId)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:E});this._set("url",r.url),null!=r.layerId&&this._set("layerId",r.layerId)}},{key:"writeUrl",value:function(e,r,t,n){(0,I.writeUrlWithLayerId)(this,e,"layers",r,n)}},{key:"parsedUrl",get:function(){var e=this._get("url");if(!e)return null;var r=(0,f.urlToObject)(e);return null!=this.layerId&&(r.path="".concat(r.path,"/layers/").concat(this.layerId)),r}},{key:"_fetchIndexAndUpdateExtent",value:function(r,t){var n=this;return o.asyncToGenerator(e(s).mark((function a(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.indexInfo=(0,_.fetchIndexInfo)(n.parsedUrl.path,n.rootNode,r,n.apiKey,E,t),e.t0=null==n.fullExtent||n.fullExtent.hasZ,e.t0){e.next=8;break}return e.t1=n,e.next=6,n.indexInfo;case 6:e.t2=e.sent,e.t1._updateExtent.call(e.t1,e.t2);case 8:case"end":return e.stop()}}),a)})))()}},{key:"_updateExtent",value:function(e){if("page"===(null==e?void 0:e.type)){var r,t,n=e.rootIndex%e.pageSize,a=null==(r=e.rootPage)||null==(t=r.nodes)?void 0:t[n];if(null==a||null==a.obb||null==a.obb.center||null==a.obb.halfSize)throw new(0,l.default)("sceneservice:invalid-node-page","Invalid node page.");if(a.obb.center[0]<N||null==this.fullExtent||this.fullExtent.hasZ)return;var o=a.obb.halfSize,s=a.obb.center[2],i=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);this.fullExtent.zmin=s-i,this.fullExtent.zmax=s+i}else if("node"===(null==e?void 0:e.type)){var u,c=null==(u=e.rootNode)?void 0:u.mbs;if(!Array.isArray(c)||4!==c.length||c[0]<N)return;var p=c[2],d=c[3];this.fullExtent.zmin=p-d,this.fullExtent.zmax=p+d}}},{key:"_fetchService",value:function(r){var t=this;return o.asyncToGenerator(e(s).mark((function n(){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.url){e.next=2;break}throw new(0,l.default)("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");case 2:if(null!=t.layerId||!/SceneServer\/*$/i.test(t.url)){e.next=7;break}return e.next=5,t._fetchFirstLayerId(r);case 5:null!=(a=e.sent)&&(t.layerId=a);case 7:return e.abrupt("return",t._fetchServiceLayer(r));case 8:case"end":return e.stop()}}),n)})))()}},{key:"_fetchFirstLayerId",value:function(r){var t=this;return o.asyncToGenerator(e(s).mark((function n(){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t.url,{query:{f:"json",token:t.apiKey},responseType:"json",signal:r});case 2:if(!((a=e.sent).data&&Array.isArray(a.data.layers)&&a.data.layers.length>0)){e.next=5;break}return e.abrupt("return",a.data.layers[0].id);case 5:case"end":return e.stop()}}),n)})))()}},{key:"_fetchServiceLayer",value:function(r){var t=this;return o.asyncToGenerator(e(s).mark((function n(){var a,o,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t.parsedUrl.path,{query:{f:"json",token:t.apiKey},responseType:"json",signal:r});case 2:if((a=e.sent).ssl&&(t.url=t.url.replace(/^http:/i,"https:")),o=!1,a.data.layerType&&"Voxel"===a.data.layerType&&(o=!0),!o){e.next=7;break}return e.abrupt("return",t._fetchVoxelServiceLayer());case 7:i=a.data,t.read(i,{origin:"service",url:t.parsedUrl}),t.validateLayer(i);case 9:case"end":return e.stop()}}),n)})))()}},{key:"_fetchVoxelServiceLayer",value:function(r){var t=this;return o.asyncToGenerator(e(s).mark((function n(){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t.parsedUrl.path+"/layer",{query:{f:"json",token:t.apiKey},responseType:"json",signal:r});case 2:a=e.sent.data,t.read(a,{origin:"service",url:t.parsedUrl}),t.validateLayer(a);case 4:case"end":return e.stop()}}),n)})))()}},{key:"_ensureLoadBeforeSave",value:function(){var r=this;return o.asyncToGenerator(e(s).mark((function t(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.load();case 2:if(e.t0="beforeSave"in r&&"function"==typeof r.beforeSave,!e.t0){e.next=6;break}return e.next=6,r.beforeSave();case 6:case"end":return e.stop()}}),t)})))()}},{key:"validateLayer",value:function(e){}},{key:"_updateTypeKeywords",value:function(e,r,t){e.typeKeywords||(e.typeKeywords=[]);var n=r.getTypeKeywords(),a=!0,o=!1,s=void 0;try{for(var i,u=n[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var l=i.value;e.typeKeywords.push(l)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e,r,t){return t.indexOf(e)===r})),t===v.newItem&&(e.typeKeywords=e.typeKeywords.filter((function(e){return"Hosted Service"!==e}))))}},{key:"_saveAs",value:function(r,t){var n=this;return o.asyncToGenerator(e(s).mark((function a(){var i,u,c,p,d;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.objectSpread({},L,t),u=R.default.from(r),e.t0=u,e.t0){e.next=7;break}return E.error("_saveAs(): requires a portal item parameter"),e.next=7,Promise.reject(new(0,l.default)("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"));case 7:return u.id&&((u=u.clone()).id=null),c=u.portal||j.default.getDefault(),e.next=11,n._ensureLoadBeforeSave();case 11:return u.type=G,u.portal=c,p={origin:"portal-item",url:null,messages:[],portal:c,portalItem:u,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},d={layers:[n.write({},p)]},e.next=16,Promise.all(p.resources.pendingOperations);case 16:return e.next=18,n._validateAgainstJSONSchema(d,p,i);case 18:return u.url=n.url,u.title||(u.title=n.title),n._updateTypeKeywords(u,i,v.newItem),e.next=23,c._signIn();case 23:return e.next=25,c.user.addItem({item:u,folder:i&&i.folder,data:d});case 25:return e.next=27,(0,O.saveResources)(n.resourceReferences,p,null);case 27:return n.portalItem=u,(0,w.updateOrigins)(p),p.portalItem=u,e.abrupt("return",(e.sent,e.sent,e.sent,e.sent,e.sent,u));case 31:case"end":return e.stop()}}),a)})))()}},{key:"_save",value:function(r){var t=this;return o.asyncToGenerator(e(s).mark((function n(){var a,i,u;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.objectSpread({},L,r),e.t0=t.portalItem,e.t0){e.next=6;break}return E.error("_save(): requires the .portalItem property to be set"),e.next=6,Promise.reject(new(0,l.default)("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"));case 6:if(e.t1=t.portalItem.type!==G,!e.t1){e.next=11;break}return E.error("_save(): Non-matching portal item type. Got "+t.portalItem.type+", expected "+G),e.next=11,Promise.reject(new(0,l.default)("sceneservice:portal-item-wrong-type",'Portal item needs to have type "'.concat(G,'"')));case 11:return e.next=13,t._ensureLoadBeforeSave();case 13:return i={origin:"portal-item",url:t.portalItem.itemUrl&&(0,f.urlToObject)(t.portalItem.itemUrl),messages:[],portal:t.portalItem.portal||j.default.getDefault(),portalItem:t.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},u={layers:[t.write({},i)]},e.next=16,Promise.all(i.resources.pendingOperations);case 16:return e.next=18,t._validateAgainstJSONSchema(u,i,a);case 18:return t.portalItem.url=t.url,t.portalItem.title||(t.portalItem.title=t.title),t._updateTypeKeywords(t.portalItem,a,v.existingItem),e.next=23,t.portalItem.update({data:u});case 23:return e.next=25,(0,O.saveResources)(t.resourceReferences,i,null);case 25:return(0,w.updateOrigins)(i),e.abrupt("return",(e.sent,e.sent,e.sent,e.sent,t.portalItem));case 27:case"end":return e.stop()}}),n)})))()}},{key:"_validateAgainstJSONSchema",value:function(r,n,a){return o.asyncToGenerator(e(s).mark((function o(){var i,u,c,p;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.messages.filter((function(e){return"error"===e.type})).map((function(e){return new(0,l.default)(e.name,e.message,e.details)})),a&&a.validationOptions.ignoreUnsupported&&(i=i.filter((function(e){return"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name}))),!a.validationOptions.enabled&&!P){e.next=10;break}return e.next=4,t("72Y9W");case 4:if(!((u=e.sent.validate(r,a.portalItemLayerType)).length>0)){e.next=10;break}if(c="Layer item did not validate:\n".concat(u.join("\n")),E.error("_validateAgainstJSONSchema(): ".concat(c)),"throw"!==a.validationOptions.failPolicy){e.next=10;break}throw p=u.map((function(e){return new(0,l.default)("sceneservice:schema-validation",e)})).concat(i),new(0,l.default)("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:p});case 10:if(!(i.length>0)){e.next=12;break}throw new(0,l.default)("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i});case 12:case"end":return e.stop()}}),o)})))()}}]),a}(r);return(0,i._)([(0,y.property)(T.id)],n.prototype,"id",void 0),(0,i._)([(0,y.property)({type:k.default})],n.prototype,"spatialReference",void 0),(0,i._)([(0,m.reader)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],n.prototype,"readSpatialReference",null),(0,i._)([(0,y.property)({type:b.default})],n.prototype,"fullExtent",void 0),(0,i._)([(0,m.reader)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],n.prototype,"readFullExtent",null),(0,i._)([(0,y.property)({readOnly:!0,type:S.default})],n.prototype,"heightModelInfo",void 0),(0,i._)([(0,y.property)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],n.prototype,"minScale",void 0),(0,i._)([(0,y.property)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],n.prototype,"maxScale",void 0),(0,i._)([(0,y.property)({readOnly:!0})],n.prototype,"version",void 0),(0,i._)([(0,m.reader)("version",["store.version"])],n.prototype,"readVersion",null),(0,i._)([(0,y.property)({type:String,json:{read:{source:"copyrightText"}}})],n.prototype,"copyright",void 0),(0,i._)([(0,y.property)({type:String,json:{read:!1}})],n.prototype,"sublayerTitleMode",void 0),(0,i._)([(0,y.property)({type:String})],n.prototype,"title",void 0),(0,i._)([(0,m.reader)("portal-item","title")],n.prototype,"readTitlePortalItem",null),(0,i._)([(0,m.reader)("service","title",["name"])],n.prototype,"readTitleService",null),(0,i._)([(0,y.property)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],n.prototype,"layerId",void 0),(0,i._)([(0,y.property)(T.url)],n.prototype,"url",null),(0,i._)([(0,g.writer)("url")],n.prototype,"writeUrl",null),(0,i._)([(0,y.property)()],n.prototype,"parsedUrl",null),(0,i._)([(0,y.property)({readOnly:!0})],n.prototype,"store",void 0),(0,i._)([(0,y.property)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],n.prototype,"rootNode",void 0),n=(0,i._)([(0,x.subclass)("esri.layers.mixins.SceneService")],n)},N=-1e38,P=!1;(h=v||(v={}))[h.existingItem=0]="existingItem",h[h.newItem=1]="newItem";var U,q,G="Scene Service",L={getTypeKeywords:function(){return[]},portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}};(q=U||(U={}))[q.SAVE=0]="SAVE",q[q.SAVE_AS=1]="SAVE_AS"})),t.register("dUfDG",(function(n,a){r(n.exports,"saveResources",(function(){return d}));var o=t("8TSCy"),s=t("2TvXO"),i=t("dqkq5"),u=t("kyj08"),l=t("10vEZ"),c=t("9Rl0r"),p=t("jwlkH");function d(e,r,t){return f.apply(this,arguments)}function f(){return(f=o.asyncToGenerator(e(s).mark((function r(t,n,a){var o,i,d,f,v,m,x,g,w,b,S,k,I,T,_,j,R,O,E,A,N,P,U;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.resources){e.next=2;break}return e.abrupt("return");case 2:for(o=n.portalItem===t.portalItem?new Set(t.paths):new Set,t.paths.length=0,t.portalItem=n.portalItem,i=new Set(n.resources.toKeep.map((function(e){return e.resource.path}))),d=new Set,f=[],i.forEach((function(e){o.delete(e),t.paths.push(e)})),v=!0,m=!1,x=void 0,e.prev=7,g=n.resources.toUpdate[Symbol.iterator]();!(v=(w=g.next()).done);v=!0)b=w.value,o.delete(b.resource.path),i.has(b.resource.path)||d.has(b.resource.path)?(S=b.resource,k=b.content,I=b.finish,T=b.error,_=(0,p.getSiblingOfSameTypeI)(S,(0,c.generateUUID)()),t.paths.push(_.path),f.push(y({resource:_,content:k,finish:I,error:T},a))):(t.paths.push(b.resource.path),f.push(h(b,a)),d.add(b.resource.path));e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),m=!0,x=e.t0;case 15:e.prev=15,e.prev=16,v||null==g.return||g.return();case 18:if(e.prev=18,!m){e.next=21;break}throw x;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(j=!0,R=!1,O=void 0,e.prev=24,E=n.resources.toAdd[Symbol.iterator]();!(j=(A=E.next()).done);j=!0)N=A.value,f.push(y(N,a)),t.paths.push(N.resource.path);e.next=32;break;case 28:e.prev=28,e.t1=e.catch(24),R=!0,O=e.t1;case 32:e.prev=32,e.prev=33,j||null==E.return||E.return();case 35:if(e.prev=35,!R){e.next=38;break}throw O;case 38:return e.finish(35);case 39:return e.finish(32);case 40:if(o.forEach((function(e){var r=n.portalItem.resourceFromPath(e);f.push(r.portalItem.removeResource(r).catch((function(){})))})),0!==f.length){e.next=42;break}return e.abrupt("return");case 42:return e.next=44,(0,l.eachAlways)(f);case 44:if(P=e.sent,(0,l.throwIfAborted)(a),!((U=P.filter((function(e){return"error"in e})).map((function(e){return e.error}))).length>0)){e.next=49;break}throw new(0,u.default)("save:resources","Failed to save one or more resources",{errors:U});case 49:case"end":return e.stop()}}),r,null,[[7,11,15,23],[16,,18,22],[24,28,32,40],[33,,35,39]])})))).apply(this,arguments)}function y(e,r){return v.apply(this,arguments)}function v(){return(v=o.asyncToGenerator(e(s).mark((function r(t,n){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.result)(t.resource.portalItem.addResource(t.resource,t.content,n));case 2:if(!0===(a=e.sent).ok){e.next=5;break}throw t.error&&t.error(a.error),a.error;case 5:t.finish&&t.finish(t.resource);case 6:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function h(e,r){return m.apply(this,arguments)}function m(){return(m=o.asyncToGenerator(e(s).mark((function r(t,n){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.result)(t.resource.update(t.content,n));case 2:if(!0===(a=e.sent).ok){e.next=5;break}throw t.error(a.error),a.error;case 5:t.finish(t.resource);case 6:case"end":return e.stop()}}),r)})))).apply(this,arguments)}})),t.register("72Y9W",(function(e,r){e.exports=t("4WKyX")(t("aNJCr").getBundleURL("9gLwi")+t("iE7OH").resolve("5DuLk")).then((function(){return t("d9D9c")}))})),t.register("4WKyX",(function(e,r){"use strict";var n=t("2prpb");e.exports=n((function(e){return new Promise((function(r,t){var n=document.getElementsByTagName("script");if([].concat(n).some((function(r){return r.src===e})))r();else{var a=document.createElement("link");a.href=e,a.rel="preload",a.as="script",document.head.appendChild(a);var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.charset="utf-8",o.src=e,o.onerror=function(r){var n=new TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(r.message));o.onerror=o.onload=null,o.remove(),t(n)},o.onload=function(){o.onerror=o.onload=null,r()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),t.register("2prpb",(function(e,r){"use strict";var t={},n={},a={};function o(e){switch(e){case"preload":return n;case"prefetch":return a;default:return t}}e.exports=function(e,r){return function(t){var n=o(r);return n[t]?n[t]:n[t]=e.apply(null,arguments).catch((function(e){throw delete n[t],e}))}}})),t.register("aNJCr",(function(e,t){var n;r(e.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var a={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var r=a[e];return r||(r=function(){try{throw new Error}catch(r){var e=(""+r.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),a[e]=r),r}})),t.register("iE7OH",(function(e,t){var n,a;r(e.exports,"register",(function(){return n}),(function(e){return n=e})),r(e.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};n=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)o[r[t]]=e[r[t]]},a=function(e){var r=o[e];if(null==r)throw new Error("Could not resolve bundle with id "+e);return r}}))}();
//# sourceMappingURL=BuildingSceneLayer.078754f6.js.map
