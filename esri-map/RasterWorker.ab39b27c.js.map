{"mappings":"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","sources":["node_modules/@arcgis/core/layers/support/RasterWorker.js","node_modules/@arcgis/core/renderers/support/rasterRendererChecks.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import r from\"../../geometry/support/GeographicTransformation.js\";import e from\"./PixelBlock.js\";import{decode as t}from\"./rasterFormats/RasterCodec.js\";import{split as s,mosaic as o,approximateTransform as i,getLocalArithmeticNorthRotations as n}from\"./rasterFunctions/pixelUtils.js\";import{create as a}from\"./rasterFunctions/rasterFunctionHelper.js\";import{requirePE as l,load as m,getProjectionOffsetGrid as c}from\"./rasterFunctions/rasterProjectionHelper.js\";import{computeStatisticsHistograms as f,estimateStatisticsHistograms as p}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as u,convertToLocalDirections as S}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as d}from\"./rasterTransforms/utils.js\";import y from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as x}from\"../../views/2d/engine/flow/dataUtils.js\";import h from\"../../geometry/Extent.js\";import O from\"../../geometry/Point.js\";class N{convertVectorFieldData(r){const t=e.fromJSON(r.pixelBlock),s=u(t,r.type);return Promise.resolve(null!=s?s.toJSON():null)}computeStatisticsHistograms(r){const t=e.fromJSON(r.pixelBlock),s=f(t);return Promise.resolve(s)}async decode(r){const e=await t(r.data,r.options);return e&&e.toJSON()}symbolize(r){r.pixelBlock=e.fromJSON(r.pixelBlock),r.extent=r.extent?h.fromJSON(r.extent):null;const t=this.symbolizer.symbolize(r);return Promise.resolve(null!=t?t.toJSON():null)}async updateSymbolizer(r){this.symbolizer=y.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)}async updateRasterFunction(r){this.rasterFunction=a(r.rasterFunctionJSON)}async process(r){const t=this.rasterFunction.process({extent:h.fromJSON(r.extent),primaryPixelBlocks:r.primaryPixelBlocks.map((r=>null!=r?e.fromJSON(r):null)),primaryPixelSizes:r.primaryPixelSizes?.map((r=>null!=r?O.fromJSON(r):null)),primaryRasterIds:r.primaryRasterIds});return null!=t?t.toJSON():null}stretch(r){const t=this.symbolizer.simpleStretch(e.fromJSON(r.srcPixelBlock),r.stretchParams);return Promise.resolve(null!=t&&t.toJSON())}estimateStatisticsHistograms(r){const t=p(e.fromJSON(r.srcPixelBlock));return Promise.resolve(t)}split(r){const t=s(e.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel);return t&&t.forEach(((r,e)=>{t.set(e,r?.toJSON())})),Promise.resolve(t)}async mosaicAndTransform(r){const t=r.srcPixelBlocks.map((r=>r?new e(r):null)),s=o(t,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});let a,l=s;return r.coefs&&(l=i(s,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(a=n(r.destDimension,r.gcsGrid),l=S(l,r.isUV?\"vector-uv\":\"vector-magdir\",a)),{pixelBlock:l?.toJSON(),localNorthDirections:a}}async createFlowMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:s,indexData:o}=await x(r.meshType,r.simulationSettings,t,e.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(e){const t=h.fromJSON(e.projectedExtent),s=h.fromJSON(e.srcBufferExtent);let o=null;e.datumTransformationSteps&&(o=new r({steps:e.datumTransformationSteps})),(e.includeGCSGrid||l(t.spatialReference,s.spatialReference,o))&&await m();const i=e.rasterTransform?d(e.rasterTransform):null;return c({...e,projectedExtent:t,srcBufferExtent:s,datumTransformation:o,rasterTransform:i})}}export{N as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction n(n){return[\"u8\",\"s8\"].includes(n.pixelType)&&null!=n.statistics?.[0]?.min&&null!=n.statistics[0]?.max&&1===n.bandCount}function t(t,e){const{attributeTable:u,bandCount:r}=t;if(null==u&&n(t))return!0;if(null==u||r>1)return!1;if(e){if(null==u.fields.find((n=>n.name.toLowerCase()===e.toLowerCase())))return!1}return!0}function e(n){const{bandCount:t,dataType:e,pixelType:u}=n;return\"elevation\"===e||\"generic\"===e&&1===t&&(\"s16\"===u||\"s32\"===u||\"f32\"===u||\"f64\"===u)}function u(n,t=!1){const{bandCount:e,colormap:u,pixelType:r}=n;return 1===e&&(!!u?.length||!t&&\"u8\"===r)}function r(n,t=!1){const{attributeTable:e,bandCount:u}=n;return 1===u&&(!t||null!=e||null!=n.histograms)}function o(n){const{dataType:t}=n;return\"vector-uv\"===t||\"vector-magdir\"===t}function i(n){const{dataType:t}=n;return\"vector-uv\"===t||\"vector-magdir\"===t}export{r as isClassBreaksSupported,u as isColormapRendererSupported,i as isFlowRendererSupported,e as isShadedReliefRendererSupported,n as isSingleBand8BitRasterWithStats,t as isUVRendererSupported,o as isVectorFieldRendererSupported};\n"],"names":["parcelRequire","$2cccffad5e6f32a7$export$2e2bcd8739ae039","convertVectorFieldData","r","t","$1wOrp","default","fromJSON","pixelBlock","s","$dqihR","type","Promise","resolve","toJSON","computeStatisticsHistograms","$e6UOF","async","e","$gAtfu","decode","data","options","symbolize","extent","$2WnyR","this","symbolizer","$es4Xy","symbolizerJSON","histograms","rendererJSON","rasterFunction","$lWZIb","create","rasterFunctionJSON","process","primaryPixelBlocks","map","primaryPixelSizes","$dZxPT","primaryRasterIds","stretch","simpleStretch","srcPixelBlock","stretchParams","estimateStatisticsHistograms","split","$2wUG0","tileSize","maximumPyramidLevel","forEach","set","srcPixelBlocks","mosaic","srcMosaicSize","blockWidths","alignmentInfo","clipOffset","clipSize","a","l","coefs","approximateTransform","destDimension","sampleSpacing","interpolation","projectDirections","gcsGrid","getLocalArithmeticNorthRotations","convertToLocalDirections","isUV","localNorthDirections","Float32Array","flowData","buffer","mask","Uint8Array","maskBuffer","width","height","vertexData","indexData","o","$fDLIP","createFlowMesh","meshType","simulationSettings","signal","result","vertexBuffer","indexBuffer","transferList","projectedExtent","srcBufferExtent","datumTransformationSteps","$8Qqyu","steps","includeGCSGrid","$2WfpR","requirePE","spatialReference","load","i","rasterTransform","$kNc4A","readTransform","getProjectionOffsetGrid","datumTransformation","$03b82fb5f5613492$export$7ae2335564cbc5a5","attributeTable","u","bandCount","n","includes","pixelType","statistics","min","max","fields","find","name","toLowerCase","$03b82fb5f5613492$export$e584c8e089975b22","dataType","$03b82fb5f5613492$export$9786ab074126fe06","colormap","length","$03b82fb5f5613492$export$a36eab7c09a04daf","$03b82fb5f5613492$export$a6ba38da0f460a97","$03b82fb5f5613492$export$bf76c8362673879d"],"version":3,"file":"RasterWorker.ab39b27c.js.map"}