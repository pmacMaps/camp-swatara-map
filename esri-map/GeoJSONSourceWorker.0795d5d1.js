!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;n.register("jUMXJ",(function(r,i){var a;a=r.exports,Object.defineProperty(a,"__esModule",{value:!0,configurable:!0}),t(r.exports,"default",(function(){return w}));var s=n("8TSCy"),o=n("2TvXO"),u=n("9pNSx"),l=n("kyj08"),c=n("jHOLN"),f=n("7qybv"),d=n("10vEZ"),h=n("79LpT"),p=n("eY5Yp"),m=n("akQYU"),v=n("73BcH"),y=n("fP7bp"),g=n("f3b5K"),x=n("4shxe"),b=n("dxhdj"),_=n("5JzQt"),I=n("4nMX7"),k=n("82Efb"),S=n("7vTUY"),T={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},w=function(){"use strict";function t(){s.classCallCheck(this,t);var n,r=this;this._queryEngine=null,this._snapshotFeatures=(n=s.asyncToGenerator(e(o).mark((function t(n){var i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._fetch(n);case 2:return i=e.sent,e.abrupt("return",r._createFeatures(i));case 4:case"end":return e.stop()}}),t)}))),function(e){return n.apply(this,arguments)})}return s.createClass(t,[{key:"destroy",value:function(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){var a,u,c,f,d,h,m,y,_,w,F,M,E,C,B,j,N,V,q,z,R,Y,P,G,A,D,X,O,Z;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.loadOptions={url:t.url,customParameters:t.customParameters},a=[],e.next=4,r._checkProjection(t.spatialReference);case 4:if(u=null,e.t0=t.url,!e.t0){e.next=10;break}return e.next=9,r._fetch(null==n?void 0:n.signal);case 9:u=e.sent;case 10:c=(0,x.inferLayerProperties)(u,{geometryType:t.geometryType}),f=t.fields||c.fields||[],d=null!=t.hasZ?t.hasZ:c.hasZ,h=c.geometryType,m=t.objectIdField||c.objectIdFieldName||"__OBJECTID",y=t.spatialReference||p.WGS84,_=t.timeInfo,f===c.fields&&c.unknownFields.length>0&&a.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}}),(w=f.find((function(e){return e.name===m})))?("esriFieldTypeString"!==w.type&&(w.type="esriFieldTypeOID"),w.editable=!1,w.nullable=!1):(w={alias:m,name:m,type:"string"===c.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},f.unshift(w)),F={},M=!0,E=!1,C=void 0,e.prev=17,B=f[Symbol.iterator]();case 19:if(M=(j=B.next()).done){e.next=29;break}if(null==(N=j.value).name&&(N.name=N.alias),null==N.alias&&(N.alias=N.name),N.name){e.next=23;break}throw new(0,l.default)("geojson-layer:invalid-field-name","field name is missing",{field:N});case 23:if(k.kebabDict.jsonValues.includes(N.type)){e.next=25;break}throw new(0,l.default)("geojson-layer:invalid-field-type",'invalid type for field "'.concat(N.name,'"'),{field:N});case 25:N.name!==w.name&&void 0!==(V=(0,S.getFieldDefaultValue)(N))&&(F[N.name]=V);case 26:M=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(17),E=!0,C=e.t1;case 35:e.prev=35,e.prev=36,M||null==B.return||B.return();case 38:if(e.prev=38,!E){e.next=41;break}throw C;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return r._fieldsIndex=new(0,I.default)(f),(q=r._fieldsIndex.requiredFields.indexOf(w))>-1&&r._fieldsIndex.requiredFields.splice(q,1),_&&(_.startTimeField&&((z=r._fieldsIndex.get(_.startTimeField))?(_.startTimeField=z.name,z.type="esriFieldTypeDate"):_.startTimeField=null),_.endTimeField&&((R=r._fieldsIndex.get(_.endTimeField))?(_.endTimeField=R.name,R.type="esriFieldTypeDate"):_.endTimeField=null),_.trackIdField&&((Y=r._fieldsIndex.get(_.trackIdField))?_.trackIdField=Y.name:(_.trackIdField=null,a.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:_}}))),_.startTimeField||_.endTimeField||(a.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:_}}),_=null)),P=h?(0,b.createDrawingInfo)(h):null,G={warnings:a,featureErrors:[],layerDefinition:s.objectSpread({},T,{drawingInfo:P,templates:(0,b.createDefaultTemplate)(F),extent:null,geometryType:h,objectIdField:m,fields:f,hasZ:!!d,timeInfo:_})},r._queryEngine=new(0,g.default)({fields:f,geometryType:h,hasM:!1,hasZ:d,objectIdField:m,spatialReference:y,timeInfo:_,featureStore:new(0,v.default)({geometryType:h,hasM:!1,hasZ:d}),cacheSpatialQueries:!0}),r._createDefaultAttributes=(0,b.createDefaultAttributesFunction)(F,m),e.next=50,r._createFeatures(u);case 50:return A=e.sent,r._objectIdGenerator=r._createObjectIdGenerator(r._queryEngine,A),D=r._normalizeFeatures(A,G.warnings,G.featureErrors),r._queryEngine.featureStore.addMany(D),G.layerDefinition.extent=r._queryEngine.fullExtent,G.layerDefinition.timeInfo&&(X=r._queryEngine.timeExtent,O=X.start,Z=X.end,G.layerDefinition.timeInfo.timeExtent=[O,Z]),e.abrupt("return",G);case 55:case"end":return e.stop()}}),i,null,[[17,31,35,43],[36,,38,42]])})))()}},{key:"applyEdits",value:function(t){var n=this;return s.asyncToGenerator(e(o).mark((function r(){var i,a,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n._queryEngine,a=i.spatialReference,s=i.geometryType,e.next=3,Promise.all([(0,_.loadGeometryEngineForSimplify)(a,s),(0,y.checkProjectionSupport)(t.adds,a),(0,y.checkProjectionSupport)(t.updates,a)]);case 3:return e.next=5,n._waitSnapshotComplete();case 5:return e.abrupt("return",(e.sent,e.sent,n._applyEdits(t)));case 6:case"end":return e.stop()}}),r)})))()}},{key:"queryFeatures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,r._queryEngine.executeQuery(t,n.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryFeatureCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,r._queryEngine.executeQueryForCount(t,n.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryObjectIds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,r._queryEngine.executeQueryForIds(t,n.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"queryExtent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,r._queryEngine.executeQueryForExtent(t,n.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"querySnapping",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return s.asyncToGenerator(e(o).mark((function i(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._waitSnapshotComplete();case 2:return e.abrupt("return",(e.sent,r._queryEngine.executeQueryForSnapping(t,n.signal)));case 3:case"end":return e.stop()}}),i)})))()}},{key:"refresh",value:function(t){var n=this;return s.asyncToGenerator(e(o).mark((function r(){var i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loadOptions.customParameters=t,null==(i=n._snapshotTask)||i.abort(),n._snapshotTask=(0,d.createTask)(n._snapshotFeatures),n._snapshotTask.promise.then((function(e){n._queryEngine.featureStore.clear(),n._objectIdGenerator=n._createObjectIdGenerator(n._queryEngine,e);var t=n._normalizeFeatures(e);t&&n._queryEngine.featureStore.addMany(t)}),(function(e){n._queryEngine.featureStore.clear(),(0,d.isAbortError)(e)||c.default.getLogger("esri.layers.GeoJSONLayer").error(new(0,l.default)("geojson-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=7,n._waitSnapshotComplete();case 7:return e.abrupt("return",(e.sent,{extent:n._queryEngine.fullExtent,timeExtent:n._queryEngine.timeExtent}));case 8:case"end":return e.stop()}}),r)})))()}},{key:"_createFeatures",value:function(t){var n=this;return s.asyncToGenerator(e(o).mark((function r(){var i,a,s,u,l,c,d,h,v,g,b;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n._queryEngine,a=i.geometryType,s=i.hasZ,u=i.objectIdField,l=(0,x.createOptimizedFeatures)(t,{geometryType:a,hasZ:s,objectIdField:u}),c=!0,d=!1,h=void 0,(0,p.equals)(n._queryEngine.spatialReference,p.WGS84)){e.next=19;break}for(e.prev=3,v=l[Symbol.iterator]();!(c=(g=v.next()).done);c=!0)b=g.value,(0,f.isSome)(b.geometry)&&(b.geometry=(0,m.convertFromGeometry)((0,y.project)((0,m.convertToGeometry)(b.geometry,n._queryEngine.geometryType,n._queryEngine.hasZ,!1),p.WGS84,n._queryEngine.spatialReference)));e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),d=!0,h=e.t0;case 11:e.prev=11,e.prev=12,c||null==v.return||v.return();case 14:if(e.prev=14,!d){e.next=17;break}throw h;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),r,null,[[3,7,11,19],[12,,14,18]])})))()}},{key:"_waitSnapshotComplete",value:function(){var t=this;return s.asyncToGenerator(e(o).mark((function n(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._snapshotTask||t._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,t._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",t._waitSnapshotComplete());case 9:case"end":return e.stop()}}),n,null,[[1,6]])})))()}},{key:"_fetch",value:function(t){var n=this;return s.asyncToGenerator(e(o).mark((function r(){var i,a,l,c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.loadOptions,a=i.url,l=i.customParameters,e.next=5,(0,u.default)(a,{responseType:"json",query:s.objectSpread({},l),signal:t});case 5:return c=e.sent.data,e.next=8,(0,x.validateGeoJSON)(c);case 8:return e.abrupt("return",(e.sent,c));case 9:case"end":return e.stop()}}),r)})))()}},{key:"_normalizeFeatures",value:function(e,t,n){var r=this._queryEngine.objectIdField,i=[],a=!0,s=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=this._createDefaultAttributes(),d=(0,_.mixAttributes)(this._fieldsIndex,f,c.attributes,!0,t);d?null==n||n.push(d):(this._assignObjectId(f,c.attributes,!0),c.attributes=f,c.objectId=f[r],i.push(c))}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}return i}},{key:"_applyEdits",value:function(e){var t=e.adds,n=e.updates,r=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),n&&n.length&&this._applyUpdateEdits(i,n),r&&r.length){var a=!0,s=!1,o=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i.deleteResults.push((0,_.createFeatureEditSuccessResult)(c))}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}this._queryEngine.featureStore.removeManyById(r)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}}},{key:"_applyAddEdits",value:function(e,t){var n=e.addResults,r=this._queryEngine,i=r.geometryType,a=r.hasM,s=r.hasZ,o=r.objectIdField,u=r.spatialReference,l=r.featureStore,c=[],d=!0,p=!1,v=void 0;try{for(var g,x=t[Symbol.iterator]();!(d=(g=x.next()).done);d=!0){var b=g.value;if(b.geometry&&i!==(0,h.getJsonType)(b.geometry))n.push((0,_.createFeatureEditErrorResult)("Incorrect geometry type."));else{var I=this._createDefaultAttributes(),k=(0,_.mixAttributes)(this._fieldsIndex,I,b.attributes);if(k)n.push(k);else{if(this._assignObjectId(I,b.attributes),b.attributes=I,null!=b.uid){var S=b.attributes[o];e.uidToObjectId[b.uid]=S}(0,f.isSome)(b.geometry)&&(b.geometry=(0,y.project)((0,_.simplify)(b.geometry,u),b.geometry.spatialReference,u)),c.push(b),n.push((0,_.createFeatureEditSuccessResult)(b.attributes[o]))}}}}catch(e){p=!0,v=e}finally{try{d||null==x.return||x.return()}finally{if(p)throw v}}l.addMany((0,m.convertFromFeatures)([],c,i,s,a,o))}},{key:"_applyUpdateEdits",value:function(e,t){var n=e.updateResults,r=this._queryEngine,i=r.geometryType,a=r.hasM,s=r.hasZ,o=r.objectIdField,u=r.spatialReference,l=r.featureStore,c=!0,d=!1,p=void 0;try{for(var v,g=t[Symbol.iterator]();!(c=(v=g.next()).done);c=!0){var x=v.value,b=x.attributes,I=x.geometry,k=b&&b[o];if(null!=k)if(l.has(k)){var S=(0,m.convertToFeature)(l.getFeature(k),i,s,a);if((0,f.isSome)(I)){if(i!==(0,h.getJsonType)(I)){n.push((0,_.createFeatureEditErrorResult)("Incorrect geometry type."));continue}S.geometry=(0,y.project)((0,_.simplify)(I,u),I.spatialReference,u)}if(b){var T=(0,_.mixAttributes)(this._fieldsIndex,S.attributes,b);if(T){n.push(T);continue}}l.add((0,m.convertFromFeature)(S,i,s,a,o)),n.push((0,_.createFeatureEditSuccessResult)(k))}else n.push((0,_.createFeatureEditErrorResult)("Feature with object id ".concat(k," missing")));else n.push((0,_.createFeatureEditErrorResult)("Identifier field ".concat(o," missing")))}}catch(e){d=!0,p=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw p}}}},{key:"_createObjectIdGenerator",value:function(e,t){var n=e.fieldsIndex.get(e.objectIdField);if("esriFieldTypeString"===n.type)return function(){return n.name+"-"+Date.now().toString(16)};var r=Number.NEGATIVE_INFINITY,i=!0,a=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;l.objectId&&(r=Math.max(r,l.objectId))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return r=Math.max(0,r)+1,function(){return r++}}},{key:"_assignObjectId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._queryEngine.objectIdField;e[r]=n&&r in t?t[r]:this._objectIdGenerator()}},{key:"_checkProjection",value:function(t){return s.asyncToGenerator(e(o).mark((function n(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.checkProjectionSupport)(p.WGS84,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new(0,l.default)("geojson-layer","Projection not supported");case 8:case"end":return e.stop()}}),n,null,[[0,5]])})))()}}]),t}()})),n.register("73BcH",(function(e,r){t(e.exports,"default",(function(){return p}));var i=n("8TSCy"),a=n("kyj08"),s=n("amfHf"),o=n("jHOLN"),u=n("7qybv"),l=n("ayLat"),c=n("8TwEW"),f=n("akQYU"),d=n("1ZPLr"),h=n("1zB3R"),p=function(){"use strict";function e(t){i.classCallCheck(this,e),this.geometryInfo=t,this._boundsStore=new(0,d.BoundsStore),this._featuresById=new Map,this._markedIds=new Set,this.events=new(0,s.default),this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}return i.createClass(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){var e=this;if(!this.numFeatures)return null;var t=(0,c.create)(c.NEGATIVE_INFINITY);return this._featuresById.forEach((function(n){var r=e._boundsStore.get(n.objectId);r&&(t[0]=Math.min(r[0],t[0]),t[1]=Math.min(r[1],t[1]),t[2]=Math.max(r[2],t[2]),t[3]=Math.max(r[3],t[3]))})),t}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){(0,u.isSome)(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this._add(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=this._featuresById.get(s);o&&this._remove(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this._emitChanged()}},{key:"forEachBounds",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,c=this._boundsStore.get(u.objectId);c&&t((0,l.fromRect)(n,c))}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(n,r){e._markedIds.has(r)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var n,r=this._featuresById.get(t);if(this._markedIds.add(t),r?(e.displayId=r.displayId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):(0,u.isSome)(this.onFeatureAdd)&&this.onFeatureAdd(e),(0,u.isNone)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);n=(0,f.getBoundsOptimizedGeometry)((0,u.isSome)(n)?n:(0,c.create)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,u.isSome)(n)&&this._boundsStore.set(t,n),this._featuresById.set(t,e)}else o.default.getLogger("esri.layers.graphics.data.FeatureStore").error(new(0,a.default)("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){return(0,u.isSome)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}]),e}()})),n.register("1ZPLr",(function(e,r){t(e.exports,"BoundsStore",(function(){return u}));var i=n("8TSCy"),a=n("2VlWd"),s=n("bWAZj"),o={minX:0,minY:0,maxX:0,maxY:0};var u=function(){"use strict";function e(){var t=this;i.classCallCheck(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new(0,s.PooledRBush)(9,(0,a.default)("esri-csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){var e=t;if(t._indexInvalid){var n=new Array(t._idByBounds.size),r=0;t._idByBounds.forEach((function(e,t){n[r++]=t})),t._indexInvalid=!1,t._index.clear(),t._index.load(n)}else t._boundsToLoad.length&&(t._index.load(t._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),t._boundsToLoad.length=0)}}return i.createClass(e,[{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n,r,i,a=this;this._loadIndex(),n=this._index,r=e,i=function(e){return t(a._idByBounds.get(e))},o.minX=r[0],o.minY=r[1],o.maxX=r[2],o.maxY=r[3],n.search(o,i)}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()})),n.register("bWAZj",(function(e,r){t(e.exports,"PooledRBush",(function(){return l}));var i=n("8TSCy"),a=n("lNwWH"),s=n("7qybv"),o=n("6v7Z0"),u=n("fcGl2"),l=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;i.classCallCheck(this,e),this.compareMinX=h,this.compareMinY=p,this._toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this._toBBox=n:this._initFormat(n)),this.clear()}return i.createClass(e,[{key:"destroy",value:function(){this.clear(),_.prune(),I.prune(),k.prune(),S.prune()}},{key:"all",value:function(e){this._all(this.data,e)}},{key:"search",value:function(e,t){var n=this.data,r=this._toBBox;if(x(e,n))for(_.clear();n;){for(var i=0,a=n.children.length;i<a;i++){var s=n.children[i],o=n.leaf?r(s):s;x(e,o)&&(n.leaf?t(s):g(e,o)?this._all(s,t):_.push(s))}n=_.pop()}}},{key:"collides",value:function(e){var t=this.data,n=this._toBBox;if(!x(e,t))return!1;for(_.clear();t;){for(var r=0,i=t.children.length;r<i;r++){var a=t.children[r],s=t.leaf?n(a):a;if(x(e,s)){if(t.leaf||g(e,s))return!0;_.push(a)}}t=_.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this.data.height-1),this}},{key:"clear",value:function(){return this.data=new w([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this.data,r=null,i=0,o=!1,u=this._toBBox(e);for(k.clear(),S.clear();n||k.length>0;){var l;if(n||(n=(0,s.assumeNonNull)(k.pop()),r=k.data[k.length-1],i=null!=(l=S.pop())?l:0,o=!0),n.leaf&&-1!==(t=(0,a.indexOf)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),k.push(n),this._condense(k),this;o||n.leaf||!g(n,u)?r?(i++,n=r.children[i],o=!1):n=null:(k.push(n),S.push(i),i=0,r=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(e){return this.data=e,this}},{key:"_all",value:function(e,t){var n=e;for(I.clear();n;){var r,i=!0,a=!1,s=void 0;if(!0===n.leaf)try{for(var o,u=n.children[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){t(o.value)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}else I.pushArray(n.children);n=null!=(r=I.pop())?r:null}}},{key:"_build",value:function(e,t,n,r){var i=n-t+1,a=this._maxEntries;if(i<=a){var s=new w(e.slice(t,n+1));return c(s,this._toBBox),s}r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1)));var o=new F([]);o.height=r;var u=Math.ceil(i/a),l=u*Math.ceil(Math.sqrt(a));b(e,t,n,l,this.compareMinX);for(var f=t;f<=n;f+=l){var d=Math.min(f+l-1,n);b(e,f,d,u,this.compareMinY);for(var h=f;h<=d;h+=u){var p=Math.min(h+u-1,d);o.children.push(this._build(e,h,p,r-1))}}return c(o,this._toBBox),o}},{key:"_chooseSubtree",value:function(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){for(var i=void 0,a=1/0,s=1/0,o=0,u=t.children.length;o<u;o++){var l=t.children[o],c=m(l),f=(d=e,h=l,(Math.max(h.maxX,d.maxX)-Math.min(h.minX,d.minX))*(Math.max(h.maxY,d.maxY)-Math.min(h.minY,d.minY))-c);f<s?(s=f,a=c<a?c:a,i=l):f===s&&c<a&&(a=c,i=l)}t=i||t.children[0]}var d,h;return t}},{key:"_insert",value:function(e,t,n){var r=this._toBBox,i=n?e:r(e);k.clear();var a=this._chooseSubtree(i,this.data,t,k);for(a.children.push(e),d(a,i);t>=0&&k.data[t].children.length>this._maxEntries;)this._split(k,t),t--;this._adjustParentBBoxes(i,k,t)}},{key:"_split",value:function(e,t){var n=e.data[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r);if(a){var s=n.children.splice(a,n.children.length-a),o=n.leaf?new w(s):new F(s);o.height=n.height,c(n,this._toBBox),c(o,this._toBBox),t?e.data[t-1].children.push(o):this._splitRoot(n,o)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this.data=new F([e,t]),this.data.height=e.height+1,c(this.data,this._toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var r,i,a;r=i=1/0;for(var s=t;s<=n-t;s++){var o=f(e,0,s,this._toBBox),u=f(e,s,n,this._toBBox),l=y(o,u),c=m(o)+m(u);l<r?(r=l,a=s,i=c<i?c:i):l===r&&c<i&&(i=c,a=s)}return a}},{key:"_chooseSplitAxis",value:function(e,t,n){var r=e.leaf?this.compareMinX:h,i=e.leaf?this.compareMinY:p;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}},{key:"_allDistMargin",value:function(e,t,n,r){e.children.sort(r);for(var i=this._toBBox,a=f(e,0,t,i),s=f(e,n-t,n,i),o=v(a)+v(s),u=t;u<n-t;u++){var l=e.children[u];d(a,e.leaf?i(l):l),o+=v(a)}for(var c=n-t-1;c>=t;c--){var h=e.children[c];d(s,e.leaf?i(h):h),o+=v(s)}return o}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var r=n;r>=0;r--)d(t.data[r],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var r=e.data[t-1],i=r.children;i.splice((0,a.indexOf)(i,n,i.length,r.indexHint),1)}else this.clear();else c(n,this._toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function c(e,t){f(e,0,e.children.length,t,e)}function f(e,t,n,r,i){i||(i=new w([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a,s=t;s<n;s++)a=e.children[s],d(i,e.leaf?r(a):a);return i}function d(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function h(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function m(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function v(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function x(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function b(e,t,n,r,i){for(var a=[t,n];a.length;){var o=(0,s.assumeNonNull)(a.pop()),l=(0,s.assumeNonNull)(a.pop());if(!(o-l<=r)){var c=l+Math.ceil((o-l)/r/2)*r;(0,u.q)(e,c,l,o,i),a.push(l,c,c,o)}}}var _=new(0,o.default),I=new(0,o.default),k=new(0,o.default),S=new(0,o.default)({deallocator:void 0}),T=function(e){"use strict";i.inherits(n,e);var t=i.createSuper(n);function n(){var e;return i.classCallCheck(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).height=1,e.indexHint=new(0,a.PositionHint),i.possibleConstructorReturn(e)}return n}((function e(){"use strict";i.classCallCheck(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0})),w=function(e){"use strict";i.inherits(n,e);var t=i.createSuper(n);function n(e){var r;return i.classCallCheck(this,n),(r=t.call(this)).children=e,r.leaf=!0,i.possibleConstructorReturn(r)}return n}(T),F=function(e){"use strict";i.inherits(n,e);var t=i.createSuper(n);function n(e){var r;return i.classCallCheck(this,n),(r=t.call(this)).children=e,r.leaf=!1,i.possibleConstructorReturn(r)}return n}(T)})),n.register("1zB3R",(function(e,r){t(e.exports,"optimizedFeatureQueryEngineAdapter",(function(){return u}));var i=n("7qybv"),a=n("8mTF7"),s=n("ft2bT"),o=n("awxBI"),u={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new(0,s.OptimizedFeature)(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return(0,i.isNone)(e.centroid)&&(e.centroid=(0,a.getCentroidOptimizedGeometry)(new(0,o.default),e.geometry,t.hasZ,t.hasM)),e.centroid}}})),n.register("8mTF7",(function(e,r){t(e.exports,"getCentroidOptimizedGeometry",(function(){return s}));var i=n("7qybv");function a(e,t){return e?t?4:3:t?3:2}function s(e,t,n,r,s){if((0,i.isNone)(t)||!t.lengths.length)return null;var d="upperLeft"===(null==s?void 0:s.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);var h=e.coords,p=[],m=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],v=t.lengths,y=t.coords,g=a(n,r),x=0,b=!0,_=!1,I=void 0;try{for(var k,S=v[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var T=k.value,w=o(m,y,x,T,n,r,d);w&&p.push(w),x+=T*g}}catch(e){_=!0,I=e}finally{try{b||null==S.return||S.return()}finally{if(_)throw I}}if(p.sort((function(e,t){var r=d*e[2]-d*t[2];return 0===r&&n&&(r=e[4]-t[4]),r})),p.length){var F=6*p[0][2];h[0]=p[0][0]/F,h[1]=p[0][1]/F,n&&(F=6*p[0][4],h[2]=0!==F?p[0][3]/F:0),(h[0]<m[0]||h[0]>m[1]||h[1]<m[2]||h[1]>m[3]||n&&(h[2]<m[4]||h[2]>m[5]))&&(h.length=0)}if(!h.length){var M=t.lengths[0]?function(e,t,n,r,i){for(var s=a(r,i),o=t,d=t+s,h=0,p=0,m=0,v=0,y=0,g=n-1;y<g;y++,o+=s,d+=s){var x=e[o],b=e[o+1],_=e[o+2],I=e[d],k=e[d+1],S=e[d+2],T=r?l(x,b,_,I,k,S):u(x,b,I,k);if(T)if(h+=T,r){var w=f(x,b,_,I,k,S);p+=T*w[0],m+=T*w[1],v+=T*w[2]}else{var F=c(x,b,I,k);p+=T*F[0],m+=T*F[1]}}return h>0?r?[p/h,m/h,v/h]:[p/h,m/h]:n>0?r?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(y,0,v[0],n,r):null;if(!M)return null;h[0]=M[0],h[1]=M[1],n&&M.length>2&&(h[2]=M[2])}return e}function o(e,t,n,r,i,s){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=a(i,s),l=n,c=n+u,f=0,d=0,h=0,p=0,m=0,v=0,y=r-1;v<y;v++,l+=u,c+=u){var g=t[l],x=t[l+1],b=t[l+2],_=t[c],I=t[c+1],k=t[c+2],S=g*I-_*x;p+=S,f+=(g+_)*S,d+=(x+I)*S,i&&(h+=(b+k)*(S=g*k-_*b),m+=S),g<e[0]&&(e[0]=g),g>e[1]&&(e[1]=g),x<e[2]&&(e[2]=x),x>e[3]&&(e[3]=x),i&&(b<e[4]&&(e[4]=b),b>e[5]&&(e[5]=b))}if(p*o>0&&(p*=-1),m*o>0&&(m*=-1),!p)return null;var T=[f,d,.5*p];return i&&(T[3]=h,T[4]=.5*m),T}function u(e,t,n,r){var i=n-e,a=r-t;return Math.sqrt(i*i+a*a)}function l(e,t,n,r,i,a){var s=r-e,o=i-t,u=a-n;return Math.sqrt(s*s+o*o+u*u)}function c(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function f(e,t,n,r,i,a){return[e+.5*(r-e),t+.5*(i-t),n+.5*(a-n)]}})),n.register("fP7bp",(function(r,i){t(r.exports,"checkProjectionSupport",(function(){return v})),t(r.exports,"project",(function(){return b})),t(r.exports,"projectMany",(function(){return I}));var a=n("8TSCy"),s=n("2TvXO"),o=n("7qybv"),u=n("7RvA5"),l=n("jGyUI"),c=n("eY5Yp"),f=n("eF88h"),d=[0,0];function h(e,t){if(!t)return null;if("x"in t){var n,r={x:0,y:0};return n=a.slicedToArray(e(t.x,t.y,d),2),r.x=n[0],r.y=n[1],null!=t.z&&(r.z=t.z),null!=t.m&&(r.m=t.m),r}if("xmin"in t){var i,s,o={xmin:0,ymin:0,xmax:0,ymax:0};return i=a.slicedToArray(e(t.xmin,t.ymin,d),2),o.xmin=i[0],o.ymin=i[1],s=a.slicedToArray(e(t.xmax,t.ymax,d),2),o.xmax=s[0],o.ymax=s[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:p(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:p(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:m(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;n.push(m(u,t))}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}function m(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=t(u[0],u[1],[0,0]);n.push(l),u.length>2&&l.push(u[2]),u.length>3&&l.push(u[3])}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}function v(e,t){return y.apply(this,arguments)}function y(){return(y=a.asyncToGenerator(e(s).mark((function t(n,r){var i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return i=Array.isArray(n)?n.map((function(e){return(0,o.isSome)(e.geometry)&&e.geometry.spatialReference})):[n],e.next=5,(0,u.initializeProjection)(i.map((function(e){return{source:e,dest:r}})));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var g=h.bind(null,f.lngLatToXY),x=h.bind(null,f.xyToLngLat);function b(e,t,n){if(!e)return e;if(n||(n=t,t=e.spatialReference),!(0,c.isValid)(t)||!(0,c.isValid)(n)||(0,c.equals)(t,n))return e;if((0,f.canProject)(t,n)){var r=(0,c.isWebMercator)(n)?g(e):x(e);return r.spatialReference=n,r}return(0,u.projectMany)(l.jsonAdapter,[e],t,n,null)[0]}var _=new(function(){"use strict";function t(){a.classCallCheck(this,t),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return a.createClass(t,[{key:"push",value:function(t,n,r){var i=this;return a.asyncToGenerator(e(s).mark((function a(){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length&&n&&r&&!(0,c.equals)(n,r)){e.next=2;break}return e.abrupt("return",t);case 2:return o={geometries:t,inSpatialReference:n,outSpatialReference:r,resolve:null},e.abrupt("return",(i._jobs.push(o),new Promise((function(e){o.resolve=e,null===i._timer&&(i._timer=setTimeout(i._process,10))}))));case 4:case"end":return e.stop()}}),a)})))()}},{key:"_process",value:function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,n=e.inSpatialReference,r=e.outSpatialReference,i=e.resolve;(0,f.canProject)(n,r)?(0,c.isWebMercator)(r)?i(t.map(g)):i(t.map(x)):i((0,u.projectMany)(l.jsonAdapter,t,n,r,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),t}());function I(e,t,n){return _.push(e,t,n)}})),n.register("jGyUI",(function(e,r){t(e.exports,"jsonAdapter",(function(){return a}));var i=n("8TSCy"),a={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){var r=new s(e.getPointX(t),e.getPointY(t),n),i=e.hasZ(t),a=e.hasM(t);return i&&(r.z=e.getPointZ(t)),a&&(r.m=e.getPointM(t)),r},exportPolygon:function(e,t,n){return new o(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,n){return new u(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,n){return new l(e.exportPoints(t),n,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,n){var r=e.hasZ(t),i=e.hasM(t),a=new c(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),n);if(r){var s=e.getZExtent(t);a.zmin=s.vmin,a.zmax=s.vmax}if(i){var o=e.getMExtent(t);a.mmin=o.vmin,a.mmax=o.vmax}return a}};var s=function e(t,n,r){"use strict";i.classCallCheck(this,e),this.x=t,this.y=n,this.spatialReference=r,this.z=void 0,this.m=void 0};var o=function e(t,n,r,a){"use strict";i.classCallCheck(this,e),this.rings=t,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)};var u=function e(t,n,r,a){"use strict";i.classCallCheck(this,e),this.paths=t,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)};var l=function e(t,n,r,a){"use strict";i.classCallCheck(this,e),this.points=t,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),a&&(this.hasM=a)};var c=function e(t,n,r,a,s){"use strict";i.classCallCheck(this,e),this.xmin=t,this.ymin=n,this.xmax=r,this.ymax=a,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}})),n.register("5JzQt",(function(r,i){t(r.exports,"createFeatureEditErrorResult",(function(){return f})),t(r.exports,"createFeatureEditSuccessResult",(function(){return h})),t(r.exports,"mixAttributes",(function(){return v})),t(r.exports,"simplify",(function(){return g})),t(r.exports,"loadGeometryEngineForSimplify",(function(){return _}));var a=n("8TSCy"),s=n("2TvXO"),o=n("eY5Yp"),u=n("7vTUY"),l=function e(){"use strict";a.classCallCheck(this,e),this.code=null,this.description=null},c=function e(t){"use strict";a.classCallCheck(this,e),this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t};function f(e){return new c(e)}var d=function e(t){"use strict";a.classCallCheck(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t};function h(e){return new d(e)}var p,m=new Set;function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;for(var a in m.clear(),n){var s=e.get(a);if(s){var o=n[a],l=y(s,o);if(l!==o&&i&&i.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:s,originalValue:o,sanitizedValue:l}}),m.add(s.name),s&&(r||s.editable)){var c=(0,u.validateFieldValue)(s,l);if(c)return f((0,u.validationErrorToString)(c,s,l));t[s.name]=l}}}var d=!0,h=!1,p=void 0;try{for(var v,g=e.requiredFields[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var x=v.value;if(!m.has(x.name))return f('missing required field "'.concat(x.name,'"'))}}catch(e){h=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw p}}return null}function y(e,t){var n=t;return"string"==typeof t&&(0,u.isNumericField)(e)?n=parseFloat(t):null!=t&&(0,u.isStringField)(e)&&"string"!=typeof t&&(n=String(t)),(0,u.sanitizeNullFieldValue)(n)}function g(e,t){if(!e||!(0,o.isValid)(t))return e;if("rings"in e||"paths"in e){if(!p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e}function x(){return b.apply(this,arguments)}function b(){return(b=a.asyncToGenerator(e(s).mark((function t(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=p,e.t0){e.next=6;break}return e.next=4,n("aFA9f");case 4:p=e.sent,e.t0=p;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(e,t){return I.apply(this,arguments)}function I(){return(I=a.asyncToGenerator(e(s).mark((function t(n,r){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(0,o.isValid)(n)||"esriGeometryPolygon"!==r&&"esriGeometryPolyline"!==r,e.t0){e.next=4;break}return e.next=4,x();case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}})),n.register("aFA9f",(function(e,t){e.exports=Promise.all([n("4WKyX")(n("aNJCr").getBundleURL("cUtJI")+n("iE7OH").resolve("Km0rI")),n("4WKyX")(n("aNJCr").getBundleURL("cUtJI")+n("iE7OH").resolve("vg0wl"))]).then((function(){return n("1n9JK")}))})),n.register("hbg1x",(function(e,r){t(e.exports,"isNullCountSupported",(function(){return f})),t(e.exports,"calculateStringStatistics",(function(){return d})),t(e.exports,"calculatePercentile",(function(){return p})),t(e.exports,"calculateStatistics",(function(){return h})),t(e.exports,"getAttributeComparator",(function(){return m})),t(e.exports,"processSummaryStatisticsResult",(function(){return g})),t(e.exports,"calculateUniqueValuesCount",(function(){return x})),t(e.exports,"createUVResult",(function(){return b})),t(e.exports,"getNormalizedValue",(function(){return _})),t(e.exports,"calculateClassBreaks",(function(){return I})),t(e.exports,"resolveCBResult",(function(){return k})),t(e.exports,"calculateHistogram",(function(){return S}));var i=n("8TSCy"),a=n("59jTx"),s=n("hxmJW"),o="equal-interval",u=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,l=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),c=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function f(e){var t=null!=e.normalizationField||null!=e.normalizationType,n=null!=e.minValue||null!=e.maxValue,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!n&&!r}function d(e){var t=e.returnDistinct?i.toConsumableArray(new Set(e.values)):e.values,n=t.filter((function(e){return null!=e})).length,r={count:n};return e.supportsNullCount&&(r.nullcount=t.length-n),e.percentileParams&&(r.median=p(t,e.percentileParams)),r}function h(e){var t=e.values,n=e.useSampleStdDev,r=e.supportsNullCount,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=null,o=null,u=null,l=null,c=0,f=null==e.minValue?-1/0:e.minValue,d=null==e.maxValue?1/0:e.maxValue,h=!0,m=!1,v=void 0;try{for(var y,g=t[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var x=y.value;Number.isFinite(x)?x>=f&&x<=d&&(s+=x,i=Math.min(i,x),a=Math.max(a,x),c++):"string"==typeof x&&c++}}catch(e){m=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(m)throw v}}if(c&&null!=s){o=s/c;var b=0,_=!0,I=!1,k=void 0;try{for(var S,T=t[Symbol.iterator]();!(_=(S=T.next()).done);_=!0){var w=S.value;Number.isFinite(w)&&w>=f&&w<=d&&(b+=Math.pow(w-o,2))}}catch(e){I=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(I)throw k}}l=n?c>1?b/(c-1):0:c>0?b/c:0,u=Math.sqrt(l)}else i=null,a=null;var F={avg:o,count:c,max:a,min:i,stddev:u,sum:s,variance:l};return r&&(F.nullcount=t.length-c),e.percentileParams&&(F.median=p(t,e.percentileParams)),F}function p(e,t){var n=t.fieldType,r=t.value,a=t.orderBy,s=t.isDiscrete,o=m(n,"desc"===a);if(0===(e=i.toConsumableArray(e).filter((function(e){return null!=e})).sort((function(e,t){return o(e,t)}))).length)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];var u=(e.length-1)*r,l=Math.floor(u),c=l+1,f=u%1,d=e[l],h=e[c];return c>=e.length||s||"string"==typeof d||"string"==typeof h?d:d*(1-f)+h*f}function m(e,t){var n=t?1:-1,r=t?function(e,t){return t-e}:function(e,t){return e-t},a=v(t);if(!e||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID"].concat(i.toConsumableArray(l)).includes(e))return function(e,t){return"number"==typeof e&&"number"==typeof t?r(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):n};if("esriFieldTypeDate"===e)return function(e,t){var i=new Date(e).getTime(),a=new Date(t).getTime();return isNaN(i)||isNaN(a)?n:r(i,a)};if(l.has(e))return function(e,t){return r(e,t)};if("esriFieldTypeString"===e)return function(e,t){return a(e,t)};if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e){var s=v(t);return function(e,t){return s(y(e),y(t))}}return t?function(e,t){return 1}:function(e,t){return-1}}function v(e){return e?function(e,t){var n,r;return(e=null==(n=e)?void 0:n.toUpperCase())>(t=null==(r=t)?void 0:r.toUpperCase())?-1:e<t?1:0}:function(e,t){var n,r;return(e=null==(n=e)?void 0:n.toUpperCase())<(t=null==(r=t)?void 0:r.toUpperCase())?-1:e>t?1:0}}function y(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function g(e,t){var n;for(n in e)c.indexOf(n)>-1&&(Number.isFinite(e[n])||(e[n]=null));return t?(["avg","stddev","variance"].forEach((function(t){null!=e[t]&&(e[t]=Math.ceil(e[t]))})),e):e}function x(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;(null==o||"string"==typeof o&&""===o.trim())&&(o=null),null==t[o]?t[o]={count:1,data:o}:t[o].count++}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return{count:t}}function b(e,t,n){var r=e.count,i=[];for(var a in n&&t&&"coded-value"===t.type&&t.codedValues.forEach((function(e){var t=e.code;r.hasOwnProperty(t)||(r[t]={data:t,count:0})})),r){var s=r[a];i.push({value:s.data,count:s.count,label:s.label})}return{uniqueValueInfos:i}}function _(e,t,n,r){var i=null;switch(t){case"log":0!==e&&(i=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&0!==r&&(i=e/r*100);break;case"field":Number.isFinite(n)&&0!==n&&(i=e/n);break;case"natural-log":e>0&&(i=Math.log(e));break;case"square-root":e>0&&(i=Math.pow(e,.5))}return i}function I(e,t){var n,r,i,u,l,c,f,d,h,p=(n={field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||5},r=n.field,i=n.classificationMethod||o,u=n.normalizationType,l=n.normalizationField,(c=new(0,a.default)).classificationField=r,c.breakCount=n.breakCount,c.classificationMethod=i,c.standardDeviationInterval="standard-deviation"===i?n.standardDeviationInterval||1:void 0,c.normalizationType=u,c.normalizationField="field"===u?l:void 0,c);return f=e,d=t.minValue,h=t.maxValue,d=null==d?-1/0:d,h=null==h?1/0:h,e=f.filter((function(e){return Number.isFinite(e)&&e>=d&&e<=h})),(0,s.createGenerateRendererClassBreaks)({definition:p,values:e,normalizationTotal:t.normalizationTotal})}function k(e,t){var n=e.classBreaks,r=n.length,i=n[0].minValue,a=n[r-1].maxValue,s="standard-deviation"===t,o=u;return{minValue:i,maxValue:a,classBreakInfos:n=n.map((function(e){var t=e.label,n={minValue:e.minValue,maxValue:e.maxValue,label:t};if(s&&t){var r=t.match(o).map((function(e){return+e.trim()}));2===r.length?(n.minStdDev=r[0],n.maxStdDev=r[1],r[0]<0&&r[1]>0&&(n.hasAvg=!0)):1===r.length&&(t.includes("<")?(n.minStdDev=null,n.maxStdDev=r[0]):t.includes(">")&&(n.minStdDev=r[0],n.maxStdDev=null))}return n})),normalizationTotal:e.normalizationTotal}}function S(e,t){var n=function(e,t){var n=t.field,r=t.classificationMethod,i=t.standardDeviationInterval,a=t.normalizationType,s=t.normalizationField,o=t.normalizationTotal,u=t.minValue,l=t.maxValue,c=t.numBins||10,d=null,p=null,m=null;if(r&&"equal-interval"!==r||a){var v=I(e,{field:n,normalizationType:a,normalizationField:s,normalizationTotal:o,classificationMethod:r,standardDeviationInterval:i,minValue:u,maxValue:l,numClasses:c}).classBreaks;d=v[0].minValue,p=v[v.length-1].maxValue,m=v.map((function(e){return[e.minValue,e.maxValue]}))}else{if(null!=u&&null!=l)d=u,p=l;else{var y=h({values:e,minValue:u,maxValue:l,useSampleStdDev:!a,supportsNullCount:f({normalizationType:a,normalizationField:s,minValue:u,maxValue:l})});d=y.min,p=y.max}m=function(e,t,n){for(var r,i=(t-e)/n,a=[],s=e,o=1;o<=n;o++)r=s+i,r=Number(r.toFixed(16)),a.push([s,o===n?t:r]),s=r;return a}(d,p,c)}return{min:d,max:p,intervals:m}}(e,t),r=n.min,i=n.max,a=n.intervals,s=a.map((function(e,t){return{minValue:a[t][0],maxValue:a[t][1],count:0}})),o=!0,u=!1,l=void 0;try{for(var c,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=c.value;if(null!=p&&p>=r&&p<=i){var m=T(a,p);m>-1&&s[m].count++}}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}return{bins:s,minValue:r,maxValue:i,normalizationTotal:t.normalizationTotal}}function T(e,t){for(var n=-1,r=e.length-1;r>=0;r--)if(t>=e[r][0]){n=r;break}return n}})),n.register("59jTx",(function(e,r){t(e.exports,"default",(function(){return h}));var i=n("8TSCy"),a=n("7eJjO"),s=n("79ASa"),o=n("iho5X");n("lNwWH"),n("2VlWd"),n("iJAIC");var u=n("fcwIv"),l=n("kt6hM"),c=new(0,s.JSONMap)({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),f=new(0,s.JSONMap)({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),d=function(e){"use strict";i.inherits(n,e);var t=i.createSuper(n);function n(){var e;return i.classCallCheck(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",i.possibleConstructorReturn(e)}return i.createClass(n,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),n}(l.default);(0,a._)([(0,o.property)({json:{write:!0}})],d.prototype,"breakCount",void 0),(0,a._)([(0,o.property)({json:{write:!0}})],d.prototype,"classificationField",void 0),(0,a._)([(0,o.property)({type:String,json:{read:c.read,write:c.write}})],d.prototype,"classificationMethod",void 0),(0,a._)([(0,o.property)({json:{write:!0}})],d.prototype,"normalizationField",void 0),(0,a._)([(0,o.property)({json:{read:f.read,write:f.write}})],d.prototype,"normalizationType",void 0),(0,a._)([(0,o.property)({value:null,json:{write:!0}})],d.prototype,"standardDeviationInterval",null),(0,a._)([(0,o.property)({value:null,json:{write:!0}})],d.prototype,"definedInterval",null),(0,a._)([(0,o.property)()],d.prototype,"type",void 0);var h=d=(0,a._)([(0,u.subclass)("esri.rest.support.ClassBreaksDefinition")],d)})),n.register("kt6hM",(function(e,r){t(e.exports,"default",(function(){return p}));var i=n("8TSCy"),a=n("7eJjO"),s=n("79ASa"),o=n("1XAcN"),u=n("iho5X");n("lNwWH"),n("2VlWd"),n("iJAIC");var l=n("fcwIv"),c=n("1DHtQ"),f=n("j9ZJv"),d=new(0,s.JSONMap)({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),h=function(e){"use strict";i.inherits(n,e);var t=i.createSuper(n);function n(){var e;return i.classCallCheck(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).baseSymbol=null,e.colorRamp=null,e.type=null,i.possibleConstructorReturn(e)}return n}(o.JSONSupport);(0,a._)([(0,u.property)({type:f.default,json:{write:!0}})],h.prototype,"baseSymbol",void 0),(0,a._)([(0,u.property)({types:c.types,json:{read:{reader:c.fromJSON},write:!0}})],h.prototype,"colorRamp",void 0),(0,a._)([(0,u.property)({json:{read:d.read,write:d.write}})],h.prototype,"type",void 0);var p=h=(0,a._)([(0,l.subclass)("esri.rest.support.ClassificationDefinition")],h)})),n.register("hxmJW",(function(e,n){function r(e,t){return Number(e.toFixed(t))}function i(e){var t=e.normalizationTotal;return{classBreaks:a(e),normalizationTotal:t}}function a(e){var t=e.definition,n=t.classificationMethod,i=t.breakCount,a=t.normalizationType,c=t.definedInterval,f=[],d=e.values;if(0===d.length)return[];var h,p,m,v,y,g,x=(d=d.sort((function(e,t){return e-t})))[0],b=d[d.length-1];if("equal-interval"===n)if(d.length>=i){for(var _=(b-x)/i,I=x,k=1;k<i;k++){var S=r(x+k*_,6);f.push({minValue:I,maxValue:S,label:s(I,S,a)}),I=S}f.push({minValue:I,maxValue:b,label:s(I,b,a)})}else d.forEach((function(e){f.push({minValue:e,maxValue:e,label:s(e,e,a)})}));else if("natural-breaks"===n){for(var T=o(d),w=e.valueFrequency||T.valueFrequency,F=function(e,t,n){var r=e.length,i=[];n>r&&(n=r);for(var a=0;a<n;a++)i.push(Math.round(a*r/n-1));i.push(r-1);var s=u(i,e,t,n);return function(e,t,n,r,i,a){for(var s=0,o=0,u=0,c=0,f=!0,d=0;d<2&&f;d++){0===d&&(f=!1);for(var h=0;h<a-1;h++)for(;n[h+1]+1!==n[h+2];){n[h+1]=n[h+1]+1;var p=l(h,n,r,i);u=p.sbMean,s=p.sbSdcm;var m=l(h+1,n,r,i);if(c=m.sbMean,!(s+(o=m.sbSdcm)<t[h]+t[h+1])){n[h+1]=n[h+1]-1;break}t[h]=s,t[h+1]=o,e[h]=u,e[h+1]=c,f=!0}for(var v=a-1;v>0;v--)for(;n[v]!==n[v-1]+1;){n[v]=n[v]-1;var y=l(v-1,n,r,i);u=y.sbMean,s=y.sbSdcm;var g=l(v,n,r,i);if(c=g.sbMean,!(s+(o=g.sbSdcm)<t[v-1]+t[v])){n[v]=n[v]+1;break}t[v-1]=s,t[v]=o,e[v-1]=u,e[v]=c,f=!0}}return f}(s.mean,s.sdcm,i,e,t,n)&&(s=u(i,e,t,n)),i}(T.uniqueValues,w,i),M=x,E=1;E<i;E++)if(T.uniqueValues.length>E){var C=r(T.uniqueValues[F[E]],6);f.push({minValue:M,maxValue:C,label:s(M,C,a)}),M=C}f.push({minValue:M,maxValue:b,label:s(M,b,a)})}else if("quantile"===n)if(d.length>=i&&x!==b){for(var B=x,j=Math.ceil(d.length/i),N=0,V=1;V<i;V++){var q=j+N-1;q>d.length&&(q=d.length-1),q<0&&(q=0),f.push({minValue:B,maxValue:d[q],label:s(B,d[q],a)}),B=d[q],N+=j,j=Math.ceil((d.length-N)/(i-V))}f.push({minValue:B,maxValue:b,label:s(B,b,a)})}else for(var z=-1,R=0;R<d.length;R++){var Y=d[R];Y!==z&&(z=Y,f.push({minValue:z,maxValue:Y,label:s(z,Y,a)}),z=Y)}else if("standard-deviation"===n){var P=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length}(d),G=function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];n+=(i-t)*(i-t)}return n/=e.length,Math.sqrt(n)}(d,P);if(0===G)f.push({minValue:d[0],maxValue:d[0],label:s(d[0],d[0],a)});else{for(var A=(h=x,p=b,m=i,v=P,y=G,((g=Math.max(v-h,p-v)/y/m)>=1?1:g>=.5?.5:.25)*G),D=0,X=x,O=i;O>=1;O--){var Z=r(P-(O-.5)*A,6);f.push({minValue:X,maxValue:Z,label:s(X,Z,a)}),X=Z,D++}var L=r(P+.5*A,6);f.push({minValue:X,maxValue:L,label:s(X,L,a)}),X=L,D++;for(var J=1;J<=i;J++)L=D===2*i?b:r(P+(J+.5)*A,6),f.push({minValue:X,maxValue:L,label:s(X,L,a)}),X=L,D++}}else if("defined-interval"===n){if(!c)return f;for(var Q=d[0],U=d[d.length-1],W=Math.ceil((U-Q)/c),H=Q,K=1;K<W;K++){var $=r(Q+K*c,6);f.push({minValue:H,maxValue:$,label:s(H,$,a)}),H=$}f.push({minValue:H,maxValue:U,label:s(H,U,a)})}return f}function s(e,t,n){return e===t?n&&"percent-of-total"===n?e+"%":e.toString():n&&"percent-of-total"===n?e+"% - "+t+"%":e+" - "+t}function o(e){for(var t=[],n=[],r=Number.MIN_VALUE,i=1,a=-1,s=0;s<e.length;s++){var o=e[s];o===r?(i++,n[a]=i):null!==o&&(t.push(o),r=o,i=1,n.push(i),a++)}return{uniqueValues:t,valueFrequency:n}}function u(e,t,n,r){for(var i=[],a=[],s=[],o=0,u=[],c=[],f=0;f<r;f++){var d=l(f,e,t,n);u.push(d.sbMean),c.push(d.sbSdcm),o+=c[f]}for(var h,p=o,m=!0;m||o<p;){m=!1,i=[];for(var v=0;v<r;v++)i.push(e[v]);for(var y=0;y<r;y++)for(var g=e[y]+1;g<=e[y+1];g++)if(h=t[g],y>0&&g!==e[y+1]&&Math.abs(h-u[y])>Math.abs(h-u[y-1]))e[y]=g;else if(y<r-1&&e[y]!==g-1&&Math.abs(h-u[y])>Math.abs(h-u[y+1])){e[y+1]=g-1;break}p=o,o=0,a=[],s=[];for(var x=0;x<r;x++){a.push(u[x]),s.push(c[x]);var b=l(x,e,t,n);u[x]=b.sbMean,c[x]=b.sbSdcm,o+=c[x]}}if(o>p){for(var _=0;_<r;_++)e[_]=i[_],u[_]=a[_],c[_]=s[_];o=p}return{mean:u,sdcm:c}}function l(e,t,n,r){for(var i=0,a=0,s=t[e]+1;s<=t[e+1];s++){var o=r[s];i+=n[s]*o,a+=o}a<=0&&console.log("Exception in Natural Breaks calculation");for(var u=i/a,l=0,c=t[e]+1;c<=t[e+1];c++)l+=r[c]*Math.pow(n[c]-u,2);return{sbMean:u,sbSdcm:l}}t(e.exports,"createGenerateRendererClassBreaks",(function(){return i}))})),n.register("ibKgR",(function(e,r){t(e.exports,"toQuantizationTransform",(function(){return c})),t(e.exports,"quantizePoint",(function(){return x})),t(e.exports,"quantizeGeometry",(function(){return I})),t(e.exports,"unquantizeMultipoint",(function(){return k})),t(e.exports,"unquantizePoint",(function(){return S})),t(e.exports,"unquantizePolygon",(function(){return T})),t(e.exports,"unquantizePolyline",(function(){return w}));var i=n("8TSCy"),a=n("7qybv"),s=n("79LpT");var o=function(e,t,n){return[t,n]},u=function(e,t,n){return[t,n,e[2]]},l=function(e,t,n){return[t,n,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,a.isSome)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function f(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function d(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function h(e,t,n){for(var r,i,a,s,o=[],u=0;u<n.length;u++){var l=n[u];u>0?(a=f(e,l[0]),s=d(e,l[1]),a===r&&s===i||(o.push(t(l,a-r,s-i)),r=a,i=s)):(r=f(e,l[0]),i=d(e,l[1]),o.push(t(l,r,i)))}return o.length>0?o:null}function p(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function m(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function v(e,t,n){var r=new Array(n.length);if(!n.length)return r;var a=i.slicedToArray(e.scale,2),s=a[0],o=a[1],u=p(e,n[0][0]),l=m(e,n[0][1]);r[0]=t(n[0],u,l);for(var c=1;c<n.length;c++){var f=n[c];u+=f[0]*s,l-=f[1]*o,r[c]=t(f,u,l)}return r}function y(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=v(e,t,n[i]);return r}function g(e,t,n,r,i){return t.points=(a=e,s=n.points,c=i,h(a,r?c?l:u:c?u:o,s)),t;var a,s,c}function x(e,t,n,r,i){return t.x=f(e,n.x),t.y=d(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function b(e,t,n,r,i){var a=function(e,t,n,r){for(var i=[],a=n?r?l:u:r?u:o,s=0;s<t.length;s++){var c=h(e,a,t[s]);c&&c.length>=3&&i.push(c)}return i.length?i:null}(e,n.rings,r,i);return a?(t.rings=a,t):null}function _(e,t,n,r,i){var a=function(e,t,n,r){for(var i=[],a=n?r?l:u:r?u:o,s=0;s<t.length;s++){var c=h(e,a,t[s]);c&&c.length>=2&&i.push(c)}return i.length?i:null}(e,n.paths,r,i);return a?(t.paths=a,t):null}function I(e,t){return e&&t?(0,s.isPoint)(t)?x(e,{},t,!1,!1):(0,s.isPolyline)(t)?_(e,{},t,!1,!1):(0,s.isPolygon)(t)?b(e,{},t,!1,!1):(0,s.isMultipoint)(t)?g(e,{},t,!1,!1):(0,s.isExtent)(t)?(a=!1,o=!1,(r={}).xmin=f(n=e,(i=t).xmin),r.ymin=d(n,i.ymin),r.xmax=f(n,i.xmax),r.ymax=d(n,i.ymax),r!==i&&(a&&(r.zmin=i.zmin,r.zmax=i.zmax),o&&(r.mmin=i.mmin,r.mmax=i.mmax)),r):null:null;var n,r,i,a,o}function k(e,t,n,r,i){return(0,a.isSome)(n)&&(t.points=(s=e,c=n.points,f=i,v(s,r?f?l:u:f?u:o,c))),t;var s,c,f}function S(e,t,n,r,i){return(0,a.isNone)(n)||(t.x=p(e,n.x),t.y=m(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m))),t}function T(e,t,n,r,i){return(0,a.isSome)(n)&&(t.rings=(s=e,c=n.rings,f=i,y(s,r?f?l:u:f?u:o,c))),t;var s,c,f}function w(e,t,n,r,i){return(0,a.isSome)(n)&&(t.paths=(s=e,c=n.paths,f=i,y(s,r?f?l:u:f?u:o,c))),t;var s,c,f}}))}();
//# sourceMappingURL=GeoJSONSourceWorker.0795d5d1.js.map
