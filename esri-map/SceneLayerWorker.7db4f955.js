!function(){function e(e){return e&&e.__esModule?e.default:e}function n(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("eBjmH",(function(r,o){n(r.exports,"process",(function(){return y})),n(r.exports,"initialize",(function(){return O})),n(r.exports,"dracoDecompressPointCloudData",(function(){return h})),n(r.exports,"filterObbsForModifications",(function(){return g})),n(r.exports,"filterObbsForModificationsSync",(function(){return L})),n(r.exports,"setModifications",(function(){return E})),n(r.exports,"setModificationsSync",(function(){return _})),n(r.exports,"setLegacySchema",(function(){return v})),n(r.exports,"destroyContext",(function(){return T})),n(r.exports,"interpretObbModificationResults",(function(){return U})),n(r.exports,"test",(function(){return R}));var i,u,a=t("8TSCy"),s=t("2TvXO"),f=t("7qybv"),c=t("kkxEC"),l=t("1yzlF"),d=t("gtROr"),p=t("3ImqX");function y(e){return m.apply(this,arguments)}function m(){return(m=a.asyncToGenerator(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return r=[t.geometryBuffer],e.abrupt("return",{result:M(t,r),transferList:r});case 4:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=a.asyncToGenerator(e(s).mark((function n(t){var r,o,i,a,f,l,d,p,y;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,O();case 3:if(o=[t.geometryBuffer],i=t.geometryBuffer,a=i.byteLength,f=u._malloc(a),(l=new Uint8Array(u.HEAPU8.buffer,f,a)).set(new Uint8Array(i)),d=u.dracoDecompressPointCloudData(f,l.byteLength),u._free(f),!(d.error.length>0)){e.next=8;break}throw"i3s.wasm: ".concat(d.error);case 8:return p=(null==(r=d.featureIds)?void 0:r.length)>0?(0,c.slice)(d.featureIds):null,y=(0,c.slice)(d.positions),p&&o.push(p.buffer),o.push(y.buffer),e.abrupt("return",{result:{positions:y,featureIds:p},transferList:o});case 11:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=a.asyncToGenerator(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return L(t),r={buffer:t.buffer},e.abrupt("return",{result:r,transferList:[r.buffer]});case 5:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function E(e){return I.apply(this,arguments)}function I(){return(I=a.asyncToGenerator(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:_(t);case 3:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return(w=a.asyncToGenerator(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:u.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function T(e){A(e)}function _(e){for(var n=e.modifications,t=u._malloc(8*n.length),r=new Float64Array(u.HEAPU8.buffer,t,n.length),o=0;o<n.length;++o)r[o]=n[o];u.setModifications(e.context,t,n.length,e.isGeodetic),u._free(t)}function M(e,n){if(!u)return null;var t=e.context,r=e.localOrigin,o=e.globalTrafo,i=e.mbs,a=e.obb,s=e.elevationOffset,d=e.geometryBuffer,p=e.geometryDescriptor,y=e.indexToVertexProjector,m=e.vertexToRenderProjector,h=u._malloc(d.byteLength),b=u._malloc(33*Float64Array.BYTES_PER_ELEMENT),g=new Uint8Array(u.HEAPU8.buffer,h,d.byteLength);g.set(new Uint8Array(d));var x=new Float64Array(u.HEAPU8.buffer,b,33);N(x,r);var E=x.byteOffset+3*x.BYTES_PER_ELEMENT,I=new Float64Array(x.buffer,E);N(I,o),E+=16*x.BYTES_PER_ELEMENT,N(I=new Float64Array(x.buffer,E),i),E+=4*x.BYTES_PER_ELEMENT,(0,f.isSome)(a)&&(N(I=new Float64Array(x.buffer,E),a.center),E+=3*x.BYTES_PER_ELEMENT,N(I=new Float64Array(x.buffer,E),a.halfSize),E+=3*x.BYTES_PER_ELEMENT,N(I=new Float64Array(x.buffer,E),a.quaternion));var v=p,w={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:v.featureIndex},T=u.process(t,!!e.obb,h,g.byteLength,v,w,b,s,y,m,e.normalReferenceFrame);if(u._free(b),u._free(h),T.error.length>0)throw"i3s.wasm: ".concat(T.error);if(T.discarded)return null;var _=T.componentOffsets.length>0?(0,c.slice)(T.componentOffsets):null,M=T.featureIds.length>0?(0,c.slice)(T.featureIds):null,U=(0,c.slice)(T.interleavedVertedData).buffer,L=T.indicesType===l.IndexType.Int16?(0,c.slice)(new Uint16Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/2)):(0,c.slice)(new Uint32Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/4)),A=(0,c.slice)(T.positions),O=T.positionIndicesType===l.IndexType.Int16?(0,c.slice)(new Uint16Array(T.positionIndices.buffer,T.positionIndices.byteOffset,T.positionIndices.byteLength/2)):(0,c.slice)(new Uint32Array(T.positionIndices.buffer,T.positionIndices.byteOffset,T.positionIndices.byteLength/4)),R={layout:e.layouts[0],interleavedVertexData:U,indices:L,hasColors:T.hasColors,hasModifications:T.hasModifications,positionData:{data:A,indices:O}};return M&&n.push(M.buffer),_&&n.push(_.buffer),n.push(U),n.push(L.buffer),n.push(A.buffer),n.push(O.buffer),{componentOffsets:_,featureIds:M,transformedGeometry:R,obb:T.obb}}function U(e){return 0===e?p.NodeIMModificationImpact.Unmodified:1===e?p.NodeIMModificationImpact.PotentiallyModified:2===e?p.NodeIMModificationImpact.Culled:p.NodeIMModificationImpact.Unknown}function L(e){var n=e.context,t=e.buffer,r=u._malloc(t.byteLength),o=t.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(u.HEAPU8.buffer,r,o),a=new Float64Array(t);i.set(a),u.filterOBBs(n,r,o),a.set(i),u._free(r)}function A(e){u&&u.destroy(e)}function N(e,n){for(var t=0;t<n.length;++t)e[t]=n[t]}function O(){return u?Promise.resolve():(i||(i=(0,d.get)().then((function(e){u=e,i=null}))),i)}var R={transform:M,destroy:A}})),t.register("1yzlF",(function(e,t){var r,o,i,u;n(e.exports,"IndexType",(function(){return r})),(u=r||(r={}))[u.None=0]="None",u[u.Int16=1]="Int16",u[u.Int32=2]="Int32",(i=o||(o={}))[i.Replace=0]="Replace",i[i.Outside=1]="Outside",i[i.Inside=2]="Inside",i[i.Finished=3]="Finished"})),t.register("gtROr",(function(e,r){n(e.exports,"get",(function(){return u}));var o,i=t("i9j5X");function u(){return o||(o=new Promise((function(e){return t("ik3pa").then((function(e){return e.i})).then((function(n){var t=(0,n.default)({locateFile:a,onRuntimeInitialized:function(){return e(t)}});delete t.then}))})).catch((function(e){return Promise.reject(e)}))),o}function a(e){return(0,i.getAssetUrl)("esri/libs/i3s/".concat(e))}})),t.register("ik3pa",(function(e,n){e.exports=t("4WKyX")(t("aNJCr").getBundleURL("25Kje")+t("iE7OH").resolve("9O0mo")).then((function(){return t("3Iuxa")}))})),t.register("3ImqX",(function(e,r){n(e.exports,"NodeIMModificationImpact",(function(){return i}));var o,i,u,a,s,f,c;t("8TSCy"),t("iLaO9");(c=o||(o={}))[c.Unmodified=0]="Unmodified",c[c.Culled=1]="Culled",c[c.NotChecked=2]="NotChecked",(f=i||(i={}))[f.Unmodified=0]="Unmodified",f[f.PotentiallyModified=1]="PotentiallyModified",f[f.Culled=2]="Culled",f[f.Unknown=3]="Unknown",f[f.NotChecked=4]="NotChecked";var l,d,p;(p=u||(u={}))[p.Unknown=0]="Unknown",p[p.Uncached=1]="Uncached",p[p.Cached=2]="Cached",(d=a||(a={}))[d.None=0]="None",d[d.MaxScreenThreshold=1]="MaxScreenThreshold",d[d.ScreenSpaceRelative=2]="ScreenSpaceRelative",d[d.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",d[d.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera",(l=s||(s={}))[l.Hole=0]="Hole",l[l.Leaf=1]="Leaf"})),t.register("iLaO9",(function(e,t){function r(){return[0,0,0,0]}function o(e,n,t,r){return[e,n,t,r]}function i(e){for(var n=[0,0,0,0],t=Math.min(4,e.length),r=0;r<t;++r)n[r]=e[r];return n}function u(e,n){return new Float64Array(e,n,4)}function a(){return[0,0,0,0]}function s(){return o(1,1,1,1)}function f(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function l(){return o(0,0,1,0)}function d(){return o(0,0,0,1)}n(e.exports,"c",(function(){return r})),n(e.exports,"f",(function(){return o})),n(e.exports,"d",(function(){return i})),n(e.exports,"a",(function(){return u}));var p=[0,0,0,0],y=s(),m=f(),h=c(),b=l(),g=d();Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:o,fromArray:i,createView:u,zeros:a,ones:s,unitX:f,unitY:c,unitZ:l,unitW:d,ZEROS:p,ONES:y,UNIT_X:m,UNIT_Y:h,UNIT_Z:b,UNIT_W:g})}))}();
//# sourceMappingURL=SceneLayerWorker.7db4f955.js.map
