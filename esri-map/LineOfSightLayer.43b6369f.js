function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("1WkgJ",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return x}));var o=t("j6uz9"),s=t("4rJMS"),l=t("aEGHp"),a=t("6ZiQ2"),p=t("26zvD"),u=t("4cIQk"),c=t("1CpCt"),y=t("2IJVS"),f=t("cc23H"),d=t("hTI69");t("gHCNy"),t("aX9sh"),t("5HTPH");var g=t("qA6zg"),h=t("iGP99"),v=t("ctxhN");const b=p.default.ofType(a.default);let m=class extends((0,v.OperationalLayer)((0,y.MultiOriginJSONMixin)(h.default))){initialize(){this.addHandles((0,f.watch)((()=>this.analysis),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),f.syncAndInitial))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,c.applySome)(this.analysis,(e=>e.observer))}set observer(e){(0,c.applySome)(this.analysis,(t=>t.observer=e))}get targets(){return null!=this.analysis?this.analysis.targets:new(0,p.default)}set targets(e){(0,u.referenceSetter)(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new(0,s.default))}constructor(e){super(e),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new(0,s.default),this.opacity=1}};(0,o._)([(0,d.property)({json:{read:!1},readOnly:!0})],m.prototype,"type",void 0),(0,o._)([(0,d.property)({type:["LineOfSightLayer"]})],m.prototype,"operationalLayerType",void 0),(0,o._)([(0,d.property)({type:l.default,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,"observer",null),(0,o._)([(0,d.property)({type:b,json:{read:!0,write:{ignoreOrigin:!0}}})],m.prototype,"targets",null),(0,o._)([(0,d.property)({nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,"analysis",void 0),(0,o._)([(0,d.property)({readOnly:!0})],m.prototype,"fullExtent",null),(0,o._)([(0,d.property)({readOnly:!0})],m.prototype,"spatialReference",null),(0,o._)([(0,d.property)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],m.prototype,"opacity",void 0),(0,o._)([(0,d.property)({type:["show","hide"]})],m.prototype,"listMode",void 0),m=(0,o._)([(0,g.subclass)("esri.layers.LineOfSightLayer")],m);const x=m})),t.register("4rJMS",(function(r,n){e(r.exports,"default",(function(){return m}));var i=t("j6uz9"),o=t("fXSFe"),s=t("aEGHp"),l=t("6ZiQ2"),a=t("26zvD"),p=t("4cIQk"),u=t("1CpCt"),c=t("cc23H"),y=t("hTI69");t("gHCNy"),t("aX9sh"),t("5HTPH");var f=t("qA6zg"),d=t("5cP7j"),g=t("ccOFp"),h=t("6Y0Wl");const v=a.default.ofType(l.default);let b=class extends o.default{initialize(){this.addHandles((0,c.watch)((()=>this._computeExtent()),(e=>{null!=e&&null!=e.pending||this._set("extent",null!=e?e.extent:null)}),c.syncAndInitial))}get targets(){return this._get("targets")||new v}set targets(e){this._set("targets",(0,p.referenceSetter)(e,this.targets,v))}get spatialReference(){return null!=this.observer&&null!=this.observer.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,u.applySome)(this.observer,(e=>e.position))]}async waitComputeExtent(){const e=this._computeExtent();return null!=e?e.pending:Promise.resolve()}_computeExtent(){const e=this.spatialReference;if(null==this.observer||null==this.observer.position||null==e)return null;const t=e=>"absolute-height"===(0,h.getGeometryEffectiveElevationMode)(e.position,e.elevationInfo),r=this.observer.position,n=(0,g.fromValues)(r.x,r.y,r.z,r.x,r.y,r.z);for(const t of this.targets)if(null!=t.position){const r=(0,d.projectOrLoad)(t.position,e);if(null!=r.pending)return{pending:r.pending,extent:null};if(null!=r.geometry){const{x:e,y:t,z:i}=r.geometry;(0,g.expandWithVec3)(n,[e,t,i])}}const i=(0,g.toExtent)(n,e);return t(this.observer)&&this.targets.every(t)||(i.zmin=void 0,i.zmax=void 0),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}constructor(e){super(e),this.type="line-of-sight",this.observer=null,this.extent=null}};(0,i._)([(0,y.property)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,i._)([(0,y.property)({type:s.default,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,i._)([(0,y.property)({cast:p.castForReferenceSetter,type:v,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,i._)([(0,y.property)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,i._)([(0,y.property)({readOnly:!0})],b.prototype,"spatialReference",null),(0,i._)([(0,y.property)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,i._)([(0,f.subclass)("esri.analysis.LineOfSightAnalysis")],b);const m=b})),t.register("fXSFe",(function(r,n){e(r.exports,"default",(function(){return d}));var i=t("j6uz9"),o=t("27btt"),s=t("aX9sh"),l=t("2VGYF"),a=t("2tTSh"),p=t("hO0an"),u=t("hTI69");t("gHCNy"),t("5HTPH");var c=t("qA6zg");let y=0,f=class extends((0,p.JSONSupportMixin)((0,l.ClonableMixin)((0,a.IdentifiableMixin)(o.default)))){get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(s.isSome)}constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${y++}`,this.title=null}};(0,i._)([(0,u.property)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,i._)([(0,u.property)({type:String})],f.prototype,"title",void 0),(0,i._)([(0,u.property)({constructOnly:!0})],f.prototype,"type",void 0),(0,i._)([(0,u.property)({clonable:!1,value:null})],f.prototype,"parent",null),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"isEditable",null),(0,i._)([(0,u.property)({readOnly:!0})],f.prototype,"requiredPropertiesForEditing",void 0),f=(0,i._)([(0,c.subclass)("esri.analysis.Analysis")],f);const d=f})),t.register("aEGHp",(function(r,n){e(r.exports,"default",(function(){return h}));var i=t("j6uz9"),o=t("hO9f9"),s=t("27btt"),l=t("2VGYF"),a=t("hO0an"),p=t("1CpCt"),u=t("hTI69");t("gHCNy"),t("aX9sh"),t("5HTPH");var c=t("qA6zg"),y=t("iHntE"),f=t("dZxPT"),d=t("gDefd");let g=class extends((0,a.JSONSupportMixin)((0,l.ClonableMixin)(s.default))){equals(e){return(0,p.equalsMaybe)(this.position,e.position)&&(0,p.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,u.property)({type:f.default,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),(0,i._)([(0,u.property)({type:d.default}),(0,y.persistable)()],g.prototype,"elevationInfo",void 0),(0,i._)([(0,u.property)(o.featureReferenceProperty)],g.prototype,"feature",void 0),g=(0,i._)([(0,c.subclass)("esri.analysis.LineOfSightAnalysisObserver")],g);const h=g})),t.register("hO9f9",(function(t,r){function n(e,t){return i(e)===i(t)}function i(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:"";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}e(t.exports,"featureReferenceEquals",(function(){return n})),e(t.exports,"featureReferenceProperty",(function(){return o}));const o={json:{write:{writer:function(e,t){null!=e&&null!=e.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}}})),t.register("iHntE",(function(r,n){e(r.exports,"persistable",(function(){return y}));var i=t("fMNx8"),o=t("7dRCe"),s=t("e63kH"),l=t("9nE9e"),a=t("74iZY"),p=t("hTI69"),u=t("9Pepw"),c=t("hej7M");function y(e){const t=e?.origins??[void 0];return(r,n)=>{const s=function(e,t,r){if("resource"===e?.type)return function(e,t,r){const n=(0,l.getPropertyMetadata)(t,r);return{type:String,read:(e,t,r)=>{const i=(0,c.r)(e,t,r);return n.type===String?i:"function"==typeof n.type?new n.type({url:i}):void 0},write:{writer(t,s,l,p){if(!p||!p.resources)return"string"==typeof t?void(s[l]=(0,c.t)(t,p)):void(s[l]=t.write({},p));const y=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),h=(0,c.t)(y,{...p,verifyItemRelativeUrls:p&&p.verifyItemRelativeUrls?{writtenUrls:p.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},c.M.NO),v=n.type!==String&&(!(0,i.isMultiOriginJSONMixin)(this)||p&&p.origin&&this.originIdOf(r)>(0,a.nameToId)(p.origin)),b={object:this,propertyName:r,value:t,targetUrl:h,dest:s,targetPropertyName:l,context:p,params:e};p&&p.portalItem&&h&&!(0,o.isAbsolute)(h)?v?function(e){const{context:t,targetUrl:r,params:n,value:i,dest:s,targetPropertyName:l}=e;if(!t.portalItem)return;const a=t.portalItem.resourceFromPath(r),p=g(i,r,t),c=(0,u.getResourceContentExtension)(p),y=(0,o.getPathExtension)(a.path),h=n?.compress??!1;c===y?(t.resources&&d({...e,resource:a,content:p,compress:h,updates:t.resources.toUpdate}),s[l]=r):f(e)}(b):function({context:e,targetUrl:t,dest:r,targetPropertyName:n}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[n]=t)}(b):p&&p.portalItem&&(null==h||null!=(0,c.i)(h)||(0,o.isBlobProtocol)(h)||v)?f(b):s[l]=h}}}}(e,t,r);switch(e?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.a;return{read:e,write:t}}}}(e,r,n);for(const e of t){const t=(0,p.propertyJSONMeta)(r,e,n);for(const e in s)t[e]=s[e]}}}function f(e){const{targetUrl:r,params:n,value:i,context:l,dest:a,targetPropertyName:p}=e;if(!l.portalItem)return;const y=(0,c.p)(r),f=y?.filename??(0,s.generateUUID)(),h=n?.prefix??y?.prefix,v=g(i,r,l),b=(0,o.join)(h,f),m=`${b}.${(0,u.getResourceContentExtension)(v)}`,x=l.portalItem.resourceFromPath(m);(0,o.isBlobProtocol)(r)&&l.resources&&l.resources.pendingOperations.push(async function(e){const r=(await Promise.resolve(t("bYA0c"))).default,{data:n}=await r(e,{responseType:"blob"});return n}(r).then((e=>{x.path=`${b}.${(0,u.getResourceContentExtension)(e)}`,a[p]=x.itemRelativeUrl})).catch((()=>{})));const I=n?.compress??!1;l.resources&&d({...e,resource:x,content:v,compress:I,updates:l.resources.toAdd}),a[p]=x.itemRelativeUrl}function d({object:e,propertyName:t,updates:r,resource:n,content:i,compress:o}){r.push({resource:n,content:i,compress:o,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function g(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}})),t.register("fMNx8",(function(t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}e(t.exports,"isMultiOriginJSONMixin",(function(){return n}))})),t.register("9Pepw",(function(r,n){e(r.exports,"getResourceContentExtension",(function(){return o}));var i=t("7dRCe");function o(e){return s[function(e){return e instanceof Blob?e.type:function(e){const t=(0,i.getPathExtension)(e);return p[t]||l}(e.url)}(e)]||a}const s={},l="text/plain",a=s[l],p={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in p)s[p[e]]=e})),t.register("6ZiQ2",(function(r,n){e(r.exports,"default",(function(){return g}));var i=t("j6uz9"),o=t("hO9f9"),s=t("2VGYF"),l=t("hO0an"),a=t("1CpCt"),p=t("hTI69");t("gHCNy"),t("aX9sh"),t("5HTPH");var u=t("qA6zg"),c=t("iHntE"),y=t("dZxPT"),f=t("gDefd");let d=class extends((0,l.JSONSupportMixin)(s.Clonable)){equals(e){return(0,a.equalsMaybe)(this.position,e.position)&&(0,a.equalsMaybe)(this.elevationInfo,e.elevationInfo)&&(0,o.featureReferenceEquals)(this.feature,e.feature)}constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}};(0,i._)([(0,p.property)({type:y.default}),(0,c.persistable)()],d.prototype,"position",void 0),(0,i._)([(0,p.property)({type:f.default}),(0,c.persistable)()],d.prototype,"elevationInfo",void 0),(0,i._)([(0,p.property)(o.featureReferenceProperty)],d.prototype,"feature",void 0),d=(0,i._)([(0,u.subclass)("esri.analysis.LineOfSightAnalysisTarget")],d);const g=d})),t.register("6Y0Wl",(function(r,n){e(r.exports,"getGeometryEffectiveElevationMode",(function(){return o}));t("aKYdG");function i(e){return e?s:l}function o(e,t){return function(e,t){return null!=t&&t.mode?t.mode:i(e).mode}(null!=e&&e.hasZ,t)}const s={mode:"absolute-height",offset:0},l={mode:"on-the-ground",offset:null}}));
//# sourceMappingURL=LineOfSightLayer.43b6369f.js.map
