!function(){function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;i.register("6J0KG",(function(e,r){t(e.exports,"bidiText",(function(){return s}));var n=new(0,i("DDYJe").default);function s(t){return n.hasBidiChar(t)?(e="rtl"===n.checkContextual(t)?"IDNNN":"ICNNN",[n.bidiTransform(t,e,"VLYSN"),!0]):[t,!1];var e}})),i.register("eA5AD",(function(e,r){t(e.exports,"cloneAndDecodeGeometry",(function(){return l})),t(e.exports,"deltaEncodeGeometry",(function(){return p})),t(e.exports,"reverseMultipath",(function(){return d})),t(e.exports,"reversePath",(function(){return m})),t(e.exports,"getCoord2D",(function(){return g})),t(e.exports,"isClosedPath",(function(){return x})),t(e.exports,"getId",(function(){return P})),t(e.exports,"setId",(function(){return C})),t(e.exports,"PathTransformationCursor",(function(){return k})),t(e.exports,"PathGeometryCursor",(function(){return M}));var n=i("8TSCy"),s=i("flPLJ"),a=i("79LpT"),o=i("jghp4");function l(t){var e,i=(0,s.clone)(t);return(e=i)&&((0,a.isPolygon)(e)?y(e.rings):(0,a.isPolyline)(e)?y(e.paths):(0,a.isMultipoint)(e)&&_(e.points),h(e)),i}function h(t){if(!t)return null;(0,a.isPoint)(t)?t.y=-t.y:(0,a.isPolygon)(t)?c(t.rings):(0,a.isPolyline)(t)?c(t.paths):(0,a.isMultipoint)(t)&&u(t.points)}function u(t){if(t)for(var e=t.length,i=0;i<e;i++)t[i][1]=-t[i][1]}function c(t){var e=!0,i=!1,r=void 0;if(t)try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){u(n.value)}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}function f(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function v(t){var e=!0,i=!1,r=void 0;if(t)try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){f(n.value)}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}function _(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function y(t){var e=!0,i=!1,r=void 0;if(t)try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){_(n.value)}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}function p(t){t&&(h(t),(0,a.isPolygon)(t)?v(t.rings):(0,a.isPolyline)(t)?v(t.paths):(0,a.isMultipoint)(t)&&f(t.points))}function d(t){var e=!0,i=!1,r=void 0;if(t)try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){m(n.value)}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}function m(t){t&&t.reverse()}function g(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function x(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function P(t){return t[4]}function C(t,e){t[4]=e}var k=function(){"use strict";function t(e,i,r,s){n.classCallCheck(this,t),this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&((0,a.isPolygon)(e)?i&&(this.multiPath=e.rings,this.isClosed=!0):(0,a.isPolyline)(e)?r&&(this.multiPath=e.paths,this.isClosed=!1):(0,a.isExtent)(e)&&i&&(this.multiPath=b(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new(0,o.Placement)}return n.createClass(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),M=function(){"use strict";function t(e,i,r,s){n.classCallCheck(this,t),this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return n.createClass(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if((0,a.isPolygon)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):(0,a.isPolyline)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):(0,a.isExtent)(t)&&this.acceptPolygon&&(this.multiPath=b(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function b(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}})),i.register("jghp4",(function(e,r){t(e.exports,"Placement",(function(){return s}));var n=i("8TSCy"),s=function(){"use strict";function t(){n.classCallCheck(this,t),this.setIdentity()}return n.createClass(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()})),i.register("4qQLM",(function(e,r){t(e.exports,"getEffectOperator",(function(){return b})),t(e.exports,"getPlacementOperator",(function(){return S}));var n=i("kLTaj"),s=i("997lQ"),a=i("kvAjJ"),o=i("1l7x4"),l=i("8Ktmp"),h=i("6zsTE"),u=i("9G7yw"),c=i("kYKRB"),f=i("3eDB4"),v=i("1cjep"),_=i("6CGvS"),y=i("4fodX"),p=i("h9EBI"),d=i("6hVhu"),m=i("2SPcl"),g=i("ipIM9"),x=i("bjVBF"),P=i("e2wNV"),C=i("6lVwS"),k=i("d37j9"),M=i("ctUxU");function b(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return n.EffectAddControlPoints.local();case"CIMGeometricEffectArrow":return s.EffectArrow.local();case"CIMGeometricEffectBuffer":return a.EffectBuffer.local();case"CIMGeometricEffectControlMeasureLine":return o.EffectControlMeasureLine.local();case"CIMGeometricEffectCut":return l.EffectCut.local();case"CIMGeometricEffectDashes":return h.EffectDashes.local();case"CIMGeometricEffectDonut":return u.EffectDonut.local();case"CIMGeometricEffectJog":return c.EffectJog.local();case"CIMGeometricEffectMove":return f.EffectMove.local();case"CIMGeometricEffectOffset":return v.EffectOffset.local();case"CIMGeometricEffectReverse":return _.EffectReverse.local();case"CIMGeometricEffectRotate":return y.EffectRotate.local();case"CIMGeometricEffectScale":return p.EffectScale.local();case"CIMGeometricEffectWave":return d.EffectWave.local()}return null}function S(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return m.PlacementAlongLineSameSize.local();case"CIMMarkerPlacementAtExtremities":return g.PlacementAtExtremities.local();case"CIMMarkerPlacementAtRatioPositions":return x.PlacementAtRatioPositions.local();case"CIMMarkerPlacementInsidePolygon":return P.PlacementInsidePolygon.local();case"CIMMarkerPlacementOnLine":return C.PlacementOnLine.local();case"CIMMarkerPlacementOnVertices":return k.PlacementOnVertices.local();case"CIMMarkerPlacementPolygonCenter":return M.PlacementPolygonCenter.local()}return null}})),i.register("kLTaj",(function(e,r){t(e.exports,"EffectAddControlPoints",(function(){return l}));var n=i("8TSCy"),s=i("flPLJ"),a=i("79LpT"),o=i("eA5AD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,a.isPolygon)(t)){this._isClosed=!0;var e=(0,s.clone)(t);return this._processMultipath(e.rings),e}if((0,a.isPolyline)(t)){this._isClosed=!1;var i=(0,s.clone)(t);return this._processMultipath(i.paths),i}if((0,a.isExtent)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(r),{rings:[r]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){var e=!0,i=!1,r=void 0;if(t)try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var a=n.value;this._processPath(a)}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"_processPath",value:function(t){if(t){var e,i,r,n,s,a,l=t.length,h=t[0];this._isClosed&&++l;for(var u=1;u<l;++u){var c,f=(c=this._isClosed&&u===l-1?t[0]:t[u])[0]-h[0],v=c[1]-h[1],_=Math.sqrt(f*f+v*v);u>1&&_>0&&r>0&&(e*f+i*v)/_/r<=this._maxCosAngle&&(0,o.setId)(h,1),1===u&&(n=f,s=v,a=_),_>0&&(h=c,e=f,i=v,r=_)}this._isClosed&&r>0&&a>0&&(e*n+i*s)/a/r<=this._maxCosAngle&&(0,o.setId)(t[0],1)}}}]),t}()})),i.register("997lQ",(function(e,r){t(e.exports,"EffectArrow",(function(){return h}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=i("6LoaD"),l=o.GeometricEffectArrowType.OpenEnded,h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!1,!0))._curveHelper=new(0,a.CurveHelper),o._width=(void 0!==r.width?r.width:5)*s,o._arrowType=void 0!==r.geometricEffectArrowType?r.geometricEffectArrowType:void 0!==r.arrowType?r.arrowType:l,o._offsetFlattenError=a.PIXEL_TOLERANCE*s,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){switch(this._arrowType){case o.GeometricEffectArrowType.OpenEnded:default:return this._constructSimpleArrow(t,!0);case o.GeometricEffectArrowType.Block:return this._constructSimpleArrow(t,!1);case o.GeometricEffectArrowType.Crossed:return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var i=this._curveHelper.calculatePathLength(t),r=this._width;i<2*r&&(r=i/2);var n=this._curveHelper.getSubCurve(t,0,i-r);if(!n)return null;var s=r/2;if(this._curveHelper.isEmpty(n,!1))return null;var o=this._constructOffset(n,-s);if(!o)return null;var l=this._constructOffset(n,s);if(!l)return null;var h=this._constructArrowBasePoint(o,-s/2);if(!h)return null;var u=this._constructArrowBasePoint(l,s/2);if(!u)return null;var c=t[t.length-1];e||(this._makeControlPoint(l,!0),this._makeControlPoint(o,!0));var f=new(0,a.PathHelper);return f.addPath(l,!0),f.lineTo(u),this._makeControlPoint(f.path()),f.lineTo(c),this._makeControlPoint(f.path()),f.lineTo(h),this._makeControlPoint(f.path()),f.addPath(o,!1),e?{paths:[f.path()]}:(f.close(),{rings:[f.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<3.732050807568877*i&&(i=e/3.732050807568877);var r=this._curveHelper.getSubCurve(t,0,e-2.732050807568877*i);if(!r)return null;var n=i/2;if(this._curveHelper.isEmpty(r,!1))return null;var s=this._constructOffset(r,n);if(!s)return null;var o=this._constructOffset(r,-n);if(!o)return null;var l=this._curveHelper.getSubCurve(t,0,e-i);if(!l)return null;if(this._curveHelper.isEmpty(l,!1))return null;var h=this._constructOffset(l,n);if(!h)return null;var u=this._constructOffset(l,-n);if(!u)return null;var c=h[h.length-1],f=this._constructArrowBasePoint(h,n/2);if(!f)return null;var v=u[u.length-1],_=this._constructArrowBasePoint(u,-n/2);if(!_)return null;var y=t[t.length-1];this._makeControlPoint(s,!1),this._makeControlPoint(o,!1);var p=new(0,a.PathHelper);return p.addPath(s,!0),this._makeControlPoint(p.path()),p.lineTo(v),p.lineTo(_),this._makeControlPoint(p.path()),p.lineTo(y),this._makeControlPoint(p.path()),p.lineTo(f),this._makeControlPoint(p.path()),p.lineTo(c),this._makeControlPoint(p.path()),p.addPath(o,!1),{paths:[p.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,o.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],r=t[t.length-1],n=[r[0]-i[0],r[1]-i[1]];return this._curveHelper.normalize(n),[r[0]+n[1]*e,r[1]-n[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,s.setId)(e?t[0]:t[t.length-1],1)}}]),i}(s.PathGeometryCursor)})),i.register("4e4Wb",(function(e,r){t(e.exports,"PIXEL_TOLERANCE",(function(){return a})),t(e.exports,"PathHelper",(function(){return o})),t(e.exports,"CurveHelper",(function(){return l}));var n=i("8TSCy"),s=i("6LoaD"),a=.03,o=function(){"use strict";function t(){n.classCallCheck(this,t),this._path=[]}return n.createClass(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}},{key:"calculateLength",value:function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=this.calculateSegLength(t,r);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=(t[r+1][0]-t[r][0])*(t[r+1][1]+t[r][1]);return e/2}},{key:"getCoord2D",value:function(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}},{key:"getSegCoord2D",value:function(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}},{key:"getAngle",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1];return Math.atan2(n,r)}},{key:"getSegAngle",value:function(t,e,i){return this.getAngle(t[e],t[e+1],i)}},{key:"getAngleCS",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1],s=Math.sqrt(r*r+n*n);return s>0?[r/s,n/s]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}},{key:"cut",value:function(t,e,i,r){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),r>=1?t[e+1]:this.getSegCoord2D(t,e,r)]}},{key:"addSegment",value:function(t,e,i){i&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,i){var r=[];return this.appendSubCurve(r,t,e,i)?r:null}},{key:"appendSubCurve",value:function(t,e,i,r){for(var n=e?e.length-1:0,s=0,a=!0,o=0;o<n;){var l=this.calculateSegLength(e,o);if(0!==l){if(a){if(s+l>i){var h=(i-s)/l,u=1,c=!1;s+l>=r&&(u=(r-s)/l,c=!0);var f=this.cut(e,o,h,u);if(f&&this.addSegment(t,f,a),c)break;a=!1}}else{if(s+l>r){var v=this.cut(e,o,0,(r-s)/l);v&&this.addSegment(t,v,a);break}this.addSegment(t,[e[o],e[o+1]],a)}s+=l,++o}else++o}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var i=t?t.length-1:0,r=0,n=-1;n<i;){++n;var s=this.calculateSegLength(t,n);if(0!==s){if(r+s>e){var a=(e-r)/s;return this.getCoord2D(t[n],t[n+1],a)}r+=s}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,r=-1;r<i;){if(t[++r+1][0]!==t[r][0]||t[r+1][1]!==t[r][1])return!1;if(e&&t[r+1][2]!==t[r][2])return!1}return!0}},{key:"offset",value:function(t,e,i,r,n){if(!t||t.length<2)return null;for(var a=0,o=t[a++],l=a;a<t.length;){var h=t[a];h[0]===o[0]&&h[1]===o[1]||(a!==l&&(t[l]=t[a]),o=t[l++]),a++}var u=t[0][0]===t[l-1][0]&&t[0][1]===t[l-1][1];if(u&&--l,l<(u?3:2))return null;var c=[];o=u?t[l-1]:null;for(var f=t[0],v=0;v<l;v++){var _=v===l-1?u?t[0]:null:t[v+1];if(o)if(_){var y=[_[0]-f[0],_[1]-f[1]];this.normalize(y);var p=[f[0]-o[0],f[1]-o[1]];this.normalize(p);var d=p[0]*y[1]-p[1]*y[0],m=p[0]*y[0]+p[1]*y[1];if(d>=0==e<=0){if(m<1){var g=[y[0]-p[0],y[1]-p[1]];this.normalize(g);var x=Math.sqrt((1+m)/2);if(x>1/r){var P=-Math.abs(e)/x;c.push([f[0]-g[0]*P,f[1]-g[1]*P])}}}else switch(i){case s.GeometricEffectOffsetMethod.Mitered:var C=Math.sqrt((1+m)/2);if(C>0&&1/C<r){var k=[y[0]-p[0],y[1]-p[1]];this.normalize(k);var M=Math.abs(e)/C;c.push([f[0]-k[0]*M,f[1]-k[1]*M]);break}case s.GeometricEffectOffsetMethod.Bevelled:c.push([f[0]+p[1]*e,f[1]-p[0]*e]),c.push([f[0]+y[1]*e,f[1]-y[0]*e]);break;case s.GeometricEffectOffsetMethod.Rounded:if(m<1){c.push([f[0]+p[1]*e,f[1]-p[0]*e]);var b=Math.floor(2.5*(1-m));if(b>0)for(var S=1/b,w=S,L=1;L<b;L++,w+=S){var T=[p[1]*(1-w)+y[1]*w,-p[0]*(1-w)-y[0]*w];this.normalize(T),c.push([f[0]+T[0]*e,f[1]+T[1]*e])}c.push([f[0]+y[1]*e,f[1]-y[0]*e])}break;case s.GeometricEffectOffsetMethod.Square:default:if(d<0)c.push([f[0]+(p[1]+p[0])*e,f[1]+(p[1]-p[0])*e]),c.push([f[0]+(y[1]-y[0])*e,f[1]-(y[0]+y[1])*e]);else{var E=Math.sqrt((1+Math.abs(m))/2),I=[y[0]-p[0],y[1]-p[1]];this.normalize(I);var A=e/E;c.push([f[0]-I[0]*A,f[1]-I[1]*A])}}}else{var G=[f[0]-o[0],f[1]-o[1]];this.normalize(G),c.push([f[0]+G[1]*e,f[1]-G[0]*e])}else{var R=[_[0]-f[0],_[1]-f[1]];this.normalize(R),c.push([f[0]+R[1]*e,f[1]-R[0]*e])}o=f,f=_}return c.length<(u?3:2)?null:(u&&c.push([c[0][0],c[0][1]]),c)}}]),t}()})),i.register("kvAjJ",(function(e,r){t(e.exports,"EffectBuffer",(function(){return l}));var n=i("8TSCy"),s=i("79LpT"),a=i("4e4Wb"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r,s){n.classCallCheck(this,t),this._inputGeometries=e,this._curveHelper=new(0,a.CurveHelper),this._size=(void 0!==i.size?i.size:1)*r,this._offsetFlattenError=a.PIXEL_TOLERANCE*r}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,s.isExtent)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,o.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if((0,s.isPolygon)(t)){if(0===this._size)return t;var r=[],n=!0,a=!1,l=void 0;try{for(var h,u=t.rings[Symbol.iterator]();!(n=(h=u.next()).done);n=!0){var c=h.value,f=this._curveHelper.offset(c,this._size,o.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);f&&r.push(f)}}catch(t){a=!0,l=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw l}}if(r.length)return{rings:r}}if((0,s.isPolyline)(t)&&this._size>0){var v=[],_=!0,y=!1,p=void 0;try{for(var d,m=t.paths[Symbol.iterator]();!(_=(d=m.next()).done);_=!0){var g=d.value;if(g&&g.length>1){var x=this._curveHelper.offset(g,this._size,o.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError),P=this._curveHelper.offset(g,-this._size,o.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError);if(x&&P){for(var C=P.length-1;C>=0;C--)x.push(P[C]);x.push([x[0][0],x[0][1]]),v.push(x)}}}}catch(t){y=!0,p=t}finally{try{_||null==m.return||m.return()}finally{if(y)throw p}}if(v.length)return{rings:v}}(0,s.isPoint)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}()})),i.register("1l7x4",(function(e,r){t(e.exports,"EffectControlMeasureLine",(function(){return l}));var n=i("8TSCy"),s=i("79LpT"),a=i("eA5AD"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r){var s;n.classCallCheck(this,t),this._default_point_size=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=null!=(s=i.rule)?s:o.GeometricEffectControlMeasureLineRule.FullGeometry,this._default_size=this._default_point_size*r}return n.createClass(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){var e=void 0;if((0,s.isPoint)(t)?e=this._processGeom([[[t.x,t.y]]]):(0,s.isMultipoint)(t)?e=this._processGeom([t.points]):(0,s.isPolyline)(t)?e=this._processGeom(t.paths):(0,s.isPolygon)(t)&&(e=this._processGeom(t.rings)),e&&e.length)return{paths:e}}return null}},{key:"_clone",value:function(t){return[t[0],t[1]]}},{key:"_mid",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},{key:"_mix",value:function(t,e,i,r){return[t[0]*e+i[0]*r,t[1]*e+i[1]*r]}},{key:"_add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"_add2",value:function(t,e,i){return[t[0]+e,t[1]+i]}},{key:"_sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"_dist",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"_norm",value:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}},{key:"_normalize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e/this._norm(t);t[0]*=i,t[1]*=i}},{key:"_leftPerpendicular",value:function(t){var e=-t[1],i=t[0];t[0]=e,t[1]=i}},{key:"_leftPerp",value:function(t){return[-t[1],t[0]]}},{key:"_rightPerpendicular",value:function(t){var e=t[1],i=-t[0];t[0]=e,t[1]=i}},{key:"_rightPerp",value:function(t){return[t[1],-t[0]]}},{key:"_dotProduct",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"_crossProduct",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"_rotateDirect",value:function(t,e,i){var r=t[0]*e-t[1]*i,n=t[0]*i+t[1]*e;t[0]=r,t[1]=n}},{key:"_makeCtrlPt",value:function(t){var e=[t[0],t[1]];return(0,a.setId)(e,1),e}},{key:"_addAngledTicks",value:function(t,e,i,r){var n=this._sub(i,e);this._normalize(n);var s,a=this._crossProduct(n,this._sub(r,e));s=a>0?this._rightPerp(n):this._leftPerp(n);var o=Math.abs(a)/2,l=[];l.push([e[0]+(s[0]-n[0])*o,e[1]+(s[1]-n[1])*o]),l.push(e),l.push(i),l.push([i[0]+(s[0]+n[0])*o,i[1]+(s[1]+n[1])*o]),t.push(l)}},{key:"_addBezier2",value:function(t,e,i,r,n){if(0!=n--){var s=this._mid(e,i),a=this._mid(i,r),o=this._mid(s,a);this._addBezier2(t,e,s,o,n),this._addBezier2(t,o,a,r,n)}else t.push(r)}},{key:"_addBezier3",value:function(t,e,i,r,n,s){if(0!=s--){var a=this._mid(e,i),o=this._mid(i,r),l=this._mid(r,n),h=this._mid(a,o),u=this._mid(o,l),c=this._mid(h,u);this._addBezier3(t,e,a,h,c,s),this._addBezier3(t,c,u,l,n,s)}else t.push(n)}},{key:"_add90DegArc",value:function(t,e,i,r,n){var s=null!=n?n:this._crossProduct(this._sub(i,e),this._sub(r,e))>0,a=this._mid(e,i),o=this._sub(a,e);s?this._leftPerpendicular(o):this._rightPerpendicular(o),a[0]+=o[0],a[1]+=o[1],this._addBezier3(t,e,this._mix(e,.33333,a,.66667),this._mix(i,.33333,a,.66667),i,4)}},{key:"_addArrow",value:function(t,e,i){var r=e[0],n=e[1],s=e[e.length-1],a=this._sub(r,n);this._normalize(a);var o=this._crossProduct(a,this._sub(s,n)),l=.5*o,h=this._leftPerp(a),u=[s[0]-h[0]*o,s[1]-h[1]*o],c=e.length-1,f=[];f.push(i?[-h[0],-h[1]]:h);for(var v=[-a[0],-a[1]],_=1;_<c-1;_++){var y=this._sub(e[_+1],e[_]);this._normalize(y);var p=this._dotProduct(y,v),d=this._crossProduct(y,v),m=Math.sqrt((1+p)/2),g=this._sub(y,v);this._normalize(g),g[0]/=m,g[1]/=m,f.push(d<0?[-g[0],-g[1]]:g),v=y}f.push(this._rightPerp(v));for(var x=f.length-1;x>0;x--)t.push([e[x][0]+f[x][0]*l,e[x][1]+f[x][1]*l]);t.push([u[0]+f[0][0]*l,u[1]+f[0][1]*l]),t.push([u[0]+f[0][0]*o,u[1]+f[0][1]*o]),t.push(r),t.push([u[0]-f[0][0]*o,u[1]-f[0][1]*o]),t.push([u[0]-f[0][0]*l,u[1]-f[0][1]*l]);for(var P=1;P<f.length;P++)t.push([e[P][0]-f[P][0]*l,e[P][1]-f[P][1]*l])}},{key:"_cp2",value:function(t,e,i){return t.length>=2?t[1]:this._add2(t[0],e*this._default_size,i*this._default_size)}},{key:"_cp3",value:function(t,e,i,r){if(t.length>=3)return t[2];var n=this._mix(t[0],1-i,e,i),s=this._sub(e,t[0]);return this._normalize(s),this._rightPerpendicular(s),[n[0]+s[0]*r*this._default_size,n[1]+s[1]*r*this._default_size]}},{key:"_arrowPath",value:function(t){if(t.length>2)return t;var e=t[0],i=this._cp2(t,-4,0),r=this._sub(e,i);this._normalize(r);var n=this._rightPerp(r);return[e,i,[e[0]+(n[0]-r[0])*this._default_size,e[1]+(n[1]-r[1])*this._default_size]]}},{key:"_arrowLastSeg",value:function(t){var e,i=t[0],r=this._cp2(t,-4,0);if(t.length>=3)e=t[t.length-1];else{var n=this._sub(i,r);this._normalize(n);var s=this._rightPerp(n);e=[i[0]+(s[0]-n[0])*this._default_size,i[1]+(s[1]-n[1])*this._default_size]}return[r,e]}},{key:"_processGeom",value:function(t){if(!t)return null;var e=[],i=!0,r=!1,s=void 0;try{for(var l,h=t[Symbol.iterator]();!(i=(l=h.next()).done);i=!0){var u=l.value;if(u&&0!==u.length){var c=u.length,f=u[0];switch(this._rule){case o.GeometricEffectControlMeasureLineRule.PerpendicularFromFirstSegment:var v=this._cp2(u,0,-1),_=this._cp3(u,v,.5,4),y=[];y.push(_),y.push(this._mid(f,v)),e.push(y);break;case o.GeometricEffectControlMeasureLineRule.ReversedFirstSegment:var p=this._cp2(u,0,-1);e.push([p,f]);break;case o.GeometricEffectControlMeasureLineRule.PerpendicularToSecondSegment:var d=this._cp2(u,-4,1),m=this._cp3(u,d,.882353,-1.94),g=[];g.push(this._mid(d,m)),g.push(f),e.push(g);break;case o.GeometricEffectControlMeasureLineRule.SecondSegmentWithTicks:var x=this._cp2(u,-4,1),P=this._cp3(u,x,.882353,-1.94),C=this._sub(P,x),k=void 0;k=this._crossProduct(C,this._sub(f,x))>0?this._rightPerp(k):this._leftPerp(C);var M=[];M.push([x[0]+(k[0]-C[0])/3,x[1]+(k[1]-C[1])/3]),M.push(x),M.push(P),M.push([P[0]+(k[0]+C[0])/3,P[1]+(k[1]+C[1])/3]),e.push(M);break;case o.GeometricEffectControlMeasureLineRule.DoublePerpendicular:var b=this._cp2(u,0,-1),S=this._cp3(u,b,.5,3),w=this._mid(f,b),L=this._sub(w,S);this._normalize(L);var T=this._crossProduct(L,this._sub(f,S));this._leftPerpendicular(L);var E=[];E.push(f),E.push([S[0]+L[0]*T,S[1]+L[1]*T]),e.push(E);var I=[];I.push([S[0]-L[0]*T,S[1]-L[1]*T]),I.push(b),e.push(I);break;case o.GeometricEffectControlMeasureLineRule.OppositeToFirstSegment:var A=this._cp2(u,0,-1),G=this._cp3(u,A,.5,3),R=this._mid(f,A),z=this._sub(R,G);this._normalize(z);var F=this._crossProduct(z,this._sub(f,G));this._leftPerpendicular(z);var D=[];D.push([G[0]+z[0]*F,G[1]+z[1]*F]),D.push([G[0]-z[0]*F,G[1]-z[1]*F]),e.push(D);break;case o.GeometricEffectControlMeasureLineRule.TriplePerpendicular:var H=this._cp2(u,0,-1),O=this._cp3(u,H,.5,4),V=this._mid(f,H),X=this._sub(V,O);this._normalize(X);var B=this._crossProduct(X,this._sub(f,O));this._leftPerpendicular(X);var W=[];W.push([O[0]+X[0]*B*.8,O[1]+X[1]*B*.8]),W.push([V[0]+.8*(f[0]-V[0]),V[1]+.8*(f[1]-V[1])]),e.push(W),e.push([O,V]);var N=[];N.push([O[0]-X[0]*B*.8,O[1]-X[1]*B*.8]),N.push([V[0]+.8*(H[0]-V[0]),V[1]+.8*(H[1]-V[1])]),e.push(N);break;case o.GeometricEffectControlMeasureLineRule.HalfCircleFirstSegment:var Y=this._cp2(u,0,-1),U=this._cp3(u,Y,.5,4),q=this._mid(f,Y),J=this._sub(Y,f),j=Math.cos(Math.PI/18),K=Math.sin(Math.PI/18),Z=Math.sqrt((1+j)/2),Q=Math.sqrt((1-j)/2),$=[],tt=void 0;this._crossProduct(J,this._sub(U,f))>0?($.push(f),J=this._sub(f,q),tt=Y):($.push(Y),J=this._sub(Y,q),tt=f),this._rotateDirect(J,Z,Q),J[0]/=Z,J[1]/=Z;for(var et=1;et<=18;et++)$.push(this._add(q,J)),this._rotateDirect(J,j,K);$.push(tt),e.push($);break;case o.GeometricEffectControlMeasureLineRule.HalfCircleSecondSegment:var it=this._cp2(u,0,-1),rt=this._cp3(u,it,1,-1),nt=this._sub(f,it);this._normalize(nt);var st=this._crossProduct(nt,this._sub(rt,it))/2;this._leftPerpendicular(nt);var at=[it[0]+nt[0]*st,it[1]+nt[1]*st];nt=this._sub(it,at);var ot=Math.cos(Math.PI/18),lt=Math.sin(Math.PI/18);st>0&&(lt=-lt);for(var ht=[it],ut=1;ut<=18;ut++)this._rotateDirect(nt,ot,lt),ht.push(this._add(at,nt));e.push(ht);break;case o.GeometricEffectControlMeasureLineRule.HalfCircleExtended:var ct=this._cp2(u,0,-2),ft=this._cp3(u,ct,1,-1),vt=void 0;if(c>=4)vt=u[3];else{var _t=this._sub(f,ct);vt=this._add(ft,_t)}var yt=this._dist(ct,ft)/2/.75,pt=this._sub(ct,f);this._normalize(pt,yt);var dt=this._sub(ft,vt);this._normalize(dt,yt);var mt=[vt,ft];e.push(mt);var gt=[this._clone(ft)];this._addBezier3(gt,ft,this._add(ft,dt),this._add(ct,pt),ct,4),gt.push(f),e.push(gt);break;case o.GeometricEffectControlMeasureLineRule.OpenCircle:for(var xt=this._cp2(u,-2,0),Pt=this._sub(xt,f),Ct=Math.cos(Math.PI/18),kt=-Math.sin(Math.PI/18),Mt=[xt],bt=1;bt<=33;bt++)this._rotateDirect(Pt,Ct,kt),Mt.push(this._add(f,Pt));e.push(Mt);break;case o.GeometricEffectControlMeasureLineRule.CoverageEdgesWithTicks:var St=this._cp2(u,0,-1),wt=void 0,Lt=void 0;if(c>=3)wt=u[2];else{var Tt=this._sub(St,f),Et=this._leftPerp(Tt);wt=[f[0]+Et[0]-.25*Tt[0],f[1]+Et[1]-.25*Tt[1]]}if(c>=4)Lt=u[3];else{var It=this._mid(f,St),At=this._sub(f,St);this._normalize(At),this._leftPerpendicular(At);var Gt=this._crossProduct(At,this._sub(wt,It));this._rightPerpendicular(At),Lt=[wt[0]+At[0]*Gt*2,wt[1]+At[1]*Gt*2]}var Rt=this._sub(St,f),zt=void 0,Ft=void 0;zt=this._crossProduct(Rt,this._sub(wt,f))>0?this._rightPerp(Rt):this._leftPerp(Rt),(Ft=[]).push(wt),Ft.push(f),Ft.push([f[0]+(zt[0]-Rt[0])/3,f[1]+(zt[1]-Rt[1])/3]),e.push(Ft),zt=this._crossProduct(Rt,this._sub(Lt,St))>0?this._rightPerp(zt):this._leftPerp(Rt),(Ft=[]).push([St[0]+(zt[0]+Rt[0])/3,St[1]+(zt[1]+Rt[1])/3]),Ft.push(St),Ft.push(Lt),e.push(Ft);break;case o.GeometricEffectControlMeasureLineRule.GapExtentWithDoubleTicks:var Dt=this._cp2(u,0,2),Ht=this._cp3(u,Dt,0,1),Ot=void 0;if(c>=4)Ot=u[3];else{var Vt=this._sub(Dt,f);Ot=this._add(Ht,Vt)}this._addAngledTicks(e,f,Dt,this._mid(Ht,Ot)),this._addAngledTicks(e,Ht,Ot,this._mid(f,Dt));break;case o.GeometricEffectControlMeasureLineRule.GapExtentMidline:var Xt=this._cp2(u,2,0),Bt=this._cp3(u,Xt,0,1),Wt=void 0;if(c>=4)Wt=u[3];else{var Nt=this._sub(Xt,f);Wt=this._add(Bt,Nt)}var Yt=[];Yt.push(this._mid(f,Bt)),Yt.push(this._mid(Xt,Wt)),e.push(Yt);break;case o.GeometricEffectControlMeasureLineRule.Chevron:var Ut=this._cp2(u,-1,-1),qt=void 0;if(c>=3)qt=u[2];else{var Jt=this._sub(Ut,f);this._leftPerpendicular(Jt),qt=this._add(f,Jt)}e.push([Ut,this._makeCtrlPt(f),qt]);break;case o.GeometricEffectControlMeasureLineRule.PerpendicularWithArc:var jt=this._cp2(u,0,-2),Kt=this._cp3(u,jt,.5,-1),Zt=this._sub(jt,f),Qt=this._norm(Zt);Zt[0]/=Qt,Zt[1]/=Qt;var $t=this._crossProduct(Zt,this._sub(Kt,f)),te=this._dotProduct(Zt,this._sub(Kt,f));te<.05*Qt?te=.05*Qt:te>.95*Qt&&(te=.95*Qt);var ee=[f[0]+Zt[0]*te,f[1]+Zt[1]*te];this._leftPerpendicular(Zt);var ie=[];ie.push([ee[0]-Zt[0]*$t,ee[1]-Zt[1]*$t]),ie.push([ee[0]+Zt[0]*$t,ee[1]+Zt[1]*$t]),e.push(ie);var re=[jt[0]+Zt[0]*$t,jt[1]+Zt[1]*$t];Zt=this._sub(jt,re);var ne=Math.cos(Math.PI/18),se=Math.sin(Math.PI/18);$t<0&&(se=-se),ie=[f,jt];for(var ae=1;ae<=9;ae++)this._rotateDirect(Zt,ne,se),ie.push(this._add(re,Zt));e.push(ie);break;case o.GeometricEffectControlMeasureLineRule.ClosedHalfCircle:for(var oe=this._cp2(u,2,0),le=this._mid(f,oe),he=this._sub(oe,le),ue=Math.cos(Math.PI/18),ce=Math.sin(Math.PI/18),fe=[f,oe],ve=1;ve<=18;ve++)this._rotateDirect(he,ue,ce),fe.push(this._add(le,he));e.push(fe);break;case o.GeometricEffectControlMeasureLineRule.TripleParallelExtended:var _e=this._cp2(u,0,-2),ye=this._cp3(u,_e,1,-2),pe=this._mid(f,_e),de=this._sub(ye,_e);this._normalize(de);var me=Math.abs(this._crossProduct(de,this._sub(pe,_e)))/2,ge=this._dist(_e,ye),xe=[_e,f];xe.push([f[0]+de[0]*ge*.5,f[1]+de[1]*ge*.5]),e.push(xe);var Pe=[];Pe.push([pe[0]-de[0]*me,pe[1]-de[1]*me]),Pe.push([pe[0]+de[0]*ge*.375,pe[1]+de[1]*ge*.375]),(0,a.setId)(Pe[Pe.length-1],1),Pe.push([pe[0]+de[0]*ge*.75,pe[1]+de[1]*ge*.75]),e.push(Pe);var Ce=[_e,ye];e.push(Ce);break;case o.GeometricEffectControlMeasureLineRule.ParallelWithTicks:var ke=this._cp2(u,3,0),Me=this._cp3(u,ke,.5,-1),be=this._sub(Me,ke);this._normalize(be);var Se=this._crossProduct(be,this._sub(Me,f));this._leftPerpendicular(be),this._addAngledTicks(e,f,ke,Me),this._addAngledTicks(e,this._mix(f,1,be,Se),this._mix(ke,1,be,Se),this._mid(f,ke));break;case o.GeometricEffectControlMeasureLineRule.Parallel:var we=this._cp2(u,3,0),Le=this._cp3(u,we,.5,-1),Te=this._sub(we,f);this._normalize(Te);var Ee=this._leftPerp(Te),Ie=this._crossProduct(Te,this._sub(Le,f)),Ae=[f,we];e.push(Ae),(Ae=[]).push([f[0]+Ee[0]*Ie,f[1]+Ee[1]*Ie]),Ae.push([we[0]+Ee[0]*Ie,we[1]+Ee[1]*Ie]),e.push(Ae);break;case o.GeometricEffectControlMeasureLineRule.PerpendicularToFirstSegment:var Ge=this._cp2(u,3,0),Re=this._cp3(u,Ge,.5,-1),ze=this._mid(f,Ge),Fe=this._sub(Ge,f);this._normalize(Fe);var De=this._crossProduct(Fe,this._sub(Re,f));this._leftPerpendicular(Fe);var He=[];He.push([ze[0]-Fe[0]*De*.25,ze[1]-Fe[1]*De*.25]),He.push([ze[0]+Fe[0]*De*1.25,ze[1]+Fe[1]*De*1.25]),e.push(He);break;case o.GeometricEffectControlMeasureLineRule.ParallelOffset:var Oe=this._cp2(u,3,0),Ve=this._cp3(u,Oe,.5,-1),Xe=this._sub(Oe,f);this._normalize(Xe);var Be=this._crossProduct(Xe,this._sub(Ve,f));this._leftPerpendicular(Xe);var We=[];We.push([f[0]-Xe[0]*Be,f[1]-Xe[1]*Be]),We.push([Oe[0]-Xe[0]*Be,Oe[1]-Xe[1]*Be]),e.push(We);var Ne=[];Ne.push([f[0]+Xe[0]*Be,f[1]+Xe[1]*Be]),Ne.push([Oe[0]+Xe[0]*Be,Oe[1]+Xe[1]*Be]),e.push(Ne);break;case o.GeometricEffectControlMeasureLineRule.OffsetOpposite:var Ye=this._cp2(u,3,0),Ue=this._cp3(u,Ye,.5,-1),qe=this._sub(Ye,f);this._normalize(qe);var Je=this._crossProduct(qe,this._sub(Ue,f));this._leftPerpendicular(qe);var je=[];je.push([f[0]-qe[0]*Je,f[1]-qe[1]*Je]),je.push([Ye[0]-qe[0]*Je,Ye[1]-qe[1]*Je]),e.push(je);break;case o.GeometricEffectControlMeasureLineRule.OffsetSame:var Ke=this._cp2(u,3,0),Ze=this._cp3(u,Ke,.5,-1),Qe=this._sub(Ke,f);this._normalize(Qe);var $e=this._crossProduct(Qe,this._sub(Ze,f));this._leftPerpendicular(Qe);var ti=[];ti.push([f[0]+Qe[0]*$e,f[1]+Qe[1]*$e]),ti.push([Ke[0]+Qe[0]*$e,Ke[1]+Qe[1]*$e]),e.push(ti);break;case o.GeometricEffectControlMeasureLineRule.CircleWithArc:var ei=this._cp2(u,3,0),ii=this._cp3(u,ei,.5,-1),ri=void 0,ni=void 0;if(c>=4)ri=u[3],ni=this._crossProduct(this._sub(ri,ei),this._sub(ii,ei))>0;else{ri=ei,ni=this._crossProduct(this._sub(ri,f),this._sub(ii,f))>0;var si=24*this._geomUnitsPerPoint,ai=this._sub(ri,f);this._normalize(ai,si);var oi=Math.sqrt(2)/2;this._rotateDirect(ai,oi,ni?oi:-oi),ei=this._add(f,ai)}for(var li=this._sub(ei,f),hi=Math.cos(Math.PI/18),ui=Math.sin(Math.PI/18),ci=[ei],fi=1;fi<=36;fi++)this._rotateDirect(li,hi,ui),ci.push(this._add(f,li));this._add90DegArc(ci,ei,ri,ii,ni),(0,a.setId)(ci[ci.length-8],1),e.push(ci);break;case o.GeometricEffectControlMeasureLineRule.DoubleJog:var vi=void 0,_i=void 0,yi=this._cp2(u,-3,1);if(vi=c>=3?u[2]:this._add(f,this._sub(f,yi)),c>=4)_i=u[3];else{var pi=f;f=yi,_i=vi;var di=this._dist(f,pi),mi=this._dist(_i,pi),gi=30*this._geomUnitsPerPoint;.5*di<gi&&(gi=.5*di),.5*mi<gi&&(gi=.5*mi),yi=this._mix(f,gi/di,pi,(di-gi)/di),vi=this._mix(_i,gi/mi,pi,(mi-gi)/mi)}var xi=this._mid(f,yi),Pi=this._mid(_i,vi),Ci=this._dist(f,yi),ki=this._dist(vi,_i),Mi=Math.min(Ci,ki)/8;Mi=Math.min(Mi,24*this._geomUnitsPerPoint);var bi=Math.cos(Math.PI/4),Si=this._sub(f,yi);this._normalize(Si,Mi),this._crossProduct(Si,this._sub(_i,yi))>0?this._rotateDirect(Si,bi,-bi):this._rotateDirect(Si,bi,bi);var wi=[];wi.push(yi),wi.push(this._add(xi,Si)),wi.push(this._sub(xi,Si)),wi.push(f),e.push(wi),Si=this._sub(_i,vi),this._normalize(Si,Mi),this._crossProduct(Si,this._sub(f,vi))<0?this._rotateDirect(Si,bi,bi):this._rotateDirect(Si,bi,-bi),(wi=[]).push(vi),wi.push(this._add(Pi,Si)),wi.push(this._sub(Pi,Si)),wi.push(_i),e.push(wi);break;case o.GeometricEffectControlMeasureLineRule.PerpendicularOffset:var Li=this._cp2(u,-4,1),Ti=this._cp3(u,Li,.882353,-1.94),Ei=this._sub(Ti,Li);this._crossProduct(Ei,this._sub(f,Li))>0?this._rightPerpendicular(Ei):this._leftPerpendicular(Ei);var Ii=[Ei[0]/8,Ei[1]/8],Ai=this._sub(this._mid(Li,Ti),Ii);e.push([Ai,f]);break;case o.GeometricEffectControlMeasureLineRule.LineExcludingLastSegment:for(var Gi=this._arrowPath(u),Ri=[],zi=Gi.length-2;zi--;)Ri.push(Gi[zi]);e.push(Ri);break;case o.GeometricEffectControlMeasureLineRule.MultivertexArrow:var Fi=this._arrowPath(u),Di=[];this._addArrow(Di,Fi,!1),e.push(Di);break;case o.GeometricEffectControlMeasureLineRule.CrossedArrow:var Hi=this._arrowPath(u),Oi=[];this._addArrow(Oi,Hi,!0),e.push(Oi);break;case o.GeometricEffectControlMeasureLineRule.ChevronArrow:var Vi=n.slicedToArray(this._arrowLastSeg(u),2),Xi=Vi[0],Bi=Vi[1],Wi=10*this._geomUnitsPerPoint,Ni=this._sub(f,Xi);this._normalize(Ni);var Yi=this._crossProduct(Ni,this._sub(Bi,Xi)),Ui=this._leftPerp(Ni),qi=[Bi[0]-Ui[0]*Yi*2,Bi[1]-Ui[1]*Yi*2],Ji=[];Ji.push([Bi[0]+Ni[0]*Wi,Bi[1]+Ni[1]*Wi]),Ji.push(f),Ji.push([qi[0]+Ni[0]*Wi,qi[1]+Ni[1]*Wi]),e.push(Ji);break;case o.GeometricEffectControlMeasureLineRule.ChevronArrowOffset:var ji=n.slicedToArray(this._arrowLastSeg(u),2),Ki=ji[0],Zi=ji[1],Qi=this._sub(f,Ki);this._normalize(Qi);var $i=this._crossProduct(Qi,this._sub(Zi,Ki));this._leftPerpendicular(Qi);var tr=[Zi[0]-Qi[0]*$i,Zi[1]-Qi[1]*$i],er=[];er.push([tr[0]+Qi[0]*$i*.5,tr[1]+Qi[1]*$i*.5]),er.push(this._mid(tr,f)),er.push([tr[0]-Qi[0]*$i*.5,tr[1]-Qi[1]*$i*.5]),e.push(er);break;case o.GeometricEffectControlMeasureLineRule.PartialFirstSegment:var ir=n.slicedToArray(this._arrowLastSeg(u),2),rr=ir[0],nr=ir[1],sr=this._sub(f,rr);this._normalize(sr);var ar=this._crossProduct(sr,this._sub(nr,rr));this._leftPerpendicular(sr);var or=[nr[0]-sr[0]*ar,nr[1]-sr[1]*ar];e.push([rr,or]);break;case o.GeometricEffectControlMeasureLineRule.Arch:var lr=this._cp2(u,0,-1),hr=this._cp3(u,lr,.5,1),ur=this._sub(f,lr),cr=this._mix(hr,1,ur,.55),fr=this._mix(hr,1,ur,-.55),vr=[f];this._addBezier2(vr,f,cr,hr,4),this._addBezier2(vr,hr,fr,lr,4),e.push(vr);break;case o.GeometricEffectControlMeasureLineRule.CurvedParallelTicks:var _r=this._cp2(u,-4,1),yr=this._cp3(u,_r,.882353,-1.94),pr=this._sub(yr,_r);this._crossProduct(pr,this._sub(f,_r))>0?this._rightPerpendicular(pr):this._leftPerpendicular(pr);var dr=[pr[0]/8,pr[1]/8],mr=this._sub(this._mid(_r,yr),dr),gr=this._sub(this._mix(_r,.75,yr,.25),dr),xr=this._sub(this._mix(_r,.25,yr,.75),dr),Pr=[_r];this._addBezier2(Pr,_r,gr,mr,3),this._addBezier2(Pr,mr,xr,yr,3),e.push(Pr);for(var Cr=0;Cr<8;Cr++){var kr=Pr[2*Cr+1],Mr=[this._clone(kr)];Mr.push(this._add(kr,[pr[0]/4,pr[1]/4])),e.push(Mr)}break;case o.GeometricEffectControlMeasureLineRule.Arc90Degrees:var br=this._cp2(u,0,-1),Sr=this._cp3(u,br,.5,1),wr=[br];this._add90DegArc(wr,br,f,Sr),e.push(wr);break;case o.GeometricEffectControlMeasureLineRule.FullGeometry:default:e.push(u)}}}}catch(t){r=!0,s=t}finally{try{i||null==h.return||h.return()}finally{if(r)throw s}}return e}}]),t}()})),i.register("8Ktmp",(function(e,r){t(e.exports,"EffectCut",(function(){return o}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!0,!0))._curveHelper=new(0,a.CurveHelper),o._beginCut=(void 0!==r.beginCut?r.beginCut:1)*s,o._endCut=(void 0!==r.endCut?r.endCut:1)*s,o._middleCut=(void 0!==r.middleCut?r.middleCut:0)*s,o._invert=void 0!==r.invert&&r.invert,o._beginCut<0&&(o._beginCut=0),o._endCut<0&&(o._endCut=0),o._middleCut<0&&(o._middleCut=0),n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,r=this._middleCut,n=this._curveHelper.calculatePathLength(t),s=[];if(this._invert)if(0===e&&0===i&&0===r);else if(e+i+r>=n)s.push(t);else{var a=this._curveHelper.getSubCurve(t,0,e);a&&s.push(a),(a=this._curveHelper.getSubCurve(t,.5*(n-r),.5*(n+r)))&&s.push(a),(a=this._curveHelper.getSubCurve(t,n-i,i))&&s.push(a)}else if(0===e&&0===i&&0===r)s.push(t);else if(e+i+r>=n);else if(0===r){var o=this._curveHelper.getSubCurve(t,e,n-i);o&&s.push(o)}else{var l=this._curveHelper.getSubCurve(t,e,.5*(n-r));l&&s.push(l),(l=this._curveHelper.getSubCurve(t,.5*(n+r),n-i))&&s.push(l)}return 0===s.length?null:{paths:s}}}]),i}(s.PathGeometryCursor)})),i.register("6zsTE",(function(e,r){t(e.exports,"EffectDashes",(function(){return h}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=i("6LoaD"),l=i("hLiwC"),h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var a,o,h;return n.classCallCheck(this,i),(a=e.call(this,t,!0,!0))._walker=new(0,l.GeometryWalker),a._walker.updateTolerance(s),a._endings=r.lineDashEnding,a._customDashPos=-(null!=(o=r.offsetAlongLine)?o:0)*s,a._offsetAtEnd=(null!=(h=r.customEndingOffset)?h:0)*s,a._pattern=new(0,l.DashPattern),a._pattern.init(r.dashTemplate,!0),a._pattern.scale(s),n.possibleConstructorReturn(a)}return n.createClass(i,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case o.LineDashEnding.HalfPattern:case o.LineDashEnding.HalfGap:default:this._pattern.extPtGap=0;break;case o.LineDashEnding.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case o.LineDashEnding.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case o.LineDashEnding.NoConstraint:this.isClosed||(e=!1);break;case o.LineDashEnding.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var r;if(this.iteratePath)r=this._pattern.nextValue();else{var n;switch(this._endings){case o.LineDashEnding.HalfPattern:default:n=.5*this._pattern.firstValue();break;case o.LineDashEnding.HalfGap:n=.5*-this._pattern.lastValue();break;case o.LineDashEnding.FullGap:n=-this._pattern.lastValue();break;case o.LineDashEnding.FullPattern:n=0;break;case o.LineDashEnding.NoConstraint:case o.LineDashEnding.Custom:n=-this._customDashPos}var s=n/this._pattern.length();n=(s-=Math.floor(s))*this._pattern.length(),this._pattern.reset(),r=this._pattern.nextValue();for(var l=!1;n>=r;)n-=r,r=this._pattern.nextValue(),l=!l;r-=n,l?(this._walker.nextPosition(r),r=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(r),r=this._pattern.nextValue(),this._walker.nextPosition(r),r=this._pattern.nextValue())}var h=this._walker.nextCurve(r);return h?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),a.PathHelper.mergePath(h,this._firstCurve),this._firstCurve=null)):(r=this._pattern.nextValue(),!this._walker.nextPosition(r)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(h=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,h=this._firstCurve,this._firstCurve=null),{paths:[h]}}}]),i}(s.PathGeometryCursor)})),i.register("hLiwC",(function(e,r){t(e.exports,"DashPattern",(function(){return u})),t(e.exports,"EndType",(function(){return n})),t(e.exports,"GeometryWalker",(function(){return f}));var n,s,a=i("8TSCy"),o=i("eA5AD"),l=i("4e4Wb"),h=1e-7,u=function(){"use strict";function t(){a.classCallCheck(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return a.createClass(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var r=0;r<t.length;r++){var n=Math.abs(t[r]);i&&n<h&&(n=h),this._values.push(n),this._length+=n}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}();(s=n||(n={}))[s.FAIL=0]="FAIL",s[s.END=1]="END",s[s.CONTINUE=2]="CONTINUE";var c=function(){"use strict";function t(){a.classCallCheck(this,t),this.reset()}return a.createClass(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),f=function(t){"use strict";a.inherits(i,t);var e=a.createSuper(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.classCallCheck(this,i),(t=e.call(this,r,n))._tolerance=l.PIXEL_TOLERANCE,t._currentPosition=new c,a.possibleConstructorReturn(t)}return a.createClass(i,[{key:"updateTolerance",value:function(t){this._tolerance=l.PIXEL_TOLERANCE*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this._setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.FAIL,i=new c;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=a.slicedToArray(this._getAngle(this._currentPosition),2),i=e[0],r=e[1];t.ca=i,t.sa=r}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.FAIL,r=new c;if(!this._nextPosition(t,r,null,i))return!1;r.copyTo(this._currentPosition),e.pt=this._getPoint(r);var s=a.slicedToArray(this._getAngle(r),2),o=s[0],l=s[1];return e.ca=o,e.sa=l,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],i=new c;return this._nextPosition(t,i,e,n.END)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,i,r){if(this._currentPosition.isPathEnd)return!1;var s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===s){var a=this._path[e.segment];i.push([a[0],a[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,s));var o=this._path[e.segment+1];i.push([o[0],o[1]])}if(s=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this._nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return r!==n.FAIL&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,r===n.END?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===s){var l=this._path[e.segment];i.push([l[0],l[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,s));var h=e.abscissa/e.segmentLength;if(1===h){var u=this._path[e.segment+1];i.push([u[0],u[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,h))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"_setPosAtNextPart",value:function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this._nextSegment()),this._partSegCount++,1===(0,o.getId)(this._path[this._getEndPointIndex()])){this._partIsLast=!this._hasNextSegment();break}for(var t=this._partSegCount;t;)this._previousSegment(),--t;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this._getStartPointIndex();this._ctrlPtBegin=1===(0,o.getId)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===(0,o.getId)(this._path[i]),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,s=Math.round((this._partLength-(r+n))/this._patternLength);s<=0&&(s=r+n>0?0:1),this._partLengthRatio=this._partLength/(r+n+s*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"_hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"_previousSegment",value:function(){return--this._seg}},{key:"_nextSegment",value:function(){return++this._seg}},{key:"_getStartPointIndex",value:function(){return this._seg}},{key:"_getEndPointIndex",value:function(){return this._seg+1}}]),i}(l.CurveHelper)})),i.register("9G7yw",(function(e,r){t(e.exports,"EffectDonut",(function(){return l}));var n=i("8TSCy"),s=i("79LpT"),a=i("4e4Wb"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r){switch(n.classCallCheck(this,t),this._inputGeometries=e,this._curveHelper=new(0,a.CurveHelper),this._width=(void 0!==i.width?i.width:2)*r,i.method){case o.GeometricEffectDonutMethod.Mitered:default:this._method=o.GeometricEffectOffsetMethod.Mitered;break;case o.GeometricEffectDonutMethod.Bevelled:this._method=o.GeometricEffectOffsetMethod.Bevelled;break;case o.GeometricEffectDonutMethod.Rounded:case o.GeometricEffectDonutMethod.TrueBuffer:this._method=o.GeometricEffectOffsetMethod.Rounded;break;case o.GeometricEffectDonutMethod.Square:this._method=o.GeometricEffectOffsetMethod.Square}this._option=i.option,this._offsetFlattenError=a.PIXEL_TOLERANCE*r}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,s.isExtent)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if((0,s.isPolygon)(t)&&this._width>0){var i=[],r=!0,n=!1,a=void 0;try{for(var o,l=t.rings[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var h=o.value,u=this._curveHelper.calculatePathLength(h),c=this._curveHelper.offset(h,this._width,this._method,4,this._offsetFlattenError);c&&(u<0&&c.reverse(),i.push(c))}}catch(t){n=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}}]),t}()})),i.register("kYKRB",(function(e,r){t(e.exports,"EffectJog",(function(){return o}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!1,!0))._curveHelper=new(0,a.CurveHelper),o._length=(void 0!==r.length?r.length:20)*s,o._angle=void 0!==r.angle?r.angle:225,o._position=void 0!==r.position?r.position:50,o._length<0&&(o._length=-o._length),o._position<20&&(o._position=20),o._position>80&&(o._position=80),o._mirror=!1,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],r=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(r);var n=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],s=Math.cos((90-this._angle)/180*Math.PI),a=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(a=-a),this._mirror=!this._mirror,{paths:[[e,[n[0]-this._length/2*s,n[1]-this._length/2*a],[n[0]+this._length/2*s,n[1]+this._length/2*a],i]]}}}]),i}(s.PathGeometryCursor)})),i.register("3eDB4",(function(e,r){t(e.exports,"EffectMove",(function(){return o}));var n=i("8TSCy"),s=i("flPLJ"),a=i("79LpT"),o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?-i.offsetY*r:0}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,a.isExtent)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if((0,a.isPolygon)(t)){var e=(0,s.clone)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if((0,a.isPolyline)(t)){var i=(0,s.clone)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if((0,a.isMultipoint)(t)){var r=(0,s.clone)(t);return this._movePath(r.points,this._offsetX,this._offsetY),r}if((0,a.isPoint)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,i){var r=!0,n=!1,s=void 0;if(t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;this._movePath(l,e,i)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}},{key:"_movePath",value:function(t,e,i){var r=!0,n=!1,s=void 0;if(t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;l[0]+=e,l[1]+=i}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}}]),t}()})),i.register("1cjep",(function(e,r){t(e.exports,"EffectOffset",(function(){return l}));var n=i("8TSCy"),s=i("79LpT"),a=i("4e4Wb"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r){var s;n.classCallCheck(this,t),this._inputGeometries=e,this._curveHelper=new(0,a.CurveHelper),this._offset=(null!=(s=i.offset)?s:1)*r,this._method=i.method,this._option=i.option,this._offsetFlattenError=a.PIXEL_TOLERANCE*r}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if((0,s.isExtent)(t)){if(this._method===o.GeometricEffectOffsetMethod.Rounded&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if((0,s.isPolygon)(t)){var r=[],n=!0,a=!1,l=void 0;try{for(var h,u=t.rings[Symbol.iterator]();!(n=(h=u.next()).done);n=!0){var c=h.value,f=this._curveHelper.offset(c,-this._offset,this._method,4,this._offsetFlattenError);f&&r.push(f)}}catch(t){a=!0,l=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw l}}if(r.length)return{rings:r}}if((0,s.isPolyline)(t)){var v=[],_=!0,y=!1,p=void 0;try{for(var d,m=t.paths[Symbol.iterator]();!(_=(d=m.next()).done);_=!0){var g=d.value,x=this._curveHelper.offset(g,-this._offset,this._method,4,this._offsetFlattenError);x&&v.push(x)}}catch(t){y=!0,p=t}finally{try{_||null==m.return||m.return()}finally{if(y)throw p}}if(v.length)return{paths:v}}t=this._inputGeometries.next()}return null}}]),t}()})),i.register("6CGvS",(function(e,r){t(e.exports,"EffectReverse",(function(){return l}));var n=i("8TSCy"),s=i("flPLJ"),a=i("79LpT"),o=i("eA5AD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if((0,a.isPolyline)(t)){var e=(0,s.clone)(t);return(0,o.reverseMultipath)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}()})),i.register("4fodX",(function(e,r){t(e.exports,"EffectRotate",(function(){return h}));var n=i("8TSCy"),s=i("flPLJ"),a=i("8TwEW"),o=i("5Hy9K"),l=i("79LpT"),h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?i.angle*Math.PI/180:0}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=(0,a.create)();(0,o.getBoundsXY)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if((0,l.isExtent)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(n.rings,i,r),n}if((0,l.isPolygon)(t)){var h=(0,s.clone)(t);return this._rotateMultipath(h.rings,i,r),h}if((0,l.isPolyline)(t)){var u=(0,s.clone)(t);return this._rotateMultipath(u.paths,i,r),u}if((0,l.isMultipoint)(t)){var c=(0,s.clone)(t);return this._rotatePath(c.points,i,r),c}if((0,l.isPoint)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,i){var r=!0,n=!1,s=void 0;if(t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;this._rotatePath(l,e,i)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}},{key:"_rotatePath",value:function(t,e,i){if(t){var r=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle),s=!0,a=!1,o=void 0;try{for(var l,h=t[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var u=l.value,c=u[0]-e,f=u[1]-i;u[0]=e+c*r-f*n,u[1]=i+c*n+f*r}}catch(t){a=!0,o=t}finally{try{s||null==h.return||h.return()}finally{if(a)throw o}}}}}]),t}()})),i.register("h9EBI",(function(e,r){t(e.exports,"EffectScale",(function(){return h}));var n=i("8TSCy"),s=i("flPLJ"),a=i("8TwEW"),o=i("5Hy9K"),l=i("79LpT"),h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=(0,a.create)();(0,o.getBoundsXY)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if((0,l.isExtent)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(n.rings,i,r),n}if((0,l.isPolygon)(t)){var h=(0,s.clone)(t);return this._scaleMultipath(h.rings,i,r),h}if((0,l.isPolyline)(t)){var u=(0,s.clone)(t);return this._scaleMultipath(u.paths,i,r),u}if((0,l.isMultipoint)(t)){var c=(0,s.clone)(t);return this._scalePath(c.points,i,r),c}if((0,l.isPoint)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,i){var r=!0,n=!1,s=void 0;if(t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;this._scalePath(l,e,i)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}},{key:"_scalePath",value:function(t,e,i){var r=!0,n=!1,s=void 0;if(t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value,h=(l[0]-e)*this._xFactor,u=(l[1]-i)*this._yFactor;l[0]=e+h,l[1]=i+u}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}}]),t}()})),i.register("6hVhu",(function(e,r){t(e.exports,"EffectWave",(function(){return h}));var n=i("8TSCy"),s=i("79LpT"),a=i("4e4Wb"),o=i("6LoaD"),l=i("hLiwC"),h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*r,this._period=(void 0!==i.period?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new(0,l.DashPattern),this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new(0,l.GeometryWalker),this._walker.updateTolerance(r)}return n.createClass(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if((0,s.isPolyline)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if((0,s.isPolygon)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e=[],i=!0,r=!1,n=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(this._walker.init(l,this._pattern))switch(this._style){case o.GeometricEffectWaveform.Sinus:default:e.push(this._constructCurve(l,!1));break;case o.GeometricEffectWaveform.Square:e.push(this._constructSquare(l));break;case o.GeometricEffectWaveform.Triangle:e.push(this._constructTriangle(l));break;case o.GeometricEffectWaveform.Random:e.push(this._constructCurve(l,!0))}else e.push(l)}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"_constructCurve",value:function(t,e){var i=new(0,a.PathHelper),r=this._walker.calculatePathLength(t),n=Math.round(r/this._period);0===n&&(n=1);var s=16*n+1,o=r/n,l=this._period/16,h=1/s,u=2*Math.PI*r/o,c=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),v=2*Math.PI*Math.random(),_=.75-Math.random()/2,y=.75-Math.random()/2,p={};this._walker.curPointAndAngle(p),i.startPath(p.pt);for(var d=0;;){if(!this._walker.nextPointAndAngle(l,p)){i.lineTo(t[t.length-1]);break}var m=d,g=void 0;if(d+=h,e){var x=this._height/2*(1+.3*Math.sin(_*u*m+c));g=x*Math.sin(u*m+f),g+=x*Math.sin(y*u*m+v),g/=2}else g=.5*this._height*Math.sin(.5*u*m);i.lineTo([p.pt[0]-g*p.sa,p.pt[1]+g*p.ca])}return i.path()}},{key:"_constructSquare",value:function(t){var e=new(0,a.PathHelper);this._walker.calculatePathLength(t);this._period;for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n={};this._walker.curPointAndAngle(n);var s={};if(this._walker.nextPointAndAngle(this._period,s)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(i?(e.startPath(n.pt),i=!1):e.lineTo(n.pt),e.lineTo([n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca]),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),r=!0)}}if(!r){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new(0,a.PathHelper);this._walker.calculatePathLength(t);this._period;for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n={};this._walker.curPointAndAngle(n);var s={};if(this._walker.nextPointAndAngle(this._period/2,s)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(i?(e.startPath(n.pt),i=!1):e.lineTo(n.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca])),r=!0)}}if(!r){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}()})),i.register("2SPcl",(function(e,r){t(e.exports,"PlacementAlongLineSameSize",(function(){return l}));var n=i("8TSCy"),s=i("eA5AD"),a=i("6LoaD"),o=i("hLiwC"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var a,l;return n.classCallCheck(this,i),(a=e.call(this,t,!0,!0))._geometryWalker=new(0,o.GeometryWalker),a._geometryWalker.updateTolerance(s),a._angleToLine=null==(l=r.angleToLine)||l,a._offset=(r.offset?r.offset:0)*s,a._originalEndings=r.endings,a._offsetAtEnd=(r.customEndingOffset?r.customEndingOffset:0)*s,a._position=-(r.offsetAlongLine?r.offsetAlongLine:0)*s,a._pattern=new(0,o.DashPattern),a._pattern.init(r.placementTemplate,!1),a._pattern.scale(s),a._endings=a._originalEndings,n.possibleConstructorReturn(a)}return n.createClass(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===a.PlacementEndings.WithFullGap&&this.isClosed?this._endings=a.PlacementEndings.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,r=!0;switch(this._endings){case a.PlacementEndings.NoConstraint:i=-this._position,i=this._adjustPosition(i),r=!1;break;case a.PlacementEndings.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case a.PlacementEndings.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case a.PlacementEndings.WithMarkers:i=0;break;case a.PlacementEndings.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,r))return null;this._pattern.reset();for(var n=0;i>n;)i-=n,n=this._pattern.nextValue();e=n-=i,this.iteratePath=!0}var s={};return this._geometryWalker.nextPointAndAngle(e,s)?this._endings===a.PlacementEndings.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===a.PlacementEndings.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca),this._angleToLine&&this.internalPlacement.setRotateCS(s.ca,s.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(s.PathTransformationCursor)})),i.register("ipIM9",(function(e,r){t(e.exports,"PlacementAtExtremities",(function(){return l}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!1,!0))._curveHelper=new(0,a.CurveHelper),o._angleToLine=void 0===r.angleToLine||r.angleToLine,o._offset=void 0!==r.offset?r.offset*s:0,o._type=r.extremityPlacement,o._position=void 0!==r.offsetAlongLine?r.offsetAlongLine*s:0,o._beginProcessed=!1,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){var e;switch(this._type){case o.ExtremityPlacement.Both:default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case o.ExtremityPlacement.JustBegin:e=this._atExtremities(t,this._position,!0);break;case o.ExtremityPlacement.JustEnd:e=this._atExtremities(t,this._position,!1);case o.ExtremityPlacement.None:}return e}},{key:"_atExtremities",value:function(t,e,i){var r=t.length;if(r<2)return null;for(var a,o=i?1:r-2,l=i?r:-1,h=i?1:-1,u=0,c=i?t[0]:t[r-1],f=o;f!==l;f+=h){a=c,c=t[f];var v=this._curveHelper.calculateLength(a,c);if(u+v>e){var _=(e-u)/v,y=n.slicedToArray(this._curveHelper.getAngleCS(a,c,_),2),p=y[0],d=y[1],m=(0,s.getCoord2D)(a,c,_);return this.internalPlacement.setTranslate(m[0]-this._offset*d,m[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(-p,-d),this.internalPlacement}u+=v}return null}}]),i}(s.PathTransformationCursor)})),i.register("bjVBF",(function(e,r){t(e.exports,"PlacementAtRatioPositions",(function(){return o}));var n=i("8TSCy"),s=i("eA5AD"),a=i("hLiwC"),o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!0,!0))._walker=new(0,a.GeometryWalker),o._walker.updateTolerance(s),o._angleToLine=void 0===r.angleToLine||r.angleToLine,o._offset=void 0!==r.offset?r.offset*s:0,o._beginGap=void 0!==r.beginPosition?r.beginPosition*s:0,o._endGap=void 0!==r.endPosition?r.endPosition*s:0,o._flipFirst=void 0===r.flipFirst||r.flipFirst,o._pattern=new(0,a.DashPattern),o._pattern.init(r.positionArray,!1,!1),o._subPathLen=0,o._posCount=o._pattern.size(),o._isFirst=!0,o._prevPos=0,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+i;e=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var n=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+n;e=s-this._prevPos,this._prevPos=s,this.iteratePath=!0}var o={};if(!this._walker.nextPointAndAngle(e,o,a.EndType.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(o.pt[0]-this._offset*o.sa,o.pt[1]+this._offset*o.ca);var l,h,u=this._isFirst&&this._flipFirst;return this._angleToLine?(l=o.ca,h=o.sa):(l=1,h=0),u&&(l=-l,h=-h),this.internalPlacement.setRotateCS(l,h),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(s.PathTransformationCursor)})),i.register("e2wNV",(function(e,r){t(e.exports,"PlacementInsidePolygon",(function(){return o}));var n=i("8TSCy"),s=i("jghp4"),a=i("6LoaD");var o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(){"use strict";function t(e,i,r,o){if(n.classCallCheck(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==i.stepX?Math.abs(i.stepX):16)*r,this._stepY=(void 0!==i.stepY?Math.abs(i.stepY):16)*r,0!==this._stepX&&0!==this._stepY&&e&&void 0!==e.rings&&e.rings){if(this._gridType=void 0!==i.gridType?i.gridType:a.PlacementGridType.Fixed,this._gridType===a.PlacementGridType.Random)this._randomness=void 0!==i.randomness?i.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==i.gridAngle?i.gridAngle:0,this._shiftOddRows=void 0!==i.shiftOddRows&&i.shiftOddRows,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?i.offsetY*r:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new(0,s.Placement),this._calculateMinMax(e),this._geometry=e}}return n.createClass(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,i,r,n,s,a,o,l;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,s=a=Number.MAX_VALUE,o=l=-Number.MAX_VALUE;var h=!0,u=!1,c=void 0;try{for(var f,v=t.rings[Symbol.iterator]();!(h=(f=v.next()).done);h=!0)for(var _=f.value,y=_?_.length:0,p=0;p<y;++p)e=_[p][0]-this._graphicOriginX-this._offsetX,i=_[p][1]-this._graphicOriginY-this._offsetY,r=this._cosAngle*e-this._sinAngle*i,n=this._sinAngle*e+this._cosAngle*i,s=Math.min(s,r),o=Math.max(o,r),a=Math.min(a,n),l=Math.max(l,n)}catch(t){u=!0,c=t}finally{try{h||null==v.return||v.return()}finally{if(u)throw c}}s+=this._graphicOriginX,o+=this._graphicOriginX,a+=this._graphicOriginY,l+=this._graphicOriginY,this._xMin=Math.round(s/this._stepX),this._xMax=Math.round(o/this._stepX),this._yMin=Math.round(a/this._stepY),this._yMax=Math.round(l/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,r=void 0;return this._currentX++,this._gridType===a.PlacementGridType.Random?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,r=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,r=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,r),this._internalPlacement}}}]),t}()})),i.register("6lVwS",(function(e,r){t(e.exports,"PlacementOnLine",(function(){return l}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=i("6LoaD"),l=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new h(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var h=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!0,!0))._curveHelper=new(0,a.CurveHelper),o._angleToLine=void 0===r.angleToLine||r.angleToLine,o._offset=void 0!==r.offset?r.offset*s:0,o._relativeTo=r.relativeTo,o._position=void 0!==r.startPointOffset?r.startPointOffset*s:0,o._epsilon=.001*s,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){var e=this._position;if(this._relativeTo===o.PlacementOnLineRelativeTo.SegmentMidpoint){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var r=t[i-1],a=t[i],l=this._curveHelper.calculateLength(r,a);if(!(l<this._epsilon)){var h=.5+this._position/l,u=n.slicedToArray(this._curveHelper.getAngleCS(r,a,h),2),c=u[0],f=u[1],v=(0,s.getCoord2D)(r,a,h);return this.internalPlacement.setTranslate(v[0]-this._offset*f,v[1]+this._offset*c),this._angleToLine&&this.internalPlacement.setRotateCS(c,f),this.internalPlacement}}return this.iteratePath=!1,null}this._relativeTo===o.PlacementOnLineRelativeTo.LineEnd&&(0,s.reversePath)(t);var _=this.onLine(t,e);return this._relativeTo===o.PlacementOnLineRelativeTo.LineEnd&&(0,s.reversePath)(t),_}},{key:"onLine",value:function(t,e){var i,r=!1;switch(this._relativeTo){case o.PlacementOnLineRelativeTo.LineMiddle:default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case o.PlacementOnLineRelativeTo.LineBeginning:i=e;break;case o.PlacementOnLineRelativeTo.LineEnd:i=e,r=!0}for(var a,l=t.length,h=0,u=t[0],c=1;c<l;++c){a=u,u=t[c];var f=this._curveHelper.calculateLength(a,u);if(h+f>i){var v=(i-h)/f,_=n.slicedToArray(this._curveHelper.getAngleCS(a,u,v),2),y=_[0],p=_[1],d=(0,s.getCoord2D)(a,u,v),m=r?-this._offset:this._offset;return this.internalPlacement.setTranslate(d[0]-m*p,d[1]+m*y),this._angleToLine&&(r?this.internalPlacement.setRotateCS(-y,-p):this.internalPlacement.setRotateCS(y,p)),this.internalPlacement}h+=f}return null}}]),i}(s.PathTransformationCursor)})),i.register("d37j9",(function(e,r){t(e.exports,"PlacementOnVertices",(function(){return o}));var n=i("8TSCy"),s=i("eA5AD"),a=i("4e4Wb"),o=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var l=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var o;return n.classCallCheck(this,i),(o=e.call(this,t,!0,!0))._curveHelper=new(0,a.CurveHelper),o._angleToLine=void 0===r.angleToLine||r.angleToLine,o._offset=void 0!==r.offset?r.offset*s:0,o._endPoints=void 0===r.placeOnEndPoints||r.placeOnEndPoints,o._controlPoints=void 0===r.placeOnControlPoints||r.placeOnControlPoints,o._regularVertices=void 0===r.placeOnRegularVertices||r.placeOnRegularVertices,o._tags=[],o._tagIterator=0,n.possibleConstructorReturn(o)}return n.createClass(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],r=e[1];if(0!==this._offset){var n=Math.cos(e[2]),s=Math.sin(e[2]);i-=this._offset*s,r+=this._offset*n}return this.internalPlacement.setTranslate(i,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,i,r=(0,s.isClosedPath)(t),n=t.length-1,a=0,o=0,l=0,u=0,c=0;a<n;){e=t[++a-1],i=t[a];var f=(0,s.getId)(e),v=(0,s.getId)(i);(this._angleToLine||0!==this._offset)&&(u=this._curveHelper.getAngle(e,i,0)),1===a?r?(o=u,l=f):(this._endPoints||this._controlPoints&&1===f)&&this._tags.push([e[0],e[1],u]):1===f?this._controlPoints&&this._tags.push([e[0],e[1],h(c,u)]):this._regularVertices&&this._tags.push([e[0],e[1],h(c,u)]),(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,i,1)),a===n&&(r?1===v||1===l?this._controlPoints&&this._tags.push([i[0],i[1],h(c,o)]):this._regularVertices&&this._tags.push([i[0],i[1],h(c,o)]):(this._endPoints||this._controlPoints&&1===v)&&this._tags.push([i[0],i[1],c]))}this._tagIterator=0}}]),i}(s.PathTransformationCursor);function h(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}})),i.register("ctUxU",(function(e,r){t(e.exports,"PlacementPolygonCenter",(function(){return h}));var n=i("8TSCy"),s=i("8TwEW"),a=i("5Hy9K"),o=i("jghp4"),l=i("6LoaD");var h=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"execute",value:function(t,e,i,r){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var u=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._geometry=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?i.offsetY*r:0,this._method=void 0!==i.method?i.method:l.PlacementPolygonCenterMethod.OnPolygon,this._internalPlacement=new(0,o.Placement)}return n.createClass(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&void 0!==t.rings?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){switch(this._method){case l.PlacementPolygonCenterMethod.OnPolygon:case l.PlacementPolygonCenterMethod.CenterOfMass:case l.PlacementPolygonCenterMethod.BoundingBoxCenter:}var e=(0,s.create)();return(0,a.getBoundsXY)(e,t),this._internalPlacement.setTranslate((e[2]+e[0])/2+this._offsetX,(e[3]+e[1])/2+this._offsetY),!0?this._internalPlacement:null}}]),t}()})),i.register("a7brS",(function(e,r){t(e.exports,"shapeGlyphs",(function(){return g}));var n=i("8TSCy"),s=i("b4Wmd"),a=i("cMCBC"),o=i("hRgCq"),l=i("0P8XU"),h=i("6S0qa"),u=i("8lbQw"),c=i("fl9Q8"),f=i("bu1o8"),v=Math.PI/180,_=function(){"use strict";function t(e,i,r,s){n.classCallCheck(this,t),this._rotationT=(0,a.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var o=r.rect,l=new Float32Array(8);e*=s,i*=s;var h=r.code?o.width*s:r.metrics.width,u=r.code?o.height*s:r.metrics.height;l[0]=e,l[1]=i,l[2]=e+h,l[3]=i,l[4]=e,l[5]=i+u,l[6]=e+h,l[7]=i+u,this._data=l,this._setTextureCoords(o),this._scale=s,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+h,i+u)}return n.createClass(t,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,(0,s.b)(this._rotationT,-t),this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(this._data),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){var t=this._mosaic.metrics,e=t.height,i=t.width*this._scale,r=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+i,n[3]=this.y,n[4]=this.x,n[5]=this.y+r,n[6]=this.x+i,n[7]=this.y+r;var o=(0,s.m)((0,a.c)(),this._rotationT,this._T);(0,a.t)(n,n,o);for(var l=1/0,h=1/0,u=0,c=0,v=0;v<4;v++){var _=n[2*v],y=n[2*v+1];l=Math.min(l,_),h=Math.min(h,y),u=Math.max(u,_),c=Math.max(c,y)}var p=u-l,d=c-h,m=l+p/2,g=h+d/2;this._bounds=new(0,f.default)(m,g,p,d)}return this._bounds}},{key:"setTransform",value:function(t){this._T=t,this._offsets=null}},{key:"_setOffsets",value:function(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var e=this._offsets,i=new Float32Array(8),r=(0,s.m)((0,a.c)(),this._rotationT,this._T);(0,a.t)(i,t,r),e.upperLeft=(0,u.i1616to32)(8*i[0],8*i[1]),e.upperRight=(0,u.i1616to32)(8*i[2],8*i[3]),e.lowerLeft=(0,u.i1616to32)(8*i[4],8*i[5]),e.lowerRight=(0,u.i1616to32)(8*i[6],8*i[7])}},{key:"_setTextureCoords",value:function(t){var e=t.x,i=t.y,r=t.width,n=t.height;this._texcoords={upperLeft:(0,u.i1616to32)(e,i),upperRight:(0,u.i1616to32)(e+r,i),lowerLeft:(0,u.i1616to32)(e,i+n),lowerRight:(0,u.i1616to32)(e+r,i+n)}}}]),t}(),y=function(){"use strict";function t(e,i,r){n.classCallCheck(this,t),this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=0!==r.angle,this._T=this._createGlyphTransform(this.bounds,r);var s=!0,a=!1,o=void 0;try{for(var l,h=e[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){l.value.setTransform(this._T)}}catch(t){a=!0,o=t}finally{try{s||null==h.return||h.return()}finally{if(a)throw o}}}return n.createClass(t,[{key:"setRotation",value:function(t){if(0!==t||0!==this._rotation){this._rotation=t;var e=this._T,i=(0,s.b)((0,a.c)(),t);(0,s.m)(e,i,e);var r=!0,n=!1,o=void 0;try{for(var l,h=this.glyphs[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){l.value.setTransform(this._T)}}catch(t){n=!0,o=t}finally{try{r||null==h.return||h.return()}finally{if(n)throw o}}}}},{key:"_decorate",value:function(t,e,i){if(i.decoration&&"none"!==i.decoration&&t.length){var r,n,s=i.scale,a="underline"===i.decoration?30:20,o=t[0].textureBinding,l=!0,h=!1,u=void 0;try{for(var f,v=e[Symbol.iterator]();!(l=(f=v.next()).done);l=!0){var y=f.value,p=y.startX*s,d=y.startY*s,m=(y.width+y.glyphWidthEnd)*s;t.push(new _(p,d+a*s,(r=m,n=o,{code:0,page:0,sdf:!0,rect:new(0,c.default)(0,0,11,8),textureBinding:n,metrics:{advance:0,height:4,width:r,left:0,top:0}}),1))}}catch(t){h=!0,u=t}finally{try{l||null==v.return||v.return()}finally{if(h)throw u}}}}},{key:"boundsT",get:function(){var t=this.bounds,e=(0,o.s)((0,l.c)(),t.x,t.y);if((0,o.t)(e,e,this._T),this._hasRotation){var i=Math.max(t.width,t.height);return new(0,f.default)(e[0],e[1],i,i)}return new(0,f.default)(e[0],e[1],t.width,t.height)}},{key:"_createBounds",value:function(t){var e=1/0,i=1/0,r=0,n=0,s=!0,a=!1,o=void 0;try{for(var l,h=t[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var u=l.value;e=Math.min(e,u.xTopLeft),i=Math.min(i,u.yTopLeft),r=Math.max(r,u.xTopLeft+u.width),n=Math.max(n,u.yBottomRight)}}catch(t){a=!0,o=t}finally{try{s||null==h.return||h.return()}finally{if(a)throw o}}var c=r-e,v=n-i;return new(0,f.default)(e+c/2,i+v/2,c,v)}},{key:"_createGlyphTransform",value:function(t,e){var i=v*e.angle,r=(0,a.c)(),n=(0,l.c)();return(0,s.t)(r,r,(0,o.s)(n,e.xOffset,-e.yOffset)),e.isCIM?(0,s.r)(r,r,i):((0,s.t)(r,r,(0,o.s)(n,t.x,t.y)),(0,s.r)(r,r,i),(0,s.t)(r,r,(0,o.s)(n,-t.x,-t.y))),r}}]),t}(),p=function t(e,i,r,s,a,o){"use strict";n.classCallCheck(this,t),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=s,this.yMin=a,this.yMax=o},d=function(t){return 10===t},m=function(t){return 32===t};function g(t,e,i){for(var r=i.scale,n=new Array,s=function(t,e,i){for(var r=new Array,n=1/i.scale,s=i.maxLineWidth*n,a=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1,h=a,u=0,c=0,f=h,v=f,_=0,y=1/0,g=0;h!==o;){var x=t[h],P=x.code,C=x.metrics,k=Math.abs(C.top);if(d(P)||m(P)||(y=Math.min(y,k),g=Math.max(g,k+C.height)),d(P))h!==a&&(r.push(new p(t,f,h-l,u,y,g)),y=1/0,g=0),u=0,f=h+l,v=h+l,c=0;else if(m(P))v=h+l,c=0,_=C.advance,u+=C.advance;else if(u>s){if(v!==f){var M=v-2*l;u-=_,r.push(new p(t,f,M,u-c,y,g)),y=1/0,g=0,f=v,u=c}else r.push(new p(t,f,h-l,u,y,g)),y=1/0,g=0,f=h,v=h,u=0;u+=C.advance,c+=C.advance}else u+=C.advance,c+=C.advance;h+=l}var b=new p(t,f,h-l,u,y,g);return b.start>=0&&b.end<t.length&&r.push(b),r}(t,e,i),a=function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].width;i=Math.max(n,i)}var s="underline"===e.decoration?4:0,a=t[0].yMin;return{x:0,y:a,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+s-a,width:i}}(s,i),o=i.vAlign,l=i.hAlign,u=o===h.VAlign.Baseline?1:0,c=u?0:o-1,f=(1-u)*-a.y+c*(a.height/2)+-26*(u?1:0),v=0;v<s.length;v++){var g=s[v],x=g.start,P=g.end,C=-1*(l+1)*(g.width/2)-3,k=v*i.lineHeight+f-3;s[v].startX=C,s[v].startY=k;for(var M=x;M<=P;M++){var b=t[M];if(!d(b.code)){var S=new _(C+b.metrics.left,k-b.metrics.top,b,r);C+=b.metrics.advance,n.push(S)}}}return new y(n,s,i)}})),i.register("bu1o8",(function(e,r){t(e.exports,"default",(function(){return a}));var n=i("8TSCy"),s=i("0P8XU"),a=function(){"use strict";function t(e,i,r,a){n.classCallCheck(this,t),this.center=(0,s.f)(e,i),this.centerT=(0,s.c)(),this.halfWidth=r/2,this.halfHeight=a/2,this.width=r,this.height=a}return n.createClass(t,[{key:"x",get:function(){return this.center[0]},set:function(t){this.center[0]=t}},{key:"y",get:function(){return this.center[1]},set:function(t){this.center[1]=t}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"serialize",value:function(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}},{key:"findCollisionDelta",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=Math.abs(t.centerT[0]-this.centerT[0]),r=Math.abs(t.centerT[1]-this.centerT[1]),n=(t.halfWidth+this.halfWidth+e)/i,s=(t.halfHeight+this.halfHeight+e)/r,a=Math.min(n,s);return Math.log2(a)}},{key:"extend",value:function(t){var e=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),r=Math.max(this.xmax,t.xmax)-e,n=Math.max(this.ymax,t.ymax)-i,s=e+r/2,a=i+n/2;this.width=r,this.height=n,this.halfWidth=r/2,this.halfHeight=n/2,this.x=s,this.y=a}}],[{key:"deserialize",value:function(e){return new t(e.readF32(),e.readF32(),e.readInt32(),e.readInt32())}}]),t}()})),i.register("fORtl",(function(e,r){t(e.exports,"SimpleGeometryCursor",(function(){return s}));var n=i("8TSCy"),s=(i("flPLJ"),function(){"use strict";function t(e){n.classCallCheck(this,t),this._geometry=e}return n.createClass(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())})),i.register("4FBKO",(function(e,r){t(e.exports,"symbolToCIM",(function(){return w})),t(e.exports,"CIMSymbolHelper",(function(){return G})),t(e.exports,"CIMSimbolInflatedSizeHelper",(function(){return A})),t(e.exports,"slsDashToTemplateArray",(function(){return N})),t(e.exports,"SymbolHelper",(function(){return R})),t(e.exports,"OverrideHelper",(function(){return z}));var n=i("8TSCy"),s=i("jgs9n"),a=i("6J0KG"),o=i("7Dw9j"),l=i("flPLJ"),h=i("jHOLN"),u=i("iVfa0"),c=i("7qybv"),f=i("iXlXu"),v=i("8TwEW"),_=i("5Hy9K"),y=i("jghp4"),p=i("eGRqB"),d=i("6LoaD"),m=i("1o7Kk"),g=i("7P6eh"),x=i("4WoSm"),P=i("a7brS"),C=Math.PI,k=C/2,M=96/72,b=Math.PI/180,S=h.default.getLogger("esri.symbols.cim.CIMSymbolHelper");function w(t){if(!t||!t.type)return null;var e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":e=G.fromSimpleMarker(t);break;case"picture-marker":e=G.fromPictureMarker(t);break;case"simple-line":e=G.fromSimpleLineSymbol(t);break;case"simple-fill":e=G.fromSimpleFillSymbol(t);break;case"picture-fill":e=G.fromPictureFillSymbol(t);break;case"text":e=G.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function L(t,e){switch(e.type){case"CIMSymbolReference":return L(t,e.symbol);case"CIMPointSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMLineSymbol":t.drawSymbol(e,{paths:[[[0,0],[0,1]]]});break;case"CIMPolygonSymbol":t.drawSymbol(e,{rings:[[[0,0],[0,1],[0,0]]]});break;case"CIMTextSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMVectorMarker":var i=new(0,y.Placement);t.drawMarker(e,i)}return t.envelope()}function T(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function E(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,m.getValue)(t.offsetX)),Math.abs((0,m.getValue)(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude)}}function I(t){if(!t)return 0;var e=0,i=!0,r=!1,n=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){e+=E(s.value)}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}return e}var A=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"getSymbolInflateSize",value:function(t,e,i,r,n){return t||(t=[0,0,0,0]),e?this._getInflateSize(t,e,i,r,n):t}},{key:"_vectorMarkerBounds",value:function(t,e,i,r){var n=!0,s=(0,v.create)(),a=!0,o=!1,l=void 0;if(e&&e.markerGraphics)try{for(var h,u=e.markerGraphics[Symbol.iterator]();!(a=(h=u.next()).done);a=!0){var c=h.value,f=[0,0,0,0];c.geometry&&((0,_.getBoundsXY)(s,c.geometry),f[0]=0,f[1]=0,f[2]=0,f[3]=0,this.getSymbolInflateSize(f,c.symbol,i,0,r),s[0]+=f[0],s[1]+=f[1],s[2]+=f[2],s[3]+=f[3],n?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],n=!1):(t[0]=Math.min(t[0],s[0]),t[1]=Math.min(t[1],s[1]),t[2]=Math.max(t[2],s[2]),t[3]=Math.max(t[3],s[3])))}}catch(t){o=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return t}},{key:"_getInflateSize",value:function(t,e,i,r,n){if(void 0!==e.symbolLayers){var s=this._getLayersInflateSize(t,e.symbolLayers,i,r,n),a=I(e.effects);return a>0&&(s[0]-=a,s[1]-=a,s[2]+=a,s[3]+=a),s}return this._getTextInflatedSize(t,e,n)}},{key:"_getLayersInflateSize",value:function(t,e,i,r,n){var s=!0;if(!e)return t;var a=!0,o=!1,l=void 0;try{for(var h,u=e[Symbol.iterator]();!(a=(h=u.next()).done);a=!0){var f=h.value;if(f){var _=[0,0,0,0];switch(f.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var y=f,p=y.width;y.capStyle===d.LineCapStyle.Square||y.joinStyle===d.LineJoinStyle.Miter?p/=1.4142135623730951:p/=2,_[0]=-p,_[1]=-p,_[2]=p,_[3]=p;break;case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":var x=f;if("CIMVectorMarker"===f.type){var P=f;if(_=this._vectorMarkerBounds(_,P,i,n),P.frame){var C=(P.frame.xmin+P.frame.xmax)/2,k=(P.frame.ymin+P.frame.ymax)/2;_[0]-=C,_[1]-=k,_[2]-=C,_[3]-=k;var M=P.size/(P.frame.ymax-P.frame.ymin);_[0]*=M,_[1]*=M,_[2]*=M,_[3]*=M}}else if("CIMPictureMarker"===f.type){var S=f,w=i.getResource(S.url),L=1;(0,c.isSome)(w)&&w.height&&(L=w.width/w.height);var E=x.size/2,A=x.size*L*S.scaleX/2;_=[-A,-E,A,E]}else{var G=x.size/2;_=[-G,-G,G,G]}if(x.anchorPoint){var R=void 0,z=void 0;"Absolute"===x.anchorPointUnits?(R=x.anchorPoint.x,z=x.anchorPoint.y):(R=x.anchorPoint.x*(_[2]-_[0]),z=x.anchorPoint.y*(_[3]-_[1])),_[0]-=R,_[1]-=z,_[2]-=R,_[3]-=z}var F=(0,m.getValue)(x.rotation);if(x.rotateClockwise&&(F=-F),r&&(F-=r),F){var D=b*F,H=Math.cos(D),O=Math.sin(D),V=(0,v.create)([g.C_INFINITY,g.C_INFINITY,-g.C_INFINITY,-g.C_INFINITY]);(0,v.expandPointInPlace)(V,[_[0]*H-_[1]*O,_[0]*O+_[1]*H]),(0,v.expandPointInPlace)(V,[_[0]*H-_[3]*O,_[0]*O+_[3]*H]),(0,v.expandPointInPlace)(V,[_[2]*H-_[1]*O,_[2]*O+_[1]*H]),(0,v.expandPointInPlace)(V,[_[2]*H-_[3]*O,_[2]*O+_[3]*H]),_=V}var X=(0,m.getValue)(x.offsetX),B=(0,m.getValue)(x.offsetY);if(r){var W=b*r,N=Math.cos(W),Y=Math.sin(W),U=X*Y+B*N;X=X*N-B*Y,B=U}_[0]+=X,_[1]+=B,_[2]+=X,_[3]+=B;var q=T(x.markerPlacement);q>0&&(_[0]-=q,_[1]-=q,_[2]+=q,_[3]+=q)}var J=I(f.effects);J>0&&(_[0]-=J,_[1]-=J,_[2]+=J,_[3]+=J),s?(t[0]=_[0],t[1]=_[1],t[2]=_[2],t[3]=_[3],s=!1):(t[0]=Math.min(t[0],_[0]),t[1]=Math.min(t[1],_[1]),t[2]=Math.max(t[2],_[2]),t[3]=Math.max(t[3],_[3]))}}}catch(t){o=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return t}},{key:"_getTextInflatedSize",value:function(t,e,i){var r,n,s=null!=(r=e.height)?r:10;if(t[0]=-s/2,t[1]=-s/2,t[2]=s/2,t[3]=s/2,!i)return t;var o=i.get(e);if(!o)return t;var l=o.text,h=o.mosaicItem;if(!h||0===h.glyphMosaicItems.length)return t;var u=(0,p.lineGapType2LineHeight)(e.lineGapType,null!=(n=e.lineGap)?n:0,s),c=(0,a.bidiText)(l)[1],f=h.glyphMosaicItems,v=(0,P.shapeGlyphs)(f,c,{scale:s/x.GLYPH_SIZE,angle:(0,m.getValue)(e.angle),xOffset:(0,m.getValue)(e.offsetX),yOffset:(0,m.getValue)(e.offsetY),hAlign:(0,p.horizontalAlignment2HAlign)(e.horizontalAlignment),vAlign:(0,p.verticalAlignment2VAlign)(e.verticalAlignment),maxLineWidth:512,lineHeight:x.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(u||1,4)),decoration:e.font.decoration||"none",isCIM:!0}).boundsT;return t[0]=v.x-v.halfWidth,t[1]=-v.y-v.halfHeight,t[2]=v.x+v.halfWidth,t[3]=-v.y+v.halfHeight,t}}],[{key:"safeSize",value:function(t){var e=Math.max(Math.abs(t[0]),Math.abs(t[2])),i=Math.max(Math.abs(t[1]),Math.abs(t[3]));return Math.sqrt(e*e+i*i)}}]),t}(),G=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,null,[{key:"getEnvelope",value:function(t,e){var i=new(0,p.EnvDrawHelper)(e);if(Array.isArray(t)){var r,n=!0,s=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var h=o.value;r?r.union(L(i,h)):r=L(i,h)}}catch(t){s=!0,a=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw a}}return r}return L(i,t)}},{key:"getTextureAnchor",value:function(t,e){var i=this.getEnvelope(t,e);if(!i)return[0,0,0];var r=(i.x+.5*i.width)*M,n=-(i.y+.5*i.height)*M,s=i.width*M+2,a=i.height*M+2;return[r/s,n/a,a]}},{key:"rasterize",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=i||this.getEnvelope(e,r);if(!s)return[null,0,0,0,0];var a=(s.x+.5*s.width)*M,o=(s.y+.5*s.height)*M;t.width=s.width*M,t.height=s.height*M,i||(t.width+=2,t.height+=2);var l=t.getContext("2d"),h=p.Transformation.createScale(M,-1.3333333333333333);h.translate(.5*t.width-a,.5*t.height+o);var u=new(0,p.CanvasDrawHelper)(l,r,h);switch(e.type){case"CIMPointSymbol":var c={type:"point",x:0,y:0};u.drawSymbol(e,c);break;case"CIMVectorMarker":var f=new(0,y.Placement);u.drawMarker(e,f)}var v=l.getImageData(0,0,t.width,t.height),_=new Uint8Array(v.data);if(n)for(var d,m=0;m<_.length;m+=4)d=_[m+3]/255,_[m]=_[m]*d,_[m+1]=_[m+1]*d,_[m+2]=_[m+2]*d;return[_,t.width,t.height,-a/t.width,-o/t.height]}},{key:"fromTextSymbol",value:function(t){var e,i,r,n,s,o=t.angle,l=t.color,h=t.font,u=t.haloColor,c=t.haloSize,f=t.horizontalAlignment,v=t.kerning,_=t.text,y=t.verticalAlignment,p=t.xoffset,g=t.yoffset;h&&(e=h.family,i=h.style,r=h.weight,n=h.size,s=h.decoration);var x=!1;return _&&(x=(0,a.bidiText)(_)[1]),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:o,blockProgression:d.BlockProgression.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:d.FontEffects.Normal,fontEncoding:d.FontEncoding.Unicode,fontFamilyName:e||"Arial",fontStyleName:X(i,r),fontType:d.FontType.Unspecified,haloSize:c,height:n,hinting:d.GlyphHinting.Default,horizontalAlignment:H(null!=f?f:"center"),kerning:v,letterWidth:100,ligatures:!0,lineGapType:"Multiple",offsetX:(0,m.getValue)(p),offsetY:(0,m.getValue)(g),strikethrough:"line-through"===s,underline:"underline"===s,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:V(l)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:V(u)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:x?d.TextReadingDirection.RTL:d.TextReadingDirection.LTR,verticalAlignment:O(null!=y?y:"baseline"),verticalGlyphOrientation:d.VerticalGlyphOrientation.Right,wordSpacing:100,billboardMode3D:d.BillBoardMode.FaceNearPlane},textString:_}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}},{key:"fromPictureFillSymbol",value:function(t){var e=t.height,i=t.outline,r=t.width,n=t.xoffset,s=t.xscale,a=t.yoffset,o=t.yscale,l=[],h={type:"CIMPolygonSymbol",symbolLayers:l};if(i){var u=i.cap,c=i.join,f=i.miterLimit,v=i.width;l.push({type:"CIMSolidStroke",color:V(i.color),capStyle:F(u),joinStyle:D(c),miterLimit:f,width:v})}var _=t.url;"esriPFS"===t.type&&t.imageData&&(_=t.imageData);var y="angle"in t?t.angle:0,p=r*(s||1),g=e*(o||1);return l.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:d.TextureFilter.Picture,tintColor:null,url:_,height:g,width:p,offsetX:(0,m.getValue)(n),offsetY:(0,m.getValue)(a),rotation:(0,m.getValue)(-y),colorSubstitutions:null}),h}},{key:"fromSimpleFillSymbol",value:function(t){var e=t.color,i=t.style,r=t.outline,n=[],s={type:"CIMPolygonSymbol",symbolLayers:n},a=null;if(r){var o=r.cap,h=r.join,c=r.style;"solid"!==c&&"none"!==c&&"esriSLSSolid"!==c&&"esriSLSNull"!==c&&(a=[{type:"CIMGeometricEffectDashes",dashTemplate:N(c,o),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),n.push({type:"CIMSolidStroke",color:V(r.color),capStyle:F(o),joinStyle:D(h),miterLimit:r.miterLimit,width:r.width,effects:a})}if(i&&"solid"!==i&&"none"!==i&&"esriSFSSolid"!==i&&"esriSFSNull"!==i){var f={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:V(e),capStyle:d.LineCapStyle.Butt,joinStyle:d.LineJoinStyle.Miter,width:.75}]},v=0,_=(0,u.nextPowerOfTwo)(Math.ceil(window.devicePixelRatio)),y=U(i)?8*_:10*_;switch(i){case"vertical":case"esriSFSVertical":v=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":v=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":v=45;break;case"cross":case"esriSFSCross":v=0}n.push({type:"CIMHatchFill",lineSymbol:f,offsetX:0,offsetY:0,rotation:v,separation:y}),"cross"===i||"esriSFSCross"===i?n.push({type:"CIMHatchFill",lineSymbol:(0,l.clone)(f),offsetX:0,offsetY:0,rotation:90,separation:y}):"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i||n.push({type:"CIMHatchFill",lineSymbol:(0,l.clone)(f),offsetX:0,offsetY:0,rotation:45,separation:y})}else!i||"solid"!==i&&"esriSFSSolid"!==i||n.push({type:"CIMSolidFill",enable:!0,color:V(e)});return s}},{key:"fromSimpleLineSymbol",value:function(e){var i=e.cap,r=e.color,n=e.join,s=e.marker,a=e.miterLimit,o=e.style,l=e.width,h=null;"solid"!==o&&"none"!==o&&"esriSLSSolid"!==o&&"esriSLSNull"!==o&&(h=[{type:"CIMGeometricEffectDashes",dashTemplate:N(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);var u=[];if(s){var c;switch(s.placement){case"begin-end":c=d.ExtremityPlacement.Both;break;case"begin":c=d.ExtremityPlacement.JustBegin;break;case"end":c=d.ExtremityPlacement.JustEnd;break;default:c=d.ExtremityPlacement.None}var f=t.fromSimpleMarker(s,l,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:c,offsetAlongLine:0},u.push(f)}return"none"!==o&&"esriSLSNull"!==o&&u.push({type:"CIMSolidStroke",color:V(r),capStyle:F(i),joinStyle:D(n),miterLimit:a,width:l,effects:h}),{type:"CIMLineSymbol",symbolLayers:u}}},{key:"fromPictureMarker",value:function(t){var e=t.angle,i=t.height,r=t.width,n=t.xoffset,s=t.yoffset,a=t.url;return"esriPMS"===t.type&&t.imageData&&(a=t.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:d.TextureFilter.Picture,tintColor:null,url:a,size:i,width:r,offsetX:(0,m.getValue)(n),offsetY:(0,m.getValue)(s),rotation:(0,m.getValue)(-e)}]}}},{key:"fromSimpleMarker",value:function(t,e,i){var r,s=t.style,a=null!=(r=t.color)?r:i;if("path"===s){var o=[];if("outline"in t&&t.outline){var l=t.outline;o.push({type:"CIMSolidStroke",enable:!0,width:(0,f.pt2px)(Math.round((0,f.px2pt)(l.width))),color:V(l.color)})}o.push({type:"CIMSolidFill",enable:!0,color:V(a),path:t.path});var h=n.slicedToArray(Y("square"),2),u=h[0],c=h[1];return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,m.getValue)(-t.angle),size:(0,m.getValue)(t.size||6),offsetX:(0,m.getValue)(t.xoffset),offsetY:(0,m.getValue)(t.yoffset),frame:u,markerGraphics:[{type:"CIMMarkerGraphic",geometry:c,symbol:{type:"CIMPolygonSymbol",symbolLayers:o}}]}]}}var v,_=n.slicedToArray(Y(s),2),y=_[0],p=_[1];if(p&&y){var d=[];if("outline"in t&&t.outline){var g=t.outline;d.push({type:"CIMSolidStroke",enable:!0,width:g.width>.667?(0,f.pt2px)(Math.round((0,f.px2pt)(g.width))):g.width,color:V(g.color)})}else!e||"line-marker"!==t.type||"cross"!==t.style&&"x"!==t.style||d.push({type:"CIMSolidStroke",enable:!0,width:e,color:V(a)});d.push({type:"CIMSolidFill",enable:!0,color:V(a)});var x={type:"CIMPolygonSymbol",symbolLayers:d};v={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,m.getValue)(-t.angle),size:(0,m.getValue)(t.size||6*e),offsetX:(0,m.getValue)(t.xoffset),offsetY:(0,m.getValue)(t.yoffset),frame:y,markerGraphics:[{type:"CIMMarkerGraphic",geometry:p,symbol:x}]}]}}return v}},{key:"fromCIMHatchFill",value:function(t){for(var e,i=null!=(e=t.separation)?e:4,r=i/2,n=this._getLineSymbolPeriod(t.lineSymbol)||4;n<4;)n*=2;var s=n/2;return{type:"CIMVectorMarker",frame:{xmin:-s,xmax:s,ymin:-r,ymax:r},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-s,0],[s,0]]]},symbol:t.lineSymbol}],size:i}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;var i=!0,r=!1,n=void 0;if(t.symbolLayers)try{for(var s,a=t.symbolLayers[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value,l=this._getEffectsRepeat(o.effects);if(l)return l;if(o){var h=this._getPlacementRepeat(o.markerPlacement);if(h)return h}}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e=!0,i=!1,r=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var a=n.value;if(a)switch(a.type){case"CIMGeometricEffectDashes":var o=a.dashTemplate;if(o&&o.length){var l=0,h=!0,u=!1,c=void 0;try{for(var f,v=o[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){l+=f.value}}catch(t){u=!0,c=t}finally{try{h||null==v.return||v.return()}finally{if(u)throw c}}return 1&o.length&&(l*=2),l}break;case"CIMGeometricEffectWave":return a.period;default:S.error("unsupported geometric effect type ".concat(a.type))}}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i=0,r=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){i+=a.value}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return 1&e.length&&(i*=2),i}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e,i,r,s,a=t.markerPlacement,o=n.objectSpread({type:t.type},t);return o.markerPlacement=null,o.anchorPoint=null,!0===a.shiftOddRows?(i=a.stepX/2,r=a.stepY,s=2*a.stepY,e=[{x:-i,y:0},{x:i,y:0},{x:0,y:r},{x:0,y:-r}].map((function(t){return{type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[o]}}}))):(i=a.stepX/2,r=a.stepY/2,s=a.stepY,e=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[o]}}]),{type:"CIMVectorMarker",frame:{xmin:-i,xmax:i,ymin:-r,ymax:r},markerGraphics:e,size:s}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":var i=!0,r=!1,n=void 0;if(e.symbolLayers)try{for(var s,a=e.symbolLayers[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value,l=t.getFillColor(o);if(null!=l)return l}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":var i=!0,r=!1,n=void 0;if(e.symbolLayers)try{for(var s,a=e.symbolLayers[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value,l=t.getStrokeColor(o);if(void 0!==l)return l}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":var i=!0,r=!1,n=void 0;if(e.symbolLayers)try{for(var s,a=e.symbolLayers[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value,l=t.getStrokeWidth(o);if(void 0!==l)return l}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=0,r=!0,n=!1,s=void 0;if(e.symbolLayers)try{for(var a,o=e.symbolLayers[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value,h=t.getSize(l);h>i&&(i=h)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return i;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return e.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return e.size}}},{key:"getMarkerScaleRatio",value:function(t){if(t&&"CIMVectorMarker"===t.type&&!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}return 1}}]),t}(),R=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var r=(0,u.nextPowerOfTwo)(Math.ceil(i)),n=U(e)?8*r:16*r,s=2*r;t.width=n,t.height=n;var a=t.getContext("2d");a.strokeStyle="#FFFFFF",a.lineWidth=r,a.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(a.moveTo(n/2,-s),a.lineTo(n/2,n+s)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(a.moveTo(-s,n/2),a.lineTo(n+s,n/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(a.moveTo(-s,-s),a.lineTo(n+s,n+s),a.moveTo(n-s,-s),a.lineTo(n+s,s),a.moveTo(-s,n-s),a.lineTo(s,n+s)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(a.moveTo(n+s,-s),a.lineTo(-s,n+s),a.moveTo(s,-s),a.lineTo(-s,s),a.moveTo(n+s,n-s),a.lineTo(n-s,n+s)),a.stroke();for(var o,l=a.getImageData(0,0,t.width,t.height),h=new Uint8Array(l.data),c=0;c<h.length;c+=4)o=h[c+3]/255,h[c]=h[c]*o,h[c+1]=h[c+1]*o,h[c+2]=h[c+2]*o;return[h,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){return this.rasterizeDash(t,e)}},{key:"rasterizeDash",value:function(t,e){var i="Butt"===e,r="Square"===e,s=!i&&!r;t.length%2==1&&(t=n.toConsumableArray(t).concat(n.toConsumableArray(t)));var a=15.5,l=0,h=!0,u=!1,c=void 0;try{for(var f,v=t[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){l+=f.value}}catch(t){u=!0,c=t}finally{try{h||null==v.return||v.return()}finally{if(u)throw c}}var _=Math.round(l*a),y=new Float32Array(31*_),p=7.75,d=0,m=0,g=.5,x=!0,P=!0,C=!1,k=void 0;try{for(var M,b=t[Symbol.iterator]();!(P=(M=b.next()).done);P=!0){var S=M.value;for(d=m,m+=S*a;g<=m;){for(var w=.5;w<31;){var L=(w-.5)*_+g-.5,T=s?(w-a)*(w-a):Math.abs(w-a);y[L]=x?i?Math.max(Math.max(d+p-g,T),Math.max(g-m+p,T)):T:s?Math.min((g-d)*(g-d)+T,(g-m)*(g-m)+T):r?Math.min(Math.max(g-d,T),Math.max(m-g,T)):Math.min(Math.max(g-d+p,T),Math.max(m+p-g,T)),w++}g++}x=!x}}catch(t){C=!0,k=t}finally{try{P||null==b.return||b.return()}finally{if(C)throw k}}for(var E=y.length,I=new Uint8Array(4*E),A=0;A<E;++A){var G=(s?Math.sqrt(y[A]):y[A])/a;(0,o.packFloatRGBA)(G,I,4*A)}return[I,_,31]}}]),t}(),z=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,null,[{key:"findApplicableOverrides",value:function(e,i,r){if(e&&i){if(e.primitiveName){var n=!1,s=!0,a=!1,o=void 0;try{for(var l,h=r[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){if(l.value.primitiveName===e.primitiveName){n=!0;break}}}catch(t){a=!0,o=t}finally{try{s||null==h.return||h.return()}finally{if(a)throw o}}var u=!0,c=!1,f=void 0;if(!n)try{for(var v,_=i[Symbol.iterator]();!(u=(v=_.next()).done);u=!0){var y=v.value;y.primitiveName===e.primitiveName&&r.push(y)}}catch(t){c=!0,f=t}finally{try{u||null==_.return||_.return()}finally{if(c)throw f}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var p=!0,d=!1,m=void 0;if(e.effects)try{for(var g,x=e.effects[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var P=g.value;t.findApplicableOverrides(P,i,r)}}catch(t){d=!0,m=t}finally{try{p||null==x.return||x.return()}finally{if(d)throw m}}var C=!0,k=!1,M=void 0;if(e.symbolLayers)try{for(var b,S=e.symbolLayers[Symbol.iterator]();!(C=(b=S.next()).done);C=!0){var w=b.value;t.findApplicableOverrides(w,i,r)}}catch(t){k=!0,M=t}finally{try{C||null==S.return||S.return()}finally{if(k)throw M}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":var L=!0,T=!1,E=void 0;if(e.effects)try{for(var I,A=e.effects[Symbol.iterator]();!(L=(I=A.next()).done);L=!0){var G=I.value;t.findApplicableOverrides(G,i,r)}}catch(t){T=!0,E=t}finally{try{L||null==A.return||A.return()}finally{if(T)throw E}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,i,r),"CIMVectorMarker"===e.type){var R=!0,z=!1,F=void 0;if(e.markerGraphics)try{for(var D,H=e.markerGraphics[Symbol.iterator]();!(R=(D=H.next()).done);R=!0){var O=D.value;t.findApplicableOverrides(O,i,r),t.findApplicableOverrides(O.symbol,i,r)}}catch(t){z=!0,F=t}finally{try{R||null==H.return||H.return()}finally{if(z)throw F}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,i,r):"CIMHatchFill"===e.type&&t.findApplicableOverrides(e.lineSymbol,i,r)}}}},{key:"findEffectOverrides",value:function(t,e,i){if(e&&t)for(var r=t.length,n=0;n<r;n++){var s=t[n],a=null==s?void 0:s.primitiveName;if(a){var o=!1,l=!0,h=!1,u=void 0;try{for(var c,f=i[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){if(c.value.primitiveName===a){o=!0;break}}}catch(t){h=!0,u=t}finally{try{l||null==f.return||f.return()}finally{if(h)throw u}}var v=!0,_=!1,y=void 0;if(!o)try{for(var p,d=e[Symbol.iterator]();!(v=(p=d.next()).done);v=!0){var m=p.value;m.primitiveName===a&&i.push(m)}}catch(t){_=!0,y=t}finally{try{v||null==d.return||d.return()}finally{if(_)throw y}}}}}},{key:"applyOverrides",value:function(e,i,r,n){if(i){var s;if(e.primitiveName){var a=!0,o=!1,l=void 0;try{for(var h,u=i[Symbol.iterator]();!(a=(h=u.next()).done);a=!0){var c=h.value;if(c.primitiveName===e.primitiveName){var f=(s=c.propertyName)?s.charAt(0).toLowerCase()+s.substr(1):s;if(n&&n.push({cim:e,nocapPropertyName:f,value:e[f]}),c.expression&&(c.value=t.toValue(c.propertyName,c.expression)),r){var v=!1,_=!0,y=!1,p=void 0;try{for(var d,m=r[Symbol.iterator]();!(_=(d=m.next()).done);_=!0){d.value.primitiveName===e.primitiveName&&(v=!0)}}catch(t){y=!0,p=t}finally{try{_||null==m.return||m.return()}finally{if(y)throw p}}v||r.push(c)}e[f]=c.value}}}catch(t){o=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var g=!0,x=!1,P=void 0;if(e.effects)try{for(var C,k=e.effects[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var M=C.value;t.applyOverrides(M,i,r,n)}}catch(t){x=!0,P=t}finally{try{g||null==k.return||k.return()}finally{if(x)throw P}}var b=!0,S=!1,w=void 0;if(e.symbolLayers)try{for(var L,T=e.symbolLayers[Symbol.iterator]();!(b=(L=T.next()).done);b=!0){var E=L.value;t.applyOverrides(E,i,r,n)}}catch(t){S=!0,w=t}finally{try{b||null==T.return||T.return()}finally{if(S)throw w}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":var I=!0,A=!1,G=void 0;if(e.effects)try{for(var R,z=e.effects[Symbol.iterator]();!(I=(R=z.next()).done);I=!0){var F=R.value;t.applyOverrides(F,i,r,n)}}catch(t){A=!0,G=t}finally{try{I||null==z.return||z.return()}finally{if(A)throw G}}var D=!0,H=!1,O=void 0;if("CIMVectorMarker"===e.type&&e.markerGraphics)try{for(var V,X=e.markerGraphics[Symbol.iterator]();!(D=(V=X.next()).done);D=!0){var B=V.value;t.applyOverrides(B,i,r,n),t.applyOverrides(B.symbol,i,r,n)}}catch(t){H=!0,O=t}finally{try{D||null==X.return||X.return()}finally{if(H)throw O}}}}}},{key:"restoreOverrides",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var a=n.value;a.cim[a.nocapPropertyName]=a.value}}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"buildOverrideKey",value:function(t){var e="",i=!0,r=!1,n=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value;void 0!==o.value&&(e+="".concat(o.primitiveName).concat(o.propertyName).concat(JSON.stringify(o.value)))}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var i=new(0,s.default)(e).toRgba();return i[3]*=255,i}return e}}]),t}(),F=function(t){if(!t)return d.LineCapStyle.Butt;switch(t){case"butt":return d.LineCapStyle.Butt;case"square":return d.LineCapStyle.Square;case"round":return d.LineCapStyle.Round}},D=function(t){if(!t)return d.LineJoinStyle.Miter;switch(t){case"miter":return d.LineJoinStyle.Miter;case"round":return d.LineJoinStyle.Round;case"bevel":return d.LineJoinStyle.Bevel}},H=function(t){if(!t)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center";case"justify":return"Justify"}},O=function(t){if(!t)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},V=function(t){return t?[t.r,t.g,t.b,255*t.a]:[0,0,0,0]},X=function(t,e){var i=B(e),r=W(t);return i&&r?"".concat(i,"-").concat(r):"".concat(i).concat(r)},B=function(t){if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},W=function(t){if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},N=function(t,e){var i="butt"===e;switch(t){case"dash":case"esriSLSDash":return i?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return i?[4,3,1,3]:[3,4,0,4];case"dot":case"esriSLSDot":return i?[1,3]:[0,4];case"long-dash":case"esriSLSLongDash":return i?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return i?[8,3,1,3]:[7,4,0,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return i?[8,3,1,3,1,3]:[7,4,0,4,0,4];case"short-dash":case"esriSLSShortDash":return i?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return i?[4,1,1,1]:[3,2,0,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return i?[4,1,1,1,1,1]:[3,2,0,2,0,2];case"short-dot":case"esriSLSShortDot":return i?[1,1]:[0,2];case"solid":case"esriSLSSolid":case"none":return S.error("Unexpected: style does not require rasterization"),[0,0];default:return S.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),[0,0]}};var Y=function(t){var e,i,r=50,n=t;if("circle"===n||"esriSMSCircle"===n){var s=Math.acos(.995),a=Math.ceil(C/s/4);0===a&&(a=1),s=k/a,a*=4;var o=[];o.push([r,0]);for(var l=1;l<a;l++)o.push([r*Math.cos(l*s),-50*Math.sin(l*s)]);o.push([r,0]),e={rings:[o]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("cross"===n||"esriSMSCross"===n){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("diamond"===n||"esriSMSDiamond"===n)e={rings:[[[-50,0],[0,r],[r,0],[0,-50],[-50,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("square"===n||"esriSMSSquare"===n)e={rings:[[[-50,-50],[-50,r],[r,r],[r,-50],[-50,-50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("x"===n||"esriSMSX"===n){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,r],[0,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("triangle"===n||"esriSMSTriangle"===n){var h=57.735026918962575,u=-h,c=2/3*100,f=c-100;e={rings:[[[u,f],[0,c],[h,f],[u,f]]]},i={xmin:u,ymin:f,xmax:h,ymax:c}}else"arrow"===n&&(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r});return[i,e]},U=function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}})),i.register("7Dw9j",(function(e,r){t(e.exports,"packFloatRGBA",(function(){return s})),t(e.exports,"unpackFloatRGBA",(function(){return a}));var n=i("iVfa0");function s(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,n.clamp)(t,0,h),s=0;s<4;s++)e[i+s]=Math.floor(256*u(r*o[s]))}function a(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,r=0;r<4;r++)i+=t[e+r]*l[r];return i}var o=[1,256,65536,16777216],l=[1/256,1/65536,1/16777216,1/4294967296],h=a(new Uint8ClampedArray([255,255,255,255]));function u(t){return t-Math.floor(t)}})),i.register("eGRqB",(function(e,r){t(e.exports,"Transformation",(function(){return S})),t(e.exports,"EnvDrawHelper",(function(){return L})),t(e.exports,"HittestDrawHelper",(function(){return T})),t(e.exports,"lineGapType2LineHeight",(function(){return R})),t(e.exports,"horizontalAlignment2HAlign",(function(){return A})),t(e.exports,"verticalAlignment2VAlign",(function(){return G})),t(e.exports,"CanvasDrawHelper",(function(){return E}));var n=i("8TSCy"),s=i("6J0KG"),a=i("jHOLN"),o=i("7qybv"),l=i("7Pyz4"),h=i("iXlXu"),u=i("8TwEW"),c=i("5Hy9K"),f=i("30puZ"),v=i("79LpT"),_=i("fORtl"),y=i("4qQLM"),p=i("jghp4"),d=i("bdXyK"),m=i("6LoaD"),g=i("i50K3"),x=i("aGHsx"),P=i("6S0qa"),C=i("4WoSm"),k=i("a7brS"),M=Math.PI/180,b=a.default.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),S=function(){"use strict";function t(e){n.classCallCheck(this,t),this._t=e}return n.createClass(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return t.multiply(this,t.createRotate(e),this)}},{key:"invert",value:function(){var e=this._t,i=e[0]*e[4]-e[1]*e[3];if(0===i)return new t([0,0,0,0,0,0]);i=1/i;var r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i;return new t([e[4]*i,-e[1]*i,r,-e[3]*i,e[0]*i,n])}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,-r,0,r,i,0])}},{key:"multiply",value:function(t,e,i){var r=t._t,n=e._t,s=r[0]*n[0]+r[3]*n[1],a=r[1]*n[0]+r[4]*n[1],o=r[2]*n[0]+r[5]*n[1]+n[2],l=r[0]*n[3]+r[3]*n[4],h=r[1]*n[3]+r[4]*n[4],u=r[2]*n[3]+r[5]*n[4]+n[5],c=i._t;return c[0]=s,c[1]=a,c[2]=o,c[3]=l,c[4]=h,c[5]=u,i}}]),t}(),w=function(){"use strict";function t(e,i){n.classCallCheck(this,t),this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new(0,l.default)(p.Placement,null,null,100),this._earlyReturn=!1,this._mapRotation=0,this._resourceManager=e||new(0,d.default),this._transfos.push(i||S.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}return n.createClass(t,[{key:"setTransform",value:function(t,e){this._transfos=[t||S.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}},{key:"setGeomUnitsPerPoint",value:function(t){this._geomUnitsPerPoint=t}},{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformPt",value:function(t){return this._transfos[this._transfos.length-1].invert().transform(t)}},{key:"reverseTransformSize",value:function(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"geomUnitsPerPoint",value:function(){return this.isEmbedded()?1:this._geomUnitsPerPoint}},{key:"isEmbedded",value:function(){return this._transfos.length>1}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;S.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e);break;case"CIMTextSymbol":this.drawTextSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var i=t.symbolLayers;if(i){var r=t.effects;if(r&&r.length>0){var n=this.executeEffects(r,e);if(n)for(var s=n.next();s;)this.drawSymbolLayers(i,s),s=n.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i=this._resourceManager.geometryEngine,r=new(0,_.SimpleGeometryCursor)(e),n=!0,s=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var h=o.value,u=(0,y.getEffectOperator)(h);u&&(r=u.execute(r,h,this.geomUnitsPerPoint(),i))}}catch(t){s=!0,a=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw a}}return r}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var r=t[i];if(r&&!1!==r.enable){var n=r.effects;if(n&&n.length>0){var s=this.executeEffects(n,e);if(s)for(var a=null;(a=s.next())&&(this.drawSymbolLayer(r,a),!this._earlyReturn););}else this.drawSymbolLayer(r,e);if(this._earlyReturn)return}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(e,t);break;case"CIMPictureFill":this.drawPictureFill(e,t);break;case"CIMGradientFill":this.drawGradientFill(e,t);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(e,t);break;case"CIMGradientStroke":this.drawGradientStroke(e,t);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=this._buildHatchPolyline(e,t,this.geomUnitsPerPoint());i&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,i),this.popClipPath())}},{key:"drawPictureFill",value:function(t,e){}},{key:"drawGradientFill",value:function(t,e){}},{key:"drawPictureStroke",value:function(t,e){}},{key:"drawGradientStroke",value:function(t,e){}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var r=(0,y.getPlacementOperator)(i);if(r){var s="CIMMarkerPlacementInsidePolygon"===i.type;s&&this.pushClipPath(e);var a=r.execute(e,i,this.geomUnitsPerPoint(),this._resourceManager.geometryEngine);if(a)for(var o=null;(o=a.next())&&(this.drawMarker(t,o),!this._earlyReturn););s&&this.popClipPath()}}else{var l,h=this._placementPool.acquire(),u=!0,c=!1,_=void 0;if((0,v.isPoint)(e))h.tx=e.x,h.ty=e.y,this.drawMarker(t,h);else if((0,v.isPolygon)(e))l=n.slicedToArray((0,f.polygonCentroid)(e),2),h.tx=l[0],h.ty=l[1],this.drawMarker(t,h);else try{for(var p,d=e.points[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var m=p.value;if(h.tx=m[0],h.ty=m[1],this.drawMarker(t,h),this._earlyReturn)break}}catch(t){c=!0,_=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw _}}this._placementPool.release(h)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){var i,r,n,s,a;if(t){var l=this._resourceManager.getResource(t.url),h=null!=(i=t.size)?i:10;if(!((0,o.isNone)(l)||h<=0)){var u=l.width,c=l.height;if(u&&c){var f=u/c,v=null!=(r=t.scaleX)?r:1,_=S.createIdentity(),y=t.anchorPoint;if(y){var p=y.x,d=y.y;"Absolute"!==t.anchorPointUnits&&(p*=h*f*v,d*=h),_.translate(-p,-d)}var m=null!=(n=t.rotation)?n:0;t.rotateClockwise&&(m=-m),this._mapRotation&&(m+=this._mapRotation),m&&_.rotate(m*M);var g=null!=(s=t.offsetX)?s:0,x=null!=(a=t.offsetY)?a:0;if(g||x){if(this._mapRotation){var P=M*this._mapRotation,C=Math.cos(P),k=Math.sin(P),b=g*k+x*C;g=g*C-x*k,x=b}_.translate(g,x)}var w=this.geomUnitsPerPoint();1!==w&&_.scale(w,w);var L=e.getAngle();L&&_.rotate(L),_.translate(e.tx,e.ty),this.push(_,!1),this.drawImage(t.url,h,t.scaleX),this.pop()}}}}},{key:"drawVectorMarker",value:function(t,e){var i,r,n,s;if(t){var a=t.markerGraphics;if(a){var o=null!=(i=t.size)?i:10,l=t.frame,h=l?l.ymax-l.ymin:0,u=o&&h?o/h:1,c=S.createIdentity();l&&c.translate(.5*-(l.xmax+l.xmin),.5*-(l.ymax+l.ymin));var f=t.anchorPoint;if(f){var v=f.x,_=f.y;"Absolute"!==t.anchorPointUnits?l&&(v*=l.xmax-l.xmin,_*=l.ymax-l.ymin):(v/=u,_/=u),c.translate(-v,-_)}1!==u&&c.scale(u,u);var y=null!=(r=t.rotation)?r:0;t.rotateClockwise&&(y=-y),this._mapRotation&&(y+=this._mapRotation),y&&c.rotate(y*M);var p=null!=(n=t.offsetX)?n:0,d=null!=(s=t.offsetY)?s:0;if(p||d){if(this._mapRotation){var m=M*this._mapRotation,g=Math.cos(m),x=Math.sin(m),P=p*x+d*g;p=p*g-d*x,d=P}c.translate(p,d)}var C=this.geomUnitsPerPoint();1!==C&&c.scale(C,C);var k=e.getAngle();k&&c.rotate(k),c.translate(e.tx,e.ty),this.push(c,t.scaleSymbolsProportionally);var w=!0,L=!1,T=void 0;try{for(var E,I=a[Symbol.iterator]();!(w=(E=I.next()).done);w=!0){var A=E.value;if(A&&A.symbol&&A.geometry||b.error("Invalid marker graphic",A),this.drawSymbol(A.symbol,A.geometry),this._earlyReturn)break}}catch(t){L=!0,T=t}finally{try{w||null==I.return||I.return()}finally{if(L)throw T}}this.pop()}}}},{key:"drawTextSymbol",value:function(t,e){var i,r,n,s;if(t&&(0,v.isPoint)(e)&&!((null!=(i=t.height)?i:10)<=0)){var a=S.createIdentity(),o=null!=(r=t.angle)?r:0;(o=-o)&&a.rotate(o*M);var l=null!=(n=t.offsetX)?n:0,h=null!=(s=t.offsetY)?s:0;(l||h)&&a.translate(l,h);var u=this.geomUnitsPerPoint();1!==u&&a.scale(u,u),a.translate(e.x,e.y),this.push(a,!1),this.drawText(t),this.pop()}}},{key:"_buildHatchPolyline",value:function(t,e,i){var r=(void 0!==t.separation?t.separation:4)*i,n=void 0!==t.rotation?t.rotation:0;if(0===r)return null;r<0&&(r=-r);for(var s=0,a=.5*r;s>a;)s-=r;for(;s<-a;)s+=r;var o=(0,u.create)();(0,c.getBoundsXY)(o,e),o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;for(var l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];n>180;)n-=180;for(;n<0;)n+=180;var h,f,v,_,y=Math.cos(n*M),p=Math.sin(n*M),d=-r*p,m=r*y;s=(void 0!==t.offsetX?t.offsetX*i:0)*p-(void 0!==t.offsetY?t.offsetY*i:0)*y,h=v=Number.MAX_VALUE,f=_=-Number.MAX_VALUE;var g=!0,x=!1,P=void 0;try{for(var C,k=l[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var b=C.value,S=b[0],w=b[1],L=y*S+p*w,T=-p*S+y*w;h=Math.min(h,L),v=Math.min(v,T),f=Math.max(f,L),_=Math.max(_,T)}}catch(t){x=!0,P=t}finally{try{g||null==k.return||k.return()}finally{if(x)throw P}}for(var E=y*h-p*(v=Math.floor(v/r)*r)-d*s/r,I=p*h+y*v-m*s/r,A=y*f-p*v-d*s/r,G=p*f+y*v-m*s/r,R=1+Math.round((_-v)/r),z=[],F=0;F<R;F++)E+=d,I+=m,A+=d,G+=m,z.push([[E,I],[A,G]]);return{paths:z}}}]),t}(),L=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r){var s;return n.classCallCheck(this,i),(s=e.call(this,t,r)).reset(),n.possibleConstructorReturn(s)}return n.createClass(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new(0,g.default)(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"bounds",value:function(){return(0,u.fromValues)(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"drawSolidFill",value:function(t){if(t&&!(this._clipCount>0))if((0,v.isPolygon)(t))this._processPath(t.rings,0);else if((0,v.isPolyline)(t))this._processPath(t.paths,0);else if((0,v.isExtent)(t)){var e=I(t);e&&this._processPath(e.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}},{key:"drawSolidStroke",value:function(t,e,i){if(t&&!(this._clipCount>0)){var r=.5*this.transformSize(i);if((0,v.isPolygon)(t))this._processPath(t.rings,r);else if((0,v.isPolyline)(t))this._processPath(t.paths,r);else if((0,v.isExtent)(t)){var n=I(t);n&&this._processPath(n.rings,r)}else console.error("drawSolidStroke unexpected geometry type!")}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"drawImage",value:function(t,e,i){var r=i*e,n=e,s=this._resourceManager.getResource(t);!e&&(0,o.isSome)(s)&&(r=i*s.width,n=s.height),this._merge(this.transformPt([-r/2,-n/2]),0),this._merge(this.transformPt([-r/2,n/2]),0),this._merge(this.transformPt([r/2,-n/2]),0),this._merge(this.transformPt([r/2,n/2]),0)}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new(0,x.TextRasterizer))}},{key:"_processPath",value:function(t,e){var i=!0,r=!1,n=void 0;if(t)try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value,l=o?o.length:0;if(l>1){this._merge(this.transformPt(o[0]),e);for(var h=1;h<l;++h)this._merge(this.transformPt(o[h]),e)}}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(w),T=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(){var t;return n.classCallCheck(this,i),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments))))._searchPoint=[0,0],t._searchDistPoint=0,n.possibleConstructorReturn(t)}return n.createClass(i,[{key:"hitTest",value:function(t,e,i,r,n,s){var a=s*(0,h.pt2px)(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/a,this._textInfo=r;var o=e&&("CIMPointSymbol"===e.type&&"Map"!==e.angleAlignment||"CIMTextSymbol"===e.type);return this._mapRotation=o?n:0,this._earlyReturn=!1,this.drawSymbol(e,i),this._earlyReturn}},{key:"drawSolidFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawHatchFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawPictureFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawGradientFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){this._hitTestStroke(t,i)}},{key:"drawPictureStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawGradientStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"pushClipPath",value:function(t){}},{key:"popClipPath",value:function(){}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!(0,o.isNone)(r)&&0!==r.height&&0!==e){var n=e*this.geomUnitsPerPoint(),s=n*i*(r.width/r.height),a=this.reverseTransformPt(this._searchPoint),l=this._searchDistPoint;Math.abs(a[0])<s/2+l&&Math.abs(a[1])<n/2+l&&(this._earlyReturn=!0)}}},{key:"drawText",value:function(t){var e,i,r=this._textInfo;if(r){var n=r.get(t);if(n){var a=n.text,o=n.mosaicItem;if(o&&0!==o.glyphMosaicItems.length){var l=null!=(e=t.height)?e:10,h=R(t.lineGapType,null!=(i=t.lineGap)?i:0,l),u=(0,s.bidiText)(a)[1],c=o.glyphMosaicItems,f=(0,k.shapeGlyphs)(c,u,{scale:l/C.GLYPH_SIZE,angle:0,xOffset:0,yOffset:0,hAlign:A(t.horizontalAlignment),vAlign:G(t.verticalAlignment),maxLineWidth:512,lineHeight:C.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(h||1,4)),decoration:t.font.decoration||"none",isCIM:!0}),v=this.reverseTransformPt(this._searchPoint),_=v[0],y=v[1],p=!0,d=!1,m=void 0;try{for(var g,x=f.glyphs[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var P=g.value;if(_>P.xTopLeft&&_<P.xBottomRight&&y>-P.yBottomRight&&y<-P.yTopLeft){this._earlyReturn=!0;break}}}catch(t){d=!0,m=t}finally{try{p||null==x.return||x.return()}finally{if(d)throw m}}}}}}},{key:"_hitTestFill",value:function(t){var e=null;if((0,v.isExtent)(t)){var i=t;e=[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]}else if((0,v.isPolygon)(t))e=t.rings;else{if(!(0,v.isPolyline)(t))return;e=t.paths}var r=this.reverseTransformPt(this._searchPoint);this._pointInPolygon(r,e)&&(this._earlyReturn=!0);var n=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,e,n)&&(this._earlyReturn=!0)}},{key:"_hitTestStroke",value:function(t,e){var i=null;if((0,v.isExtent)(t)){var r=t;i=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if((0,v.isPolygon)(t))i=t.rings;else{if(!(0,v.isPolyline)(t))return;i=t.paths}var n=this.reverseTransformPt(this._searchPoint),s=e*this.geomUnitsPerPoint(),a=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(n,i,s/2+a)&&(this._earlyReturn=!0)}},{key:"_pointInPolygon",value:function(t,e){var i=0,r=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)for(var l=a.value,h=l.length,u=1;u<h;++u){var c=l[u-1],f=l[u];c[1]>t[1]!=f[1]>t[1]&&((f[0]-c[0])*(t[1]-c[1])-(f[1]-c[1])*(t[0]-c[0])>0?i++:i--)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return 0!==i}},{key:"_nearLine",value:function(t,e,i){var r=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)for(var l=a.value,h=l.length,u=1;u<h;++u){var c=l[u-1],f=l[u],v=(f[0]-c[0])*(f[0]-c[0])+(f[1]-c[1])*(f[1]-c[1]);if(0!==v){v=Math.sqrt(v);var _=((f[0]-c[0])*(t[1]-c[1])-(f[1]-c[1])*(t[0]-c[0]))/v;if(Math.abs(_)<i){var y=((f[0]-c[0])*(t[0]-c[0])+(f[1]-c[1])*(t[1]-c[1]))/v;if(y>-i&&y<v+i)return!0}}}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return!1}}]),i}(w),E=function(t){"use strict";n.inherits(i,t);var e=n.createSuper(i);function i(t,r,s){var a;return n.classCallCheck(this,i),(a=e.call(this,r,s))._ctx=t,n.possibleConstructorReturn(a)}return n.createClass(i,[{key:"drawSolidFill",value:function(t,e){if(t){if((0,v.isPolygon)(t))this._buildPath(t.rings,!0);else if((0,v.isPolyline)(t))this._buildPath(t.paths,!0);else if((0,v.isExtent)(t))this._buildPath(I(t).rings,!0);else{if(!(0,v.isMultipoint)(t))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){if(t&&e&&0!==i){if((0,v.isPolygon)(t))this._buildPath(t.rings,!0);else if((0,v.isPolyline)(t))this._buildPath(t.paths,!1);else{if(!(0,v.isExtent)(t))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(I(t).rings,!0)}var a=this._ctx;a.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",a.lineWidth=this.transformSize(i)+.5,this._setCapStyle(r),this._setJoinStyle(n),a.miterLimit=s,a.stroke()}}},{key:"pushClipPath",value:function(t){if(this._ctx.save(),(0,v.isPolygon)(t))this._buildPath(t.rings,!0);else if((0,v.isPolyline)(t))this._buildPath(t.paths,!0);else{if(!(0,v.isExtent)(t))return;this._buildPath(I(t).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!(0,o.isNone)(r)){var n=this._ctx,s=n.canvas.width,a=n.canvas.height,l=e*i*(r.width/r.height),h=i*e;e||(l=i*r.width,h=i*r.height),this._ctx.drawImage(r,0,0,r.width,r.height,0,0,Math.min(this.transformSize(l),s),Math.min(this.transformSize(h),a))}}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new(0,x.TextRasterizer))}},{key:"_buildPath",value:function(t,e){var i=this._ctx,r=!0,n=!1,s=void 0;if(i.beginPath(),t)try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value,h=l?l.length:0;if(h>1){var u=this.transformPt(l[0]);i.moveTo(u[0],u[1]);for(var c=1;c<h;++c)u=this.transformPt(l[c]),i.lineTo(u[0],u[1]);e&&i.closePath()}}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}}},{key:"_setCapStyle",value:function(t){switch(t){case m.LineCapStyle.Butt:this._ctx.lineCap="butt";break;case m.LineCapStyle.Round:this._ctx.lineCap="round";break;case m.LineCapStyle.Square:this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case m.LineJoinStyle.Bevel:this._ctx.lineJoin="bevel";break;case m.LineJoinStyle.Round:this._ctx.lineJoin="round";break;case m.LineJoinStyle.Miter:this._ctx.lineJoin="miter"}}}]),i}(w),I=function(t){return t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null},A=function(t){switch(t){case"Left":return P.HAlign.Left;case"Right":return P.HAlign.Right;case"Center":case"Justify":return P.HAlign.Center}},G=function(t){switch(t){case"Top":return P.VAlign.Top;case"Center":return P.VAlign.Center;case"Bottom":return P.VAlign.Bottom;case"Baseline":return P.VAlign.Baseline}},R=function(t,e,i){switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}}})),i.register("bdXyK",(function(r,n){t(r.exports,"default",(function(){return u}));var s=i("8TSCy"),a=i("2TvXO"),o=i("9pNSx"),l=i("kyj08"),h=i("10vEZ"),u=function(){"use strict";function t(){s.classCallCheck(this,t),this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}return s.createClass(t,[{key:"destroy",value:function(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}},{key:"getResource",value:function(t){var e;return null!=(e=this._resourceMap.get(t))?e:null}},{key:"fetchResource",value:function(t,i){var r=this;return s.asyncToGenerator(e(a).mark((function n(){var s,o,l,h;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={width:0,height:0},o=r._resourceMap,!(l=o.get(t))){e.next=3;break}return e.abrupt("return",(s.width=l.width,s.height=l.height,s));case 3:return h=r._inFlightResourceMap.get(t),e.abrupt("return",h||(h=c(t,i),r._inFlightResourceMap.set(t,h),h=h.then((function(e){if(r._inFlightResourceMap.delete(t),e.ok){o.set(t,e.value);var i=e.value;return s.width=i.width,s.height=i.height,s}return s}))));case 5:case"end":return e.stop()}}),n)})))()}},{key:"deleteResource",value:function(t){this._inFlightResourceMap.delete(t),this._resourceMap.delete(t)}}]),t}();function c(t,e){if(t.includes(";base64,")){var i=new Image;return i.src=t,i.decode().then((function(){return{ok:!0,value:i}})).catch((function(e){return(0,h.isAbortError)(e)?{ok:!1,error:e}:{ok:!1,error:new(0,l.default)("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}return(0,o.default)(t,s.objectSpread({responseType:"image"},e)).then((function(t){return{ok:!0,value:t.data}})).catch((function(e){return(0,h.isAbortError)(e)?{ok:!1,error:e}:{ok:!1,error:new(0,l.default)("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}})),i.register("i50K3",(function(e,r){t(e.exports,"default",(function(){return s}));var n=i("8TSCy"),s=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n.classCallCheck(this,t),this.x=e,this.y=i,this.width=r,this.height=s}return n.createClass(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()})),i.register("aGHsx",(function(e,r){t(e.exports,"TextRasterizer",(function(){return a}));var n=i("8TSCy"),s=i("iXlXu");var a=function(){"use strict";function t(){n.classCallCheck(this,t)}return n.createClass(t,[{key:"rasterizeText",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this._setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this._computeLineHeight();var n=this._computeTextWidth(r,e),s=e.font,a=s.decoration,o=s.weight;this.lineThroughWidthOffset=a&&"line-through"===a?.1*this.lineHeight:0;var l,h,u=this.lineHeight*this.textLines.length;i.width=n+2*this.lineThroughWidthOffset,i.height=u,this.renderedLineHeight=Math.round(this.lineHeight*e.pixelRatio),this.renderedHaloSize=e.halo.size*e.pixelRatio,this.renderedWidth=n*e.pixelRatio,this.renderedHeight=u*e.pixelRatio,this.lineThroughWidthOffset*=e.pixelRatio,this.fillStyle=(h=e.color,"rgba(".concat(h.slice(0,3).toString(),",").concat(h[3],")")),this.haloStyle=(l=e.halo.color,"rgb(".concat(l.slice(0,3).toString(),")"));var c=this.renderedLineHeight,f=this.renderedHaloSize;this._setFontProperties(r,e);var v,_,y=(v=r.textAlign,_=this.renderedWidth,("center"===v?.5*_:"right"===v?_:0)+f),p=f,d=f>0,m=this.lineThroughWidthOffset,g=0;d&&this._renderHalo(r,y,p,m,g,e),g+=p,m+=y;var x=!0,P=!1,C=void 0;try{for(var k,M=this.textLines[Symbol.iterator]();!(x=(k=M.next()).done);x=!0){var b=k.value;r.globalCompositeOperation="destination-out",r.fillStyle="rgb(0, 0, 0)",r.fillText(b,m,g),r.globalCompositeOperation="source-over",r.fillStyle=this.fillStyle,r.fillText(b,m,g),a&&"none"!==a&&this._renderDecoration(r,m,g,a,o),g+=c}}catch(t){P=!0,C=t}finally{try{x||null==M.return||M.return()}finally{if(P)throw C}}var S=this.renderedWidth+2*this.lineThroughWidthOffset,w=this.renderedHeight,L=r.getImageData(0,0,S,w),T=new Uint8Array(L.data);if(e.premultiplyColors)for(var E,I=0;I<T.length;I+=4)E=T[I+3]/255,T[I]=T[I]*E,T[I+1]=T[I+1]*E,T[I+2]=T[I+2]*E;return{size:[S,w],image:new Uint32Array(T.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_renderHalo",value:function(t,e,i,r,n,s){var a=this.renderedWidth,o=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=a,this._haloRasterizationCanvas.height=o;var l=this._haloRasterizationCanvas,h=l.getContext("2d");h.clearRect(0,0,a,o),this._setFontProperties(h,s);var u=s.font,c=u.decoration,f=u.weight;h.fillStyle=this.haloStyle,h.strokeStyle=this.haloStyle;var v=this.renderedHaloSize<3;h.lineJoin=v?"miter":"round",v?this._renderHaloEmulated(h,e,i,c,f):this._renderHaloNative(h,e,i,c,f),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(l,0,0,a,o,r,n,a,o),t.globalAlpha=1}},{key:"_renderHaloEmulated",value:function(t,e,i,r,s){var a=this.renderedLineHeight,l=this.renderedHaloSize,h=!0,u=!1,c=void 0;try{for(var f,v=this.textLines[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var _=f.value,y=!0,p=!1,d=void 0;try{for(var m,g=o[Symbol.iterator]();!(y=(m=g.next()).done);y=!0){var x=n.slicedToArray(m.value,2),P=x[0],C=x[1];t.fillText(_,e+l*P,i+l*C)}}catch(t){p=!0,d=t}finally{try{y||null==g.return||g.return()}finally{if(p)throw d}}r&&"none"!==r&&this._renderDecoration(t,e,i,r,s),i+=a}}catch(t){u=!0,c=t}finally{try{h||null==v.return||v.return()}finally{if(u)throw c}}}},{key:"_renderHaloNative",value:function(t,e,i,r,n){var s=this.renderedLineHeight,a=this.renderedHaloSize,o=!0,l=!1,h=void 0;try{for(var u,c=this.textLines[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){for(var f=u.value,v=2*a,_=0;_<5;_++){var y=.6+.1*_;t.lineWidth=y*v,t.strokeText(f,e,i),r&&"none"!==r&&this._renderDecoration(t,e,i,r,n)}i+=s}}catch(t){l=!0,h=t}finally{try{o||null==c.return||c.return()}finally{if(l)throw h}}}},{key:"_setFontProperties",value:function(t,e){var i,r=e.font,n="".concat(r.style," ").concat(r.weight," ").concat((0,s.pt2px)(e.size*e.pixelRatio),"px ").concat(r.family,", sans-serif");switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:i="left";break;case"right":i="right";break;case"center":i="center"}t.textAlign=i}},{key:"computeTextSize",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this._setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this._computeLineHeight();var n=this._computeTextWidth(r,e),s=this.lineHeight*this.textLines.length;return i.width=n,i.height=s,[n*e.pixelRatio,s*e.pixelRatio]}},{key:"_computeTextWidth",value:function(t,e){var i=0,r=!0,n=!1,s=void 0;try{for(var a,o=this.textLines[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;i=Math.max(i,t.measureText(l).width)}}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}var h=e.font;return("italic"===h.style||"oblique"===h.style||"string"==typeof h.weight&&("bold"===h.weight||"bolder"===h.weight)||"number"==typeof h.weight&&h.weight>600)&&(i+=.3*t.measureText("w").width),i+=2*this.parameters.halo.size,Math.round(i)}},{key:"_computeLineHeight",value:function(){var t=1.275*this.parameters.size,e=this.parameters.font.decoration;return e&&"underline"===e&&(t*=1.3),Math.round(t+2*this.parameters.halo.size)}},{key:"_renderDecoration",value:function(t,e,i,r,n){var s=.9*this.lineHeight,a="bold"===n?.06:"bolder"===n?.09:.04;switch(t.textAlign){case"center":e-=this.renderedWidth/2;break;case"right":e-=this.renderedWidth}var o=t.textBaseline;if("underline"===r)switch(o){case"top":i+=s;break;case"middle":i+=s/2}else if("line-through"===r)switch(o){case"top":i+=s/1.5;break;case"middle":i+=s/3}t.save(),t.beginPath(),t.strokeStyle=t.fillStyle,t.lineWidth=Math.ceil(s*a),t.moveTo(e-this.lineThroughWidthOffset,i),t.lineTo(e+this.renderedWidth+2*this.lineThroughWidthOffset,i),t.stroke(),t.restore()}}]),t}();for(var o=[],l=0;l<360;l+=22.5)o.push([Math.cos(Math.PI*l/180),Math.sin(Math.PI*l/180)])}))}();
//# sourceMappingURL=SymbolProcessor.802d3325.js.map
