{"mappings":"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","sources":["node_modules/@arcgis/core/portal/support/layersLoader.js","node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{layerLookupMap as t}from\"../../layers/support/lazyLayerLoader.js\";import r from\"../Portal.js\";import{createForItem as n}from\"./jsonContext.js\";import{loadStyleRenderer as l}from\"../../renderers/support/styleUtils.js\";import{requestArcGISServiceJSON as a}from\"../../support/requestPresets.js\";async function o(e,t){const r=e.instance.portalItem;return r&&r.id?(await r.load(t),s(e),i(e,t)):Promise.resolve()}function s(t){const r=t.instance.portalItem;if(-1===t.supportedTypes.indexOf(r.type))throw new e(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}'\",{type:r.type,expectedType:t.supportedTypes.join(\", \")})}async function i(e,t){const r=e.instance,a=r.portalItem,{url:o,title:s}=a,i=n(a);if(\"group\"===r.type)return r.read({title:s},i),u(r,e);o&&r.read({url:o},i);const c=await y(e,t);return c&&r.read(c,i),r.resourceReferences={portalItem:a,paths:i.readResourcePaths},r.read({title:s},i),l(r,i)}function u(r,n){let l;const a=r.portalItem.type;switch(a){case\"Feature Service\":case\"Feature Collection\":l=t.FeatureLayer;break;case\"Stream Service\":l=t.StreamLayer;break;case\"Scene Service\":l=t.SceneLayer;break;default:throw new e(\"portal:unsupported-item-type-as-group\",`The item type '${a}' is not supported as a 'IGroupLayer'`)}let o;return l().then((e=>(o=e,y(n)))).then((async e=>\"Feature Service\"===a?(e=await m(e,r.portalItem.url),p(r,o,e)):h(e)>0?p(r,o,e):c(r,o)))}function c(e,t){return e.portalItem.url?a(e.portalItem.url).then((r=>{var n,l;function a(e){return{id:e.id,name:e.name}}r&&p(e,t,{layers:null==(n=r.layers)?void 0:n.map(a),tables:null==(l=r.tables)?void 0:l.map(a)})})):Promise.resolve()}function p(e,t,r){let n=r.layers||[];const l=r.tables||[];\"Feature Collection\"===e.portalItem.type&&(n.forEach((e=>{var t;\"Table\"===(null==e||null==(t=e.layerDefinition)?void 0:t.type)&&l.push(e)})),n=n.filter((e=>{var t;return\"Table\"!==(null==e||null==(t=e.layerDefinition)?void 0:t.type)}))),n.reverse().forEach((n=>{const l=d(e,t,r,n);e.add(l)})),l.reverse().forEach((n=>{const l=d(e,t,r,n);e.tables.add(l)}))}function d(e,t,n,l){const a=new t({portalItem:e.portalItem.clone(),layerId:l.id,sublayerTitleMode:\"service-name\"});if(\"Feature Collection\"===e.portalItem.type){const t={origin:\"portal-item\",portal:e.portalItem.portal||r.getDefault()};a.read(l,t);const o=n.showLegend;null!=o&&a.read({showLegend:o},t)}return a}function y(e,t){if(!1===e.supportsData)return Promise.resolve(void 0);const r=e.instance;return r.portalItem.fetchData(\"json\",t).catch((()=>null)).then((async e=>{if(I(r)){let t,n=!0;return e&&h(e)>0&&(null==r.layerId&&(r.layerId=f(e)),t=v(e,r.layerId),t&&(1===h(e)&&(n=!1),null!=e.showLegend&&(t.showLegend=e.showLegend))),n&&\"service-name\"!==r.sublayerTitleMode&&(r.sublayerTitleMode=\"item-title-and-service-name\"),t}return e}))}async function m(e,t){var r,n;if(null==(null==(r=e)?void 0:r.layers)||null==(null==(n=e)?void 0:n.tables)){const r=await a(t);(e=e||{}).layers=e.layers||(null==r?void 0:r.layers),e.tables=e.tables||(null==r?void 0:r.tables)}return e}function f(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function v(e,t){const r=e.layers;if(r)for(let l=0;l<r.length;l++)if(r[l].id===t)return r[l];const n=e.tables;if(n)for(let l=0;l<n.length;l++)if(n[l].id===t)return n[l];return null}function h(e){var t,r,n,l;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(l=e.tables)?void 0:l.length)?n:0)}function I(e){return\"stream\"!==e.type&&\"layerId\"in e}export{f as getFirstLayerOrTableId,h as getNumLayersAndTables,o as load,m as preprocessFSItemData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function n(n){const{data:o}=await e(n,{responseType:\"json\",query:{f:\"json\"}});return o}export{n as requestArcGISServiceJSON};\n"],"names":["$8TSCy","parcelRequire","$dd79e53b99215fe6$export$11e63f7b0f3d9900","e1","t1","$dd79e53b99215fe6$var$_o","apply","this","arguments","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","r1","instance","portalItem","id","load","$dd79e53b99215fe6$var$s","_ctx","sent","$dd79e53b99215fe6$var$i","Promise","resolve","t2","r2","supportedTypes","indexOf","type","$kyj08","default","expectedType","join","e2","t3","$dd79e53b99215fe6$var$_i","r3","a1","o1","s1","i1","c1","url","title","$UdTKD","createForItem","read","$dd79e53b99215fe6$var$u","$dd79e53b99215fe6$var$y","resourceReferences","paths","readResourcePaths","$2TQQP","loadStyleRenderer","r4","n1","l1","o2","a2","$ge5sz","layerLookupMap","FeatureLayer","StreamLayer","SceneLayer","concat","then","e3","e4","$dd79e53b99215fe6$export$a89f42ab04782474","$dd79e53b99215fe6$var$p","$dd79e53b99215fe6$export$2843b45204b2ef68","$dd79e53b99215fe6$var$c","e5","t4","$8I1KP","requestArcGISServiceJSON","r5","n2","l2","a3","e6","name","layers","map","tables","e7","t5","r6","n3","l3","forEach","e8","t6","layerDefinition","push","filter","e9","t7","reverse","n4","l4","$dd79e53b99215fe6$var$d","add","n5","l5","e10","t8","n6","l6","a4","clone","layerId","sublayerTitleMode","_$t","origin","portal","$ajJOT","getDefault","o3","showLegend","e11","t9","supportsData","r7","fetchData","catch","e12","n7","e17","$dd79e53b99215fe6$export$b5ec8f39bbb6d330","$dd79e53b99215fe6$var$v","e13","t10","$dd79e53b99215fe6$var$_m","r9","n8","r8","e14","t11","length","r10","e15","t12","r11","l8","n9","l7","e16","t13","r12","n10","l9","$6573cb2b2cf773f0$export$e5ae05bdbfc69960","$6573cb2b2cf773f0$var$_n","ref","o","$9pNSx","responseType","query","f","data"],"version":3,"file":"layersLoader.6ac53746.js.map"}