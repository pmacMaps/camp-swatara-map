!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("iP6cg",(function(n,a){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),t(n.exports,"default",(function(){return c}));var l=r("8TSCy"),o=r("2TvXO"),s=r("10vEZ"),u=r("acBaq"),h=r("7JEE3"),f=r("7dqtP"),c=function(){"use strict";function t(){l.classCallCheck(this,t),this._spriteInfo={},this._glyphInfo={}}return l.createClass(t,[{key:"reset",value:function(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}},{key:"getLayers",value:function(){var e;return null==(e=this._styleRepository)?void 0:e.layers}},{key:"createTileAndParse",value:function(t,r){var n=this;return l.asyncToGenerator(e(o).mark((function a(){var i,l,u,f,c,y,v,x,d,p;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.key,l={},u=!0,f=!1,c=void 0,e.prev=2,y=Object.keys(t.sourceName2DataAndRefKey)[Symbol.iterator]();!(u=(v=y.next()).done);u=!0)x=v.value,d=t.sourceName2DataAndRefKey[x],l[x]=d.refKey;e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),f=!0,c=e.t0;case 10:e.prev=10,e.prev=11,u||null==y.return||y.return();case 13:if(e.prev=13,!f){e.next=16;break}throw c;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return p=new(0,h.default)(i,l,n,n._styleRepository),e.prev=19,e.next=22,p.parse(t,r);case 22:return e.abrupt("return",e.sent);case 25:if(e.prev=25,e.t1=e.catch(19),p.setObsolete(),p.release(),(0,s.isAbortError)(e.t1)){e.next=29;break}throw e.t1;case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),a,null,[[2,6,10,18],[11,,13,17],[19,25]])})))()}},{key:"updateStyle",value:function(e){if(e&&0!==e.length&&this._styleRepository){var t=this._styleRepository,r=!0,n=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var o=i.value,s=o.type,h=o.data;switch(s){case u.StyleUpdateType.PAINTER_CHANGED:t.setPaintProperties(h.layer,h.paint);break;case u.StyleUpdateType.LAYOUT_CHANGED:t.setLayoutProperties(h.layer,h.layout);break;case u.StyleUpdateType.LAYER_REMOVED:t.deleteStyleLayer(h.layer);break;case u.StyleUpdateType.LAYER_CHANGED:t.setStyleLayer(h.layer,h.index);break;case u.StyleUpdateType.SPRITES_CHANGED:this._spriteInfo={}}}}catch(e){n=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}}}},{key:"setStyle",value:function(e){this._styleRepository=new(0,f.default)(e),this._spriteInfo={},this._glyphInfo={}}},{key:"fetchSprites",value:function(e,t,r){var n=[],a=this._spriteInfo,i=!0,l=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var h=s.value;void 0===a[h.name]&&n.push(h)}}catch(e){l=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}return 0===n.length?Promise.resolve():t.invoke("getSprites",n,{signal:r&&r.signal}).then((function(e){for(var t in e){var r=e[t];a[t]=r}}))}},{key:"getSpriteItems",value:function(){return this._spriteInfo}},{key:"fetchGlyphs",value:function(e,t,r,n,a){var i=[],l=this._glyphInfo[t];return l?r.forEach((function(e){l[e]||i.push(e)})):(l=this._glyphInfo[t]=[],r.forEach((function(e){return i.push(e)}))),0===i.length?Promise.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:i},a).then((function(e){for(var t=0;t<e.length;t++)e[t]&&(l[t]=e[t])}))}},{key:"getGlyphItems",value:function(e){return this._glyphInfo[e]}}]),t}()})),r.register("7JEE3",(function(n,a){t(n.exports,"default",(function(){return c}));var i=r("8TSCy"),l=r("2TvXO"),o=r("7qybv"),s=r("10vEZ"),u=r("jXDuw"),h=r("iufgU"),f=r("bk1Lk"),c=function(){"use strict";function t(e,r,n,a){i.classCallCheck(this,t),this.status=f.TileStatus.INITIALIZED,this.placementEngine=new(0,u.PlacementEngine),this.tileKey=e,this.refKeys=r,this._workerTileHandler=n,this._styleRepository=a}return i.createClass(t,[{key:"release",value:function(){this.tileKey="",this.refKeys=null,this.status=f.TileStatus.INITIALIZED,this._workerTileHandler=null}},{key:"parse",value:function(t,r){var n=this;return i.asyncToGenerator(e(l).mark((function a(){var u,h,c,y,v,x,d,p,g,m,_,I,b,T,S;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r&&r.signal,(0,o.isSome)(u)&&(h=function(){u.removeEventListener("abort",h),n.status=f.TileStatus.INVALID},u.addEventListener("abort",h)),y={bucketsWithData:[],emptyBuckets:null},e.prev=4,e.next=7,n._parse(t,r);case 7:c=e.sent,e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(4),!(0,s.isAbortError)(e.t0)){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",{result:y,transferList:[]});case 15:for(n.status=f.TileStatus.READY,v=y.bucketsWithData,x=[],d=!0,p=!1,g=void 0,e.prev=18,m=c[Symbol.iterator]();!(d=(_=m.next()).done);d=!0)(I=_.value).hasFeatures()?(b=I.serialize(),v.push(b)):x.push(I.layer.uid);e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),p=!0,g=e.t1;case 26:e.prev=26,e.prev=27,d||null==m.return||m.return();case 29:if(e.prev=29,!p){e.next=32;break}throw g;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return T=i.toConsumableArray(v),S=null,e.abrupt("return",(x.length>0&&(S=Uint32Array.from(x),T.push(S.buffer)),y.emptyBuckets=S,{result:y,transferList:T}));case 37:case"end":return e.stop()}}),a,null,[[4,10],[18,22,26,34],[27,,29,33]])})))()}},{key:"setObsolete",value:function(){this.status=f.TileStatus.INVALID}},{key:"getLayers",value:function(){return this._workerTileHandler.getLayers()}},{key:"getWorkerTileHandler",value:function(){return this._workerTileHandler}},{key:"_parse",value:function(t,r){var n=this;return i.asyncToGenerator(e(l).mark((function a(){var i;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.sourceName2DataAndRefKey,0!==Object.keys(i).length){e.next=3;break}return e.abrupt("return",[]);case 3:return n.status=f.TileStatus.MODIFIED,e.abrupt("return",new(0,h.default)(i,n,r.client,n._styleRepository,t.styleLayerUIDs).parse(r));case 5:case"end":return e.stop()}}),a)})))()}}]),t}()})),r.register("jXDuw",(function(e,n){t(e.exports,"TILE_COORD_SIZE",(function(){return h})),t(e.exports,"TILE_PIXEL_RATIO",(function(){return f})),t(e.exports,"Anchor",(function(){return y})),t(e.exports,"PlacementEngine",(function(){return p}));var a=r("8TSCy"),i=r("7P6eh"),l=r("1GLf3"),o=r("ebEEs"),s=r("cXGy9"),u=r("ljf2P"),h=4096,f=8,c=.5,y=function e(t,r){"use strict";var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c;a.classCallCheck(this,e),this.x=t,this.y=r,this.angle=n,this.segment=i,this.minzoom=l},v=function e(t,r,n,l,o){"use strict";var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.C_INFINITY;a.classCallCheck(this,e),this.anchor=t,this.labelAngle=r,this.glyphAngle=n,this.page=l,this.alternateVerticalGlyph=o,this.minzoom=s,this.maxzoom=u},x=function e(t,r,n,i,l,o,s,u,h,f,c,y){"use strict";a.classCallCheck(this,e),this.tl=t,this.tr=r,this.bl=n,this.br=i,this.mosaicRect=l,this.labelAngle=o,this.minAngle=s,this.maxAngle=u,this.anchor=h,this.minzoom=f,this.maxzoom=c,this.page=y},d=function e(t){"use strict";a.classCallCheck(this,e),this.shapes=t},p=function(){"use strict";function e(){a.classCallCheck(this,e)}return a.createClass(e,[{key:"getIconPlacement",value:function(e,t,r){var n=new(0,u.Point)(e.x,e.y),a=r.rotationAlignment===s.RotationAlignment.MAP,l=r.keepUpright,h=r.rotate*i.C_DEG_TO_RAD;a&&(h+=e.angle);var f=new d([]);return r.allowOverlap&&r.ignorePlacement||!o.DECLUTTER_TILES||(f.iconColliders=[]),this._addIconPlacement(f,n,t,r,h),a&&l&&this._addIconPlacement(f,n,t,r,h+i.C_PI),f}},{key:"_addIconPlacement",value:function(e,t,r,n,a){var l=r.pixelRatio,h=r.width/l,f=r.height/l,y=n.offset,v=y[0],d=y[1];switch(n.anchor){case s.SymbolAnchor.CENTER:v-=h/2,d-=f/2;break;case s.SymbolAnchor.LEFT:d-=f/2;break;case s.SymbolAnchor.RIGHT:v-=h,d-=f/2;break;case s.SymbolAnchor.TOP:v-=h/2;break;case s.SymbolAnchor.BOTTOM:v-=h/2,d-=f;break;case s.SymbolAnchor.TOP_LEFT:break;case s.SymbolAnchor.BOTTOM_LEFT:d-=f;break;case s.SymbolAnchor.TOP_RIGHT:v-=h;break;case s.SymbolAnchor.BOTTOM_RIGHT:v-=h,d-=f}var p=r.rect,g=2/l,m=v-g,_=d-g,I=m+p.width/l,b=_+p.height/l,T=new(0,u.Point)(m,_),S=new(0,u.Point)(I,b),k=new(0,u.Point)(m,b),w=new(0,u.Point)(I,_);if(0!==a){var P=Math.cos(a),C=Math.sin(a);T.rotate(P,C),S.rotate(P,C),k.rotate(P,C),w.rotate(P,C)}var A=new x(T,w,k,S,p,a,0,256,t,c,i.C_INFINITY,0);if(e.shapes.push(A),(!n.allowOverlap||!n.ignorePlacement)&&o.DECLUTTER_TILES){var L=n.size,M=n.padding,B={xTile:t.x,yTile:t.y,dxPixels:v*L-M,dyPixels:d*L-M,hard:!n.optional,partIndex:0,width:h*L+2*M,height:f*L+2*M,angle:a,minLod:c,maxLod:i.C_INFINITY};e.iconColliders.push(B)}}},{key:"getTextPlacement",value:function(e,t,r,n){var a=new(0,u.Point)(e.x,e.y),o=n.rotate*i.C_DEG_TO_RAD,h=n.rotationAlignment===s.RotationAlignment.MAP,y=n.keepUpright,d=n.padding,p=c,g=h?e.angle:0,m=e.segment>=0&&h,_=n.allowOverlap&&n.ignorePlacement?null:[],I=[],b=!m,T=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,k=T,w=S,P=(m||h)&&y,C=n.size/l.SDF_GLYPH_SIZE,A=!1,L=!0,M=!1,B=void 0;try{for(var D,E=t[Symbol.iterator]();!(L=(D=E.next()).done);L=!0){if(D.value.vertical){A=!0;break}}}catch(e){M=!0,B=e}finally{try{L||null==E.return||E.return()}finally{if(M)throw B}}var V,R=0,O=0;if(!m&&A){var F=l.TextShaping.getTextBox(t,n.lineHeight*l.SDF_GLYPH_SIZE);switch(n.anchor){case s.SymbolAnchor.LEFT:R=F.height/2,O=-F.width/2;break;case s.SymbolAnchor.RIGHT:R=-F.height/2,O=F.width/2;break;case s.SymbolAnchor.TOP:R=F.height/2,O=F.width/2;break;case s.SymbolAnchor.BOTTOM:R=-F.height/2,O=-F.width/2;break;case s.SymbolAnchor.TOP_LEFT:R=F.height;break;case s.SymbolAnchor.BOTTOM_LEFT:O=-F.width;break;case s.SymbolAnchor.TOP_RIGHT:O=F.width;break;case s.SymbolAnchor.BOTTOM_RIGHT:R=-F.height}}R+=n.offset[0]*l.SDF_GLYPH_SIZE,O+=n.offset[1]*l.SDF_GLYPH_SIZE;var N=!0,z=!1,G=void 0;try{for(var U,Z=t[Symbol.iterator]();!(N=(U=Z.next()).done);N=!0){var H=U.value,Y=H.glyphMosaicItem;if(Y&&!Y.rect.isEmpty){var j=Y.rect,q=Y.metrics,K=Y.page;if(_&&b){if(void 0!==V&&V!==H.y){var W=void 0,X=void 0,J=void 0,Q=void 0;A?(W=-w+R,X=T+O,J=w-k,Q=S-T):(W=T+R,X=k+O,J=S-T,Q=w-k);var $={xTile:e.x,yTile:e.y,dxPixels:W*C-d,dyPixels:X*C-d,hard:!n.optional,partIndex:1,width:J*C+2*d,height:Q*C+2*d,angle:o,minLod:c,maxLod:i.C_INFINITY};_.push($),T=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,k=T,w=S}V=H.y}var ee=[];if(m){var te=.5*Y.metrics.width,re=(H.x+q.left-4+te)*C*f;if(p=this._placeGlyph(e,p,re,r,e.segment,1,H.vertical,K,ee),y&&(p=this._placeGlyph(e,p,re,r,e.segment,-1,H.vertical,K,ee)),p>=2)break}else ee.push(new v(a,g,g,K,!1)),h&&y&&ee.push(new v(a,g+i.C_PI,g+i.C_PI,K,!1));var ne=H.x+q.left,ae=H.y-l.SDF_GLYPH_BASELINE-q.top,ie=ne+q.width,le=ae+q.height,oe=void 0,se=void 0,ue=void 0,he=void 0,fe=void 0,ce=void 0,ye=void 0,ve=void 0;if(!m&&A)if(H.vertical){var xe=(ne+ie)/2-q.height/2,de=(ae+le)/2+q.width/2;oe=new(0,u.Point)(-de-4+R,xe-4+O),se=new(0,u.Point)(oe.x+j.width,oe.y+j.height),ue=new(0,u.Point)(oe.x,se.y),he=new(0,u.Point)(se.x,oe.y)}else oe=new(0,u.Point)(4-ae+R,ne-4+O),se=new(0,u.Point)(oe.x-j.height,oe.y+j.width),ue=new(0,u.Point)(se.x,oe.y),he=new(0,u.Point)(oe.x,se.y);else oe=new(0,u.Point)(ne-4+R,ae-4+O),se=new(0,u.Point)(oe.x+j.width,oe.y+j.height),ue=new(0,u.Point)(oe.x,se.y),he=new(0,u.Point)(se.x,oe.y);var pe=!0,ge=!1,me=void 0;try{for(var _e,Ie=ee[Symbol.iterator]();!(pe=(_e=Ie.next()).done);pe=!0){var be=_e.value,Te=void 0,Se=void 0,ke=void 0,we=void 0;if(be.alternateVerticalGlyph){if(!fe){var Pe=(ae+le)/2+O;fe=new(0,u.Point)((ne+ie)/2+R-q.height/2-4,Pe+q.width/2+4),ce=new(0,u.Point)(fe.x+j.height,fe.y-j.width),ye=new(0,u.Point)(ce.x,fe.y),ve=new(0,u.Point)(fe.x,ce.y)}Te=fe,Se=ye,ke=ve,we=ce}else Te=oe,Se=ue,ke=he,we=se;var Ce=ae,Ae=le,Le=be.glyphAngle+o;if(0!==Le){var Me=Math.cos(Le),Be=Math.sin(Le);Te=Te.clone(),Se=Se.clone(),ke=ke.clone(),we=we.clone(),Te.rotate(Me,Be),we.rotate(Me,Be),Se.rotate(Me,Be),ke.rotate(Me,Be)}var De=0,Ee=256;if(m&&A?H.vertical?be.alternateVerticalGlyph?(De=32,Ee=96):(De=224,Ee=32):(De=224,Ee=96):(De=192,Ee=64),I.push(new x(Te,ke,Se,we,j,be.labelAngle,De,Ee,be.anchor,be.minzoom,be.maxzoom,be.page)),_&&(!P||this._legible(be.labelAngle)))if(b)ne<T&&(T=ne),Ce<k&&(k=Ce),ie>S&&(S=ie),Ae>w&&(w=Ae);else if(be.minzoom<2){var Ve={xTile:e.x,yTile:e.y,dxPixels:(ne+R)*C-d,dyPixels:(Ce+R)*C-d,hard:!n.optional,partIndex:1,width:(ie-ne)*C+2*d,height:(Ae-Ce)*C+2*d,angle:Le,minLod:be.minzoom,maxLod:be.maxzoom};_.push(Ve)}}}catch(e){ge=!0,me=e}finally{try{pe||null==Ie.return||Ie.return()}finally{if(ge)throw me}}}}}catch(e){z=!0,G=e}finally{try{N||null==Z.return||Z.return()}finally{if(z)throw G}}if(p>=2)return null;if(_&&b){var Re,Oe,Fe,Ne;A?(Re=-w+R,Oe=T+O,Fe=w-k,Ne=S-T):(Re=T+R,Oe=k+O,Fe=S-T,Ne=w-k);var ze={xTile:e.x,yTile:e.y,dxPixels:Re*C-d,dyPixels:Oe*C-d,hard:!n.optional,partIndex:1,width:Fe*C+2*d,height:Ne*C+2*d,angle:o,minLod:c,maxLod:i.C_INFINITY};_.push(ze)}var Ge=new ne(I);return _&&_.length>0&&(Ge.textColliders=_),Ge}},{key:"_legible",value:function(e){var t=(0,i.radToByte)(e);return t<65||t>=193}},{key:"_placeGlyph",value:function(e,t,r,n,a,l,o,s,h){var f=l,c=f<0?(0,i.positiveMod)(e.angle+i.C_PI,i.C_2PI):e.angle,y=0;r<0&&(f*=-1,r*=-1,y=i.C_PI),f>0&&++a;var x=new(0,u.Point)(e.x,e.y),d=n[a],p=i.C_INFINITY;if(n.length<=a)return p;for(;;){var g=d.x-x.x,m=d.y-x.y,_=Math.sqrt(g*g+m*m),I=Math.max(r/_,t),b=g/_,T=m/_,S=(0,i.positiveMod)(Math.atan2(T,b)+y,i.C_2PI);if(h.push(new v(x,c,S,s,!1,I,p)),o&&h.push(new v(x,c,S,s,!0,I,p)),I<=t)return I;x=d.clone();do{if(a+=f,n.length<=a||a<0)return I;d=n[a]}while(x.isEqual(d));var k=d.x-x.x,w=d.y-x.y,P=Math.sqrt(k*k+w*w);k*=_/P,w*=_/P,x.x-=k,x.y-=w,p=I}}}]),e}()})),r.register("1GLf3",(function(e,n){t(e.exports,"SDF_GLYPH_SIZE",(function(){return o})),t(e.exports,"SDF_GLYPH_BASELINE",(function(){return s})),t(e.exports,"TextShaping",(function(){return u}));var a=r("8TSCy"),i=r("jMszt"),l=r("fl9Q8"),o=24,s=17,u=function(){"use strict";function e(t,r,n,i,l,o,s){a.classCallCheck(this,e),this._glyphItems=t,this._maxWidth=r,this._lineHeight=n,this._letterSpacing=i,this._hAnchor=l,this._vAnchor=o,this._justify=s}return a.createClass(e,[{key:"getShaping",value:function(e,t,r){for(var n=this._letterSpacing,a=this._lineHeight,l=this._justify,o=this._maxWidth,s=[],u=0,h=0,f=e.length,c=0;c<f;c++){var y=e.charCodeAt(c),v=r&&(0,i.hasVerticalOrientation)(y),x=void 0,d=!0,p=!1,g=void 0;try{for(var m,_=this._glyphItems[Symbol.iterator]();!(d=(m=_.next()).done);d=!0){if(x=m.value[y])break}}catch(e){p=!0,g=e}finally{try{d||null==_.return||_.return()}finally{if(p)throw g}}s.push({codePoint:y,x:u,y:h,vertical:v,glyphMosaicItem:x}),x&&(u+=x.metrics.advance+n)}var I=u;o>0&&(I=u/Math.max(1,Math.ceil(u/o)));for(var b=e.indexOf("​")>=0,T=[],S=0;S<f-1;S++){var k=s[S].codePoint,w=(0,i.allowsIdeographicBreak)(k);if((0,i.isLineBreak)(k)||w){var P=0;if(10===k)P-=1e4;else if(w&&b)P+=150;else{40!==k&&65288!==k||(P+=50);var C=s[S+1].codePoint;41!==C&&65289!==C||(P+=50)}T.push(this._buildBreak(S+1,s[S].x,I,T,P,!1))}}for(var A=this._optimalBreaks(this._buildBreak(f,u,I,T,0,!0)),L=0,M=t?-a:a,B=0,D=0;D<A.length;D++){for(var E=A[D],V=B;V<E&&(0,i.isWhiteSpace)(s[V].codePoint);)s[V].glyphMosaicItem=null,++V;for(var R=E-1;R>V&&(0,i.isWhiteSpace)(s[R].codePoint);)s[R].glyphMosaicItem=null,--R;if(V<=R){for(var O=s[V].x,F=V;F<=R;F++)s[F].x-=O,s[F].y=h;var N=s[R].x;s[R].glyphMosaicItem&&(N+=s[R].glyphMosaicItem.metrics.advance),L=Math.max(N,L),l&&this._applyJustification(s,V,R)}B=E,h+=M}if(s.length>0){var z=A.length-1,G=(l-this._hAnchor)*L,U=(-this._vAnchor*(z+1)+.5)*a;t&&z&&(U+=z*a);var Z=!0,H=!1,Y=void 0;try{for(var j,q=s[Symbol.iterator]();!(Z=(j=q.next()).done);Z=!0){var K=j.value;K.x+=G,K.y+=U}}catch(e){H=!0,Y=e}finally{try{Z||null==q.return||q.return()}finally{if(H)throw Y}}}return s.filter((function(e){return e.glyphMosaicItem}))}},{key:"_breakScore",value:function(e,t,r,n){var a=(e-t)*(e-t);return n?e<t?a/2:2*a:a+Math.abs(r)*r}},{key:"_buildBreak",value:function(e,t,r,n,a,i){var l=null,o=this._breakScore(t,r,a,i),s=!0,u=!1,h=void 0;try{for(var f,c=n[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var y=f.value,v=t-y.x,x=this._breakScore(v,r,a,i)+y.score;x<=o&&(l=y,o=x)}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}return{index:e,x:t,score:o,previousBreak:l}}},{key:"_optimalBreaks",value:function(e){return e?this._optimalBreaks(e.previousBreak).concat(e.index):[]}},{key:"_applyJustification",value:function(e,t,r){for(var n=e[r],a=n.vertical?o:n.glyphMosaicItem?n.glyphMosaicItem.metrics.advance:0,i=(n.x+a)*this._justify,l=t;l<=r;l++)e[l].x-=i}}],[{key:"getTextBox",value:function(e,t){if(!e.length)return null;var r=1/0,n=1/0,a=0,i=0,l=!0,o=!1,u=void 0;try{for(var h,f=e[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var c=h.value,y=c.glyphMosaicItem.metrics.advance,v=c.x,x=c.y-s,d=v+y,p=x+t;r=Math.min(r,v),a=Math.max(a,d),n=Math.min(n,x),i=Math.max(i,p)}}catch(e){o=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(o)throw u}}return{x:r,y:n,width:a-r,height:i-n}}},{key:"getBox",value:function(e){if(!e.length)return null;var t=1/0,r=1/0,n=0,a=0,i=!0,l=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var h=s.value,f=h.glyphMosaicItem.metrics,c=f.height,y=f.left,v=f.top,x=f.width,d=h.x,p=h.y-(c-Math.abs(v)),g=d+x+y,m=p+c;t=Math.min(t,d),n=Math.max(n,g),r=Math.min(r,p),a=Math.max(a,m)}}catch(e){l=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}return{x:t,y:r,width:n-t,height:a-r}}},{key:"addDecoration",value:function(e,t){var r=e.length;if(0!==r){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,a=e[0].y,i=1;i<r;i++){var o=e[i];if(o.y!==a){var s=e[i-1].x+e[i-1].glyphMosaicItem.metrics.left+e[i-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new(0,l.default)(4,0,4,8),metrics:{width:s-n,height:8,left:0,top:0,advance:0},page:0,code:0}}),a=o.y,n=o.x+o.glyphMosaicItem.metrics.left}}var u=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new(0,l.default)(4,0,4,8),metrics:{width:u-n,height:8,left:0,top:0,advance:0},page:0,code:0}})}}}]),e}()})),r.register("jMszt",(function(e,r){function n(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)}function a(e){return!(e<11904)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=65280&&e<=65519||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543||e>=65040&&e<=65055||e>=42128&&e<=42191||e>=40960&&e<=42127)}function i(e){switch(e){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function l(e){switch(e){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}t(e.exports,"hasVerticalOrientation",(function(){return n})),t(e.exports,"allowsIdeographicBreak",(function(){return a})),t(e.exports,"isLineBreak",(function(){return i})),t(e.exports,"isWhiteSpace",(function(){return l}))})),r.register("ebEEs",(function(e,r){t(e.exports,"DECLUTTER_TILES",(function(){return n})),t(e.exports,"COLLISION_GRID_CELL_SIZE",(function(){return a})),t(e.exports,"DECLUTTER_BUDGET",(function(){return i})),t(e.exports,"FADE_DURATION",(function(){return l}));var n=!0,a=32,i=1.5,l=200})),r.register("iufgU",(function(n,a){t(n.exports,"default",(function(){return I}));var i=r("8TSCy"),l=r("2TvXO"),o=r("acan7"),s=r("10vEZ"),u=r("fb8De"),h=r("94TZX"),f=r("fYnZj"),c=r("JRuJY"),y=r("l9AUc"),v=r("cOPtK"),x=r("8j0AK"),d=r("bnmjq"),p=r("gub9s"),g=r("cXGy9"),m=r("eCSGR"),_=r("bk1Lk"),I=function(){"use strict";function t(e,r,n,a,l){if(i.classCallCheck(this,t),this._pbfTiles={},this._tileClippers={},this._client=n,this._tile=r,l){this._styleLayerUIDs=new Set;var s=!0,u=!1,h=void 0;try{for(var f,c=l[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var y=f.value;this._styleLayerUIDs.add(y)}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}}this._styleRepository=a,this._layers=this._styleRepository.layers;var v=i.slicedToArray(r.tileKey.split("/").map(parseFloat),3),x=v[0],d=v[1],p=v[2];this._level=x;var g=8+Math.max(5*(this._level-14),0),_=!0,I=!1,b=void 0;try{for(var T,S=Object.keys(e)[Symbol.iterator]();!(_=(T=S.next()).done);_=!0){var k=T.value,w=e[k];if(this._pbfTiles[k]=new(0,o.default)(new Uint8Array(w.protobuff),new DataView(w.protobuff)),w.refKey){var P=x-i.slicedToArray(w.refKey.split("/").map(parseFloat),1)[0];if(P>0){var C=(1<<P)-1,A=d&C,L=p&C;this._tileClippers[k]=new(0,m.TileClipper)(P,A,L,8,g)}}this._tileClippers[k]||(this._tileClippers[k]=new(0,m.SimpleBuilder))}}catch(e){I=!0,b=e}finally{try{_||null==S.return||S.return()}finally{if(I)throw b}}}return i.createClass(t,[{key:"_canParseStyleLayer",value:function(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}},{key:"parse",value:function(t){var r=this;return i.asyncToGenerator(e(l).mark((function n(){var a,o,s,h,f,c,y,v,x,d,p,g,m,I;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,u.loadLibtess)(),o=r._initialize(t),s=o.returnedBuckets,r._processLayers(o),r._linkReferences(o),r._filterFeatures(o),h=[],f=new Set,c=function(e,t){f.has(e)||(h.push({name:e,repeat:t}),f.add(e))},y={},v=!0,x=!1,d=void 0,e.prev=4,p=s[Symbol.iterator]();!(v=(g=p.next()).done);v=!0)(m=g.value).getResources(m.tileClipper,c,y);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),x=!0,d=e.t0;case 12:e.prev=12,e.prev=13,v||null==p.return||p.return();case 15:if(e.prev=15,!x){e.next=18;break}throw d;case 18:return e.finish(15);case 19:return e.finish(12);case 20:if(r._tile.status!==_.TileStatus.INVALID){e.next=22;break}return e.abrupt("return",Promise.resolve([]));case 22:return I=r._fetchResources(h,y,t),e.abrupt("return",Promise.all(i.toConsumableArray(I).concat([a])).then((function(){return r._processFeatures(o.returnedBuckets)})));case 24:case"end":return e.stop()}}),n,null,[[4,8,12,20],[13,,15,19]])})))()}},{key:"_initialize",value:function(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}},{key:"_processLayers",value:function(e){for(var t=e.sourceNameToTileData,r=e.layers,n=e.zoom,a=e.sourceNameToTileClipper,i=e.sourceNameToUniqueSourceLayerBuckets,l=e.sourceNameToUniqueSourceLayers,o=e.returnedBuckets,s=e.layerIdToBucket,u=e.referencerUIDToReferencedId,h=r.length-1;h>=0;h--){var f=r[h];if(!(!this._canParseStyleLayer(f.uid)||f.minzoom&&n<Math.floor(f.minzoom)||f.maxzoom&&n>=f.maxzoom||f.type===g.StyleLayerType.BACKGROUND)&&(t[f.source]&&a[f.source])){var c=t[f.source],y=a[f.source],v=f.sourceLayer,x=c[v];if(x){var d=l[f.source];if(d||(d=l[f.source]=new Set),d.add(f.sourceLayer),f.refLayerId)u.set(f.uid,f.refLayerId);else{var p=this._createBucket(f);if(p){p.layerUIDs=[f.uid],p.layerExtent=x.extent,p.tileClipper=y;var m=i[f.source];m||(m=i[f.source]={});var _=m[v];_||(_=m[v]=[]),_.push(p),o.push(p),s[f.id]=p}}}}}}},{key:"_linkReferences",value:function(e){var t=e.layerIdToBucket;e.referencerUIDToReferencedId.forEach((function(e,r){t[e]&&t[e].layerUIDs.push(r)}))}},{key:"_filterFeatures",value:function(e){var t=e.signal,r=e.sourceNameToTileData,n=e.sourceNameToUniqueSourceLayerBuckets,a=e.sourceNameToUniqueSourceLayers,i=10*this._level,l=10*(this._level+1),o=[],u=[],f=!0,c=!1,y=void 0;try{for(var v,x=function(e,t){var r=t.value;a[r].forEach((function(e){o.push(e),u.push(r)}))},d=Object.keys(a)[Symbol.iterator]();!(f=(v=d.next()).done);f=!0)x(0,v)}catch(e){c=!0,y=e}finally{try{f||null==d.return||d.return()}finally{if(c)throw y}}for(var p=0;p<o.length;p++){var g=u[p],m=o[p];if(r[g]&&n[g]){var _=r[g][m],I=n[g][m];if(I&&0!==I.length){if((0,s.isAborted)(t))return;for(var b=_.getData();b.nextTag(2);){var T=b.getMessage(),S=new(0,h.default)(T,_);T.release();var k=S.values;if(k){var w=k._minzoom;if(w&&w>=l)continue;var P=k._maxzoom;if(P&&P<=i)continue}var C=!0,A=!1,L=void 0;try{for(var M,B=I[Symbol.iterator]();!(C=(M=B.next()).done);C=!0){M.value.pushFeature(S)}}catch(e){A=!0,L=e}finally{try{C||null==B.return||B.return()}finally{if(A)throw L}}}}}}}},{key:"_fetchResources",value:function(e,t,r){var n,a,i=[],l=this._tile.getWorkerTileHandler();for(var o in e.length>0&&(n=l.fetchSprites(e,this._client,r),i.push(n)),t){var s=t[o];s.size>0&&(a=l.fetchGlyphs(this._tile.tileKey,o,s,this._client,r),i.push(a))}return i}},{key:"_processFeatures",value:function(e){var t=this,r=e.filter((function(e){return e.hasFeatures()||t._canParseStyleLayer(e.layer.uid)})),n=!0,a=!1,i=void 0;try{for(var l,o=r[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s=l.value;s.processFeatures(s.tileClipper)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}},{key:"_parseTileData",value:function(e){var t={},r=!0,n=!1,a=void 0;try{for(var i,l=Object.keys(e)[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){for(var o=i.value,s=e[o],u={};s.next();)if(3===s.tag()){var h=s.getMessage(),f=new(0,c.default)(h);h.release(),u[f.name]=f}else s.skip();t[o]=u}}catch(e){n=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}return t}},{key:"_createBucket",value:function(e){switch(e.type){case g.StyleLayerType.BACKGROUND:return null;case g.StyleLayerType.FILL:return this._createFillBucket(e);case g.StyleLayerType.LINE:return this._createLineBucket(e);case g.StyleLayerType.CIRCLE:return this._createCircleBucket(e);case g.StyleLayerType.SYMBOL:return this._createSymbolBucket(e)}}},{key:"_createFillBucket",value:function(e){return new(0,x.default)(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new(0,y.FillVertexBuffer)(e.fillMaterial.getStride()),new(0,f.TriangleIndexBuffer),new(0,y.OutlineVertexBuffer)(e.outlineMaterial.getStride()),new(0,f.TriangleIndexBuffer))}},{key:"_createLineBucket",value:function(e){return new(0,d.default)(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new(0,y.LineVertexBuffer)(e.lineMaterial.getStride()),new(0,f.TriangleIndexBuffer))}},{key:"_createCircleBucket",value:function(e){return new(0,v.default)(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new(0,y.CircleVertexBuffer)(e.circleMaterial.getStride()),new(0,f.TriangleIndexBuffer))}},{key:"_createSymbolBucket",value:function(e){var t=this._tile;return new(0,p.default)(e,this._level,new(0,y.SymbolVertexBuffer)(e.iconMaterial.getStride()),new(0,f.TriangleIndexBuffer),new(0,y.SymbolVertexBuffer)(e.textMaterial.getStride()),new(0,f.TriangleIndexBuffer),t.placementEngine,t.getWorkerTileHandler())}}]),t}()})),r.register("94TZX",(function(e,n){t(e.exports,"default",(function(){return s}));var a,i,l=r("8TSCy"),o=r("ljf2P");(i=a||(a={}))[i.moveTo=1]="moveTo",i[i.lineTo=2]="lineTo",i[i.close=7]="close";var s=function(){"use strict";function e(t,r){l.classCallCheck(this,e),this.values={};for(var n=r.keys,a=r.values;t.next();)switch(t.tag()){case 1:this.id=t.getUInt64();break;case 2:for(var i=t.getMessage(),o=this.values;!i.empty();){var s=i.getUInt32(),u=i.getUInt32();o[n[s]]=a[u]}i.release();break;case 3:this.type=t.getUInt32();break;case 4:this._pbfGeometry=t.getMessage();break;default:t.skip()}}return l.createClass(e,[{key:"getGeometry",value:function(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,r,n=this._pbfGeometry;this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var i,l=a.moveTo,s=0,u=0,h=0;!n.empty();){if(0===s){var f=n.getUInt32();l=7&f,s=f>>3}switch(s--,l){case a.moveTo:u+=n.getSInt32(),h+=n.getSInt32(),e?e.moveTo(u,h):(r&&t.push(r),(r=[]).push(new(0,o.Point)(u,h)));break;case a.lineTo:u+=n.getSInt32(),h+=n.getSInt32(),e?e.lineTo(u,h):r.push(new(0,o.Point)(u,h));break;case a.close:e?e.close():r&&!r[0].equals(u,h)&&r.push(r[0].clone());break;default:throw n.release(),new Error("Invalid path operation")}}return e?i=e.result():(r&&t.push(r),i=t),n.release(),this._geometry=i,i}}]),e}()})),r.register("fYnZj",(function(e,n){t(e.exports,"TriangleIndexBuffer",(function(){return l}));var a=r("8TSCy"),i=r("hNthI"),l=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(){return a.classCallCheck(this,r),t.call(this,12)}return a.createClass(r,[{key:"add",value:function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)}}]),r}(i.default);i.default})),r.register("JRuJY",(function(e,n){t(e.exports,"default",(function(){return i}));var a=r("8TSCy"),i=function(){"use strict";function e(t){for(a.classCallCheck(this,e),this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(t.processMessage(e._parseValue));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return a.createClass(e,[{key:"getData",value:function(){return this._pbfLayer}}],[{key:"_parseValue",value:function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}]),e}()})),r.register("l9AUc",(function(e,n){t(e.exports,"LineVertexBuffer",(function(){return o})),t(e.exports,"FillVertexBuffer",(function(){return s})),t(e.exports,"OutlineVertexBuffer",(function(){return u})),t(e.exports,"SymbolVertexBuffer",(function(){return h})),t(e.exports,"CircleVertexBuffer",(function(){return f}));var a=r("8TSCy"),i=r("7P6eh"),l=r("hNthI"),o=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){return a.classCallCheck(this,r),t.call(this,e)}return a.createClass(r,[{key:"add",value:function(e,t,r,n,i,o,s,u,h,f,c,y){var v,x=this.array,d=l.default.i1616to32(e,t);x.push(d);var p=31;d=l.default.i8888to32(Math.round(p*r),Math.round(p*n),Math.round(p*i),Math.round(p*o)),x.push(d),d=l.default.i8888to32(Math.round(p*s),Math.round(p*u),Math.round(p*h),Math.round(p*f)),x.push(d),d=l.default.i1616to32(c,0),x.push(d),y&&(v=x).push.apply(v,a.toConsumableArray(y))}}]),r}(l.default),s=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){return a.classCallCheck(this,r),t.call(this,e)}return a.createClass(r,[{key:"add",value:function(e,t,r){var n,i=this.array;i.push(l.default.i1616to32(e,t)),r&&(n=i).push.apply(n,a.toConsumableArray(r))}}]),r}(l.default),u=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){return a.classCallCheck(this,r),t.call(this,e)}return a.createClass(r,[{key:"add",value:function(e,t,r,n,i,o,s){var u,h=this.array,f=this.index,c=l.default.i1616to32(e,t);h.push(c);return c=l.default.i8888to32(Math.round(15*r),Math.round(15*n),i,o),h.push(c),s&&(u=h).push.apply(u,a.toConsumableArray(s)),f}}]),r}(l.default),h=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){return a.classCallCheck(this,r),t.call(this,e)}return a.createClass(r,[{key:"add",value:function(e,t,r,n,o,s,u,h,f,c,y,v){var x,d=this.array,p=l.default.i1616to32(e,t);d.push(p),p=l.default.i1616to32(Math.round(8*r),Math.round(8*n)),d.push(p),p=l.default.i8888to32(o/4,s/4,h,f),d.push(p),p=l.default.i8888to32(0,(0,i.radToByte)(u),10*c,Math.min(10*y,255)),d.push(p),v&&(x=d).push.apply(x,a.toConsumableArray(v))}}]),r}(l.default),f=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e){return a.classCallCheck(this,r),t.call(this,e)}return a.createClass(r,[{key:"add",value:function(e,t,r,n,i){var o,s=this.array,u=l.default.i1616to32(2*e+r,2*t+n);s.push(u),i&&(o=s).push.apply(o,a.toConsumableArray(i))}}]),r}(l.default)})),r.register("cOPtK",(function(e,n){t(e.exports,"default",(function(){return l}));var a=r("8TSCy"),i=r("acBaq"),l=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e,n,l,o,s){var u;return a.classCallCheck(this,r),(u=t.call(this,e,n,l)).type=i.BucketType.CIRCLE,u._circleVertexBuffer=o,u._circleIndexBuffer=s,a.possibleConstructorReturn(u)}return a.createClass(r,[{key:"circleIndexStart",get:function(){return this._circleIndexStart}},{key:"circleIndexCount",get:function(){return this._circleIndexCount}},{key:"processFeatures",value:function(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;var n=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);var i=!0,l=!1,o=void 0;try{for(var s,u=this._features[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var h=s.value,f=h.getGeometry(e);if(f){var c=n.circleMaterial.encodeAttributes(h,a,n),y=!0,v=!1,x=void 0,d=!0,p=!1,g=void 0;try{for(var m,_=f[Symbol.iterator]();!(d=(m=_.next()).done);d=!0){var I=m.value;if(I)try{for(var b,T=I[Symbol.iterator]();!(y=(b=T.next()).done);y=!0){var S=b.value,k=t.index;t.add(S.x,S.y,0,0,c),t.add(S.x,S.y,0,1,c),t.add(S.x,S.y,1,0,c),t.add(S.x,S.y,1,1,c),r.add(k+0,k+1,k+2),r.add(k+1,k+2,k+3),this._circleIndexCount+=6}}catch(e){v=!0,x=e}finally{try{y||null==T.return||T.return()}finally{if(v)throw x}}}}catch(e){p=!0,g=e}finally{try{d||null==_.return||_.return()}finally{if(p)throw g}}}}}catch(e){l=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._circleIndexStart,t[n++]=this._circleIndexCount,t[n++]=this._circleVertexBuffer.array.length;for(var i=0;i<this._circleVertexBuffer.array.length;i++)r[n++]=this._circleVertexBuffer.array[i];t[n++]=this._circleIndexBuffer.array.length;for(var l=0;l<this._circleIndexBuffer.array.length;l++)t[n++]=this._circleIndexBuffer.array[l];return t.buffer}}]),r}(r("2z8qm").default)})),r.register("2z8qm",(function(e,n){t(e.exports,"default",(function(){return i}));var a=r("8TSCy"),i=function(){"use strict";function e(t,r,n){a.classCallCheck(this,e),this.layerExtent=4096,this._features=[],this.layer=t,this.zoom=r,this._spriteInfo=n,this._filter=t.getFeatureFilter()}return a.createClass(e,[{key:"pushFeature",value:function(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}},{key:"hasFeatures",value:function(){return this._features.length>0}},{key:"getResources",value:function(e,t,r){}}]),e}()})),r.register("8j0AK",(function(e,n){t(e.exports,"default",(function(){return f}));var a=r("8TSCy"),i=r("8IgiO"),l=r("2ndsO"),o=r("fb8De"),s=r("acBaq"),u=r("2z8qm"),h=r("ljf2P"),f=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e,n,i,l,o,u,h){var f;return a.classCallCheck(this,r),(f=t.call(this,e,n,i)).type=s.BucketType.FILL,f._patternMap=new Map,f._fillVertexBuffer=l,f._fillIndexBuffer=o,f._outlineVertexBuffer=u,f._outlineIndexBuffer=h,a.possibleConstructorReturn(f)}return a.createClass(r,[{key:"fillIndexStart",get:function(){return this._fillIndexStart}},{key:"fillIndexCount",get:function(){return this._fillIndexCount}},{key:"outlineIndexStart",get:function(){return this._outlineIndexStart}},{key:"outlineIndexCount",get:function(){return this._outlineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,i=n.getPaintProperty("fill-pattern");if(i){var l=!0,o=!1,s=void 0;if(i.isDataDriven)try{for(var u,h=this._features[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;t(i.getValue(a,f),!0)}}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}else t(i.getValue(a),!0)}}},{key:"processFeatures",value:function(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom,n=t.fillMaterial,a=t.outlineMaterial,i=t.hasDataDrivenFill,l=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var o=t.getPaintProperty("fill-pattern"),s=null==o?void 0:o.isDataDriven,u=!o&&t.getPaintValue("fill-antialias",r);if(t.outlineUsesFillColor){if(u&&!t.hasDataDrivenOpacity){var h=t.getPaintValue("fill-opacity",r),f=t.getPaintValue("fill-opacity",r+1);h<1&&f<1&&(u=!1)}if(u&&!t.hasDataDrivenColor){var c=t.getPaintValue("fill-color",r),y=t.getPaintValue("fill-color",r+1);c[3]<1&&y[3]<1&&(u=!1)}}var v=this._features,x=null==e?void 0:e.validateTessellation,d=!0,p=!1,g=void 0;if(s){var m=[],_=!0,I=!1,b=void 0;try{for(var T,S=v[Symbol.iterator]();!(_=(T=S.next()).done);_=!0){var k=T.value,w=o.getValue(r,k),P=this._spriteInfo[w];if(P&&P.rect){var C=n.encodeAttributes(k,r,t,P),A=u&&l?a.encodeAttributes(k,r,t):[],L=k.getGeometry(e);m.push({ddFillAttributes:C,ddOutlineAttributes:A,page:P.page,geometry:L}),m.sort((function(e,t){return e.page-t.page}));var M=!0,B=!1,D=void 0;try{for(var E,V=m[Symbol.iterator]();!(M=(E=V.next()).done);M=!0){var R=E.value,O=R.ddFillAttributes,F=R.ddOutlineAttributes,N=R.page,z=R.geometry;this._processFeature(z,u,t.outlineUsesFillColor,O,F,x,N)}}catch(e){B=!0,D=e}finally{try{M||null==V.return||V.return()}finally{if(B)throw D}}}}}catch(e){I=!0,b=e}finally{try{_||null==S.return||S.return()}finally{if(I)throw b}}}else try{for(var G,U=v[Symbol.iterator]();!(d=(G=U.next()).done);d=!0){var Z=G.value,H=i?n.encodeAttributes(Z,r,t):null,Y=u&&l?a.encodeAttributes(Z,r,t):null,j=Z.getGeometry(e);this._processFeature(j,u,t.outlineUsesFillColor,H,Y,x)}}catch(e){p=!0,g=e}finally{try{d||null==U.return||U.return()}finally{if(p)throw g}}}},{key:"serialize",value:function(){var e=10;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var i=0;i<this.layerUIDs.length;i++)t[n++]=this.layerUIDs[i];t[n++]=this._fillIndexStart,t[n++]=this._fillIndexCount,t[n++]=this._outlineIndexStart,t[n++]=this._outlineIndexCount;var l=this._patternMap,o=l.size,s=!0,u=!1,h=void 0;if(t[n++]=o,o>0)try{for(var f,c=l[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var y=a.slicedToArray(f.value,2),v=y[0],x=a.slicedToArray(y[1],2),d=x[0],p=x[1];t[n++]=v,t[n++]=d,t[n++]=p}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}t[n++]=this._fillVertexBuffer.array.length;for(var g=0;g<this._fillVertexBuffer.array.length;g++)r[n++]=this._fillVertexBuffer.array[g];t[n++]=this._fillIndexBuffer.array.length;for(var m=0;m<this._fillIndexBuffer.array.length;m++)t[n++]=this._fillIndexBuffer.array[m];t[n++]=this._outlineVertexBuffer.array.length;for(var _=0;_<this._outlineVertexBuffer.array.length;_++)r[n++]=this._outlineVertexBuffer.array[_];t[n++]=this._outlineIndexBuffer.array.length;for(var I=0;I<this._outlineIndexBuffer.array.length;I++)t[n++]=this._outlineIndexBuffer.array[I];return t.buffer}},{key:"_processFeature",value:function(e,t,n,a,i,l,o){if(e){var s=e.length,u=!i||0===i.length;if(t&&(!n||u))for(var h=0;h<s;h++)this._processOutline(e[h],i);for(var f,c=0;c<s;c++){var y=r._area(e[c]);y>32?(void 0!==f&&this._processFill(e,f,a,l,o),f=[c]):y<-32&&void 0!==f&&f.push(c)}void 0!==f&&this._processFill(e,f,a,l,o)}}},{key:"_processOutline",value:function(e,t){var r,n,a,i=this._outlineVertexBuffer,l=this._outlineIndexBuffer,o=l.index,s=new(0,h.Point)(0,0),u=new(0,h.Point)(0,0),f=new(0,h.Point)(0,0),c=-1,y=-1,v=-1,x=-1,d=-1,p=!1,g=e.length;if(!(g<2)){for(var m=e[0],_=e[g-1];g&&_.isEqual(m);)_=e[--g-1];if(!(g-0<2)){for(var I=0;I<g;++I){0===I?(r=e[g-1],n=e[0],a=e[1],s.assignSub(n,r),s.normalize(),s.rightPerpendicular()):(r=n,n=a,a=I!==g-1?e[I+1]:e[0],s.assign(u));var b=this._isClipEdge(r,n);-1===x&&(p=b),u.assignSub(a,n),u.normalize(),u.rightPerpendicular();var T=s.x*u.y-s.y*u.x;f.assignAdd(s,u),f.normalize();var S=-f.x*-s.x+-f.y*-s.y,k=Math.abs(0!==S?1/S:1);k>8&&(k=8),T>=0?(v=i.add(n.x,n.y,s.x,s.y,0,1,t),-1===x&&(x=v),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),y=i.add(n.x,n.y,k*-f.x,k*-f.y,0,-1,t),-1===d&&(d=y),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),c=y,y=v,v=i.add(n.x,n.y,f.x,f.y,0,1,t),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),y=i.add(n.x,n.y,u.x,u.y,0,1,t),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v)):(v=i.add(n.x,n.y,k*f.x,k*f.y,0,1,t),-1===x&&(x=v),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),y=i.add(n.x,n.y,-s.x,-s.y,0,-1,t),-1===d&&(d=y),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),c=y,y=v,v=i.add(n.x,n.y,-f.x,-f.y,0,-1,t),c>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v),(c=i.add(n.x,n.y,-u.x,-u.y,0,-1,t))>=0&&y>=0&&v>=0&&!b&&l.add(c,y,v))}c>=0&&y>=0&&x>=0&&!p&&l.add(c,y,x),c>=0&&x>=0&&d>=0&&!p&&l.add(c,d,x),this._outlineIndexCount+=3*(l.index-o)}}}},{key:"_processFill",value:function(e,t,r,n,a){var s;t.length>1&&(s=[]);var u=0,h=!0,f=!1,c=void 0;try{for(var y,v=t[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var x=y.value;0!==u&&s.push(u),u+=e[x].length}}catch(e){f=!0,c=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw c}}var d=2*u,p=i.default.acquire(),g=!0,m=!1,_=void 0;try{for(var I,b=t[Symbol.iterator]();!(g=(I=b.next()).done);g=!0)for(var T=I.value,S=e[T],k=S.length,w=0;w<k;++w)p.push(S[w].x,S[w].y)}catch(e){m=!0,_=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw _}}var P=(0,l.e)(p,s,2);if(l.e.deviation(p,s,2,P)>0){var C=t.map((function(t){return e[t].length})),A=(0,o.triangulate)(p,C),L=A.buffer,M=A.vertexCount;if(M>0){for(var B=this._fillVertexBuffer.index,D=0;D<M;D++)this._fillVertexBuffer.add(L[2*D],L[2*D+1],r);for(var E=0;E<M;E+=3){var V=B+E;this._fillIndexBuffer.add(V,V+1,V+2)}if(void 0!==a){var R=this._patternMap,O=R.get(a);O?O[1]+=M:R.set(a,[this._fillIndexStart+this._fillIndexCount,M])}this._fillIndexCount+=M}}else{var F=P.length;if(F>0){for(var N=this._fillVertexBuffer.index,z=0;z<d;)this._fillVertexBuffer.add(p[z++],p[z++],r);for(var G=0;G<F;)this._fillIndexBuffer.add(N+P[G++],N+P[G++],N+P[G++]);if(void 0!==a){var U=this._patternMap,Z=U.get(a);Z?Z[1]+=F:U.set(a,[this._fillIndexStart+this._fillIndexCount,F])}this._fillIndexCount+=F}}i.default.release(p)}},{key:"_isClipEdge",value:function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}}],[{key:"_area",value:function(e){for(var t=0,r=e.length-1,n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))}}]),r}(u.default)})),r.register("2ndsO",(function(e,r){t(e.exports,"e",(function(){return l}));var n,a,i={exports:{}};n=i,void 0!==(a=function(){function e(e,a,i){i=i||2;var l,o,u,f,c,v,x,d=a&&a.length,p=d?a[0]*i:e.length,g=t(e,0,p,i,!0),m=[];if(!g||g.next===g.prev)return m;if(d&&(g=function(e,n,a,i){var l,o,u,f=[];for(l=0,o=n.length;l<o;l++)(u=t(e,n[l]*i,l<o-1?n[l+1]*i:e.length,i,!1))===u.next&&(u.steiner=!0),f.push(y(u));for(f.sort(s),l=0;l<f.length;l++)a=r(a=h(f[l],a),a.next);return a}(e,a,g,i)),e.length>80*i){l=u=e[0],o=f=e[1];for(var _=i;_<p;_+=i)(c=e[_])<l&&(l=c),(v=e[_+1])<o&&(o=v),c>u&&(u=c),v>f&&(f=v);x=0!==(x=Math.max(u-l,f-o))?1/x:0}return n(g,m,i,l,o,x),m}function t(e,t,r,n,a){var i,l;if(a===w(e,t,r,n)>0)for(i=t;i<r;i+=n)l=T(i,e[i],e[i+1],l);else for(i=r-n;i>=t;i-=n)l=T(i,e[i],e[i+1],l);if(l&&p(l,l.next)){var o=l.next;S(l),l=o}return l}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!p(n,n.next)&&0!==d(n.prev,n,n.next))n=n.next;else{var a=n.prev;if(S(n),(n=t=a)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,s,u,h,f,y){if(e){!y&&f&&function(e,t,r,n){var a=e;do{null===a.z&&(a.z=c(a.x,a.y,t,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,r,n,a,i,l,o,s,u=1;do{for(r=e,e=null,i=null,l=0;r;){for(l++,n=r,o=0,t=0;t<u&&(o++,n=n.nextZ);t++);for(s=u;o>0||s>0&&n;)0!==o&&(0===s||!n||r.z<=n.z)?(a=r,r=r.nextZ,o--):(a=n,n=n.nextZ,s--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;r=n}i.nextZ=null,u*=2}while(l>1)}(a)}(e,u,h,f);for(var v,x,d=e;e.prev!==e.next;)if(v=e.prev,x=e.next,f?i(e,u,h,f):a(e))t.push(v.i/s),t.push(e.i/s),t.push(x.i/s),S(e),e=x.next,d=x.next;else if((e=x)===d){y?1===y?n(e=l(r(e),t,s),t,s,u,h,f,2):2===y&&o(e,t,s,u,h,f):n(r(e),t,s,u,h,f,1);break}}}function a(e){var t=e.prev,r=e,n=e.next;if(d(t,r,n)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(v(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&d(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function i(e,t,r,n){var a=e.prev,i=e,l=e.next;if(d(a,i,l)>=0)return!1;for(var o=a.x<i.x?a.x<l.x?a.x:l.x:i.x<l.x?i.x:l.x,s=a.y<i.y?a.y<l.y?a.y:l.y:i.y<l.y?i.y:l.y,u=a.x>i.x?a.x>l.x?a.x:l.x:i.x>l.x?i.x:l.x,h=a.y>i.y?a.y>l.y?a.y:l.y:i.y>l.y?i.y:l.y,f=c(o,s,t,r,n),y=c(u,h,t,r,n),x=e.prevZ,p=e.nextZ;x&&x.z>=f&&p&&p.z<=y;){if(x!==e.prev&&x!==e.next&&v(a.x,a.y,i.x,i.y,l.x,l.y,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,p!==e.prev&&p!==e.next&&v(a.x,a.y,i.x,i.y,l.x,l.y,p.x,p.y)&&d(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;x&&x.z>=f;){if(x!==e.prev&&x!==e.next&&v(a.x,a.y,i.x,i.y,l.x,l.y,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;p&&p.z<=y;){if(p!==e.prev&&p!==e.next&&v(a.x,a.y,i.x,i.y,l.x,l.y,p.x,p.y)&&d(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function l(e,t,n){var a=e;do{var i=a.prev,l=a.next.next;!p(i,l)&&g(i,a,a.next,l)&&I(i,l)&&I(l,i)&&(t.push(i.i/n),t.push(a.i/n),t.push(l.i/n),S(a),S(a.next),a=e=l),a=a.next}while(a!==e);return r(a)}function o(e,t,a,i,l,o){var s=e;do{for(var u=s.next.next;u!==s.prev;){if(s.i!==u.i&&x(s,u)){var h=b(s,u);return s=r(s,s.next),h=r(h,h.next),n(s,t,a,i,l,o),void n(h,t,a,i,l,o)}u=u.next}s=s.next}while(s!==e)}function s(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function h(e,t){var n=function(e,t){var r,n=t,a=e.x,i=e.y,l=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var o=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=a&&o>l){if(l=o,o===a){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(a===l)return r;var s,u=r,h=r.x,c=r.y,y=1/0;n=r;do{a>=n.x&&n.x>=h&&a!==n.x&&v(i<c?a:l,i,h,c,i<c?l:a,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(a-n.x),I(n,e)&&(s<y||s===y&&(n.x>r.x||n.x===r.x&&f(r,n)))&&(r=n,y=s)),n=n.next}while(n!==u);return r}(e,t);if(!n)return t;var a=b(n,e),i=r(n,n.next),l=u(a);return r(l,l.next),i=u(i),u(t===n?i:t)}function f(e,t){return d(e.prev,e,t.prev)<0&&d(t.next,e,e.next)<0}function c(e,t,r,n,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function y(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,n,a,i,l,o){return(a-l)*(t-o)-(e-l)*(i-o)>=0&&(e-l)*(n-o)-(r-l)*(t-o)>=0&&(r-l)*(i-o)-(a-l)*(n-o)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&g(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(I(e,t)&&I(t,e)&&function(e,t){var r=e,n=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(d(e.prev,e,t.prev)||d(e,t.prev,t))||p(e,t)&&d(e.prev,e,e.next)>0&&d(t.prev,t,t.next)>0)}function d(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function p(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,r,n){var a=_(d(e,t,r)),i=_(d(e,t,n)),l=_(d(r,n,e)),o=_(d(r,n,t));return a!==i&&l!==o||!(0!==a||!m(e,r,t))||!(0!==i||!m(e,n,t))||!(0!==l||!m(r,e,n))||!(0!==o||!m(r,t,n))}function m(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function I(e,t){return d(e.prev,e,e.next)<0?d(e,t,e.next)>=0&&d(e,e.prev,t)>=0:d(e,t,e.prev)<0||d(e,e.next,t)<0}function b(e,t){var r=new k(e.i,e.x,e.y),n=new k(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=a,a.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function T(e,t,r,n){var a=new k(e,t,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w(e,t,r,n){for(var a=0,i=t,l=r-n;i<r;i+=n)a+=(e[l]-e[i])*(e[i+1]+e[l+1]),l=i;return a}return e.deviation=function(e,t,r,n){var a=t&&t.length,i=a?t[0]*r:e.length,l=Math.abs(w(e,0,i,r));if(a)for(var o=0,s=t.length;o<s;o++){var u=t[o]*r,h=o<s-1?t[o+1]*r:e.length;l-=Math.abs(w(e,u,h,r))}var f=0;for(o=0;o<n.length;o+=3){var c=n[o]*r,y=n[o+1]*r,v=n[o+2]*r;f+=Math.abs((e[c]-e[v])*(e[y+1]-e[c+1])-(e[c]-e[y])*(e[v+1]-e[c+1]))}return 0===l&&0===f?0:Math.abs((f-l)/l)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var l=0;l<t;l++)r.vertices.push(e[a][i][l]);a>0&&(n+=e[a-1].length,r.holes.push(n))}return r},e}())&&(n.exports=a);var l=i.exports})),r.register("bnmjq",(function(e,n){t(e.exports,"default",(function(){return s}));var a=r("8TSCy"),i=r("acBaq"),l=r("2z8qm"),o=r("8DFoJ"),s=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e,n,l,s,f){var c;return a.classCallCheck(this,r),(c=t.call(this,e,n,l)).type=i.BucketType.LINE,c._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},c._patternMap=new Map,c.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},c.tessellationProperties._lineVertexBuffer=s,c.tessellationProperties._lineIndexBuffer=f,c._lineTessellator=new(0,o.LineTessellation)(u(c.tessellationProperties),h(c.tessellationProperties),e.canUseThinTessellation),a.possibleConstructorReturn(c)}return a.createClass(r,[{key:"lineIndexStart",get:function(){return this._lineIndexStart}},{key:"lineIndexCount",get:function(){return this._lineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,i=n.hasDataDrivenLine,l=n.getPaintProperty("line-pattern"),o=n.getPaintProperty("line-dasharray"),s=n.getLayoutProperty("line-cap");if(l||o){var u=(null==s?void 0:s.getValue(a))||0,h=null==s?void 0:s.isDataDriven;if(i){var f=null==l?void 0:l.isDataDriven,c=null==o?void 0:o.isDataDriven;if(!f&&!c)return;var y=!0,v=!1,x=void 0;try{for(var d,p=this._features[Symbol.iterator]();!(y=(d=p.next()).done);y=!0){var g=d.value;t(f?l.getValue(a,g):this._getDashArrayKey(g,a,n,o,h,s,u))}}catch(e){v=!0,x=e}finally{try{y||null==p.return||p.return()}finally{if(v)throw x}}}else if(l)t(l.getValue(a));else if(o){var m=o.getValue(a);t(n.getDashKey(m,u))}}}},{key:"processFeatures",value:function(e){var t,r,n,a,i,l;this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var o=this.layer,s=this.zoom,u=this._features,h=this._tessellationOptions,f=o.hasDataDrivenLine,c=o.lineMaterial;e&&e.setExtent(this.layerExtent);var y,v=o.getPaintProperty("line-pattern"),x=o.getPaintProperty("line-dasharray"),d=null==v?void 0:v.isDataDriven,p=null==x?void 0:x.isDataDriven,g=null!=(t=y=o.getLayoutProperty("line-cap"))&&t.isDataDriven?y:null,m=g?null:o.getLayoutValue("line-cap",s),_=m||0,I=!!g,b=null!=(r=y=o.getLayoutProperty("line-join"))&&r.isDataDriven?y:null,T=b?null:o.getLayoutValue("line-join",s),S=null!=(n=y=o.getLayoutProperty("line-miter-limit"))&&n.isDataDriven?y:null,k=S?null:o.getLayoutValue("line-miter-limit",s),w=null!=(a=y=o.getLayoutProperty("line-round-limit"))&&a.isDataDriven?y:null,P=w?null:o.getLayoutValue("line-round-limit",s),C=null!=(i=y=o.getPaintProperty("line-width"))&&i.isDataDriven?y:null,A=C?null:o.getPaintValue("line-width",s),L=null!=(l=y=o.getPaintProperty("line-offset"))&&l.isDataDriven?y:null,M=L?null:o.getPaintValue("line-offset",s);if(d||p){var B=[],D=!0,E=!1,V=void 0;try{for(var R,O=u[Symbol.iterator]();!(D=(R=O.next()).done);D=!0){var F=R.value,N=d?v.getValue(s,F):this._getDashArrayKey(F,s,o,x,I,g,_),z=this._spriteInfo[N];if(z&&z.rect){var G=c.encodeAttributes(F,s,o,z),U=F.getGeometry(e);B.push({ddAttributes:G,page:z.page,cap:g?g.getValue(s,F):m,join:b?b.getValue(s,F):T,miterLimit:S?S.getValue(s,F):k,roundLimit:w?w.getValue(s,F):P,halfWidth:.5*(C?C.getValue(s,F):A),offset:L?L.getValue(s,F):M,geometry:U})}}}catch(e){E=!0,V=e}finally{try{D||null==O.return||O.return()}finally{if(E)throw V}}B.sort((function(e,t){return e.page-t.page})),h.textured=!0;var Z=!0,H=!1,Y=void 0;try{for(var j,q=B[Symbol.iterator]();!(Z=(j=q.next()).done);Z=!0){var K=j.value,W=K.ddAttributes,X=K.page,J=K.cap,Q=K.join,$=K.miterLimit,ee=K.roundLimit,te=K.halfWidth,re=K.offset,ne=K.geometry;h.capType=J,h.joinType=Q,h.miterLimit=$,h.roundLimit=ee,h.halfWidth=te,h.offset=re,this._processFeature(ne,W,X)}}catch(e){H=!0,Y=e}finally{try{Z||null==q.return||q.return()}finally{if(H)throw Y}}}else{h.textured=!(!v&&!x),h.capType=m,h.joinType=T,h.miterLimit=k,h.roundLimit=P,h.halfWidth=.5*A,h.offset=M;var ae=!0,ie=!1,le=void 0;try{for(var oe,se=u[Symbol.iterator]();!(ae=(oe=se.next()).done);ae=!0){var ue=oe.value,he=f?c.encodeAttributes(ue,s,o):null;g&&(h.capType=g.getValue(s,ue)),b&&(h.joinType=b.getValue(s,ue)),S&&(h.miterLimit=S.getValue(s,ue)),w&&(h.roundLimit=w.getValue(s,ue)),C&&(h.halfWidth=.5*C.getValue(s,ue)),L&&(h.offset=L.getValue(s,ue));var fe=ue.getGeometry(e);this._processFeature(fe,he)}}catch(e){ie=!0,le=e}finally{try{ae||null==se.return||se.return()}finally{if(ie)throw le}}}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var i=0;i<this.layerUIDs.length;i++)t[n++]=this.layerUIDs[i];t[n++]=this._lineIndexStart,t[n++]=this._lineIndexCount;var l=this._patternMap,o=l.size,s=!0,u=!1,h=void 0;if(t[n++]=o,o>0)try{for(var f,c=l[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var y=a.slicedToArray(f.value,2),v=y[0],x=a.slicedToArray(y[1],2),d=x[0],p=x[1];t[n++]=v,t[n++]=d,t[n++]=p}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}t[n++]=this.tessellationProperties._lineVertexBuffer.array.length;for(var g=0;g<this.tessellationProperties._lineVertexBuffer.array.length;g++)r[n++]=this.tessellationProperties._lineVertexBuffer.array[g];t[n++]=this.tessellationProperties._lineIndexBuffer.array.length;for(var m=0;m<this.tessellationProperties._lineIndexBuffer.array.length;m++)t[n++]=this.tessellationProperties._lineIndexBuffer.array[m];return t.buffer}},{key:"_processFeature",value:function(e,t,r){if(e)for(var n=e.length,a=0;a<n;a++)this._processGeometry(e[a],t,r)}},{key:"_processGeometry",value:function(e,t,r){if(!(e.length<2)){for(var n,a,i=e[0],l=1;l<e.length;)(n=e[l].x-i.x)*n+(a=e[l].y-i.y)*a<1e-6?e.splice(l,1):(i=e[l],++l);if(!(e.length<2)){var o=this.tessellationProperties._lineIndexBuffer,s=3*o.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=t,this._lineTessellator.tessellate(e,this._tessellationOptions);var u=3*o.index-s;if(void 0!==r){var h=this._patternMap,f=h.get(r);f?f[1]+=u:h.set(r,[s+this._lineIndexCount,u])}this._lineIndexCount+=u}}}},{key:"_getDashArrayKey",value:function(e,t,r,n,a,i,l){var o=a?i.getValue(t,e):l,s=n.getValue(t,e);return r.getDashKey(s,o)}}]),r}(l.default),u=function(e){return function(t,r,n,a,i,l,o,s,u,h,f){return e._lineVertexBuffer.add(t,r,o,s,n,a,i,l,u,h,f,e._ddValues),e._lineVertexBuffer.index-1}},h=function(e){return function(t,r,n){e._lineIndexBuffer.add(t,r,n)}}})),r.register("gub9s",(function(e,n){t(e.exports,"default",(function(){return d}));var a=r("8TSCy"),i=r("DDYJe"),l=r("1TSdR"),o=r("acBaq"),s=r("7P6eh"),u=r("jXDuw"),h=r("1GLf3"),f=r("2z8qm"),c=r("cXGy9"),y=r("cEWfj"),v=r("ljf2P");function x(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}var d=function(e){"use strict";a.inherits(r,e);var t=a.createSuper(r);function r(e,n,i,l,s,u,h,f){var c;return a.classCallCheck(this,r),(c=t.call(this,e,n,f.getSpriteItems())).type=o.BucketType.SYMBOL,c._markerMap=new Map,c._glyphMap=new Map,c._glyphBufferDataStorage=new Map,c._isIconSDF=!1,c._iconVertexBuffer=i,c._iconIndexBuffer=l,c._textVertexBuffer=s,c._textIndexBuffer=u,c._placementEngine=h,c._workerTileHandler=f,a.possibleConstructorReturn(c)}return a.createClass(r,[{key:"markerPageMap",get:function(){return this._markerMap}},{key:"glyphsPageMap",get:function(){return this._glyphMap}},{key:"symbolInstances",get:function(){return this._symbolInstances}},{key:"getResources",value:function(e,t,n){var a=this.layer,i=this.zoom;e&&e.setExtent(this.layerExtent);var o,s,u,h,f=a.getLayoutProperty("icon-image"),y=a.getLayoutProperty("text-field"),v=a.getLayoutProperty("text-transform"),x=a.getLayoutProperty("text-font"),d=[];f&&!f.isDataDriven&&(o=f.getValue(i)),y&&!y.isDataDriven&&(s=y.getValue(i)),v&&v.isDataDriven||(u=a.getLayoutValue("text-transform",i),v=null),x&&x.isDataDriven||(h=a.getLayoutValue("text-font",i),x=null);var p=!0,g=!1,m=void 0;try{for(var _,I=this._features[Symbol.iterator]();!(p=(_=I.next()).done);p=!0){var b=_.value,T=b.getGeometry(e);if(T&&0!==T.length){var S=void 0,k=void 0;f&&((S=f.isDataDriven?f.getValue(i,b):this._replaceKeys(o,b.values))&&t(S));var w=!1;if(y&&(k=y.isDataDriven?y.getValue(i,b):this._replaceKeys(s,b.values))){switch(k=k.replace(/\\n/g,"\n"),v&&(u=v.getValue(i,b)),u){case c.TextTransform.LOWERCASE:k=k.toLowerCase();break;case c.TextTransform.UPPERCASE:k=k.toUpperCase()}if(r._bidiEngine.hasBidiChar(k)){var P;P="rtl"===r._bidiEngine.checkContextual(k)?"IDNNN":"ICNNN",k=r._bidiEngine.bidiTransform(k,P,"VLYSN"),w=!0}var C=k.length;if(C>0){x&&(h=x.getValue(i,b));var A=!0,L=!1,M=void 0;try{for(var B,D=h[Symbol.iterator]();!(A=(B=D.next()).done);A=!0){var E=B.value,V=n[E];V||(V=n[E]=new Set);for(var R=0;R<C;R++){var O=k.charCodeAt(R);V.add(O)}}}catch(e){L=!0,M=e}finally{try{A||null==D.return||D.return()}finally{if(L)throw M}}}}if(S||k){var F=a.getLayoutValue("symbol-sort-key",i,b),N={feature:b,sprite:S,label:k,rtl:w,geometry:T,hash:(k?(0,l.numericHash)(k):0)^(S?(0,l.numericHash)(S):0),priority:F,textFont:h};d.push(N)}}}}catch(e){g=!0,m=e}finally{try{p||null==I.return||I.return()}finally{if(g)throw m}}this._symbolFeatures=d}},{key:"processFeatures",value:function(e){e&&e.setExtent(this.layerExtent);var t,n=this.layer,a=this.zoom,i=n.getLayoutValue("symbol-placement",a),l=i!==c.SymbolPlacement.POINT,o=n.getLayoutValue("symbol-spacing",a)*u.TILE_PIXEL_RATIO,f=n.getLayoutProperty("icon-image"),d=n.getLayoutProperty("text-field"),p=f?new(0,y.IconLayout)(n,a,l):null,g=d?new(0,y.TextLayout)(n,a,l):null,m=this._workerTileHandler;f&&(t=m.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var _=[],I=1;g&&g.size&&(I=g.size/h.SDF_GLYPH_SIZE);var b=g?g.maxAngle*s.C_DEG_TO_RAD:0,T=g?g.size*u.TILE_PIXEL_RATIO:0,S=!0,k=!1,w=void 0;try{for(var P,C=this,A=function(e,n){var s=n.value,f=void 0;p&&t&&s.sprite&&((f=t[s.sprite])&&f.sdf&&(C._isIconSDF=!0));var y=void 0;f&&p.update(a,s.feature);var x=0,d=s.label;if(d){g.update(a,s.feature);var S=l?g.keepUpright:g.writingMode&&g.writingMode.indexOf(c.TextWritingMode.VERTICAL)>=0,k=.5;switch(g.anchor){case c.SymbolAnchor.TOP_LEFT:case c.SymbolAnchor.LEFT:case c.SymbolAnchor.BOTTOM_LEFT:k=0;break;case c.SymbolAnchor.TOP_RIGHT:case c.SymbolAnchor.RIGHT:case c.SymbolAnchor.BOTTOM_RIGHT:k=1}var w=.5;switch(g.anchor){case c.SymbolAnchor.TOP_LEFT:case c.SymbolAnchor.TOP:case c.SymbolAnchor.TOP_RIGHT:w=0;break;case c.SymbolAnchor.BOTTOM_LEFT:case c.SymbolAnchor.BOTTOM:case c.SymbolAnchor.BOTTOM_RIGHT:w=1}var P=.5;switch(g.justify){case c.TextJustification.AUTO:P=k;break;case c.TextJustification.LEFT:P=0;break;case c.TextJustification.RIGHT:P=1}var A=g.letterSpacing*h.SDF_GLYPH_SIZE,L=l?0:g.maxWidth*h.SDF_GLYPH_SIZE,M=g.lineHeight*h.SDF_GLYPH_SIZE,B=s.textFont.map((function(e){return m.getGlyphItems(e)}));if((y=new(0,h.TextShaping)(B,L,M,A,k,w,P).getShaping(d,s.rtl,S))&&y.length>0){var D=1e30,E=-1e30,V=!0,R=!1,O=void 0;try{for(var F,N=y[Symbol.iterator]();!(V=(F=N.next()).done);V=!0){var z=F.value;D=Math.min(D,z.x),E=Math.max(E,z.x)}}catch(e){R=!0,O=e}finally{try{V||null==N.return||N.return()}finally{if(R)throw O}}x=(E-D+2*h.SDF_GLYPH_SIZE)*I*u.TILE_PIXEL_RATIO}}var G=!0,U=!1,Z=void 0;try{for(var H,Y=s.geometry[Symbol.iterator]();!(G=(H=Y.next()).done);G=!0){var j=H.value,q=[];if(i===c.SymbolPlacement.LINE){if(y&&y.length>0&&g&&g.size){var K=g.size*u.TILE_PIXEL_RATIO*(2+Math.min(2,4*Math.abs(g.offset[1])));j=r._smoothVertices(j,K)}r._pushAnchors(q,j,o,x)}else i===c.SymbolPlacement.LINE_CENTER?r._pushCenterAnchor(q,j):s.feature.type===v.GeometryType.Polygon?r._pushCentroid(q,j):q.push(new(0,u.Anchor)(j[0].x,j[0].y));var W=!0,X=!1,J=void 0;try{for(var Q,$=q[Symbol.iterator]();!(W=(Q=$.next()).done);W=!0){var ee=Q.value;if(!(ee.x<0||ee.x>u.TILE_COORD_SIZE||ee.y<0||ee.y>u.TILE_COORD_SIZE)&&(!(l&&x>0&&g.rotationAlignment===c.RotationAlignment.MAP)||r._honorsTextMaxAngle(j,ee,x,b,T))){var te={shaping:y,line:j,iconMosaicItem:f,anchor:ee,symbolFeature:s,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};_.push(te),C._processFeature(te,p,g)}}}catch(e){X=!0,J=e}finally{try{W||null==$.return||$.return()}finally{if(X)throw J}}}}catch(e){U=!0,Z=e}finally{try{G||null==Y.return||Y.return()}finally{if(U)throw Z}}},L=this._symbolFeatures[Symbol.iterator]();!(S=(P=L.next()).done);S=!0)A(0,P)}catch(e){k=!0,w=e}finally{try{S||null==L.return||L.return()}finally{if(k)throw w}}_.sort(x),this._addPlacedGlyphs(),this._symbolInstances=_}},{key:"serialize",value:function(){var e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=r._symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;var t=new Uint32Array(e),n=new Int32Array(t.buffer),i=new Float32Array(t.buffer),l=0;t[l++]=this.type,t[l++]=this.layerUIDs.length;for(var o=0;o<this.layerUIDs.length;o++)t[l++]=this.layerUIDs[o];t[l++]=this._isIconSDF?1:0,t[l++]=this.markerPageMap.size;var s=!0,u=!1,h=void 0;try{for(var f,c=this.markerPageMap[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var y=a.slicedToArray(f.value,2),v=y[0],x=a.slicedToArray(y[1],2),d=x[0],p=x[1];t[l++]=v,t[l++]=d,t[l++]=p}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}t[l++]=this.glyphsPageMap.size;var g=!0,m=!1,_=void 0;try{for(var I,b=this.glyphsPageMap[Symbol.iterator]();!(g=(I=b.next()).done);g=!0){var T=a.slicedToArray(I.value,2),S=T[0],k=a.slicedToArray(T[1],2),w=k[0],P=k[1];t[l++]=S,t[l++]=w,t[l++]=P}}catch(e){m=!0,_=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw _}}t[l++]=this._iconVertexBuffer.index/4,t[l++]=this._textVertexBuffer.index/4,l=r.serializeSymbols(t,n,i,l,this._symbolInstances),t[l++]=this._iconVertexBuffer.array.length;for(var C=0;C<this._iconVertexBuffer.array.length;C++)n[l++]=this._iconVertexBuffer.array[C];t[l++]=this._iconIndexBuffer.array.length;for(var A=0;A<this._iconIndexBuffer.array.length;A++)t[l++]=this._iconIndexBuffer.array[A];t[l++]=this._textVertexBuffer.array.length;for(var L=0;L<this._textVertexBuffer.array.length;L++)n[l++]=this._textVertexBuffer.array[L];t[l++]=this._textIndexBuffer.array.length;for(var M=0;M<this._textIndexBuffer.array.length;M++)t[l++]=this._textIndexBuffer.array[M];return t.buffer}},{key:"_replaceKeys",value:function(e,t){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))}},{key:"_processFeature",value:function(e,t,r){var n=e.line,a=e.iconMosaicItem,i=e.shaping,l=e.anchor,o=this.zoom,u=this.layer,h=!!a,f=!0;h&&(f=t.optional||!a);var y,v,x=i&&i.length>0,d=!0;if(x&&(d=r.optional),h&&(y=this._placementEngine.getIconPlacement(l,a,t)),(y||f)&&(x&&(v=this._placementEngine.getTextPlacement(l,i,n,r)),v||d)){if(y&&v||(d||f?d||v?f||y||(v=null):y=null:(y=null,v=null)),v){var p=u.hasDataDrivenText?u.textMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._storePlacedGlyphs(e,v.shapes,o,r.rotationAlignment,p),v.textColliders){e.textColliders=v.textColliders;var g=!0,m=!1,_=void 0;try{for(var I,b=v.textColliders[Symbol.iterator]();!(g=(I=b.next()).done);g=!0){var T=I.value;T.minLod=Math.max(o+(0,s.log2)(T.minLod),0),T.maxLod=Math.min(o+(0,s.log2)(T.maxLod),25);var S=T.angle;if(S){var k=Math.cos(S),w=Math.sin(S),P=T.dxPixels*k-T.dyPixels*w,C=T.dxPixels*w+T.dyPixels*k,A=(T.dxPixels+T.width)*k-T.dyPixels*w,L=(T.dxPixels+T.width)*w+T.dyPixels*k,M=T.dxPixels*k-(T.dyPixels+T.height)*w,B=T.dxPixels*w+(T.dyPixels+T.height)*k,D=(T.dxPixels+T.width)*k-(T.dyPixels+T.height)*w,E=(T.dxPixels+T.width)*w+(T.dyPixels+T.height)*k,V=Math.min(P,A,M,D),R=Math.max(P,A,M,D),O=Math.min(C,L,B,E),F=Math.max(C,L,B,E);T.dxPixels=V,T.dyPixels=O,T.width=R-V,T.height=F-O}}}catch(e){m=!0,_=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw _}}}}if(y){var N=u.hasDataDrivenIcon?u.iconMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._addPlacedIcons(e,y.shapes,o,a.page,t.rotationAlignment===c.RotationAlignment.VIEWPORT,N),y.iconColliders){e.iconColliders=y.iconColliders;var z=!0,G=!1,U=void 0;try{for(var Z,H=y.iconColliders[Symbol.iterator]();!(z=(Z=H.next()).done);z=!0){var Y=Z.value;Y.minLod=Math.max(o+(0,s.log2)(Y.minLod),0),Y.maxLod=Math.min(o+(0,s.log2)(Y.maxLod),25);var j=Y.angle;if(j){var q=Math.cos(j),K=Math.sin(j),W=Y.dxPixels*q-Y.dyPixels*K,X=Y.dxPixels*K+Y.dyPixels*q,J=(Y.dxPixels+Y.width)*q-Y.dyPixels*K,Q=(Y.dxPixels+Y.width)*K+Y.dyPixels*q,$=Y.dxPixels*q-(Y.dyPixels+Y.height)*K,ee=Y.dxPixels*K+(Y.dyPixels+Y.height)*q,te=(Y.dxPixels+Y.width)*q-(Y.dyPixels+Y.height)*K,re=(Y.dxPixels+Y.width)*K+(Y.dyPixels+Y.height)*q,ne=Math.min(W,J,$,te),ae=Math.max(W,J,$,te),ie=Math.min(X,Q,ee,re),le=Math.max(X,Q,ee,re);Y.dxPixels=ne,Y.dyPixels=ie,Y.width=ae-ne,Y.height=le-ie}}}catch(e){G=!0,U=e}finally{try{z||null==H.return||H.return()}finally{if(G)throw U}}}}}}},{key:"_addPlacedIcons",value:function(e,t,r,n,a,i){var l=Math.max(r-1,0),o=this._iconVertexBuffer,u=this._iconIndexBuffer,h=this._markerMap,f=!0,c=!1,y=void 0;try{for(var v,x=t[Symbol.iterator]();!(f=(v=x.next()).done);f=!0){var d=v.value,p=a?0:Math.max(r+(0,s.log2)(d.minzoom),l),g=a?25:Math.min(r+(0,s.log2)(d.maxzoom),25);if(!(g<=p)){var m=d.tl,_=d.tr,I=d.bl,b=d.br,T=d.mosaicRect,S=d.labelAngle,k=d.minAngle,w=d.maxAngle,P=d.anchor,C=o.index,A=T.x,L=T.y,M=A+T.width,B=L+T.height,D=o.index;o.add(P.x,P.y,m.x,m.y,A,L,S,k,w,p,g,i),o.add(P.x,P.y,_.x,_.y,M,L,S,k,w,p,g,i),o.add(P.x,P.y,I.x,I.y,A,B,S,k,w,p,g,i),o.add(P.x,P.y,b.x,b.y,M,B,S,k,w,p,g,i),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===D?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([D,4]),u.add(C+0,C+1,C+2),u.add(C+1,C+2,C+3),h.has(n)?h.get(n)[1]+=6:h.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}}catch(e){c=!0,y=e}finally{try{f||null==x.return||x.return()}finally{if(c)throw y}}}},{key:"_addPlacedGlyphs",value:function(){var e=this._textVertexBuffer,t=this._textIndexBuffer,r=this._glyphMap,n=!0,i=!1,l=void 0,o=!0,s=!1,u=void 0;try{for(var h,f=this._glyphBufferDataStorage[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var c=a.slicedToArray(h.value,2),y=c[0],v=c[1];try{for(var x,d=v[Symbol.iterator]();!(n=(x=d.next()).done);n=!0){var p=x.value,g=e.index,m=p.symbolInstance,_=p.ddAttributes,I=e.index;e.add(p.glyphAnchor[0],p.glyphAnchor[1],p.tl[0],p.tl[1],p.xmin,p.ymin,p.labelAngle,p.minAngle,p.maxAngle,p.minLod,p.maxLod,_),e.add(p.glyphAnchor[0],p.glyphAnchor[1],p.tr[0],p.tr[1],p.xmax,p.ymin,p.labelAngle,p.minAngle,p.maxAngle,p.minLod,p.maxLod,_),e.add(p.glyphAnchor[0],p.glyphAnchor[1],p.bl[0],p.bl[1],p.xmin,p.ymax,p.labelAngle,p.minAngle,p.maxAngle,p.minLod,p.maxLod,_),e.add(p.glyphAnchor[0],p.glyphAnchor[1],p.br[0],p.br[1],p.xmax,p.ymax,p.labelAngle,p.minAngle,p.maxAngle,p.minLod,p.maxLod,_),m.textVertexRanges.length>0&&m.textVertexRanges[0][0]+m.textVertexRanges[0][1]===I?m.textVertexRanges[0][1]+=4:m.textVertexRanges.push([I,4]),t.add(g+0,g+1,g+2),t.add(g+1,g+2,g+3),r.has(y)?r.get(y)[1]+=6:r.set(y,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}}catch(e){i=!0,l=e}finally{try{n||null==d.return||d.return()}finally{if(i)throw l}}}}catch(e){s=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(s)throw u}}this._glyphBufferDataStorage.clear()}},{key:"_storePlacedGlyphs",value:function(e,t,r,n,a){var i,l,o,u,h,f,y,v,x,d,p,g=Math.max(r-1,0),m=n===c.RotationAlignment.VIEWPORT,_=!0,I=!1,b=void 0;try{for(var T,S=t[Symbol.iterator]();!(_=(T=S.next()).done);_=!0){var k=T.value;(i=m?0:Math.max(r+(0,s.log2)(k.minzoom),g),(l=m?25:Math.min(r+(0,s.log2)(k.maxzoom),25))<=i)||(o=k.tl,u=k.tr,h=k.bl,f=k.br,y=k.labelAngle,v=k.minAngle,x=k.maxAngle,d=k.anchor,p=k.mosaicRect,this._glyphBufferDataStorage.has(k.page)||this._glyphBufferDataStorage.set(k.page,[]),this._glyphBufferDataStorage.get(k.page).push({glyphAnchor:[d.x,d.y],tl:[o.x,o.y],tr:[u.x,u.y],bl:[h.x,h.y],br:[f.x,f.y],xmin:p.x,ymin:p.y,xmax:p.x+p.width,ymax:p.y+p.height,labelAngle:y,minAngle:v,maxAngle:x,minLod:i,maxLod:l,placementLod:g,symbolInstance:e,ddAttributes:a}))}}catch(e){I=!0,b=e}finally{try{_||null==S.return||S.return()}finally{if(I)throw b}}}}],[{key:"_symbolsSerializationLength",value:function(e){var t=0;t+=1;var r=!0,n=!1,a=void 0;try{for(var i,l=(e||[])[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var o=i.value;t+=4,t+=1;var s=!0,u=!1,h=void 0;try{for(var f,c=o.textColliders[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){f.value;t+=10}}catch(e){u=!0,h=e}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}var y=!0,v=!1,x=void 0;try{for(var d,p=o.iconColliders[Symbol.iterator]();!(y=(d=p.next()).done);y=!0){d.value;t+=10}}catch(e){v=!0,x=e}finally{try{y||null==p.return||p.return()}finally{if(v)throw x}}t+=1,t+=2*o.textVertexRanges.length,t+=1,t+=2*o.iconVertexRanges.length}}catch(e){n=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}return t}},{key:"serializeSymbols",value:function(e,t,r,n,i){i=i||[],t[n++]=i.length;var l=!0,o=!1,s=void 0;try{for(var u,h=i[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;t[n++]=f.anchor.x,t[n++]=f.anchor.y,t[n++]=f.symbolFeature.hash,t[n++]=f.symbolFeature.priority,t[n++]=f.textColliders.length+f.iconColliders.length;var c=!0,y=!1,v=void 0;try{for(var x,d=f.textColliders[Symbol.iterator]();!(c=(x=d.next()).done);c=!0){var p=x.value;t[n++]=p.xTile,t[n++]=p.yTile,t[n++]=p.dxPixels,t[n++]=p.dyPixels,t[n++]=p.hard?1:0,t[n++]=p.partIndex,r[n++]=p.minLod,r[n++]=p.maxLod,t[n++]=p.width,t[n++]=p.height}}catch(e){y=!0,v=e}finally{try{c||null==d.return||d.return()}finally{if(y)throw v}}var g=!0,m=!1,_=void 0;try{for(var I,b=f.iconColliders[Symbol.iterator]();!(g=(I=b.next()).done);g=!0){var T=I.value;t[n++]=T.xTile,t[n++]=T.yTile,t[n++]=T.dxPixels,t[n++]=T.dyPixels,t[n++]=T.hard?1:0,t[n++]=T.partIndex,r[n++]=T.minLod,r[n++]=T.maxLod,t[n++]=T.width,t[n++]=T.height}}catch(e){m=!0,_=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw _}}t[n++]=f.textVertexRanges.length;var S=!0,k=!1,w=void 0;try{for(var P,C=f.textVertexRanges[Symbol.iterator]();!(S=(P=C.next()).done);S=!0){var A=a.slicedToArray(P.value,2),L=A[0],M=A[1];t[n++]=L,t[n++]=M}}catch(e){k=!0,w=e}finally{try{S||null==C.return||C.return()}finally{if(k)throw w}}t[n++]=f.iconVertexRanges.length;var B=!0,D=!1,E=void 0;try{for(var V,R=f.iconVertexRanges[Symbol.iterator]();!(B=(V=R.next()).done);B=!0){var O=a.slicedToArray(V.value,2),F=O[0],N=O[1];t[n++]=F,t[n++]=N}}catch(e){D=!0,E=e}finally{try{B||null==R.return||R.return()}finally{if(D)throw E}}}}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}return n}},{key:"_pushAnchors",value:function(e,t,r,n){r+=n;for(var a=0,i=t.length-1,l=0;l<i;l++)a+=v.Point.distance(t[l],t[l+1]);var o=n||r;if(!(a<=(o*=.5)))for(var h=o/a,f=0,c=-(r=a/Math.max(Math.round(a/r),1))/2,y=t.length-1,x=0;x<y;x++){for(var d=t[x],p=t[x+1],g=p.x-d.x,m=p.y-d.y,_=Math.sqrt(g*g+m*m),I=void 0;c+r<f+_;){var b=((c+=r)-f)/_,T=(0,s.interpolate)(d.x,p.x,b),S=(0,s.interpolate)(d.y,p.y,b);void 0===I&&(I=Math.atan2(m,g)),e.push(new(0,u.Anchor)(T,S,I,x,h))}f+=_}}},{key:"_pushCenterAnchor",value:function(e,t){for(var r=0,n=t.length-1,a=0;a<n;a++)r+=v.Point.distance(t[a],t[a+1]);for(var i=r/2,l=0,o=t.length-1,h=0;h<o;h++){var f=t[h],c=t[h+1],y=c.x-f.x,x=c.y-f.y,d=Math.sqrt(y*y+x*x);if(i<l+d){var p=(i-l)/d,g=(0,s.interpolate)(f.x,c.x,p),m=(0,s.interpolate)(f.y,c.y,p),_=Math.atan2(x,y);return void e.push(new(0,u.Anchor)(g,m,_,h,0))}l+=d}}},{key:"_deviation",value:function(e,t,r){var n=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),a=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(a,n)}},{key:"_honorsTextMaxAngle",value:function(e,t,r,n,a){for(var i=0,l=r/2,o=new(0,v.Point)(t.x,t.y),s=t.segment+1;i>-l;){if(--s<0)return!1;i-=v.Point.distance(e[s],o),o=e[s]}i+=v.Point.distance(e[s],e[s+1]);for(var u=[],h=0,f=e.length;i<l;){var c=e[s],y=void 0,x=s;do{if(++x===f)return!1;y=e[x]}while(y.isEqual(c));var d=void 0,p=x;do{if(++p===f)return!1;d=e[p]}while(d.isEqual(y));var g=this._deviation(c,y,d);for(u.push({deviation:g,distToAnchor:i}),h+=g;i-u[0].distToAnchor>a;)h-=u.shift().deviation;if(Math.abs(h)>n)return!1;i+=v.Point.distance(y,d),s=x}return!0}},{key:"_smoothVertices",value:function(e,t){if(t<=0)return e;var r=e.length;if(r<3)return e;var n=[],a=0,i=0;n.push(0);for(var l=1;l<r;l++){var o=v.Point.distance(e[l],e[l-1]);o>0&&(a+=o,n.push(a),++i!==l&&(e[i]=e[l]))}if((r=i+1)<3)return e;t=Math.min(t,.2*a);var s=e[0].x,u=e[0].y,h=e[r-1].x,f=e[r-1].y,c=v.Point.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y,n[0]-=t,n[r-1]+=t;var y=[];y.push(new(0,v.Point)(s,u));for(var x=1e-6,d=.5*t,p=1;p<r-1;p++){for(var g=0,m=0,_=0,I=p-1;I>=0;I--){var b=d+n[I+1]-n[p];if(b<0)break;var T=n[I+1]-n[I],S=n[p]-n[I]<d?1:b/T;if(S<x)break;var k=S*S,w=S*b-.5*k*T,P=S*T/t,C=e[I+1],A=e[I].x-C.x,L=e[I].y-C.y;g+=P/w*(C.x*S*b+.5*k*(b*A-T*C.x)-k*S*T*A/3),m+=P/w*(C.y*S*b+.5*k*(b*L-T*C.y)-k*S*T*L/3),_+=P}for(var M=p+1;M<r;M++){var B=d-n[M-1]+n[p];if(B<0)break;var D=n[M]-n[M-1],E=n[M]-n[p]<d?1:B/D;if(E<x)break;var V=E*E,R=E*B-.5*V*D,O=E*D/t,F=e[M-1],N=e[M].x-F.x,z=e[M].y-F.y;g+=O/R*(F.x*E*B+.5*V*(B*N-D*F.x)-V*E*D*N/3),m+=O/R*(F.y*E*B+.5*V*(B*z-D*F.y)-V*E*D*z/3),_+=O}y.push(new(0,v.Point)(g/_,m/_))}return y.push(new(0,v.Point)(h,f)),e[0].x=s,e[0].y=u,e[r-1].x=h,e[r-1].y=f,y}},{key:"_pushCentroid",value:function(e,t){var r=4096,n=4096,a=t.length-1,i=0,l=0,o=0,s=t[0].x,h=t[0].y;s>r&&(s=r),s<0&&(s=0),h>n&&(h=n),h<0&&(h=0);for(var f=1;f<a;f++){var c=t[f].x,y=t[f].y,v=t[f+1].x,x=t[f+1].y;c>r&&(c=r),c<0&&(c=0),y>n&&(y=n),y<0&&(y=0),v>r&&(v=r),v<0&&(v=0),x>n&&(x=n),x<0&&(x=0);var d=(c-s)*(x-h)-(v-s)*(y-h);i+=d*(s+c+v),l+=d*(h+y+x),o+=d}i/=3*o,l/=3*o,isNaN(i)||isNaN(l)||e.push(new(0,u.Anchor)(i,l))}}]),r}(f.default);d._bidiEngine=new(0,i.default)})),r.register("bk1Lk",(function(e,r){var n,a;t(e.exports,"TileStatus",(function(){return n})),(a=n||(n={}))[a.INITIALIZED=0]="INITIALIZED",a[a.NO_DATA=1]="NO_DATA",a[a.READY=2]="READY",a[a.MODIFIED=3]="MODIFIED",a[a.INVALID=4]="INVALID"})),r.register("iTfMY",(function(e,r){t(e.exports,"radToByte",(function(){return o})),t(e.exports,"degToByte",(function(){return s})),t(e.exports,"log2",(function(){return u})),t(e.exports,"between",(function(){return h}));Number.POSITIVE_INFINITY;var n=Math.PI,a=128/n,i=1/Math.LN2;function l(e,t){return(e%=t)>=0?e:e+t}function o(e){return l(e*a,256)}function s(e){return l(.7111111111111111*e,256)}function u(e){return Math.log(e)*i}function h(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}))}();
//# sourceMappingURL=WorkerTileHandler.4f07052e.js.map
