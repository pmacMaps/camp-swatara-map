{"mappings":"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","sources":["node_modules/@arcgis/core/layers/GroupLayer.js","node_modules/@arcgis/core/support/tagSymbols.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import i from\"../core/CollectionFlattener.js\";import{loadAll as t}from\"../core/loadAll.js\";import r from\"../core/Logger.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{watch as o,syncAndInitial as l,on as a,sync as n}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{getProperties as d}from\"../core/accessorSupport/utils.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{BlendLayer as m}from\"./mixins/BlendLayer.js\";import{OperationalLayer as u}from\"./mixins/OperationalLayer.js\";import{PortalLayer as b}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as v}from\"./mixins/ScaleRangeLayer.js\";import{layerLookupMap as f}from\"./support/lazyLayerLoader.js\";import{createFlattenedTablesCollection as j}from\"../support/collectionUtils.js\";import{LayersMixin as L}from\"../support/LayersMixin.js\";import{TablesMixin as g}from\"../support/TablesMixin.js\";import{WebSceneTag as _}from\"../support/tagSymbols.js\";import{getLayerJSON as O}from\"../webdoc/support/writeUtils.js\";let w=class extends(m(v(u(b(g(L(s(c)))))))){constructor(e){super(e),this.allLayers=new i({getCollections:()=>[this.layers],getChildrenFunction:e=>\"layers\"in e?e.layers:null}),this.allTables=j(this),this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\"}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([o((()=>{let e=this.parent;for(;e&&\"parent\"in e&&e.parent;)e=e.parent;return e&&_ in e}),(e=>{const i=\"prevent-adding-tables\";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(a((()=>this.tables),\"before-add\",(e=>{e.preventDefault(),r.getLogger(this).errorOnce(\"tables\",\"Tables are not yet supported in a WebScene so they can't be added.\")})),i))}),l),o((()=>this.visible),this._onVisibilityChange.bind(this),n)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}_writeLayers(e,i,t,r){const s=[];if(!e)return s;e.forEach((e=>{const i=O(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);null!=i&&i.layerType&&s.push(i)})),i.layers=s}set portalItem(e){this._set(\"portalItem\",e)}set visibilityMode(e){const i=this._get(\"visibilityMode\")!==e;this._set(\"visibilityMode\",e),i&&this._enforceVisibility(e,this.visible)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Scene Service\"],layerModuleTypeMap:f},e)),Promise.resolve(this)}async loadAll(){return t(this,(e=>{e(this.layers,this.tables)}))}layerAdded(e){e.visible&&\"exclusive\"===this.visibilityMode?this._turnOffOtherLayers(e):\"inherited\"===this.visibilityMode&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer readded to Grouplayer: uid=${e.uid}`):this.addHandles(o((()=>e.visible),(i=>this._onChildVisibilityChange(e,i)),n),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach((i=>{i!==e&&(i.visible=!1)}))}_enforceVisibility(e,i){if(!d(this).initialized)return;const t=this.layers;let r=t.find((e=>e.visible));switch(e){case\"exclusive\":t.length&&!r&&(r=t.at(0),r.visible=!0),this._turnOffOtherLayers(r);break;case\"inherited\":t.forEach((e=>{e.visible=i}))}}_onVisibilityChange(e){\"inherited\"===this.visibilityMode&&this.layers.forEach((i=>{i.visible=e}))}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case\"inherited\":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((e=>e.visible))}};e([p({readOnly:!0,dependsOn:[]})],w.prototype,\"allLayers\",void 0),e([p({readOnly:!0})],w.prototype,\"allTables\",void 0),e([p()],w.prototype,\"fullExtent\",void 0),e([p({json:{read:!0,write:!0}})],w.prototype,\"blendMode\",void 0),e([p({json:{read:!1,write:{ignoreOrigin:!0}}})],w.prototype,\"layers\",void 0),e([h(\"layers\")],w.prototype,\"_writeLayers\",null),e([p({type:[\"GroupLayer\"]})],w.prototype,\"operationalLayerType\",void 0),e([p({json:{origins:{\"web-document\":{read:!1,write:!1}}}})],w.prototype,\"portalItem\",null),e([p()],w.prototype,\"spatialReference\",void 0),e([p({json:{read:!1},readOnly:!0,value:\"group\"})],w.prototype,\"type\",void 0),e([p({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{type:[\"independent\",\"exclusive\"],write:(e,i,t)=>{\"inherited\"!==e&&(i[t]=e)}}}}})],w.prototype,\"visibilityMode\",null),w=e([y(\"esri.layers.GroupLayer\")],w);const M=w;export{M as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst e=Symbol(\"WebScene\");export{e as WebSceneTag};\n"],"names":["$j6uz9","parcelRequire","$e30590ceb30267a8$var$w","$90xN9","BlendLayer","$5lb2Y","ScaleRangeLayer","$ctxhN","OperationalLayer","$54ioU","PortalLayer","$eIEhM","TablesMixin","$8oivY","LayersMixin","$2IJVS","MultiOriginJSONMixin","$iGP99","default","initialize","this","_enforceVisibility","visibilityMode","visible","addHandles","$cc23H","watch","e","parent","$3HRTw","WebSceneTag","i","removeHandles","tables","removeAll","on","preventDefault","$6TszD","getLogger","errorOnce","syncAndInitial","_onVisibilityChange","bind","sync","destroy","allLayers","allTables","_writeLayers","t","r","s","forEach","$enVEV","getLayerJSON","webmap","getLayerJSONFromResourceInfo","layerType","push","layers","portalItem","_set","_get","load","addResolvingPromise","loadFromPortal","supportedTypes","layerModuleTypeMap","$kNV68","layerLookupMap","Promise","resolve","async","$lq7ZL","loadAll","layerAdded","_turnOffOtherLayers","hasHandles","uid","console","error","_onChildVisibilityChange","layerRemoved","$U0q1J","getProperties","initialized","find","length","at","_isAnyLayerVisible","some","constructor","super","$b4dCZ","getCollections","getChildrenFunction","$62RCQ","createFlattenedTablesCollection","fullExtent","operationalLayerType","spatialReference","type","_","$hTI69","property","readOnly","dependsOn","prototype","json","read","write","ignoreOrigin","$g9601","writer","origins","value","$qA6zg","subclass","$e30590ceb30267a8$export$2e2bcd8739ae039","$2b2f3195c1a16d03$export$840e7b8278e27867","Symbol"],"version":3,"file":"GroupLayer.9f530e7b.js.map"}