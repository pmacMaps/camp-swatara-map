!function(){function e(e,r,a,y){Object.defineProperty(e,r,{get:a,set:y,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("99BmW",(function(a,y){e(a.exports,"populateOperationalLayers",(function(){return u}));var t=r("d2yMj");r("2VlWd");var i=r("10vEZ"),n=r("ge5sz"),o=r("iYaGG"),L=r("jOypM"),l=r("fzgSl"),c=r("2TQQP");async function u(e,r,a){if(!r)return;const y=[];for(const e of r){const r=v(e,a);"GroupLayer"===e.layerType?y.push(A(r,e,a)):y.push(r)}const t=await(0,i.eachAlways)(y);for(const r of t)r.value&&e.add(r.value)}const s={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},p={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},d={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},f={ArcGISFeatureLayer:"FeatureLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},M={...d,LinkChartLayer:"LinkChartLayer"},g={...f},T={...I};async function v(e,r){return async function(e,r,a){const y=new e;return y.read(r,a.context),"group"===y.type&&G(r)&&await async function(e,r,a){var y;const t=n.layerLookupMap.FeatureLayer,i=await t(),o=r.featureCollection,L=null==o?void 0:o.showLegend,l=null==o||null===(y=o.layers)||void 0===y?void 0:y.map(((y,t)=>{var n;const o=new i;o.read(y,a);const l={...a,ignoreDefaults:!0};var c;return o.read({id:`${e.id}-sublayer-${t}`,visibility:null===(c=null===(n=r.visibleLayers)||void 0===n?void 0:n.includes(t))||void 0===c||c},l),null!=L&&o.read({showLegend:L},l),o}));e.layers.addMany(null!=l?l:[])}(y,r,a.context),await(0,c.loadStyleRenderer)(y,a.context),y}(await async function(e,r){var a;const y=r.context,t=function(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=p;break;default:r=s}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=T;break;case"tables":r=g;break;default:r=M}break;default:switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=f;break;default:r=d}}return r}(y);let i=e.layerType||e.type;!i&&r&&r.defaultLayerType&&(i=r.defaultLayerType);const c=t[i];let u=c?n.layerLookupMap[c]:n.layerLookupMap.UnknownLayer;if(m(e)){const r=null==y?void 0:y.portal;if(e.itemId){const a=new(0,o.default)({id:e.itemId,portal:r});await a.load();const y=(await(0,l.selectLayerClassPath)(a)).className||"UnknownLayer";u=n.layerLookupMap[y]}}else"ArcGISFeatureLayer"===i?(0,L.isMapNotesLayer)(e)||(0,L.isMarkupLayer)(e)?u=n.layerLookupMap.MapNotesLayer:(0,L.isRouteLayer)(e)?u=n.layerLookupMap.RouteLayer:G(e)&&(u=n.layerLookupMap.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?u=n.layerLookupMap.WMTSLayer:"WFS"===i&&"2.0.0"!==(null===(a=e.wfsInfo)||void 0===a?void 0:a.version)&&(u=n.layerLookupMap.UnsupportedLayer);return u()}(e,r),e,r)}function G(e){var r,a,y;return"ArcGISFeatureLayer"===e.layerType&&!m(e)&&(null!==(y=null===(r=e.featureCollection)||void 0===r||null===(a=r.layers)||void 0===a?void 0:a.length)&&void 0!==y?y:0)>1}function m(e){return"Feature Collection"===e.type}async function A(e,r,a){const y=new(0,t.default),i=u(y,Array.isArray(r.layers)?r.layers:[],a);try{const r=await e;try{if(await i,"group"===r.type)return r.layers.addMany(y),r}catch(e){r.destroy();for(const e of y)e.destroy();throw e}}catch(e){throw e}}})),r.register("jOypM",(function(r,a){function y(e){return n(e,"notes")}function t(e){return n(e,"markup")}function i(e){return n(e,"route")}function n(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}e(r.exports,"isMapNotesLayer",(function(){return y})),e(r.exports,"isMarkupLayer",(function(){return t})),e(r.exports,"isRouteLayer",(function(){return i}))}))}();
//# sourceMappingURL=layersCreator.6b5e0366.js.map
