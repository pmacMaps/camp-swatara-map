!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("alzOM",(function(n,r){e(n.exports,"loadGLTFMesh",(function(){return V}));var o=t("jgs9n"),u=t("9pNSx"),s=t("edmn4"),i=t("iVfa0"),a=t("j3x2p"),c=t("gnwu9"),l=t("5YMIf"),f=t("iLaO9"),d=t("lqmgd"),p=t("4aGER"),m=t("iJpq3"),x=t("jZY6k"),g=t("9VOjl"),T=t("YI2am"),y=t("hhwnq"),O=t("cUsSX"),w=t("eKMts"),b=t("4pnUn"),B=t("cZCWI"),h=t("h7U64"),v=t("fmpb6"),M=t("gn1MW"),E=t("lHcHb"),C=t("8JzMA"),N=t("fxkX0"),A=t("6ma5C"),D=t("fVcSp");async function V(e,t,n){var r;const a={...n,useTransform:null===(r=null==n?void 0:n.useTransform)||void 0===r||r},c=new(0,B.DefaultLoadingContext)(function(e){const t=null==e?void 0:e.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{const o=t(e),s="image"===n?"image":"binary"===n?"array-buffer":"json";return(await(0,u.default)(o,{responseType:s,signal:null!=r?r.signal:null})).data}}:null}(a)),d=(await(0,h.loadGLTF)(c,t,a,!0)).model,y=d.lods.shift(),O=new Map,v=new Map;d.textures.forEach(((e,t)=>O.set(t,function(e){return new(0,m.default)({data:((0,M.isEncodedMeshTexture)(e.data),e.data),wrap:U(e.parameters.wrap)})}(e)))),d.materials.forEach(((e,t)=>v.set(t,function(e,t){var n;const r=new(0,o.default)(function(e,t){return(0,f.f)(_(e[0]),_(e[1]),_(e[2]),t)}(e.color,e.opacity)),u=e.emissiveFactor?new(0,o.default)(function(e){return(0,l.f)(_(e[0]),_(e[1]),_(e[2]))}(e.emissiveFactor)):null,s=e=>e?new(0,x.default)({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,i.rad2deg)(null!==(n=e.rotation)&&void 0!==n?n:0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new(0,p.default)({color:r,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:u,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:R(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:s(e.colorTextureTransform),normalTextureTransform:s(e.normalTextureTransform),occlusionTextureTransform:s(e.occlusionTextureTransform),emissiveTextureTransform:s(e.emissiveTextureTransform),metallicRoughnessTextureTransform:s(e.metallicRoughnessTextureTransform)})}(e,O))));const E=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,u=[];for(const i of e.parts){const{attributes:{position:e,normal:a,color:c,tangent:l,texCoord0:f}}=i,d=`\n      ${S(e,r)}/\n      ${S(a,r)}/\n      ${S(c,r)}/\n      ${S(l,r)}/\n      ${S(f,r)}/\n      ${L(i.transform)}\n    `;let p=!1;const m=(0,s.getOrCreateMapValue)(o,d,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),a&&(n.normal=!0),c&&(n.color=!0),l&&(n.tangent=!0),f&&(n.texCoord0=!0),u.push({gltf:i,writeVertices:p,region:m})}return{vertexAttributes:{position:(0,w.createBuffer)(T.BufferViewVec3f64,t),normal:n.normal?(0,w.createBuffer)(T.BufferViewVec3f,t):null,tangent:n.tangent?(0,w.createBuffer)(T.BufferViewVec4f,t):null,color:n.color?(0,w.createBuffer)(T.BufferViewVec4u8,t):null,texCoord0:n.texCoord0?(0,w.createBuffer)(T.BufferViewVec2f,t):null},parts:u,components:[]}}(y);for(const e of E.parts)I(E,e,v);const{position:C,normal:N,tangent:A,color:D,texCoord0:V}=E.vertexAttributes,k={position:C.typedBuffer,normal:null!=N?N.typedBuffer:null,tangent:null!=A?A.typedBuffer:null,uv:null!=V?V.typedBuffer:null,color:null!=D?D.typedBuffer:null},F=(0,b.georeferenceByTransform)(k,e,a);return{transform:F.transform,vertexSpace:F.vertexSpace,components:E.components,spatialReference:e.spatialReference,vertexAttributes:new(0,g.MeshVertexAttributes)({position:F.vertexAttributes.position,normal:F.vertexAttributes.normal,tangent:F.vertexAttributes.tangent,color:k.color,uv:k.uv})}}function S(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,s.getOrCreateMapValue)(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function L(e){return null!=e?e.toString():"-"}function I(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:u,texCoord0:s}=e.vertexAttributes,l=t.region.start,{attributes:f,transform:d}=t.gltf,p=f.position.count;if((0,y.c)(n.slice(l,p),f.position,d),null!=f.normal&&null!=r){const e=(0,a.b)((0,c.c)(),d),t=r.slice(l,p);(0,y.b)(t,f.normal,e),(0,i.hasScaling)(e)&&(0,y.d)(t,t)}else null!=r&&(0,N.f)(r,0,0,1,{dstIndex:l,count:p});if(null!=f.tangent&&null!=o){const e=(0,a.b)((0,c.c)(),d),t=o.slice(l,p);(0,O.a)(t,f.tangent,e),(0,i.hasScaling)(e)&&(0,O.n)(t,t)}else null!=o&&(0,A.f)(o,0,0,1,1,{dstIndex:l,count:p});if(null!=f.texCoord0&&null!=s?(0,D.a)(s.slice(l,p),f.texCoord0):null!=s&&(0,D.f)(s,0,0,{dstIndex:l,count:p}),null!=f.color&&null!=u){const e=f.color,t=u.slice(l,p);if(4===e.elementCount)e instanceof T.BufferViewVec4f?(0,O.b)(t,e,255):e instanceof T.BufferViewVec4u8?(0,A.a)(t,e):e instanceof T.BufferViewVec4u16&&(0,O.b)(t,e,1/256);else{(0,A.f)(t,255,255,255,255);const n=T.BufferViewVec3u8.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof T.BufferViewVec3f?(0,y.e)(n,e,255):e instanceof T.BufferViewVec3u8?(0,N.a)(n,e):e instanceof T.BufferViewVec3u16&&(0,y.e)(n,e,1/256)}}else null!=u&&(0,A.f)(u.slice(l,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:u,material:s}=t.gltf;let l=(0,v.convertPrimitiveToTriangles)(r||o.position.count,u);const f=t.region.start;if(f){const e=new Uint32Array(l);for(let t=0;t<l.length;t++)e[t]+=f;l=e}e.components.push(new(0,d.default)({faces:l,material:n.get(s),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function R(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function U(e){return{horizontal:k(e.s),vertical:k(e.t)}}function k(e){switch(e){case C.TextureWrapMode.CLAMP_TO_EDGE:return"clamp";case C.TextureWrapMode.MIRRORED_REPEAT:return"mirror";case C.TextureWrapMode.REPEAT:return"repeat"}}function _(e){return e**(1/E.COLOR_GAMMA)*255}})),t.register("eKMts",(function(n,r){e(n.exports,"createBuffer",(function(){return u}));var o=t("2TwbA");t("iX8bw"),t("6ynst"),t("l8Rt5"),t("fVcSp"),t("fxkX0"),t("6ma5C");function u(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,o.elementTypeSize)(e.ElementType)))}})),t.register("2TwbA",(function(t,n){function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}e(t.exports,"elementTypeSize",(function(){return r}))})),t.register("iX8bw",(function(e,t){Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,s=t.typedBufferStride,i=n?n.count:t.count;let a=(n&&n.dstIndex?n.dstIndex:0)*o,c=(n&&n.srcIndex?n.srcIndex:0)*s;for(let e=0;e<i;++e){for(let e=0;e<9;++e)r[a+e]=u[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"}))})),t.register("6ynst",(function(e,t){Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,s=t.typedBufferStride,i=n?n.count:t.count;let a=(n&&n.dstIndex?n.dstIndex:0)*o,c=(n&&n.srcIndex?n.srcIndex:0)*s;for(let e=0;e<i;++e){for(let e=0;e<16;++e)r[a+e]=u[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"}))})),t.register("gn1MW",(function(n,r){e(n.exports,"EncodedMeshTexture",(function(){return u})),e(n.exports,"isEncodedMeshTexture",(function(){return s})),e(n.exports,"jsonFromBinaryData",(function(){return i})),e(n.exports,"imageFromBinaryData",(function(){return a}));var o=t("1EDDv");class u{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.TextureEncodingMimeType.KTX2_ENCODING}}function s(e){return"encoded-mesh-texture"===(null==e?void 0:e.type)}async function i(e){return new Promise(((t,n)=>{const r=new Blob([e]),o=new FileReader;o.onload=()=>{const e=o.result;t(JSON.parse(e))},o.onerror=e=>{n(e)},o.readAsText(r)}))}async function a(e,t){return t===o.TextureEncodingMimeType.KTX2_ENCODING?new u(e):new Promise(((n,r)=>{const o=new Blob([e],{type:t}),u=URL.createObjectURL(o),s=new Image,i=()=>{URL.revokeObjectURL(u),"decode"in s?s.decode().then((()=>n(s)),(()=>n(s))).then(c):(n(s),c())},a=e=>{URL.revokeObjectURL(u),r(e),c()},c=()=>{s.removeEventListener("load",i),s.removeEventListener("error",a)};s.addEventListener("load",i),s.addEventListener("error",a),s.src=u}))}})),t.register("1EDDv",(function(t,n){var r,o,u,s,i,a,c,l,f,d,p;e(t.exports,"CullFaceOptions",(function(){return r})),e(t.exports,"DepthTestFunction",(function(){return o})),e(t.exports,"ResourceState",(function(){return s})),e(t.exports,"StencilBits",(function(){return i})),e(t.exports,"Object3DState",(function(){return a})),e(t.exports,"ValidationState",(function(){return c})),e(t.exports,"AlphaDiscardMode",(function(){return l})),e(t.exports,"TextureEncodingMimeType",(function(){return d})),(p=r||(r={}))[p.None=0]="None",p[p.Front=1]="Front",p[p.Back=2]="Back",p[p.COUNT=3]="COUNT",function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(o||(o={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(u||(u={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(s||(s={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(i||(i={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee",e[e.COUNT=2]="COUNT"}(a||(a={})),function(e){e[e.CHANGED=0]="CHANGED",e[e.UNCHANGED=1]="UNCHANGED"}(c||(c={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(l||(l={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(f||(f={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(d||(d={}))}))}();
//# sourceMappingURL=loadGLTFMesh.fac5f517.js.map
