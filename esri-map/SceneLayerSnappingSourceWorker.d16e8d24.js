!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("1Qab8",(function(n,r){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(n.exports,"default",(function(){return T}));var o=t("7eJjO"),s=t("10vEZ");t("jHOLN"),t("iJAIC"),t("lNwWH"),t("2VlWd"),t("kyj08");var u=t("fcwIv"),c=t("e4Xv2"),a=t("5YMIf"),f=t("cFPW4"),d=t("8hg3f"),l=t("aeKPg"),h=t("prRAE"),_=t("3XDhw");let p=class{async fetchCandidates(e,t){await Promise.resolve(),(0,s.throwIfAborted)(t),await this._ensureEdgeLocations(e,t);const n=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,n),n.length<_.MAX_CANDIDATE_COUNT)),e.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(e,t){const n=[];if(this._components.forEachNeighbor((e=>{if(null==e.info){const{id:t,uid:r}=e;n.push({id:t,uid:r})}return!0}),e.bounds),!n.length)return;const r={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,null!=t?t:{});for(const e of i.components)this._setFetchEdgeLocations(e)}async add(e){const t=new m(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((n=>(n.component===t&&e.push(n),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const t=this._idToComponent.get(e.id);if(null==t||e.uid!==t.uid)return;const n=h.extractComponentsEdgeLocationsLayout.createView(e.locations),r=new Array(n.count),i=(0,a.c)(),o=(0,a.c)();for(let s=0;s<n.count;s++){n.position0.getVec(s,i),n.position1.getVec(s,o);const u=(0,_.boundsFromEdge)(i,o,e.origin),c=new g(t,s,u);r[s]=c}this._edges.add(r);const{objectIds:s,origin:u}=e;t.info={locations:n,objectIds:s,origin:u}}_addCandidates(e,t,n){const{info:r}=t.component,{origin:i,objectIds:o}=r,s=r.locations,u=s.position0.getVec(t.index,this._tmpP1),a=s.position1.getVec(t.index,this._tmpP2);(0,c.a)(u,u,i),(0,c.a)(a,a,i);const f=o[s.componentIndex.get(t.index)];this._addEdgeCandidate(e,f,u,a,n),this._addVertexCandidate(e,f,u,n),this._addVertexCandidate(e,f,a,n)}_addEdgeCandidate(e,t,n,r,i){if(!e.returnEdge)return;const o=(0,d.g)(e.bounds),s=(0,f.fromPoints)(n,r,this._tmpLineSegment),u=(0,f.projectPoint)(s,o,this._tmpP3);(0,d.l)(e.bounds,u)&&i.push({type:"edge",objectId:t,target:(0,a.a)(u),distance:(0,c.i)(o,u),start:(0,a.a)(n),end:(0,a.a)(r)})}_addVertexCandidate(e,t,n,r){if(!e.returnVertex)return;const i=(0,d.g)(e.bounds);(0,d.l)(e.bounds,n)&&r.push({type:"vertex",objectId:t,target:(0,a.a)(n),distance:(0,c.i)(i,n)})}constructor(){this._idToComponent=new Map,this._components=new(0,l.default)((e=>e.bounds)),this._edges=new(0,l.default)((e=>e.bounds)),this._tmpLineSegment=(0,f.create)(),this._tmpP1=(0,a.c)(),this._tmpP2=(0,a.c)(),this._tmpP3=(0,a.c)(),this.remoteClient=null}};p=(0,o._)([(0,u.subclass)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],p);const T=p;class m{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++m.uid}}m.uid=0;class g{constructor(e,t,n){this.component=e,this.index=t,this.bounds=n}}})),t.register("cFPW4",(function(n,r){e(n.exports,"create",(function(){return a})),e(n.exports,"fromValues",(function(){return f})),e(n.exports,"fromPoints",(function(){return d})),e(n.exports,"distance2",(function(){return l})),e(n.exports,"projectPoint",(function(){return h}));var i=t("iVfa0"),o=t("jubE1"),s=t("e4Xv2"),u=t("5YMIf"),c=t("4Tl7p");function a(e){return e?{origin:(0,u.a)(e.origin),vector:(0,u.a)(e.vector)}:{origin:(0,u.c)(),vector:(0,u.c)()}}function f(e,t,n=a()){return(0,s.c)(n.origin,e),(0,s.c)(n.vector,t),n}function d(e,t,n=a()){return(0,s.c)(n.origin,e),(0,s.b)(n.vector,t,e),n}function l(e,t){const n=(0,s.b)(c.sv3d.get(),t,e.origin),r=(0,s.e)(e.vector,n),o=(0,s.e)(e.vector,e.vector),u=(0,i.clamp)(r/o,0,1),a=(0,s.b)(c.sv3d.get(),(0,s.g)(c.sv3d.get(),e.vector,u),n);return(0,s.e)(a,a)}function h(e,t,n){return function(e,t,n,r,o){const{vector:u,origin:a}=e,f=(0,s.b)(c.sv3d.get(),t,a),d=(0,s.e)(u,f)/(0,s.p)(u);return(0,s.g)(o,u,(0,i.clamp)(d,n,r)),(0,s.a)(o,o,e.origin)}(e,t,0,1,n)}(0,u.c)(),(0,u.c)(),new(0,o.ObjectStack)((()=>a()))})),t.register("aeKPg",(function(n,r){e(n.exports,"default",(function(){return D}));var i,o,s=t("7Pyz4"),u=t("6v7Z0"),c=t("e4Xv2"),a=t("5YMIf"),f=t("a2Ayb"),d=t("8lK3H"),l=t("8hg3f"),h=t("cWcfE");class _{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),p.clearPool(),w[0]=null,x.prune(),C.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const n=p.acquire();for(let r=0;r<t;r++){const t=e[r];this._isDegenerate(t)?this._degenerateObjects.add(t):(n.init(this._root),this._add(t,n))}p.release(n)}remove(e,t=null){this._objectCount-=e.length;const n=p.acquire();for(const r of e){const e=null!=t?t:(0,l.h)(this.objectToBoundingSphere(r),M);b(e[3])?(n.init(this._root),this._remove(r,e,n)):this._degenerateObjects.delete(r)}p.release(n),this._shrink()}update(e,t){if(!b(t[3])&&this._isDegenerate(e))return;const n=function(e){return w[0]=e,w}(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const r=(0,d.wrap)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(r,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(r,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(r,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,r){const i=(0,d.wrap)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,r))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,r)&&n(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n,r=(()=>!0),i=1/0){let o=1/0,s=1/0,u=null;const a=E(e,t),d=c=>{if(--i,!r(c))return;const a=this.objectToBoundingSphere(c);if(!(0,f.intersectsSphere)(n,a))return;const d=O(e,t,(0,l.g)(a)),h=d-a[3],_=d+a[3];h<o&&(o=h,s=_,u=c)};return this._forEachNodeDepthOrdered(this._root,(r=>{if(i<=0||!(0,f.intersectsSphere)(n,r.bounds))return!1;if((0,c.g)(F,a,r.halfSize),(0,c.a)(F,F,r.bounds),O(e,t,F)>s)return!1;const o=r.node;return o.terminals.forAll((e=>d(e))),null!==o.residents&&o.residents.forAll((e=>d(e))),!0}),e,t),u}forEachInDepthRange(e,t,n,r,i,o,s){let u=-1/0,a=1/0;const d={setRange:e=>{n===_.DepthOrder.FRONT_TO_BACK?(u=Math.max(u,e.near),a=Math.min(a,e.far)):(u=Math.max(u,-e.far),a=Math.min(a,-e.near))}};d.setRange(r);const h=O(t,n,e),p=E(t,n),T=E(t,-n),m=e=>{if(!s(e))return;const r=this.objectToBoundingSphere(e),c=(0,l.g)(r),_=O(t,n,c)-h,p=_-r[3],T=_+r[3];p>a||T<u||!(0,f.intersectsSphere)(o,r)||i(e,d)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,f.intersectsSphere)(o,e.bounds))return!1;if((0,c.g)(F,p,e.halfSize),(0,c.a)(F,F,e.bounds),O(t,n,F)-h>a)return!1;if((0,c.g)(F,T,e.halfSize),(0,c.a)(F,F,e.bounds),O(t,n,F)-h<u)return!1;const r=e.node;return r.terminals.forAll((e=>m(e))),null!==r.residents&&r.residents.forAll((e=>m(e))),!0}),t,n)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const n=(0,l.a)(t),r=(0,l.g)(t),i=t=>{const i=this.objectToBoundingSphere(t),o=(0,l.a)(i),s=n+o;return!((0,c.d)((0,l.g)(i),r)-s*s<=0)||e(t)};let o=!0;const s=e=>{o&&(o=i(e))};this._forEachNode(this._root,(e=>{const t=(0,l.a)(e.bounds),i=n+t;if((0,c.d)((0,l.g)(e.bounds),r)-i*i>0)return!1;const u=e.node;return u.terminals.forAll(s),o&&null!==u.residents&&u.residents.forAll(s),o})),o&&this.forEachDegenerateObject(s)}_intersectsNode(e,t){return g(t.bounds,2*-t.halfSize,S),g(t.bounds,2*t.halfSize,B),(0,h.rayBoxTest)(e.origin,e.direction,S,B)}_intersectsNodeWithOffset(e,t,n){return g(t.bounds,2*-t.halfSize,S),g(t.bounds,2*t.halfSize,B),n.applyToMinMax(S,B),(0,h.rayBoxTest)(e.origin,e.direction,S,B)}_intersectsObject(e,t){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,l.j)(n,e)}_intersectsObjectWithOffset(e,t,n){const r=this.objectToBoundingSphere(t);return!(r[3]>0)||(0,l.j)(n.applyToBoundingSphere(r),e)}_forEachNode(e,t){let n=p.acquire().init(e);const r=[n];for(;0!==r.length;){if(n=r.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++)n.node.children[e]&&r.push(p.acquire().init(n).advance(e));p.release(n)}}_forEachNodeDepthOrdered(e,t,n,r=_.DepthOrder.FRONT_TO_BACK){let i=p.acquire().init(e);const o=[i];for(function(e,t,n){if(!C.length)for(let e=0;e<8;++e)C.push({index:0,distance:0});for(let n=0;n<8;++n){const r=N[n];C.data[n].index=n,C.data[n].distance=O(e,t,r)}C.sort(((e,t)=>e.distance-t.distance));for(let e=0;e<8;++e)n[e]=C.data[e].index}(n,r,j);0!==o.length;){if(i=o.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=j[e];i.node.children[t]&&o.push(p.acquire().init(i).advance(t))}p.release(i)}}_remove(e,t,n){x.clear();const r=n.advanceTo(t,((e,t)=>{x.push(e.node),x.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(let e=x.length-2;e>=0;e-=2){const t=x.data[e],n=x.data[e+1];if(!this._purge(t,n))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new(0,u.default)({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const r=p.acquire().init(e);this._add(t.at(n),r),p.release(r)}}_grow(e,t){if(0!==t&&(A(e,t,(e=>this.objectToBoundingSphere(e)),y),b(y[3])&&!this._fitsInsideTree(y)))if(this._nodeIsEmpty(this._root.node))(0,l.h)(y,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(y);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(y,e):this._growRootAsSubNode(e),p.release(e)}}_rebuildTree(e,t){(0,c.c)(v,t.bounds),v[3]=t.halfSize,A([e,v],2,(e=>e),L);const n=p.acquire().init(this._root);this._root.initFrom(null,L,L[3]),this._root.increaseHalfSize(1.25),this._forEachNode(n,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),p.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let r=-1/0;const i=this._root.bounds,o=this._root.halfSize;for(let e=0;e<3;e++){const s=i[e]-o-(n[e]-t),u=n[e]+t-(i[e]+o),c=Math.max(0,Math.ceil(s/(2*o))),a=Math.max(0,Math.ceil(u/(2*o)))+1,f=2**Math.ceil(Math.log(c+a)*Math.LOG2E);r=Math.max(r,f),P[e].min=c,P[e].max=a}for(let e=0;e<3;e++){let t=P[e].min,n=P[e].max;const s=(r-(t+n))/2;t+=Math.ceil(s),n+=Math.floor(s);const u=i[e]-o-t*o*2;V[e]=u+(n+t)*o}const s=r*o;return V[3]=s*I,p.acquire().initFrom(null,V,s,0)}_growRootAsSubNode(e){const t=this._root.node;(0,c.c)(y,this._root.bounds),y[3]=this._root.halfSize,this._root.init(e),e.advanceTo(y,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,r=0;for(;r<t.length&&null==e;)n=r++,e=t[n];for(;r<t.length;)if(t[r++])return-1;return n}_isDegenerate(e){return!b(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:n}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(e){var t,n;const r=e.children.map((e=>e?this._nodeToJSON(e):null)),i=null===(t=e.residents)||void 0===t?void 0:t.map((e=>this.objectToBoundingSphere(e))),o=null===(n=e.terminals)||void 0===n?void 0:n.map((e=>this.objectToBoundingSphere(e)));return{children:r,residents:i,terminals:o}}static fromJSON(e){const t=new _((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new p,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}}class p{init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,n,r=this.depth){return this.node=null!=e?e:p.createEmptyNode(),null!=t&&(0,l.h)(t,this.bounds),this.halfSize=n,this.depth=r,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*I}advance(e){let t=this.node.children[e];t||(t=p.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=N[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,n=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const r=this._childIndex(e);t&&t(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new(0,u.default)({shrink:!0}),residents:new(0,u.default)({shrink:!0})}}static acquire(){return p._pool.acquire()}static release(e){p._pool.release(e)}static clearPool(){p._pool.prune()}constructor(){this.bounds=(0,l.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}}function T(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function m(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function g(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function A(e,t,n,r){if(1===t){const t=n(e[0]);(0,l.h)(t,r)}else{S[0]=1/0,S[1]=1/0,S[2]=1/0,B[0]=-1/0,B[1]=-1/0,B[2]=-1/0;for(let r=0;r<t;r++){const t=n(e[r]);b(t[3])&&(T(S,t),m(B,t))}(0,c.h)(r,S,B,.5),r[3]=Math.max(B[0]-S[0],B[1]-S[1],B[2]-S[2])/2}}function E(e,t){let n,r=1/0;for(let i=0;i<8;++i){const o=O(e,t,R[i]);o<r&&(r=o,n=R[i])}return n}function O(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function b(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}p._pool=new(0,s.default)(p),i=_||(_={}),(o=i.DepthOrder||(i.DepthOrder={}))[o.FRONT_TO_BACK=1]="FRONT_TO_BACK",o[o.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const N=[(0,a.f)(-1,-1,-1),(0,a.f)(1,-1,-1),(0,a.f)(-1,1,-1),(0,a.f)(1,1,-1),(0,a.f)(-1,-1,1),(0,a.f)(1,-1,1),(0,a.f)(-1,1,1),(0,a.f)(1,1,1)],R=[(0,a.f)(-1,-1,-1),(0,a.f)(-1,-1,1),(0,a.f)(-1,1,-1),(0,a.f)(-1,1,1),(0,a.f)(1,-1,-1),(0,a.f)(1,-1,1),(0,a.f)(1,1,-1),(0,a.f)(1,1,1)],I=Math.sqrt(3),w=[null];const V=(0,l.c)(),F=(0,a.c)(),S=(0,a.c)(),B=(0,a.c)(),x=new(0,u.default),M=(0,l.c)(),y=(0,l.c)(),v=(0,l.c)(),L=(0,l.c)(),P=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],C=new(0,u.default),j=[0,0,0,0,0,0,0,0],D=_})),t.register("a2Ayb",(function(n,r){e(n.exports,"intersectsSphere",(function(){return d}));var i,o,s,u=t("jubE1"),c=(t("gEEzE"),t("e4Xv2"),t("5YMIf")),a=(t("hRPEZ"),t("iLaO9")),f=t("esVaH");t("kVWqM"),t("4Tl7p");function d(e,t){for(let n=0;n<l;n++){const r=e[n];if(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=t[3])return!1}return!0}(s=i||(i={}))[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT",s[s.BOTTOM=2]="BOTTOM",s[s.TOP=3]="TOP",s[s.NEAR=4]="NEAR",s[s.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(o||(o={}));o.FAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_LEFT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_BOTTOM_RIGHT,o.NEAR_TOP_RIGHT,o.NEAR_TOP_LEFT,o.FAR_BOTTOM_RIGHT,o.FAR_BOTTOM_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_RIGHT,o.NEAR_BOTTOM_RIGHT,o.FAR_BOTTOM_RIGHT,o.FAR_TOP_RIGHT,o.NEAR_TOP_RIGHT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_TOP_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_LEFT,o.NEAR_TOP_LEFT,o.NEAR_TOP_RIGHT,o.FAR_TOP_RIGHT;const l=6;(0,a.f)(-1,-1,-1,1),(0,a.f)(1,-1,-1,1),(0,a.f)(1,1,-1,1),(0,a.f)(-1,1,-1,1),(0,a.f)(-1,-1,1,1),(0,a.f)(1,-1,1,1),(0,a.f)(1,1,1,1),(0,a.f)(-1,1,1,1),new(0,u.ObjectStack)(f.create),(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,c.c)()})),t.register("esVaH",(function(n,r){e(n.exports,"create",(function(){return u})),e(n.exports,"fromRay",(function(){return c})),e(n.exports,"fromLineSegmentAndDirection",(function(){return a}));var i=t("jubE1"),o=t("e4Xv2"),s=t("8lK3H");function u(e){return e?{ray:(0,s.create)(e.ray),c0:e.c0,c1:e.c1}:{ray:(0,s.create)(),c0:0,c1:Number.MAX_VALUE}}function c(e,t=u()){return(0,s.copy)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function a(e,t,n=u()){const r=(0,o.l)(e.vector);return(0,s.fromValues)(e.origin,t,n.ray),n.c0=0,n.c1=r,n}new(0,i.ObjectStack)((()=>u()))})),t.register("kVWqM",(function(n,r){e(n.exports,"create",(function(){return s})),e(n.exports,"copy",(function(){return u})),e(n.exports,"fromPoints",(function(){return a})),e(n.exports,"normal",(function(){return h})),e(n.exports,"signedDistance",(function(){return l})),e(n.exports,"clip",(function(){return f})),e(n.exports,"clipInfinite",(function(){return d}));t("iVfa0");var i=t("e4Xv2"),o=t("5YMIf");t("8hg3f"),t("ckIlK"),t("4Tl7p"),t("9EGCe");function s(e=_){return[e[0],e[1],e[2],e[3]]}function u(e,t){return c(t[0],t[1],t[2],t[3],e)}function c(e,t,n,r,i=s()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function a(e,t,n,r=s()){const i=n[0]-t[0],o=n[1]-t[1],u=n[2]-t[2],c=e[0]-t[0],a=e[1]-t[1],f=e[2]-t[2],d=o*f-u*a,l=u*c-i*f,h=i*a-o*c,_=d*d+l*l+h*h,p=Math.abs(_-1)>1e-5&&_>1e-12?1/Math.sqrt(_):1;return r[0]=d*p,r[1]=l*p,r[2]=h*p,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)();function f(e,t){const n=(0,i.e)(e,t.ray.direction),r=-l(e,t.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;const o=r/n;return n>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function d(e,t){const n=(0,i.e)(e,t.ray.direction),r=-l(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const o=r/n;return n>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function l(e,t){return(0,i.e)(e,t)+e[3]}function h(e){return e}const _=[0,0,1,0];var p,T;(T=p||(p={}))[T.NONE=0]="NONE",T[T.CLAMP=1]="CLAMP",T[T.INFINITE_MIN=4]="INFINITE_MIN",T[T.INFINITE_MAX=8]="INFINITE_MAX";p.INFINITE_MIN,p.INFINITE_MAX,p.INFINITE_MAX})),t.register("9EGCe",(function(n,r){e(n.exports,"tangentFrame",(function(){return s}));t("iVfa0");var i=t("e4Xv2"),o=t("5YMIf");function s(e,t,n){Math.abs(e[0])>Math.abs(e[1])?(0,i.s)(t,0,1,0):(0,i.s)(t,1,0,0),(0,i.f)(n,e,t),(0,i.n)(t,t),(0,i.f)(t,n,e),(0,i.n)(n,n)}(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)()})),t.register("cWcfE",(function(n,r){e(n.exports,"assert",(function(){return o})),e(n.exports,"rayBoxTest",(function(){return s}));t("iE3Nt"),t("hRPEZ");(0,t("iLaO9").c)();class i{toString(){return`AssertException: ${this.message}`}constructor(e){this.message=e}}function o(e,t){if(!e){t=t||"Assertion";const e=new Error(t).stack;throw new i(`${t} at ${e}`)}}function s(e,t,n,r){let i,o=(n[0]-e[0])/t[0],s=(r[0]-e[0])/t[0];o>s&&(i=o,o=s,s=i);let u=(n[1]-e[1])/t[1],c=(r[1]-e[1])/t[1];if(u>c&&(i=u,u=c,c=i),o>c||u>s)return!1;u>o&&(o=u),c<s&&(s=c);let a=(n[2]-e[2])/t[2],f=(r[2]-e[2])/t[2];return a>f&&(i=a,a=f,f=i),!(o>f||a>s||(f<s&&(s=f),s<0))}})),t.register("3XDhw",(function(n,r){e(n.exports,"MAX_CANDIDATE_COUNT",(function(){return s})),e(n.exports,"boundsFromEdge",(function(){return u}));var i=t("e4Xv2"),o=t("8hg3f");const s=1e3;function u(e,t,n){const r=(0,o.c)(),s=(0,o.g)(r);return(0,i.A)(s,s,e,.5),(0,i.A)(s,s,t,.5),r[3]=(0,i.i)(s,e),(0,i.a)(s,s,n),r}})),t.register("8Z9U2",(function(n,r){e(n.exports,"InterleavedLayout",(function(){return c})),e(n.exports,"newLayout",(function(){return a})),e(n.exports,"PackedLayout",(function(){return f}));var i=t("YI2am"),o=t("2TwbA"),s=t("cWcfE");class u{get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}slice(e,t){return new u(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,n=0,r=e.count){const i=this.stride;if(i%4==0){const o=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{const o=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(o)}return this}constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fields.keys()){const n=e.fields.get(t);this[t]=new n.constructor(this.buffer,n.offset,this.stride)}}}class c{vec2f(e,t){return this._appendField(e,i.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,i.BufferViewVec2f64,t),this}vec3f(e,t){return this._appendField(e,i.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,i.BufferViewVec3f64,t),this}vec4f(e,t){return this._appendField(e,i.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,i.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,i.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,i.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,i.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,i.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,i.BufferViewVec4u8,t),this}f32(e,t){return this._appendField(e,i.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,i.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,i.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,i.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,i.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,i.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,i.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,i.BufferViewVec2u8,t),this}vec4u16(e,t){return this._appendField(e,i.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,i.BufferViewUint32,t),this}_appendField(e,t,n){if(this._fields.has(e))return void(0,s.assert)(!1,`${e} already added to vertex buffer layout`);const r=t.ElementCount*(0,o.elementTypeSize)(t.ElementType),i=this._stride;this._stride+=r,this._fields.set(e,{size:r,constructor:t,offset:i,optional:n})}createBuffer(e){return new u(this,e)}createView(e){return new u(this,e)}clone(){const e=new c;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,n)=>e._fields.set(n,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,(0,o.elementTypeSize)(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}constructor(e=null){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:h(e[1].constructor)}))))}}function a(){return new c}class f{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const n={...e,constructor:l(e.constructor)};this.fields.push([t,n])})),this.stride=e.stride}}const d=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32];function l(e){return`${e.ElementType}_${e.ElementCount}`}function h(e){return _.get(e)}const _=new Map;d.forEach((e=>_.set(l(e),e)))})),t.register("2TwbA",(function(t,n){function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}e(t.exports,"elementTypeSize",(function(){return r}))})),t.register("7S12W",(function(t,n){var r,i;e(t.exports,"VertexAttribute",(function(){return r})),(i=r||(r={})).POSITION="position",i.NORMAL="normal",i.NORMALCOMPRESSED="normalCompressed",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude",i.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",i.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})),t.register("gPnQi",(function(n,r){e(n.exports,"deduplicate",(function(){return s}));var i=t("iVfa0"),o=t("2tD5D");function s(e,t,n){var r;const s=Array.isArray(e),d=s?e.length/t:e.byteLength/(4*t),l=s?e:new Uint32Array(e,0,d*t),h=null!==(r=null==n?void 0:n.minReduction)&&void 0!==r?r:0,_=(null==n?void 0:n.originalIndices)||null,p=_?_.length:0,T=(null==n?void 0:n.componentOffsets)||null;let m=0;if(T)for(let e=0;e<T.length-1;e++){const t=T[e+1]-T[e];t>m&&(m=t)}else m=d;const g=Math.floor(1.1*m)+1;(null==f||f.length<2*g)&&(f=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*g)));for(let e=0;e<2*g;e++)f[e]=0;let A=0;const E=!!T&&!!_,O=E?p:d;let b=(0,o.newIndexArray)(d);const N=new Uint32Array(p),R=1.96;let I=0!==h?Math.ceil(4*R*R/(h*h)*h*(1-h)):O,w=1,V=T?T[1]:O;for(let e=0;e<O;e++){if(e===I){const t=1-A/e;if(t+R*Math.sqrt(t*(1-t)/e)<h)return null;I*=2}if(e===V){for(let e=0;e<2*g;e++)f[e]=0;if(_)for(let e=T[w-1];e<T[w];e++)N[e]=b[_[e]];V=T[++w]}const n=E?_[e]:e,r=n*t,i=a(l,r,t);let o=i%g,s=A;for(;0!==f[2*o+1];){if(f[2*o]===i){const e=f[2*o+1]-1;if(u(l,r,e*t,t)){s=b[e];break}}o++,o>=g&&(o-=g)}s===A&&(f[2*o]=i,f[2*o+1]=n+1,A++),b[n]=s}if(0!==h&&1-A/d<h)return null;if(E){for(let e=T[w-1];e<N.length;e++)N[e]=b[_[e]];b=(0,o.compactIndices)(N)}const F=s?new Array(A):new Uint32Array(A*t);A=0;for(let e=0;e<O;e++)b[e]===A&&(c(l,(E?_[e]:e)*t,F,A*t,t),A++);if(_&&!E){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=b[_[t]];b=(0,o.compactIndices)(e)}return{buffer:Array.isArray(F)?F:F.buffer,indices:b,uniqueCount:A}}function u(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function c(e,t,n,r,i){for(let o=0;o<i;o++)n[r+o]=e[t+o]}function a(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let f=null})),t.register("2tD5D",(function(n,r){e(n.exports,"compactIndices",(function(){return o})),e(n.exports,"newIndexArray",(function(){return u})),e(n.exports,"getContinuousIndexArray",(function(){return d}));var i=t("kkxEC");function o(e){return(0,i.isArray)(e)?e.length<i.NATIVE_ARRAY_MAX_SIZE?e:s(e):e.length<i.NATIVE_ARRAY_MAX_SIZE?Array.from(e):e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?e:s(e)}function s(e){let t=!0;for(const n of e){if(n>=65536)return(0,i.isArray)(e)?new Uint32Array(e):e;n>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}function u(e){return e<=i.NATIVE_ARRAY_MAX_SIZE?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}let c=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const a=[0],f=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function d(e){if(1===e)return a;if(e<i.NATIVE_ARRAY_MAX_SIZE)return Array.from(new Uint16Array(f.buffer,0,e));if(e<f.length)return new Uint16Array(f.buffer,0,e);if(e>c.length){const t=Math.max(2*c.length,e);c=new Uint32Array(t);for(let e=0;e<c.length;e++)c[e]=e}return new Uint32Array(c.buffer,0,e)}new Uint8Array(65536)})),t.register("gnwu9",(function(t,n){function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,n,r,i,o,s,u,c){return[e,t,n,r,i,o,s,u,c]}function o(e,t){return new Float64Array(e,t,9)}e(t.exports,"c",(function(){return r})),e(t.exports,"f",(function(){return i})),e(t.exports,"a",(function(){return o}));Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:r,createView:o,fromValues:i},Symbol.toStringTag,{value:"Module"}))})),t.register("89KCq",(function(t,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t){return new Float64Array(e,t,16)}e(t.exports,"c",(function(){return r})),e(t.exports,"b",(function(){return i})),e(t.exports,"a",(function(){return o})),e(t.exports,"I",(function(){return s}));const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:r,createView:o,fromValues:function(e,t,n,r,i,o,s,u,c,a,f,d,l,h,_,p){return[e,t,n,r,i,o,s,u,c,a,f,d,l,h,_,p]}},Symbol.toStringTag,{value:"Module"}))})),t.register("ksUrQ",(function(t,n){function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}e(t.exports,"a",(function(){return r})),e(t.exports,"b",(function(){return i})),e(t.exports,"c",(function(){return o})),e(t.exports,"I",(function(){return s}));const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:r,createView:o,fromValues:function(e,t,n,r){return[e,t,n,r]}},Symbol.toStringTag,{value:"Module"}))}))}();
//# sourceMappingURL=SceneLayerSnappingSourceWorker.d16e8d24.js.map
