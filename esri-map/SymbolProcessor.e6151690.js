function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("l8Y3H",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return w}));var s=t("j6uz9"),o=t("iLz4U");t("bPmsI"),t("5HTPH"),t("6TszD");var a=t("1CpCt"),l=t("lHg4e");t("gHCNy"),t("aX9sh");var u=t("qA6zg"),c=t("lDoe3"),y=t("jaaCV"),h=t("jocF1"),x=t("eyQUy"),f=t("hAqwK"),p=t("1dnlL"),v=t("6zm2Z"),d=t("9VqGW"),g=t("8QpQ1"),m=t("lyPWm"),S=t("5Y02G");function T(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function _(e){const t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(const e in t.data){const n=e,i=t.data[n];if(r.message.data[n]=null,null!=i){const e=i.stride,t=i.indices.slice(0),s=i.vertices.slice(0),o=i.records.slice(0),l={stride:e,indices:t,vertices:s,records:o,metrics:(0,a.applySome)(i.metrics,(e=>e.slice(0)))};r.transferList.push(t,s,o),r.message.data[n]=l}}return r}let b=class extends m.default{initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new(0,S.default)(this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(e){this._bufferIds.forEach((t=>{t.forEach(e)}))}async update(e,t){const r=t.schema.processors[0];if("symbol"!==r.type)return;const n=(0,c.diff)(this._schema,r);((0,c.hasDiff)(n,"mesh")||(0,c.hasDiff)(n,"target"))&&(e.mesh=!0,e.why?.mesh.push("Symbology changed"),this._schema=r,this._factory=this._createFactory(r),this._factory.update(r,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,r,n){return(0,l.throwIfAborted)(n),this._onTileData(e,t,r,n)}onTileClear(e,t){const r={clear:!0,end:t};return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:r})}onTileError(e,t,r){const n=r.signal,i={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",i,{signal:n})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&this._bufferData.delete(t.key.id),this._bufferIds.has(t.key.id)&&this._bufferIds.delete(t.key.id);for(const t of e.added)this._bufferData.forEach((e=>{for(const r of e)r.message.tileKey===t.id&&this._updateTileMesh("append",t,_(r),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e)?.push(_(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:n}=this.service,i={geometryType:t,fields:n,spatialReference:y.default.fromJSON(this.spatialReference)},s=new(0,v.WGLTemplateStore)(((e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t)),this.tileStore.tileScheme.tileInfo),{matcher:o,aggregateMatcher:l}=e.mesh;return this._store=s,this._matchers.feature=(0,d.createMatcher)(o,s,i,this._resourceManagerProxy),this._matchers.aggregate=(0,a.applySome)(l,(e=>(0,d.createMatcher)(e,s,i,this._resourceManagerProxy))),new(0,p.WGLMeshFactory)(t,r,s)}async _onTileData(e,t,r,n){(0,l.throwIfAborted)(n);const{type:i,addOrUpdate:s,remove:o,clear:a,end:u}=t,c=!!this._schema.mesh.sortKey;if(!s){const t={type:i,addOrUpdate:null,remove:o,clear:a,end:u,sort:c};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const y=this._processFeatures(e,s,r,n,t.status?.version);try{const r=await y;if(null==r){const t={type:i,addOrUpdate:null,remove:o,clear:a,end:u,sort:c};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const s=[];for(const t of r){let r=!1;const n=t.message.bufferIds,i=e.key.id,o=t.message.tileKey;if(i!==o&&null!=n){if(!this.tileStore.get(o)){this._addBufferData(i,t),s.push(t);continue}let e=this._bufferIds.get(o);e||(e=new Set,this._bufferIds.set(o,e));const a=Array.from(n);for(const t of a){if(e.has(t)){r=!0;break}e.add(t)}}r||(this._addBufferData(i,t),s.push(t))}await Promise.all(s.map((r=>{const s=e.key.id===r.message.tileKey,o=s?t.remove:[],a=s&&t.end;return this._updateTileMesh(i,e,r,o,a,!!t.clear,n.signal)})))}catch(t){this._handleError(e,t,n)}}async _updateTileMesh(e,t,r,n,i,s,o){const u=e,c=r.message.tileKey,y=!!this._schema.mesh.sortKey;c!==t.key.id&&(i=!1);const h={type:u,addOrUpdate:(0,a.applySome)(r,(e=>e.message)),remove:n,clear:s,end:i,sort:y},x={transferList:(0,a.applySome)(r,(e=>e.transferList))||[],signal:o};return(0,l.throwIfAborted)(x),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:c,data:h},x)}async _processFeatures(e,t,r,n,i){if(null==t||!t.hasFeatures)return null;const s={transform:e.transform,hasZ:!1,hasM:!1},o=this._factory,a={viewingMode:"",scale:e.scale},u=await this._matchers.feature,c=await this._matchers.aggregate;(0,l.throwIfAborted)(n);const y=this._getLabelInfos(e,t);return await o.analyze(t.getCursor(),this._resourceManagerProxy,u,c,s,a),(0,l.throwIfAborted)(n),this._writeFeatureSet(e,t,s,y,o,r,i)}_writeFeatureSet(e,t,r,n,i,s,o){const a=t.getSize(),l=this._schema.mesh.matcher.symbologyType,u=new(0,f.MeshData)(e.key.id,{features:a,records:a,metrics:0},l,s,l!==x.WGLSymbologyType.HEATMAP,o),c={viewingMode:"",scale:e.scale},y=t.getCursor();for(;y.next();)try{const t=y.getDisplayId(),s=null!=n?n.get(t):null;i.writeCursor(u,y,r,c,e.level,s,this._resourceManagerProxy)}catch(e){}const h=e.tileInfoView.tileInfo.isWrappable;return u.serialize(h)}_handleError(e,t,r){if(!(0,l.isAbortError)(t)){const n={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",n,{signal:r.signal})}return Promise.resolve()}_getLabelingSchemaForScale(e){const t=this._schema.mesh.labels;if(null==t)return null;if("subtype"===t.type){const r={type:"subtype",classes:{}};let n=!1;for(const i in t.classes){const s=t.classes[i].filter((t=>T(t,e.scale)));n=n||!!s.length,r.classes[i]=s}return n?r:null}const r=t.classes.filter((t=>T(t,e.scale)));return r.length?{type:"simple",classes:r}:null}_getLabels(e,t){if("subtype"===t.type){const r=this.service.subtypeField,n=(0,a.unwrapOrThrow)(r,"Expected to find subtype Field"),i=e.readAttribute(n);return null==i?[]:t.classes[i]??[]}return t.classes}_getLabelInfos(e,t){const r=this._getLabelingSchemaForScale(e);if(null==r)return null;const n=new Map,i=t.getCursor();for(;i.next();){const e=i.getDisplayId(),t=[],s=(0,h.isAggregateId)(e),a=s&&1!==i.readAttribute("cluster_count")?"aggregate":"feature",l=this._getLabels(i,r);for(const r of l){if(r.target!==a)continue;const n=i.getStorage(),l=s&&"feature"===a?n.getComputedStringAtIndex(i.readAttribute("referenceId"),r.fieldIndex):n.getComputedStringAtIndex(e,r.fieldIndex);if(!l)continue;const u=(0,o.bidiText)(l.toString()),c=u[0],y=u[1];this._store.getMosaicItem(r.symbol,(0,g.codepoints)(c)).then((e=>{t[r.index]={glyphs:e.glyphMosaicItems??[],rtl:y,index:r.index}}))}n.set(e,t)}return n}constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}};b=(0,s._)([(0,u.subclass)("esri.views.2d.layers.features.processors.SymbolProcessor")],b);const w=b})),t.register("lyPWm",(function(r,n){e(r.exports,"default",(function(){return u}));var i=t("j6uz9"),s=t("8Y9g8"),o=t("hTI69");t("gHCNy"),t("aX9sh"),t("5HTPH");var a=t("qA6zg");let l=class extends s.HandleOwner{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,i._)([(0,o.property)({readOnly:!0})],l.prototype,"supportsTileUpdates",null),(0,i._)([(0,o.property)({constructOnly:!0})],l.prototype,"remoteClient",void 0),(0,i._)([(0,o.property)({constructOnly:!0})],l.prototype,"service",void 0),(0,i._)([(0,o.property)()],l.prototype,"spatialReference",null),(0,i._)([(0,o.property)({constructOnly:!0})],l.prototype,"tileInfo",void 0),(0,i._)([(0,o.property)({constructOnly:!0})],l.prototype,"tileStore",void 0),l=(0,i._)([(0,a.subclass)("esri.views.2d.layers.features.processors.BaseProcessor")],l);const u=l})),t.register("5Y02G",(function(r,n){e(r.exports,"default",(function(){return s}));var i=t("lHg4e");class s{destroy(){}async fetchResource(e,t){const r=this._resourceMap,n=r.get(e);if(n)return n;let s=this._inFlightResourceMap.get(e);if(s)return s;try{s=this._remoteClient.invoke("tileRenderer.fetchResource",{url:e},{...t}),this._inFlightResourceMap.set(e,s),s.then((t=>(this._inFlightResourceMap.delete(e),r.set(e,t),t)))}catch(e){return(0,i.isAbortError)(e)?null:{width:0,height:0}}return s}getResource(e){return this._resourceMap.get(e)??null}loadFont(e){return Promise.resolve(null)}constructor(e){this._remoteClient=e,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}}})),t.register("9F6Dg",(function(t,r){function n(e,t,r,n){const i=e.clone(),s=1<<i.level,o=i.col+t,a=i.row+r;return n&&o<0?(i.col=o+s,i.world-=1):o>=s?(i.col=o-s,i.world+=1):i.col=o,i.row=a,i}e(t.exports,"getPow2NeighborKey",(function(){return n}))})),t.register("bPFMP",(function(r,n){e(r.exports,"loadLibtess",(function(){return l})),e(r.exports,"triangulate",(function(){return u}));var i=t("cQaZU"),s=t("5HTPH");let o=null,a=null;async function l(){return o||(o=async function(){const e=(0,s.default)("esri-csp-restrictions")?await t("6me6H").then((e=>e.l)):await t("3eH1a").then((e=>e.l));a=await e.load({locateFile:e=>(0,i.getAssetUrl)(`esri/core/libs/libtess/${e}`)})}()),o}function u(e,t){const r=Math.max(e.length,128e3);return a.triangulate(e,t,r)}})),t.register("6me6H",(function(e,r){e.exports=import("./"+t("kyEFX").resolve("98i3f")).then((()=>t("jrNQo")))})),t.register("3eH1a",(function(e,r){e.exports=import("./"+t("kyEFX").resolve("bZNOJ")).then((()=>t("drxWa")))})),t.register("brGzu",(function(r,n){e(r.exports,"LineTessellation",(function(){return f}));var i=t("k7j48"),s=t("aPQ4T");function o(e,t){return e.x===t.x&&e.y===t.y}function a(e,t){return e.x=t.y,e.y=-t.x,e}function l(e,t){return e.x=-t.y,e.y=t.x,e}function u(e,t){return e.x=t.x,e.y=t.y,e}function c(e,t){return e.x=-t.x,e.y=-t.y,e}function y(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function h(e,t){return e.x*t.x+e.y*t.y}function x(e,t,r,n){return e.x=t.x*r+t.y*n,e.y=t.x*n-t.y*r,e}class f{tessellate(e,t){(function(e){if(!e)return;const t=e.length;if(t<=1)return;let r=0;for(let n=1;n<t;n++)o(e[n],e[r])||++r===n||(e[r]=e[n]);e.length=r+1})(e),this._canUseThinTessellation&&t.halfWidth<s.THIN_LINE_HALF_WIDTH_THRESHOLD&&!t.offset?this._tessellateThin(e,t):this._tessellate(e,t)}_tessellateThin(e,t){if(e.length<2)return;const r=t.wrapDistance||65535;let n=t.initialDistance||0,i=!1,s=e[0].x,o=e[0].y;const a=e.length;for(let t=1;t<a;++t){i&&(i=!1,n=0);let a=e[t].x,l=e[t].y,u=a-s,c=l-o,y=Math.sqrt(u*u+c*c);if(u/=y,c/=y,n+y>r){i=!0;const e=(r-n)/y;y=r-n,a=(1-e)*s+e*a,l=(1-e)*o+e*l,--t}const h=this._writeVertex(s,o,0,0,u,c,c,-u,0,-1,n),x=this._writeVertex(s,o,0,0,u,c,-c,u,0,1,n);n+=y;const f=this._writeVertex(a,l,0,0,u,c,c,-u,0,-1,n),p=this._writeVertex(a,l,0,0,u,c,-c,u,0,1,n);this._writeTriangle(h,x,f),this._writeTriangle(x,f,p),s=a,o=l}}_tessellate(e,t){const r=e[0],n=e[e.length-1],s=o(r,n),f=s?3:2;if(e.length<f)return;const p=t.pixelCoordRatio,v=null!=t.capType?t.capType:i.CapType.BUTT,d=null!=t.joinType?t.joinType:i.JoinType.MITER,g=null!=t.miterLimit?Math.min(t.miterLimit,4):2,m=null!=t.roundLimit?Math.min(t.roundLimit,1.05):1.05,S=null!=t.halfWidth?t.halfWidth:2,T=!!t.textured;let _,b,w,L=null;const V=this._prevNormal,M=this._nextNormal;let I=-1,E=-1;const z=this._joinNormal;let G,F;const A=this._textureNormalLeft,C=this._textureNormalRight,R=this._textureNormal;let P=-1,O=-1;const N=t.wrapDistance||65535;let U=t.initialDistance||0;const W=this._writeVertex,B=this._writeTriangle,D=(e,t,r,n,i,s)=>{const o=W(b,w,G,F,r,n,e,t,i,s,U);return P>=0&&O>=0&&o>=0&&B(P,O,o),P=O,O=o,o};s&&(_=e[e.length-2],M.x=n.x-_.x,M.y=n.y-_.y,E=y(M),M.x/=E,M.y/=E);let k=!1;for(let t=0;t<e.length;++t){if(k&&(k=!1,U=0),_&&(V.x=-M.x,V.y=-M.y,I=E,U+I>N&&(k=!0)),k){const r=(N-U)/I;I=N-U,_={x:(1-r)*_.x+r*e[t].x,y:(1-r)*_.y+r*e[t].y},--t}else _=e[t];b=_.x,w=_.y;const r=t<=0&&!k,n=t===e.length-1;if(r||(U+=I),L=n?s?e[1]:null:e[t+1],L?(M.x=L.x-b,M.y=L.y-w,E=y(M),M.x/=E,M.y/=E):(M.x=void 0,M.y=void 0),!s){if(r){l(z,M),G=z.x,F=z.y,v===i.CapType.SQUARE&&(D(-M.y-M.x,M.x-M.y,M.x,M.y,0,-1),D(M.y-M.x,-M.x-M.y,M.x,M.y,0,1)),v===i.CapType.ROUND&&(D(-M.y-M.x,M.x-M.y,M.x,M.y,-1,-1),D(M.y-M.x,-M.x-M.y,M.x,M.y,-1,1)),v!==i.CapType.ROUND&&v!==i.CapType.BUTT||(D(-M.y,M.x,M.x,M.y,0,-1),D(M.y,-M.x,M.x,M.y,0,1));continue}if(n){a(z,V),G=z.x,F=z.y,v!==i.CapType.ROUND&&v!==i.CapType.BUTT||(D(V.y,-V.x,-V.x,-V.y,0,-1),D(-V.y,V.x,-V.x,-V.y,0,1)),v===i.CapType.SQUARE&&(D(V.y-V.x,-V.x-V.y,-V.x,-V.y,0,-1),D(-V.y-V.x,V.x-V.y,-V.x,-V.y,0,1)),v===i.CapType.ROUND&&(D(V.y-V.x,-V.x-V.y,-V.x,-V.y,1,-1),D(-V.y-V.x,V.x-V.y,-V.x,-V.y,1,1));continue}}let o,f,W=(K=M,-((Z=V).x*K.y-Z.y*K.x));if(Math.abs(W)<.01)h(V,M)>0?(z.x=V.x,z.y=V.y,W=1,o=Number.MAX_VALUE,f=!0):(l(z,M),W=1,o=1,f=!1);else{z.x=(V.x+M.x)/W,z.y=(V.y+M.y)/W,o=y(z);const e=(o-1)*S*p;f=o>4||e>I&&e>E}G=z.x,F=z.y;let B=d;switch(d){case i.JoinType.BEVEL:o<1.05&&(B=i.JoinType.MITER);break;case i.JoinType.ROUND:o<m&&(B=i.JoinType.MITER);break;case i.JoinType.MITER:o>g&&(B=i.JoinType.BEVEL)}switch(B){case i.JoinType.MITER:if(D(z.x,z.y,-V.x,-V.y,0,-1),D(-z.x,-z.y,-V.x,-V.y,0,1),n)break;if(T){const e=k?0:U;P=this._writeVertex(b,w,G,F,M.x,M.y,z.x,z.y,0,-1,e),O=this._writeVertex(b,w,G,F,M.x,M.y,-z.x,-z.y,0,1,e)}break;case i.JoinType.BEVEL:{const e=W<0;let t,r,i,s;if(e){const e=P;P=O,O=e,t=A,r=C}else t=C,r=A;if(f)i=e?l(this._innerPrev,V):a(this._innerPrev,V),s=e?a(this._innerNext,M):l(this._innerNext,M);else{const t=e?c(this._inner,z):u(this._inner,z);i=t,s=t}const o=e?a(this._bevelStart,V):l(this._bevelStart,V);D(i.x,i.y,-V.x,-V.y,t.x,t.y);const y=D(o.x,o.y,-V.x,-V.y,r.x,r.y);if(n)break;const h=e?l(this._bevelEnd,M):a(this._bevelEnd,M);if(f){const e=this._writeVertex(b,w,G,F,-V.x,-V.y,0,0,0,0,U);P=this._writeVertex(b,w,G,F,M.x,M.y,s.x,s.y,t.x,t.y,U),O=this._writeVertex(b,w,G,F,M.x,M.y,h.x,h.y,r.x,r.y,U),this._writeTriangle(y,e,O)}else{if(T){const e=this._bevelMiddle;e.x=(o.x+h.x)/2,e.y=(o.y+h.y)/2,x(R,e,-V.x,-V.y),D(e.x,e.y,-V.x,-V.y,R.x,R.y),x(R,e,M.x,M.y),P=this._writeVertex(b,w,G,F,M.x,M.y,e.x,e.y,R.x,R.y,U),O=this._writeVertex(b,w,G,F,M.x,M.y,s.x,s.y,t.x,t.y,U)}else{const e=P;P=O,O=e}D(h.x,h.y,M.x,M.y,r.x,r.y)}if(e){const e=P;P=O,O=e}break}case i.JoinType.ROUND:{const e=W<0;let t,r;if(e){const e=P;P=O,O=e,t=A,r=C}else t=C,r=A;const i=e?c(this._inner,z):u(this._inner,z);let s,y;f?(s=e?l(this._innerPrev,V):a(this._innerPrev,V),y=e?a(this._innerNext,M):l(this._innerNext,M)):(s=i,y=i);const p=e?a(this._roundStart,V):l(this._roundStart,V),v=e?l(this._roundEnd,M):a(this._roundEnd,M),d=D(s.x,s.y,-V.x,-V.y,t.x,t.y),g=D(p.x,p.y,-V.x,-V.y,r.x,r.y);if(n)break;const m=this._writeVertex(b,w,G,F,-V.x,-V.y,0,0,0,0,U);f||this._writeTriangle(P,O,m);const S=c(this._outer,i),_=this._writeVertex(b,w,G,F,M.x,M.y,v.x,v.y,r.x,r.y,U);let L,I;const E=o>2;if(E){let t;o!==Number.MAX_VALUE?(S.x/=o,S.y/=o,t=h(V,S),t=(o*(t*t-1)+1)/t):t=-1,L=e?a(this._startBreak,V):l(this._startBreak,V),L.x+=V.x*t,L.y+=V.y*t,I=e?l(this._endBreak,M):a(this._endBreak,M),I.x+=M.x*t,I.y+=M.y*t}x(R,S,-V.x,-V.y);const N=this._writeVertex(b,w,G,F,-V.x,-V.y,S.x,S.y,R.x,R.y,U);x(R,S,M.x,M.y);const B=T?this._writeVertex(b,w,G,F,M.x,M.y,S.x,S.y,R.x,R.y,U):N,k=m,Z=T?this._writeVertex(b,w,G,F,M.x,M.y,0,0,0,0,U):m;let K=-1,H=-1;if(E&&(x(R,L,-V.x,-V.y),K=this._writeVertex(b,w,G,F,-V.x,-V.y,L.x,L.y,R.x,R.y,U),x(R,I,M.x,M.y),H=this._writeVertex(b,w,G,F,M.x,M.y,I.x,I.y,R.x,R.y,U)),T?E?(this._writeTriangle(k,g,K),this._writeTriangle(k,K,N),this._writeTriangle(Z,B,H),this._writeTriangle(Z,H,_)):(this._writeTriangle(k,g,N),this._writeTriangle(Z,B,_)):E?(this._writeTriangle(m,g,K),this._writeTriangle(m,K,H),this._writeTriangle(m,H,_)):(this._writeTriangle(m,g,N),this._writeTriangle(m,B,_)),f?(P=this._writeVertex(b,w,G,F,M.x,M.y,y.x,y.y,t.x,t.y,U),O=_):(P=T?this._writeVertex(b,w,G,F,M.x,M.y,y.x,y.y,t.x,t.y,U):d,this._writeTriangle(P,Z,_),O=_),e){const e=P;P=O,O=e}break}}}var Z,K}constructor(e,t,r){this._writeVertex=e,this._writeTriangle=t,this._canUseThinTessellation=r,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}}})),t.register("bVIMy",(function(t,r){var n,i,s;function o(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function a(e){switch(e){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function l(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[n.Right,i.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[n.Center,i.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[n.Left,i.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[n.Right,i.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[n.Center,i.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[n.Left,i.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[n.Right,i.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[n.Center,i.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[n.Left,i.Top];default:return console.debug(`Found invalid placement type ${e}`),[n.Center,i.Center]}}function u(e){switch(e){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function c(e){switch(e){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function y(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}e(t.exports,"HAlign",(function(){return n})),e(t.exports,"VAlign",(function(){return i})),e(t.exports,"getXAnchorDirection",(function(){return o})),e(t.exports,"getYAnchorDirection",(function(){return a})),e(t.exports,"getAlignmentFromPlacement",(function(){return l})),e(t.exports,"getXDirection",(function(){return u})),e(t.exports,"getYDirection",(function(){return c})),e(t.exports,"getJustification",(function(){return y})),e(t.exports,"isMapAligned",(function(){return h})),(s=n||(n={}))[s.Left=-1]="Left",s[s.Center=0]="Center",s[s.Right=1]="Right",function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(i||(i={}))})),t.register("eDdav",(function(r,n){e(r.exports,"isOutlineFillSymbology",(function(){return l})),e(r.exports,"hasSimpleSymbology",(function(){return u})),e(r.exports,"hasOutlineFillSymbology",(function(){return c})),e(r.exports,"createMaterialKey",(function(){return y})),e(r.exports,"FillMaterialKey",(function(){return g})),e(r.exports,"LineMaterialKey",(function(){return S})),e(r.exports,"MarkerMaterialKey",(function(){return m})),e(r.exports,"TextMaterialKey",(function(){return T})),e(r.exports,"LabelMaterialKey",(function(){return _})),e(r.exports,"hydrateMaterialKey",(function(){return h})),e(r.exports,"MaterialKeyBase",(function(){return x}));var i=t("bPmsI"),s=t("bVIMy"),o=t("eyQUy");const a=Object.keys(o.WGLSymbologyType).filter((e=>"number"==typeof o.WGLSymbologyType[e])).reduce(((e,t)=>({...e,[t]:o.WGLSymbologyType[t]})),{});function l(e){return e===o.WGLSymbologyType.OUTLINE_FILL||e===o.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function u(e){return function(e){return e===o.WGLSymbologyType.SIMPLE||e===o.WGLSymbologyType.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function c(e){return l(e.symbologyType)}function y(e,t){switch(e){case o.WGLGeometryType.FILL:return g.from(t);case o.WGLGeometryType.LINE:return S.from(t);case o.WGLGeometryType.MARKER:return m.from(t);case o.WGLGeometryType.TEXT:return T.from(t);case o.WGLGeometryType.LABEL:return _.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function h(e){switch(x.load(e).geometryType){case o.WGLGeometryType.MARKER:return new m(e);case o.WGLGeometryType.FILL:return new g(e);case o.WGLGeometryType.LINE:return new S(e);case o.WGLGeometryType.TEXT:return new T(e);case o.WGLGeometryType.LABEL:return new _(e)}}class x{static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e??0}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e??!1)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case o.WGLGeometryType.FILL:return"fill";case o.WGLGeometryType.MARKER:return"marker";case o.WGLGeometryType.LINE:return"line";case o.WGLGeometryType.TEXT:return"text";case o.WGLGeometryType.LABEL:return"label";default:throw new(0,i.default)(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const r=1<<e;t?this._data|=r:this._data&=~r}bit(e){return(this._data&1<<e)>>e}setBits(e,t,r){for(let n=t,i=0;n<r;n++,i++)this.setBit(n,0!=(e&1<<i))}bits(e,t){let r=0;for(let n=e,i=0;n<t;n++,i++)r|=this.bit(n)<<i;return r}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:o.WGLSymbologyType[this.symbologyType],options:a,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}constructor(e){this._data=0,this._data=e}}x.shared=new x(0);const f=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasSizeVV(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}hasVV(){return super.hasVV()||this.hasSizeVV()}setVV(e,t){super.setVV(e,t);const r=function(e,t,r){const n=o.WGLVVFlag.SIZE_FIELD_STOPS|o.WGLVVFlag.SIZE_MINMAX_VALUE|o.WGLVVFlag.SIZE_SCALE_STOPS|o.WGLVVFlag.SIZE_UNIT_VALUE,i=(t&(o.WGLVVTarget.FIELD_TARGETS_OUTLINE|o.WGLVVTarget.MINMAX_TARGETS_OUTLINE|o.WGLVVTarget.SCALE_TARGETS_OUTLINE|o.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e===o.WGLGeometryType.LINE&&r.isOutline||e===o.WGLGeometryType.FILL&&l(r.symbologyType)?n&i:n&~i}(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(r&o.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&o.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&o.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&o.WGLVVFlag.SIZE_SCALE_STOPS)}},p=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&o.WGLVVFlag.ROTATION)}},v=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&o.WGLVVFlag.COLOR)}},d=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&o.WGLVVFlag.OPACITY)}};class g extends(v(d(f(x)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=o.WGLGeometryType.FILL,n.symbologyType=t,t!==o.WGLSymbologyType.DOT_DENSITY&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0);class m extends(v(d(p(f(x))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=o.WGLGeometryType.MARKER,n.symbologyType=t,t!==o.WGLSymbologyType.HEATMAP&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class S extends(v(d(f(x)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}S.shared=new S(0);class T extends(v(d(p(f(x))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0);class _ extends(f(x)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=o.WGLGeometryType.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,s.isMapAligned)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}_.shared=new _(0)})),t.register("c4cvq",(function(t,r){e(t.exports,"degToByte",(function(){return s})),e(t.exports,"log2",(function(){return o}));Math.PI;const n=1/Math.LN2;function i(e,t){return(e%=t)>=0?e:e+t}function s(e){return i(.7111111111111111*e,256)}function o(e){return Math.log(e)*n}})),t.register("VBsDH",(function(t,r){e(t.exports,"default",(function(){return n}));class n{get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}constructor(e=0,t=0,r=0,n=0){this.x=e,this.y=t,this.width=r,this.height=n}}})),t.register("elBeQ",(function(r,n){e(r.exports,"DEFAULT_FONT_FAMILY",(function(){return s})),e(r.exports,"loadFont",(function(){return u})),e(r.exports,"getFullyQualifiedFontName",(function(){return y})),e(r.exports,"getFontFamily",(function(){return c}));var i=t("9XPDd");const s="arial-unicode-ms",o=new Map,a=new Set;class l{constructor(e,t){this.fontFace=e,this.promise=t}}async function u(e){const t=y(e),r=o.get(t);if(r)return r.promise;const n=new FontFace(e.family,`url('${i.default.fontsUrl}/woff2/${t}.woff2') format('woff2')`,{style:e.style,weight:e.weight}),s=document.fonts;if(s.has(n)&&"loading"===n.status)return n.loaded;const u=n.load().then((()=>(s.add(n),n)));return o.set(t,new l(n,u)),a.add(n),u}function c(e){if(!e)return s;const t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function y(e){const t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return c(e.family)+(t.length>0?t:"-regular")}})),t.register("3Icya",(function(r,n){e(r.exports,"e",(function(){return l}));var i,s,o=t("el86H"),a={exports:{}};i=a,void 0!==(s=function(){function e(e,r,i){i=i||2;var s,o,a,u,c,y,h,x=r&&r.length,f=x?r[0]*i:e.length,p=t(e,0,f,i,!0),v=[];if(!p||p.next===p.prev)return v;if(x&&(p=l(e,r,p,i)),e.length>80*i){s=a=e[0],o=u=e[1];for(var d=i;d<f;d+=i)(c=e[d])<s&&(s=c),(y=e[d+1])<o&&(o=y),c>a&&(a=c),y>u&&(u=y);h=0!==(h=Math.max(a-s,u-o))?1/h:0}return n(p,v,i,s,o,h),v}function t(e,t,r,n,i){var s,o;if(i===I(e,t,r,n)>0)for(s=t;s<r;s+=n)o=L(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=L(s,e[s],e[s+1],o);if(o&&m(o,o.next)){var a=o.next;V(o),o=a}return o}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!m(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{var i=n.prev;if(V(n),(n=t=i)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,l,u,c,y,h){if(e){!h&&y&&x(e,u,c,y);for(var f,p,v=e;e.prev!==e.next;)if(f=e.prev,p=e.next,y?s(e,u,c,y):i(e))t.push(f.i/l),t.push(e.i/l),t.push(p.i/l),V(e),e=p.next,v=p.next;else if((e=p)===v){h?1===h?n(e=o(r(e),t,l),t,l,u,c,y,2):2===h&&a(e,t,l,u,c,y):n(r(e),t,l,u,c,y,1);break}}}function i(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(v(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(e,t,r,n){var i=e.prev,s=e,o=e.next;if(g(i,s,o)>=0)return!1;for(var a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,u=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,c=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,y=f(a,l,t,r,n),h=f(u,c,t,r,n),x=e.prevZ,p=e.nextZ;x&&x.z>=y&&p&&p.z<=h;){if(x!==e.prev&&x!==e.next&&v(i.x,i.y,s.x,s.y,o.x,o.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,p!==e.prev&&p!==e.next&&v(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;x&&x.z>=y;){if(x!==e.prev&&x!==e.next&&v(i.x,i.y,s.x,s.y,o.x,o.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function o(e,t,n){var i=e;do{var s=i.prev,o=i.next.next;!m(s,o)&&S(s,i,i.next,o)&&b(s,o)&&b(o,s)&&(t.push(s.i/n),t.push(i.i/n),t.push(o.i/n),V(i),V(i.next),i=e=o),i=i.next}while(i!==e);return r(i)}function a(e,t,i,s,o,a){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&d(l,u)){var c=w(l,u);return l=r(l,l.next),c=r(c,c.next),n(l,t,i,s,o,a),void n(c,t,i,s,o,a)}u=u.next}l=l.next}while(l!==e)}function l(e,n,i,s){var o,a,l,c=[];for(o=0,a=n.length;o<a;o++)(l=t(e,n[o]*s,o<a-1?n[o+1]*s:e.length,s,!1))===l.next&&(l.steiner=!0),c.push(p(l));for(c.sort(u),o=0;o<c.length;o++)i=r(i=y(c[o],i),i.next);return i}function u(e,t){return e.x-t.x}function c(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function y(e,t){var n=function(e,t){var r,n=t,i=e.x,s=e.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o){if(o=a,a===i){if(s===n.y)return n;if(s===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r;var l,u=r,c=r.x,y=r.y,x=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&v(s<y?i:o,s,c,y,s<y?o:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),b(n,e)&&(l<x||l===x&&(n.x>r.x||n.x===r.x&&h(r,n)))&&(r=n,x=l)),n=n.next}while(n!==u);return r}(e,t);if(!n)return t;var i=w(n,e),s=r(n,n.next);let o=c(i);return r(o,o.next),s=c(s),c(t===n?s:t)}function h(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function x(e,t,r,n){var i=e;do{null===i.z&&(i.z=f(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,s,o,a,l,u=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ);t++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1)}(i)}function f(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,n,i,s,o,a){return(i-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(n-a)-(r-o)*(t-a)>=0&&(r-o)*(s-a)-(i-o)*(n-a)>=0}function d(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&S(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,r,n){var i=_(g(e,t,r)),s=_(g(e,t,n)),o=_(g(r,n,e)),a=_(g(r,n,t));return i!==s&&o!==a||!(0!==i||!T(e,r,t))||!(0!==s||!T(e,n,t))||!(0!==o||!T(r,e,n))||!(0!==a||!T(r,t,n))}function T(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function b(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var r=new M(e.i,e.x,e.y),n=new M(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function L(e,t,r,n){var i=new M(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function V(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}return e.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(I(e,0,s,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;o-=Math.abs(I(e,u,c,r))}var y=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,x=n[a+1]*r,f=n[a+2]*r;y+=Math.abs((e[h]-e[f])*(e[x+1]-e[h+1])-(e[h]-e[x])*(e[f+1]-e[h+1]))}return 0===o&&0===y?0:Math.abs((y-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e}())&&(i.exports=s);const l=(0,o.g)(a.exports)})),t.register("9WeyL",(function(r,n){e(r.exports,"packFloatRGBA",(function(){return s})),e(r.exports,"unpackFloatRGBA",(function(){return o}));var i=t("8TN87");function s(e,t,r=0){const n=(0,i.clamp)(e,0,u);for(let e=0;e<4;e++)t[r+e]=Math.floor(256*((s=n*a[e])-Math.floor(s)));var s}function o(e,t=0){let r=0;for(let n=0;n<4;n++)r+=e[t+n]*l[n];return r}const a=[1,256,65536,16777216],l=[1/256,1/65536,1/16777216,1/4294967296],u=o(new Uint8ClampedArray([255,255,255,255]))})),t.register("d1j0h",(function(r,n){e(r.exports,"expandSymbol",(function(){return l})),e(r.exports,"cimLayerToRasterizationInfo",(function(){return u}));var i=t("9LGQK"),s=t("6LuoZ"),o=t("nXMis");const a=async(e,t,r)=>{const n=new(0,i.CIMAnalyzer)(r,t);return new(0,s.ExpandedCIM)(await n.analyzeSymbolReference(e.data,!1),e.data,e.rendererKey,e.maxVVSize)};async function l(e,t,r,n){if(!e)return null;if("cim"===e.type)return a(e,t,r);if("web-style"===e.type){const i={type:"cim",data:await(0,o.fetchCIMSymbolReference)(e,null,n)??void 0,rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return a(i,t,r)}return e}function u(e){if(!e)return null;const{avoidSDFRasterization:t,type:r,cim:n,url:i,materialHash:s,maxVVSize:o}=e,a={cim:n,type:r,mosaicHash:s,url:i,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(r){case"marker":o&&"size"in n&&(n.size=Math.max(o,n.size)),a.size=e.size,a.path=e.path,a.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":a.dashTemplate=e.dashTemplate;break;case"text":a.text=e.text,a.fontName=e.fontName}return a}})),t.register("6LuoZ",(function(r,n){e(r.exports,"ExpandedCIM",(function(){return a}));var i=t("eyQUy"),s=t("eDdav");const o={marker:i.WGLGeometryType.MARKER,fill:i.WGLGeometryType.FILL,line:i.WGLGeometryType.LINE,text:i.WGLGeometryType.TEXT};class a{get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}constructor(e,t,r,n){const a={minScale:t?.minScale,maxScale:t?.maxScale},l=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(a);this.layers=e,this.data=t,this.hash=this._createHash()+l,this.rendererKey=r;const u={isOutline:!1,placement:null,symbologyType:i.WGLSymbologyType.DEFAULT,vvFlags:r};for(const t of e){const e=o[t.type];u.isOutline="line"===t.type&&t.isOutline,t.materialKey=(0,s.createMaterialKey)(e,u),t.maxVVSize=n,t.scaleInfo=a,t.templateHash+=l}}}})),t.register("nXMis",(function(r,n){e(r.exports,"fetchCIMSymbolReference",(function(){return h}));var i=t("gnGFZ"),s=t("bPmsI"),o=t("lHg4e"),a=t("7dRCe"),l=t("39WmQ"),u=t("hej7M"),c=t("i9hTa"),y=t("3CisT");async function h(e,t,r){if(!e.name)throw new(0,s.default)("style-symbol-reference-name-missing","Missing name in style symbol reference");if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return async function(e,t){const r=c.Style2DUrlTemplate.replaceAll(/\{SymbolName\}/gi,e.name);try{const e=await(0,c.requestJSON)(r,t);return(0,c.makeCIMSymbolRef)(e.data)}catch(e){return(0,o.throwIfAbortError)(e),null}}(e,r);try{return async function(e,t,r,n){const h={portal:r&&null!=r.portal?r.portal:l.default.getDefault(),url:(0,a.urlToObject)(e.baseUrl),origin:"portal-item"},x=(0,y.getStyleItemFromStyle)(t,e.data);if(!x)throw new(0,s.default)("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});let f=(0,u.f)((0,c.symbolUrlFromStyleItem)(x,"cimRef"),h);(0,i.isDevEnvironment)()&&(f=(0,i.adjustStaticAGOUrl)(f));try{const e=await(0,c.requestJSON)(f,n);return(0,c.makeCIMSymbolRef)(e.data)}catch(e){return(0,o.throwIfAbortError)(e),null}}(await(0,c.fetchStyle)(e,t,r),e.name,t,r)}catch(e){return(0,o.throwIfAbortError)(e),null}}}));
//# sourceMappingURL=SymbolProcessor.e6151690.js.map
