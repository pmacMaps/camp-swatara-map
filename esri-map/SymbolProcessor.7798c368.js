!function(){function e(e,r,t,i){Object.defineProperty(e,r,{get:t,set:i,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("k9Ouu",(function(r,i){e(r.exports,"CIMEffectHelper",(function(){return u}));var n=t("8TSCy"),o=t("79LpT"),a=t("eA5AD"),l=t("fORtl"),f=t("4qQLM"),u=function(){"use strict";function e(){n.classCallCheck(this,e)}return n.createClass(e,null,[{key:"executeEffects",value:function(e,r,t){var i=(0,a.cloneAndDecodeGeometry)(r),n=new(0,l.SimpleGeometryCursor)(i),o=!0,u=!1,c=void 0;try{for(var s,m=e[Symbol.iterator]();!(o=(s=m.next()).done);o=!0){var y=s.value,v=(0,f.getEffectOperator)(y);v&&(n=v.execute(n,y,1.3333333333333333,t))}}catch(e){u=!0,c=e}finally{try{o||null==m.return||m.return()}finally{if(u)throw c}}return n}},{key:"next",value:function(e){var r=e.next();return(0,a.deltaEncodeGeometry)(r),r}},{key:"applyEffects",value:function(e,r,t){var i,a;if(!e)return r;var u=new(0,l.SimpleGeometryCursor)(r),c=!0,s=!1,m=void 0;try{for(var y,v=e[Symbol.iterator]();!(c=(y=v.next()).done);c=!0){var p=y.value,h=(0,f.getEffectOperator)(p);h&&(u=h.execute(u,p,1,t))}}catch(e){s=!0,m=e}finally{try{c||null==v.return||v.return()}finally{if(s)throw m}}for(var d,g=null;d=u.next();)g?(0,o.isPolyline)(g)?(0,o.isPolyline)(d)&&(i=g.paths).push.apply(i,n.toConsumableArray(d.paths)):(0,o.isPolygon)(g)&&(0,o.isPolygon)(d)&&(a=g.rings).push.apply(a,n.toConsumableArray(d.rings)):g=d;return g}}]),e}()})),t.register("aNOUb",(function(i,n){e(i.exports,"analyzeCIMSymbol",(function(){return I})),e(i.exports,"analyzeCIMResource",(function(){return K}));var o=t("8TSCy"),a=t("2TvXO"),l=t("jgs9n"),f=t("flPLJ"),u=t("jHOLN"),c=t("7qybv"),s=t("iXlXu"),m=t("1TSdR"),y=t("3nnTb"),v=t("4FBKO"),p=t("6LoaD"),h=t("8rAvb"),d=t("1o7Kk"),g=t("k9Ouu"),S=t("kNgwU"),b=t("kyAlm"),C=u.default.getLogger("esri.symbols.cim.cimAnalyzer");function x(e){switch(e){case"Butt":return p.CapType.BUTT;case"Square":return p.CapType.SQUARE;default:return p.CapType.ROUND}}function M(e){switch(e){case"Bevel":return p.JoinType.BEVEL;case"Miter":return p.JoinType.MITER;default:return p.JoinType.ROUND}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function N(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function O(e,r,t,i){var n;e[r]?n=e[r]:(n={},e[r]=n),n[t]=i}function w(e){var r=e.markerPlacement;return r&&r.angleToLine?p.Alignment.MAP:p.Alignment.SCREEN}function I(e,r,t,i,n){return P.apply(this,arguments)}function P(){return(P=o.asyncToGenerator(r(a).mark((function e(t,i,n,o,l){var f,u,c,s,m,v,p,h,d,g,S,b,x,M,k;return r(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=null!=o?o:[],t){e.next=3;break}return e.abrupt("return",f);case 3:if(s={},"CIMSymbolReference"===t.type){e.next=7;break}return e.abrupt("return",(C.error("Expect cim type to be 'CIMSymbolReference'"),f));case 7:if(u=t.symbol,!(c=t.primitiveOverrides)){e.next=30;break}for(m=[],v=!0,p=!1,h=void 0,e.prev=10,d=c[Symbol.iterator]();!(v=(g=d.next()).done);v=!0)S=g.value,(b=S.valueExpressionInfo)&&i?(x=b.expression,M=(0,y.createRendererExpression)(x,i.spatialReference,i.fields).then((function(e){e&&O(s,S.primitiveName,S.propertyName,e)})),m.push(M)):null!=S.value&&O(s,S.primitiveName,S.propertyName,S.value);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),p=!0,h=e.t0;case 18:e.prev=18,e.prev=19,v||null==d.return||d.return();case 21:if(e.prev=21,!p){e.next=24;break}throw h;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(e.t1=m.length>0,!e.t1){e.next=30;break}return e.next=30,Promise.all(m);case 30:if(_(u,n,k=[]),e.t3=k.length>0,!e.t3){e.next=36;break}return e.next=36,Promise.all(k);case 36:e.t2=(e.t3&&e.sent,u.type),e.next="CIMPointSymbol"===e.t2||"CIMLineSymbol"===e.t2||"CIMPolygonSymbol"===e.t2?39:40;break;case 39:H(u,c,s,i,f,n,l);case 40:return e.abrupt("return",f);case 41:case"end":return e.stop()}}),e,null,[[10,14,18,26],[19,,21,25]])})))).apply(this,arguments)}function H(e,r,t,i,n,a,l){if(e){var f=e.symbolLayers;if(f){var u,c=e.effects,s=v.CIMSymbolHelper.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(u=p.Alignment.MAP);for(var y,h,d,g,S,b,x,M,k,N,O,I=f.length;I--;){var P,H=f[I];if(H&&!1!==H.enable){var V=void 0;c&&c.length&&(V=o.toConsumableArray(c));var Y=H.effects;Y&&Y.length&&(c?(P=V).push.apply(P,o.toConsumableArray(Y)):V=o.toConsumableArray(Y));var G,D=[];v.OverrideHelper.findEffectOverrides(V,r,D),G=D.length>0?W(V,D,t,i):V;var j=[];switch(v.OverrideHelper.findApplicableOverrides(H,r,j),H.type){case"CIMSolidFill":L(H,G,t,j,i,n);break;case"CIMPictureFill":A(H,G,t,j,i,a,n);break;case"CIMHatchFill":T(H,G,t,j,i,n);break;case"CIMGradientFill":h=G,d=t,g=j,S=i,b=n,x=void 0,M=void 0,k=void 0,N=void 0,O=void 0,x=(y=H).primitiveName,M=o.slicedToArray($(g,x,h,null),2),k=M[0],N=M[1],O=(0,m.numericHash)(JSON.stringify(y)+N).toString(),b.push({type:"fill",templateHash:O,materialHash:k?B(O,d,g,S):O,cim:y,materialOverrides:null,colorLocked:y.colorLocked,effects:h,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1});break;case"CIMSolidStroke":X(H,G,t,j,i,n,"CIMPolygonSymbol"===e.type,s);break;case"CIMPictureStroke":z(H,G,t,j,i,n,"CIMPolygonSymbol"===e.type,s);break;case"CIMGradientStroke":E(H,G,t,j,i,n,"CIMPolygonSymbol"===e.type,s);break;case"CIMCharacterMarker":if(F(H,G,t,j,i,n))break;break;case"CIMPictureMarker":if(F(H,G,t,j,i,n))break;"CIMLineSymbol"===e.type&&(u=w(H)),J(H,G,t,j,i,a,n,u,s);break;case"CIMVectorMarker":if(F(H,G,t,j,i,n))break;"CIMLineSymbol"===e.type&&(u=w(H)),R(H,G,t,j,i,n,a,u,s,l);break;default:C.error("Cannot analyze CIM layer",H.type)}}}}}}function L(e,r,t,i,n,a){var l=e.primitiveName,f=(0,d.fromCIMColor)(e.color),u=o.slicedToArray($(i,l,r,null),2),c=u[0],s=u[1],y=(0,m.numericHash)(JSON.stringify(e)+s).toString();a.push({type:"fill",templateHash:y,materialHash:c?function(){return y}:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:U(l,t,"Color",n,f,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:r})}function A(e,r,t,i,n,a,l){var f=e.primitiveName,u=e.tintColor?(0,d.fromCIMColor)(e.tintColor):{r:255,g:255,b:255,a:1},s=o.slicedToArray($(i,f,r,null),2),y=s[0],v=s[1],p=(0,m.numericHash)(JSON.stringify(e)+v).toString(),h=(0,m.numericHash)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),g=(0,d.getValue)(e.scaleX);if("width"in e){var S=e.width,b=1,C=a.getResource(e.url);(0,c.isSome)(C)&&(b=C.width/C.height),g/=b*(e.height/S)}l.push({type:"fill",templateHash:p,materialHash:y?function(){return h}:h,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:r,color:U(f,t,"TintColor",n,u,j),height:U(f,t,"Height",n,e.height),scaleX:U(f,t,"ScaleX",n,g),angle:U(f,t,"Rotation",n,(0,d.getValue)(e.rotation)),offsetX:U(f,t,"OffsetX",n,(0,d.getValue)(e.offsetX)),offsetY:U(f,t,"OffsetY",n,(0,d.getValue)(e.offsetY)),url:e.url})}function T(e,r,t,i,n,a){var l=["Rotation","OffsetX","OffsetY"],f=i.filter((function(r){return r.primitiveName!==e.primitiveName&&-1===l.indexOf(r.propertyName)})),u=e.primitiveName,c=o.slicedToArray($(i,u,r,null),2),s=c[0],y=c[1],v=(0,m.numericHash)(JSON.stringify(e)+y).toString(),p=(0,m.numericHash)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();a.push({type:"fill",templateHash:v,materialHash:s?B(p,t,f,n):p,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:r,color:{r:255,g:255,b:255,a:1},height:U(u,t,"Separation",n,e.separation),scaleX:1,angle:U(u,t,"Rotation",n,(0,d.getValue)(e.rotation)),offsetX:U(u,t,"OffsetX",n,(0,d.getValue)(e.offsetX)),offsetY:U(u,t,"OffsetY",n,(0,d.getValue)(e.offsetY))})}function X(e,r,t,i,n,a,l,f){var u,c,s=e.primitiveName,y=(0,d.fromCIMColor)(e.color),v=void 0!==e.width?e.width:4,p=x(e.capStyle),h=M(e.joinStyle),g=e.miterLimit,S=o.slicedToArray($(i,s,r,null),2),b=S[0],C=S[1],k=(0,m.numericHash)(JSON.stringify(e)+C).toString();if(r&&r instanceof Array&&r.length>0){var N=r[r.length-1];if("CIMGeometricEffectDashes"===N.type&&"NoConstraint"===N.lineDashEnding&&null===N.offsetAlongLine){var O=(r=o.toConsumableArray(r)).pop();u=O.dashTemplate,c=O.scaleDash}}a.push({type:"line",templateHash:k,materialHash:b?function(){return k}:k,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:r,color:U(s,t,"Color",n,y,j),width:U(s,t,"Width",n,v),cap:U(s,t,"CapStyle",n,p),join:U(s,t,"JoinStyle",n,h),miterLimit:U(s,t,"MiterLimit",n,g),referenceWidth:f,zOrder:D(e.name),dashTemplate:u,scaleDash:c})}function z(e,r,t,i,n,a,l,f){var u=(0,m.numericHash)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),c=e.primitiveName,s=(0,d.fromCIMColor)(e.tintColor),y=void 0!==e.width?e.width:4,v=x(e.capStyle),p=M(e.joinStyle),h=e.miterLimit,g=o.slicedToArray($(i,c,r,null),2),S=g[0],b=g[1],C=(0,m.numericHash)(JSON.stringify(e)+b).toString();a.push({type:"line",templateHash:C,materialHash:S?function(){return u}:u,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:r,color:U(c,t,"TintColor",n,s,j),width:U(c,t,"Width",n,y),cap:U(c,t,"CapStyle",n,v),join:U(c,t,"JoinStyle",n,p),miterLimit:U(c,t,"MiterLimit",n,h),referenceWidth:f,zOrder:D(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function E(e,r,t,i,n,a,l,f){var u=e.primitiveName,c=void 0!==e.width?e.width:4,s=x(e.capStyle),y=M(e.joinStyle),v=e.miterLimit,p=o.slicedToArray($(i,u,r,null),2),h=p[0],d=p[1],g=(0,m.numericHash)(JSON.stringify(e)+d).toString();a.push({type:"line",templateHash:g,materialHash:h?B(g,t,i,n):g,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:r,color:{r:128,g:128,b:128,a:1},width:U(u,t,"Width",n,c),cap:U(u,t,"CapStyle",n,s),join:U(u,t,"JoinStyle",n,y),miterLimit:U(u,t,"MiterLimit",n,v),referenceWidth:f,zOrder:D(e.name),dashTemplate:null,scaleDash:!1})}function F(e,r,t,i,n,a){var l=e.markerPlacement;if(!l||"CIMMarkerPlacementInsidePolygon"!==l.type)return!1;var f=l,u=["Rotation","OffsetX","OffsetY"],c=i.filter((function(r){return r.primitiveName!==e.primitiveName&&-1===u.indexOf(r.propertyName)})),s="url"in e?e.url:null,y=o.slicedToArray($(i,f.primitiveName,r,null),2),v=y[0],p=y[1],h=(0,m.numericHash)(JSON.stringify(e)+p).toString(),g=f.stepY,S=null,b=1;return l.shiftOddRows&&(g*=2,S=function(e){return e?2*e:0},b=.5),a.push({type:"fill",templateHash:h,materialHash:v?B(h,t,c,n):h,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:r,color:{r:255,g:255,b:255,a:1},height:U(f.primitiveName,t,"StepY",n,g,S),scaleX:b,angle:U(f.primitiveName,t,"GridAngle",n,f.gridAngle),offsetX:U(f.primitiveName,t,"OffsetX",n,(0,d.getValue)(f.offsetX)),offsetY:U(f.primitiveName,t,"OffsetY",n,(0,d.getValue)(f.offsetY)),url:s}),!0}function J(e,r,t,i,n,a,l,f,u){var s,y=e.primitiveName,v=(0,d.getValue)(e.size),p=(0,d.getValue)(e.scaleX),h=(0,d.getValue)(e.rotation),g=(0,d.getValue)(e.offsetX),S=(0,d.getValue)(e.offsetY),b=e.tintColor?(0,d.fromCIMColor)(e.tintColor):{r:255,g:255,b:255,a:1},C=(0,m.numericHash)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),x=q(e.markerPlacement,i,t,n),M=o.slicedToArray($(i,y,r,x),2),k=M[0],N=M[1],O=(0,m.numericHash)(JSON.stringify(e)+N).toString(),w=null!=(s=e.anchorPoint)?s:{x:0,y:0};if("width"in e){var I=e.width,P=1,H=a.getResource(e.url);(0,c.isSome)(H)&&(P=H.width/H.height),p/=P*(v/I)}l.push({type:"marker",templateHash:O,materialHash:k?function(){return C}:C,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:r,scaleSymbolsProportionally:!1,alignment:f,size:U(y,t,"Size",n,v),scaleX:U(y,t,"ScaleX",n,p),rotation:U(y,t,"Rotation",n,h),offsetX:U(y,t,"OffsetX",n,g),offsetY:U(y,t,"OffsetY",n,S),color:U(y,t,"TintColor",n,b,j),anchorPoint:{x:w.x,y:-w.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:u,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function R(e,r,t,i,n,o,a,l,f,u){var c=e.markerGraphics;if(c){var s=0;if(e.scaleSymbolsProportionally){var m=e.frame;m&&(s=m.ymax-m.ymin)}var y=q(e.markerPlacement,i,t,n),v=!0,p=!1,h=void 0;try{for(var d,g=c[Symbol.iterator]();!(v=(d=g.next()).done);v=!0){var S=d.value;if(S){var b=S.symbol;if(!b)continue;switch(b.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Y(e,r,y,S,i,t,n,o,a,l,f,s,u);break;case"CIMTextSymbol":V(e,r,y,S,t,i,n,o,l,f,s)}}}}catch(e){p=!0,h=e}finally{try{v||null==g.return||g.return()}finally{if(p)throw h}}}}function V(e,r,t,i,n,a,l,f,u,c,s){v.OverrideHelper.findApplicableOverrides(i,a,[]);var y=i.geometry;if("x"in y&&"y"in y){var p,h=i.symbol,g=(p=h).underline?"underline":p.strikethrough?"line-through":"none",S=function(e){var r="",t="";if(e){var i=e.toLowerCase();-1!==i.indexOf("italic")?r="italic":-1!==i.indexOf("oblique")&&(r="oblique"),-1!==i.indexOf("bold")?t="bold":-1!==i.indexOf("light")&&(t="lighter")}return{style:r,weight:t}}(h.fontStyleName),C=(0,b.getFontFamily)(h.fontFamilyName);h.font=o.objectSpread({family:C,decoration:g},S);var x=e.frame,M=y.x-.5*(x.xmin+x.xmax),O=y.y-.5*(x.ymin+x.ymax),w=e.size/s,I=e.primitiveName,P=(0,d.getValue)(h.height)*w,H=(0,d.getValue)(h.angle),L=(0,d.getValue)(e.offsetX)+((0,d.getValue)(h.offsetX)+M)*w,A=(0,d.getValue)(e.offsetY)+((0,d.getValue)(h.offsetY)+O)*w,T=(0,d.fromCIMColor)(v.CIMSymbolHelper.getFillColor(h)),X=(0,d.fromCIMColor)(v.CIMSymbolHelper.getStrokeColor(h)),z=v.CIMSymbolHelper.getStrokeWidth(h);z||(X=(0,d.fromCIMColor)(v.CIMSymbolHelper.getFillColor(h.haloSymbol)),z=h.haloSize*w);var E=o.slicedToArray($(a,I,r,t),2),F=E[0],J=E[1],R=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),V=(0,m.numericHash)(JSON.stringify(i)+R+J).toString(),Y=U(i.primitiveName,n,"TextString",l,i.textString,d._adjustTextCase,h.textCase);if(null!=Y){var G=h.fontStyleName,D=C+(G?"-"+G.toLowerCase():"-regular"),j=D;"string"==typeof Y&&Y.indexOf("[")>-1&&h.fieldMap&&(Y=(0,d.createLabelOverrideFunction)(h.fieldMap,Y,h.textCase)),f.push({type:"text",templateHash:V,materialHash:F||"function"==typeof Y||Y.match(/\[(.*?)\]/)?function(e,r,t){return j+"-"+(0,d.evaluateValueOrFunction)(Y,e,r,t)}:j+"-"+(0,m.numericHash)(Y),cim:h,materialOverrides:null,colorLocked:e.colorLocked,effects:r,alignment:u,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:D,decoration:g,weight:U(I,n,"Weight",l,S.weight),style:U(I,n,"Size",l,S.style),size:U(I,n,"Size",l,P),angle:U(I,n,"Rotation",l,H),offsetX:U(I,n,"OffsetX",l,L),offsetY:U(I,n,"OffsetY",l,A),horizontalAlignment:k(h.horizontalAlignment),verticalAlignment:N(h.verticalAlignment),text:Y,color:T,outlineColor:X,outlineSize:z,referenceSize:c,sizeRatio:1,markerPlacement:t})}}}function Y(e,r,t,i,n,a,l,f,u,s,y,p,S){var b=i.symbol,C=b.symbolLayers;if(C)if(S)G(e,r,t,i,a,n,l,f,u,s,y,p);else{var x=C.length;if(Z(C))!function(e,r,t,i,n,a,l,f,u,c,s,y){var p=i.geometry,g=n[0],S=n[1],b=(0,h.getExtent)(p);if(!b)return;var C=o.slicedToArray((0,h.getSDFMetrics)(b,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),3),x=C[0],M=C[1],k=C[2],N={type:"sdf",geom:p,asFill:!0},O=e.primitiveName,w=(0,d.getValue)(e.size),I=(0,d.getValue)(e.rotation),P=(0,d.getValue)(e.offsetX),H=(0,d.getValue)(e.offsetY),L=S.path,A=S.primitiveName,T=g.primitiveName,X=(0,d.fromCIMColor)(v.CIMSymbolHelper.getFillColor(S)),z=(0,d.fromCIMColor)(v.CIMSymbolHelper.getStrokeColor(g)),E=v.CIMSymbolHelper.getStrokeWidth(g),F=!1,J="",R=!0,V=!1,Y=void 0;try{for(var G,D=a[Symbol.iterator]();!(R=(G=D.next()).done);R=!0){var W=G.value;W.primitiveName!==A&&W.primitiveName!==T&&W.primitiveName!==O||(void 0!==W.value?J+="-".concat(W.primitiveName,"-").concat(W.propertyName,"-").concat(JSON.stringify(W.value)):W.valueExpressionInfo&&(F=!0))}}catch(e){V=!0,Y=e}finally{try{R||null==D.return||D.return()}finally{if(V)throw Y}}var q=JSON.stringify(o.objectSpread({},e,{markerGraphics:null})),B=(0,m.numericHash)(JSON.stringify(N)+L).toString(),K={type:"marker",templateHash:(0,m.numericHash)(JSON.stringify(i)+JSON.stringify(S)+JSON.stringify(g)+q+J).toString(),materialHash:F?function(){return B}:B,cim:N,materialOverrides:null,colorLocked:e.colorLocked,effects:r,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:M,y:k},isAbsoluteAnchorPoint:!1,size:U(e.primitiveName,l,"Size",f,w),rotation:U(e.primitiveName,l,"Rotation",f,I),offsetX:U(e.primitiveName,l,"OffsetX",f,P),offsetY:U(e.primitiveName,l,"OffsetY",f,H),scaleX:1,frameHeight:y,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:x,color:U(A,l,"Color",f,X,j),outlineColor:U(T,l,"Color",f,z,j),outlineWidth:U(T,l,"Width",f,E),markerPlacement:t,path:L};u.push(K)}(e,r,t,i,C,n,a,l,f,s,y,p);else{var M=g.CIMEffectHelper.applyEffects(b.effects,i.geometry,u.geometryEngine);if(M)for(;x--;){var k=C[x];if(k&&!1!==k.enable)switch(k.type){case"CIMSolidFill":case"CIMSolidStroke":var N,O=g.CIMEffectHelper.applyEffects(k.effects,M,u.geometryEngine),w=(0,h.getExtent)(O);if(!w)continue;var I=o.slicedToArray((0,h.getSDFMetrics)(w,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),3),P=I[0],H=I[1],L=I[2],A="CIMSolidFill"===k.type,T={type:"sdf",geom:O,asFill:A},X=e.primitiveName,z=null!=(N=(0,d.getValue)(e.size))?N:10,E=(0,d.getValue)(e.rotation),F=(0,d.getValue)(e.offsetX),J=(0,d.getValue)(e.offsetY),R=k.path,V=k.primitiveName,Y=(0,d.fromCIMColor)(A?v.CIMSymbolHelper.getFillColor(k):v.CIMSymbolHelper.getStrokeColor(k)),D=A?{r:0,g:0,b:0,a:0}:(0,d.fromCIMColor)(v.CIMSymbolHelper.getStrokeColor(k)),W=v.CIMSymbolHelper.getStrokeWidth(k);if(!A&&!W)break;var q=!1,B="",K=!0,$=!1,_=void 0;try{for(var Q,ee=n[Symbol.iterator]();!(K=(Q=ee.next()).done);K=!0){var re=Q.value;re.primitiveName!==V&&re.primitiveName!==X||(void 0!==re.value?B+="-".concat(re.primitiveName,"-").concat(re.propertyName,"-").concat(JSON.stringify(re.value)):re.valueExpressionInfo&&(q=!0))}}catch(e){$=!0,_=e}finally{try{K||null==ee.return||ee.return()}finally{if($)throw _}}(0,c.isSome)(r)&&"function"==typeof r&&(q=!0);var te=JSON.stringify(o.objectSpread({},e,{markerGraphics:null})),ie=(0,m.numericHash)(JSON.stringify(T)+R).toString(),ne={type:"marker",templateHash:(0,m.numericHash)(JSON.stringify(i)+JSON.stringify(k)+te+B).toString(),materialHash:q?function(){return ie}:ie,cim:T,materialOverrides:null,colorLocked:e.colorLocked,effects:r,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:H,y:L},isAbsoluteAnchorPoint:!1,size:U(e.primitiveName,a,"Size",l,z),rotation:U(e.primitiveName,a,"Rotation",l,E),offsetX:U(e.primitiveName,a,"OffsetX",l,F),offsetY:U(e.primitiveName,a,"OffsetY",l,J),scaleX:1,frameHeight:p,rotateClockwise:e.rotateClockwise,referenceSize:y,sizeRatio:P,color:U(V,a,"Color",l,Y,j),outlineColor:U(V,a,"Color",l,D,j),outlineWidth:U(V,a,"Width",l,W),markerPlacement:t,path:R};f.push(ne);break;default:G(e,r,t,i,a,n,l,f,u,s,y,p)}}}}}function G(e,r,t,i,n,a,l,f,u,y,p,h){var g,S,b,C=(S=i,{type:(g=e).type,enable:!0,name:g.name,colorLocked:g.colorLocked,primitiveName:g.primitiveName,anchorPoint:g.anchorPoint,anchorPointUnits:g.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:g.rotateClockwise,rotation:0,size:g.size,billboardMode3D:g.billboardMode3D,depth3D:g.depth3D,frame:g.frame,markerGraphics:[S],scaleSymbolsProportionally:g.scaleSymbolsProportionally,respectFrame:g.respectFrame,clippingPath:g.clippingPath}),x=["Rotation","OffsetX","OffsetY"];b=a.filter((function(r){return r.primitiveName!==e.primitiveName||-1===x.indexOf(r.propertyName)}));var M="",k=!0,N=!1,O=void 0;try{for(var w,I=a[Symbol.iterator]();!(k=(w=I.next()).done);k=!0){var P=w.value;void 0!==P.value&&(M+="-".concat(P.primitiveName,"-").concat(P.propertyName,"-").concat(JSON.stringify(P.value)))}}catch(e){N=!0,O=e}finally{try{k||null==I.return||I.return()}finally{if(N)throw O}}var H=o.slicedToArray(v.CIMSymbolHelper.getTextureAnchor(C,u),3),L=H[0],A=H[1],T=H[2],X=e.primitiveName,z=(0,d.getValue)(e.rotation),E=(0,d.getValue)(e.offsetX),F=(0,d.getValue)(e.offsetY),J=(0,m.numericHash)(JSON.stringify(C)+M).toString(),R={type:"marker",templateHash:J,materialHash:b.length>0||(0,c.isSome)(r)&&"function"==typeof r?B(J,n,b,l):J,cim:C,materialOverrides:b,colorLocked:e.colorLocked,effects:r,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:y,anchorPoint:{x:L,y:A},isAbsoluteAnchorPoint:!1,size:e.size,rotation:U(X,n,"Rotation",l,z),offsetX:U(X,n,"OffsetX",l,E),offsetY:U(X,n,"OffsetY",l,F),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:T/(0,s.pt2px)(e.size),markerPlacement:t};f.push(R)}function D(e){if(e&&0===e.indexOf("Level_")){var r=parseInt(e.substr(6),10);if(!isNaN(r))return r}return 0}function j(e){if(!e||0===e.length)return null;var r=new(0,l.default)(e).toRgba();return{r:r[0],g:r[1],b:r[2],a:r[3]}}function U(e,r,t,i,n,o,a){var l=r[e];if(l){var f=l[t];if("string"==typeof f||"number"==typeof f||f instanceof Array)return o?o.call(null,f,a):f;if(null!=f&&f instanceof y.ArcadeExpression)return function(e,r,t){var l=(0,S.default)(f,e,{$view:t},i.geometryType,r);return null!==l&&o&&(l=o.call(null,l,a)),null!==l?l:n}}return n}function W(e,r,t,i){var n=!0,o=!1,a=void 0;try{for(var l,u=function(e,r){var n=r.value;if(n.valueExpressionInfo){var o=t[n.primitiveName]&&t[n.primitiveName][n.propertyName];o instanceof y.ArcadeExpression&&(n.fn=function(e,r,t){return(0,S.default)(o,e,{$view:t},i.geometryType,r)})}},c=r[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)u(0,l)}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return function(t,i,n){var o=!0,a=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;s.fn&&(s.value=s.fn(t,i,n))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var m,y=[],v=!0,p=!1,h=void 0;try{for(var d,g=e[Symbol.iterator]();!(v=(d=g.next()).done);v=!0){var S,b=d.value,C=null==(S=b)?void 0:S.primitiveName;if(C){var x=!1,M=!0,k=!1,N=void 0;try{for(var O,w=r[Symbol.iterator]();!(M=(O=w.next()).done);M=!0){var I=O.value;if(I.primitiveName===C){var P=(m=I.propertyName)?m.charAt(0).toLowerCase()+m.substr(1):m;null!=I.value&&I.value!==b[P]&&(x||(b=(0,f.clone)(b),x=!0),b[P]=I.value)}}}catch(e){k=!0,N=e}finally{try{M||null==w.return||w.return()}finally{if(k)throw N}}}y.push(b)}}catch(e){p=!0,h=e}finally{try{v||null==g.return||g.return()}finally{if(p)throw h}}return y}}function q(e,r,t,i){var n=[];if(v.OverrideHelper.findApplicableOverrides(e,r,n),0===n.length)return e;var o=!0,a=!1,l=void 0;try{for(var u,c=function(e,r){var n=r.value;if(n.valueExpressionInfo){var o=t[n.primitiveName]&&t[n.primitiveName][n.propertyName];o instanceof y.ArcadeExpression&&(n.fn=function(e,r,t){return(0,S.default)(o,e,{$view:t},i.geometryType,r)})}},s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0)c(0,u)}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return function(r,t,i){var o=!0,a=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;s.fn&&(s.value=s.fn(r,t,i))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var m,y=(0,f.clone)(e),v=e.primitiveName,p=!0,h=!1,d=void 0;try{for(var g,S=n[Symbol.iterator]();!(p=(g=S.next()).done);p=!0){var b=g.value;if(b.primitiveName===v){var C=(m=b.propertyName)?m.charAt(0).toLowerCase()+m.substr(1):m;null!=b.value&&b.value!==y[C]&&(y[C]=b.value)}}}catch(e){h=!0,d=e}finally{try{p||null==S.return||S.return()}finally{if(h)throw d}}return y}}function B(e,r,t,i){var n=!0,o=!1,a=void 0;try{for(var l,f=function(e,t){var n=t.value;if(n.valueExpressionInfo){var o=r[n.primitiveName]&&r[n.primitiveName][n.propertyName];o instanceof y.ArcadeExpression&&(n.fn=function(e,r,t){return(0,S.default)(o,e,{$view:t},i.geometryType,r)})}},u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0)f(0,l)}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return function(r,i,n){var o=!0,a=!1,l=void 0;try{for(var f,u=t[Symbol.iterator]();!(o=(f=u.next()).done);o=!0){var c=f.value;c.fn&&(c.value=c.fn(r,i,n))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return(0,m.numericHash)(e+v.OverrideHelper.buildOverrideKey(t)).toString()}}function K(e,r){if(!r||0===r.length)return e;var t=JSON.parse(JSON.stringify(e));return v.OverrideHelper.applyOverrides(t,r),t}function $(e,r,t,i){var n=!1,o="",a=!0,l=!1,f=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var m=u.value;m.primitiveName===r&&(void 0!==m.value?o+="-".concat(m.primitiveName,"-").concat(m.propertyName,"-").concat(JSON.stringify(m.value)):m.valueExpressionInfo&&(n=!0))}}catch(e){l=!0,f=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw f}}return(0,c.isSome)(t)&&"function"==typeof t&&(n=!0),(0,c.isSome)(i)&&"function"==typeof i&&(n=!0),[n,o]}function _(e,r,t){if(e&&r)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=e.symbolLayers;if(!i)return;var n=!0,o=!1,a=void 0;try{for(var l,f=i[Symbol.iterator]();!(n=(l=f.next()).done);n=!0){var u=l.value;switch(ee(u,r,t),u.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in u&&u.url&&t.push(r.fetchResource(u.url,null));break;case"CIMVectorMarker":var c=u.markerGraphics;if(!c)continue;var s=!0,m=!1,y=void 0;try{for(var v,p=c[Symbol.iterator]();!(s=(v=p.next()).done);s=!0){var h=v.value;if(h){var d=h.symbol;d&&_(d,r,t)}}}catch(e){m=!0,y=e}finally{try{s||null==p.return||p.return()}finally{if(m)throw y}}}}}catch(e){o=!0,a=e}finally{try{n||null==f.return||f.return()}finally{if(o)throw a}}}}var Q,Z=function(e){return e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects};function ee(e,r,t){e.effects&&!(0,c.isSome)(r.geometryEngine)&&(Q?t.push(Q):(0,d.isGeometryEngineRequired)(e.effects)&&(Q=(0,d.importGeometryEngine)(),t.push(Q),Q.then((function(e){return r.geometryEngine=e}))))}})),t.register("8rAvb",(function(r,i){e(r.exports,"getSDFInfo",(function(){return f})),e(r.exports,"getExtent",(function(){return c})),e(r.exports,"getSDFMetrics",(function(){return s})),e(r.exports,"buildSDF",(function(){return m}));var n=t("8TSCy"),o=t("7Dw9j"),a=t("79LpT"),l=t("i50K3");function f(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var r=e.symbolLayers;return r&&1===r.length?f(r[0]):null;case"CIMVectorMarker":var t,i=e.markerGraphics;if(!i||1!==i.length)return null;var n=i[0];if(!n)return null;var o=n.geometry;if(!o)return null;var a=n.symbol;return!a||"CIMPolygonSymbol"!==a.type&&"CIMLineSymbol"!==a.type||null!=(t=a.symbolLayers)&&t.some((function(e){return!!e.effects}))?null:{geom:o,asFill:"CIMPolygonSymbol"===a.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function u(e){var r=1/0,t=-1/0,i=1/0,n=-1/0,o=!0,a=!1,l=void 0,f=!0,u=!1,c=void 0;try{for(var s,m=e[Symbol.iterator]();!(f=(s=m.next()).done);f=!0){var y=s.value;try{for(var v,p=y[Symbol.iterator]();!(o=(v=p.next()).done);o=!0){var h=v.value;h[0]<r&&(r=h[0]),h[0]>t&&(t=h[0]),h[1]<i&&(i=h[1]),h[1]>n&&(n=h[1])}}catch(e){a=!0,l=e}finally{try{o||null==p.return||p.return()}finally{if(a)throw l}}}}catch(e){u=!0,c=e}finally{try{f||null==m.return||m.return()}finally{if(u)throw c}}return[r,i,t,n]}function c(e){return e?e.rings?u(e.rings):e.paths?u(e.paths):(0,a.isExtent)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function s(e,r,t,i,o){var a=n.slicedToArray(e,4),l=a[0],f=a[1],u=a[2],c=a[3];if(u<l||c<f)return[0,0,0];var s=u-l,m=c-f,y=Math.floor(31.5),v=(128-2*(y+1))/Math.max(s,m),p=Math.round(s*v)+2*y,h=Math.round(m*v)+2*y,d=1;r&&(d=h/v/(r.ymax-r.ymin));var g=0,S=0;if(i)if(o){if(r&&t&&r.ymax-r.ymin>0){var b=(r.xmax-r.xmin)/(r.ymax-r.ymin);g=i.x/(t*b),S=i.y/t}}else g=i.x,S=i.y;return g=.5*(r.xmax+r.xmin)+g*(r.xmax-r.xmin),S=.5*(r.ymax+r.ymin)+S*(r.ymax-r.ymin),g-=l,S-=f,g*=v,S*=v,[d,(g+=y)/p-.5,-((S+=y)/h-.5)]}function m(e){var r,t=(r=e.geom)?r.rings?r.rings:r.paths?r.paths:void 0!==r.xmin&&void 0!==r.ymin&&void 0!==r.xmax&&void 0!==r.ymax?[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]:null:null,i=function(e){var r=1/0,t=-1/0,i=1/0,n=-1/0,o=!0,a=!1,f=void 0,u=!0,c=!1,s=void 0;try{for(var m,y=e[Symbol.iterator]();!(u=(m=y.next()).done);u=!0){var v=m.value;try{for(var p,h=v[Symbol.iterator]();!(o=(p=h.next()).done);o=!0){var d=p.value;d[0]<r&&(r=d[0]),d[0]>t&&(t=d[0]),d[1]<i&&(i=d[1]),d[1]>n&&(n=d[1])}}catch(e){a=!0,f=e}finally{try{o||null==h.return||h.return()}finally{if(a)throw f}}}}catch(e){c=!0,s=e}finally{try{u||null==y.return||y.return()}finally{if(c)throw s}}return new(0,l.default)(r,i,t-r,n-i)}(t),o=Math.floor(31.5),a=(128-2*(o+1))/Math.max(i.width,i.height),f=Math.round(i.width*a)+2*o,u=Math.round(i.height*a)+2*o,c=[],s=!0,m=!1,v=void 0;try{for(var p,h=t[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var d=p.value;if(d&&d.length>1){var g=[],S=!0,b=!1,C=void 0;try{for(var x,M=d[Symbol.iterator]();!(S=(x=M.next()).done);S=!0){var k=x.value,N=n.slicedToArray(k,2),O=N[0],w=N[1];O-=i.x,w-=i.y,O*=a,w*=a,O+=o-.5,w+=o-.5,e.asFill?g.push([O,w]):g.push([Math.round(O),Math.round(w)])}}catch(e){b=!0,C=e}finally{try{S||null==M.return||M.return()}finally{if(b)throw C}}if(e.asFill){var I=g.length-1;g[0][0]===g[I][0]&&g[0][1]===g[I][1]||g.push(g[0])}c.push(g)}}}catch(e){m=!0,v=e}finally{try{s||null==h.return||h.return()}finally{if(m)throw v}}var P=function(e,r,t,i){for(var n=r*t,o=new Array(n),a=i*i+1,l=0;l<n;++l)o[l]=a;var f=!0,u=!1,c=void 0;try{for(var s,m=e[Symbol.iterator]();!(f=(s=m.next()).done);f=!0)for(var y=s.value,v=y.length,p=1;p<v;++p){var h=y[p-1],d=y[p],g=void 0,S=void 0,b=void 0,C=void 0;h[0]<d[0]?(g=h[0],S=d[0]):(g=d[0],S=h[0]),h[1]<d[1]?(b=h[1],C=d[1]):(b=d[1],C=h[1]);var x=Math.floor(g)-i,M=Math.floor(S)+i,k=Math.floor(b)-i,N=Math.floor(C)+i;x<0&&(x=0),M>r&&(M=r),k<0&&(k=0),N>t&&(N=t);for(var O=d[0]-h[0],w=d[1]-h[1],I=O*O+w*w,P=x;P<M;P++)for(var H=k;H<N;H++){var L=void 0,A=void 0,T=(P-h[0])*O+(H-h[1])*w;T<0?(L=h[0],A=h[1]):T>I?(L=d[0],A=d[1]):(T/=I,L=h[0]+T*O,A=h[1]+T*w);var X=(P-L)*(P-L)+(H-A)*(H-A),z=(t-H-1)*r+P;X<o[z]&&(o[z]=X)}}}catch(e){u=!0,c=e}finally{try{f||null==m.return||m.return()}finally{if(u)throw c}}for(var E=0;E<n;++E)o[E]=Math.sqrt(o[E]);return o}(c,f,u,o);return e.asFill&&function(e,r,t,i,n){var o=!0,a=!1,l=void 0;try{for(var f,u=e[Symbol.iterator]();!(o=(f=u.next()).done);o=!0)for(var c=f.value,s=c.length,m=1;m<s;++m){var y=c[m-1],v=c[m],p=void 0,h=void 0,d=void 0,g=void 0;y[0]<v[0]?(p=y[0],h=v[0]):(p=v[0],h=y[0]),y[1]<v[1]?(d=y[1],g=v[1]):(d=v[1],g=y[1]);var S=Math.floor(p),b=Math.floor(h)+1,C=Math.floor(d),x=Math.floor(g)+1;S<i&&(S=i),b>r-i&&(b=r-i),C<i&&(C=i),x>t-i&&(x=t-i);for(var M=C;M<x;++M)if(y[1]>M!=v[1]>M){for(var k=(t-M-1)*r,N=S;N<b;++N)N<(v[0]-y[0])*(M-y[1])/(v[1]-y[1])+y[0]&&(n[k+N]=-n[k+N]);for(var O=i;O<S;++O)n[k+O]=-n[k+O]}}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(c,f,u,o,P),[y(P,o),f,u]}function y(e,r){for(var t=2*r,i=e.length,n=new Uint8Array(4*i),a=0;a<i;++a){var l=.5-e[a]/t;(0,o.packFloatRGBA)(l,n,4*a)}return n}})),t.register("kNgwU",(function(r,i){e(r.exports,"default",(function(){return f}));var n=t("8TSCy"),o=t("kyj08"),a=t("jHOLN"),l=t("ibKgR");function f(e,r,t,i,f){var c=e.referencesGeometry()&&f?function(e,r,t){var i=t.transform,f=t.hasZ,c=t.hasM;u.has(r)||u.set(r,function(e){var r={};switch(e){case"esriGeometryPoint":return function(e,t,i,n){return(0,l.unquantizePoint)(t,r,e,i,n)};case"esriGeometryPolygon":return function(e,t,i,n){return(0,l.unquantizePolygon)(t,r,e,i,n)};case"esriGeometryPolyline":return function(e,t,i,n){return(0,l.unquantizePolyline)(t,r,e,i,n)};case"esriGeometryMultipoint":return function(e,t,i,n){return(0,l.unquantizeMultipoint)(t,r,e,i,n)};default:return a.default.getLogger("esri.views.2d.support.arcadeOnDemand").error(new(0,o.default)("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(r));var s=u.get(r)(e.geometry,i,f,c);return n.objectSpread({},e,{geometry:s})}(r,i,f):r,s=e.repurposeFeature(c);try{return e.evaluate(n.objectSpread({},t,{$feature:s}))}catch(e){return a.default.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}var u=new Map})),t.register("kyAlm",(function(r,t){e(r.exports,"getFontFamily",(function(){return i})),e(r.exports,"getFullyQualifiedFontName",(function(){return n}));function i(e){var r=e.toLowerCase().split(" ").join("-");switch(r){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return r}}function n(e){var r=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return i(e.family)+(r.length>0?r:"-regular")}}))}();
//# sourceMappingURL=SymbolProcessor.7798c368.js.map
