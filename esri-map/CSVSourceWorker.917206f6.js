!function(){function e(e,t,a,r){Object.defineProperty(e,t,{get:a,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("9AqbE",(function(a,r){e(a.exports,"WhereClause",(function(){return N})),e(a.exports,"defaultAttributeAdapter",(function(){return C}));var n=t("8TSCy"),i=t("2VlWd"),l=t("3AoCq"),s=t("6709t"),u=t("9E0LE"),o=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,c=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,d=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,f=new Set(["current_timestamp","current_date","current_time"]);function p(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"0",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"0";if("+"===l||"-"===l){var o="".concat(p(parseInt(e,10),4),"-").concat(p(parseInt(t,10),2),"-").concat(p(parseInt(a,10),2)),c="";parseFloat(i)<10&&(c="0");var v="".concat(p(parseInt(r,10),2),":").concat(p(parseInt(n,10),2),":").concat(c+parseFloat(i).toString()),d="".concat(l).concat(p(parseInt(s,10),2),":").concat(p(parseInt(u,10),2));return new Date(o+"T"+v+d)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(a,10),parseInt(r,10),parseInt(n,10),parseFloat(i))}var m=function(){"use strict";function e(){n.classCallCheck(this,e)}return n.createClass(e,null,[{key:"makeBool",value:function(e){return T(e)}},{key:"featureValue",value:function(e,t,a,r){return O(e,t,a,r)}},{key:"equalsNull",value:function(e){return null===e}},{key:"applyLike",value:function(e,t,a){return x(e,t,a)}},{key:"ensureArray",value:function(e){return S(e)}},{key:"applyIn",value:function(e,t){return A(e,t)}},{key:"currentDate",value:function(){var e=new Date;return e.setHours(0,0,0,0),e}},{key:"makeSqlInterval",value:function(e,t,a){return s.SqlInterval.createFromValueAndQualifer(e,t,a)}},{key:"convertInterval",value:function(e){return e instanceof s.SqlInterval?e.valueInMilliseconds():e}},{key:"currentTimestamp",value:function(){return new Date}},{key:"compare",value:function(e,t,a){return F(e,t,a)}},{key:"calculate",value:function(e,t,a){return M(e,t,a)}},{key:"makeComparable",value:function(e){return E(e)}},{key:"evaluateFunction",value:function(e,t){return(0,s.evaluateFunction)(e,t)}},{key:"lookup",value:function(e,t){var a=t[e];return void 0===a?null:a}},{key:"between",value:function(e,t){return null==e||null==t[0]||null==t[1]?null:e>=t[0]&&e<=t[1]}},{key:"notbetween",value:function(e,t){return null==e||null==t[0]||null==t[1]?null:e<t[0]||e>t[1]}},{key:"ternaryNot",value:function(e){return w(e)}},{key:"ternaryAnd",value:function(e,t){return I(e,t)}},{key:"ternaryOr",value:function(e,t){return k(e,t)}}]),e}(),N=function(){"use strict";function e(t,a){n.classCallCheck(this,e),this.fieldsIndex=a,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=u.WhereGrammar.parse(t);var r=this._extractExpressionInfo(a),i=r.isStandardized,l=r.isAggregate,s=r.referencedFieldNames;this.referencedFieldNames=s,this.isStandardized=i,this.isAggregate=l}return n.createClass(e,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"testSet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,a={},r=!0,n=!1,i=void 0;try{for(var l,s=function(r,n){var i=n.value;a[i]=e.map((function(e){return t.getAttribute(e,i)}))},u=this.fieldNames[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)s(u,l)}catch(e){n=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw i}}return!!this._evaluateNode(this.parseTree,{attributes:a},C)}},{key:"calculateValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,a=this._evaluateNode(this.parseTree,e,t);return a instanceof s.SqlInterval?a.valueInMilliseconds()/864e5:a}},{key:"calculateValueCompiled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.datefields):(0,i.default)("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.datefields))}},{key:"testFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return!!this._evaluateNode(this.parseTree,e,t)}},{key:"testFeatureCompiled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.datefields):(0,i.default)("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.datefields))}},{key:"hasDateFunctions",get:function(){var e=this;return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(function(t){"current_time"===t.type?e._hasDateFunctions=!0:"function"===t.type&&(e._hasDateFunctions=e._hasDateFunctions||f.has(t.name.toLowerCase()))}))),this._hasDateFunctions}},{key:"getFunctions",value:function(){var e=new Set;return this._visitAll(this.parseTree,(function(t){"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}},{key:"getExpressions",value:function(){var e=new Map;return this._visitAll(this.parseTree,(function(t){if("function"===t.type){var a=t.name.toLowerCase(),r=t.args.value[0];if("column_ref"===r.type){var n=r.column,i="".concat(a,"-").concat(n);e.has(i)||e.set(i,{aggregateType:a,field:n})}}})),n.toConsumableArray(e.values())}},{key:"getVariables",value:function(){var e=new Set;return this._visitAll(this.parseTree,(function(t){"param"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}},{key:"_compileMe",value:function(){var e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",e).bind(m)}},{key:"_extractExpressionInfo",value:function(e){var t=this,a=[],r=new Set,n=!0,i=!0;return this._visitAll(this.parseTree,(function(u){switch(u.type){case"column_ref":var o,c,v=e.get(u.column);v?o=c=v.name:o=(c=u.column).toLowerCase(),!v||"date"!==v.type&&"esriFieldTypeDate"!==v.type||(t.datefields[v.name]=1),r.has(o)||(r.add(o),a.push(c)),u.column=c;break;case"function":var d=u.name,h=u.args.value.length;n&&(n=(0,s.isStandardized)(d,h)),i&&(i=(0,l.isAggregate)(d,h))}})),{referencedFieldNames:Array.from(a),isStandardized:n,isAggregate:i}}},{key:"_visitAll",value:function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this._visitAll(e.operand,t),this._visitAll(e.value,t);break;case"case_expression":var a=!0,r=!1,n=void 0;try{for(var i,l=e.clauses[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var s=i.value;this._visitAll(s,t)}}catch(e){r=!0,n=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw n}}"simple"===e.format&&this._visitAll(e.operand,t),null!==e.else&&this._visitAll(e.else,t);break;case"expr_list":var u=!0,o=!1,c=void 0;try{for(var v,d=e.value[Symbol.iterator]();!(u=(v=d.next()).done);u=!0){var h=v.value;this._visitAll(h,t)}}catch(e){o=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(o)throw c}}break;case"unary_expr":this._visitAll(e.expr,t);break;case"binary_expr":this._visitAll(e.left,t),this._visitAll(e.right,t);break;case"function":this._visitAll(e.args,t)}}},{key:"evaluateNodeToJavaScript",value:function(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case_expression":var t="";if("simple"===e.format){var a="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";t="( ";for(var r=0;r<e.clauses.length;r++)t+=" ("+a+" === this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(var n=0;n<e.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t;case"param":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expr_list":var i="[",l=!0,s=!1,u=void 0;try{for(var o,c=e.value[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var v=o.value;"["!==i&&(i+=","),i+=this.evaluateNodeToJavaScript(v)}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}return i+="]";case"unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary_expr":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return JSON.stringify(e.value);case"date":return"(new Date("+_(e.value).getTime().toString()+"))";case"timestamp":return"(new Date("+g(e.value).getTime().toString()+"))";case"current_time":return"date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case"column_ref":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw new Error("Unsupported sql syntax "+e.type)}},{key:"_evaluateNode",value:function(e,t,a){switch(e.type){case"interval":var r=this._evaluateNode(e.value,t,a);return s.SqlInterval.createFromValueAndQualifer(r,e.qualifier,e.op);case"case_expression":if("simple"===e.format){for(var n=E(this._evaluateNode(e.operand,t,a)),i=0;i<e.clauses.length;i++)if(n===E(this._evaluateNode(e.clauses[i].operand,t,a)))return this._evaluateNode(e.clauses[i].value,t,a);if(null!==e.else)return this._evaluateNode(e.else,t,a)}else{for(var u=0;u<e.clauses.length;u++)if(T(this._evaluateNode(e.clauses[u].operand,t,a)))return this._evaluateNode(e.clauses[u].value,t,a);if(null!==e.else)return this._evaluateNode(e.else,t,a)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":var o=[],c=!0,v=!1,d=void 0;try{for(var h,f=e.value[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;o.push(this._evaluateNode(p,t,a))}}catch(e){v=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(v)throw d}}return o;case"unary_expr":return w(this._evaluateNode(e.expr,t,a));case"binary_expr":switch(e.operator){case"AND":return I(this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a));case"OR":return k(this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this._evaluateNode(e.left,t,a);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this._evaluateNode(e.left,t,a);case"IN":var y=S(this._evaluateNode(e.right,t,a));return A(this._evaluateNode(e.left,t,a),y);case"NOT IN":var m=S(this._evaluateNode(e.right,t,a));return w(A(this._evaluateNode(e.left,t,a),m));case"BETWEEN":var N=this._evaluateNode(e.left,t,a),b=this._evaluateNode(e.right,t,a);return null==N||null==b[0]||null==b[1]?null:N>=E(b[0])&&N<=E(b[1]);case"NOTBETWEEN":var J=this._evaluateNode(e.left,t,a),D=this._evaluateNode(e.right,t,a);return null==J||null==D[0]||null==D[1]?null:J<E(D[0])||J>E(D[1]);case"LIKE":return x(this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a),e.escape);case"NOT LIKE":return w(x(this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return F(e.operator,this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a));case"-":case"+":case"*":case"/":return M(e.operator,this._evaluateNode(e.left,t,a),this._evaluateNode(e.right,t,a))}case"null":case"bool":case"string":case"number":return e.value;case"date":return _(e.value);case"timestamp":return g(e.value);case"current_time":var C=new Date;return"date"===e.mode&&C.setHours(0,0,0,0),C;case"column_ref":return O(t,e.column,this.datefields,a);case"function":var q=this._evaluateNode(e.args,t,a);return this.isAggregate?(0,l.aggregateFunction)(e.name,q):(0,s.evaluateFunction)(e.name,q)}throw new Error("Unsupported sql syntax "+e.type)}}],[{key:"create",value:function(t,a){return new e(t,a)}}]),e}();function g(e){var t=c.exec(e);if(null!==t){var a=n.slicedToArray(t,7);return y(a[1],a[2],a[3],a[4],a[5],a[6])}if(null!==(t=v.exec(e))){var r=n.slicedToArray(t,10);return y(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9])}if(null!==(t=d.exec(e))){var i=n.slicedToArray(t,9);return y(i[1],i[2],i[3],i[4],i[5],"0",i[6],i[7],i[8])}if(null!==(t=h.exec(e))){var l=n.slicedToArray(t,6);return y(l[1],l[2],l[3],l[4],l[5])}if(null!==(t=o.exec(e))){var s=n.slicedToArray(t,4);return y(s[1],s[2],s[3])}throw new Error("SQL Invalid Timestamp")}function _(e){var t=o.exec(e);if(null===t)throw new Error("SQL Invalid Date");var a=n.slicedToArray(t,4),r=a[1],i=a[2],l=a[3];return new Date(parseInt(r,10),parseInt(i,10)-1,parseInt(l,10))}function T(e){return!0===e}function S(e){return Array.isArray(e)?e:[e]}function w(e){return null!==e?!0!==e:null}function I(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function k(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function A(e,t){if(null==e)return null;var a=!1,r=!0,n=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if(null==u)a=null;else if(e===u){a=!0;break}}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}var b,J,D="-[]/{}()*+?.\\^$|";function x(e,t,a){return null==e?null:function(e,t){for(var a=t,r="",n=b.Normal,i=0;i<e.length;i++){var l=e.charAt(i);switch(n){case b.Normal:l===a?n=b.Escaped:D.includes(l)?r+="\\"+l:r+="%"===l?".*":"_"===l?".":l;break;case b.Escaped:D.includes(l)?r+="\\"+l:r+=l,n=b.Normal}}return new RegExp("^"+r+"$","m")}(t,a).test(e)}function E(e){return e instanceof Date?e.valueOf():e}function F(e,t,a){if(null==t||null==a)return null;var r=E(t),n=E(a);switch(e){case"<>":return r!==n;case"=":return r===n;case">":return r>n;case"<":return r<n;case">=":return r>=n;case"<=":return r<=n}}function M(e,t,a){if(t instanceof s.SqlInterval)if(a instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+a.getTime());case"-":return t.valueInMilliseconds()-a.getTime();case"*":return t.valueInMilliseconds()*a.getTime();case"/":return t.valueInMilliseconds()/a.getTime()}else if(a instanceof s.SqlInterval)switch(e){case"+":return s.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()+a.valueInMilliseconds());case"-":return s.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()-a.valueInMilliseconds());case"*":return t.valueInMilliseconds()*a.valueInMilliseconds();case"/":return t.valueInMilliseconds()/a.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(a instanceof s.SqlInterval)if(t instanceof Date)switch(e){case"+":return new Date(a.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-a.valueInMilliseconds());case"*":return t.getTime()*a.valueInMilliseconds();case"/":return t.getTime()/a.valueInMilliseconds()}else a=a.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof a)switch(a=24*a*36e5,t=t.getTime(),e){case"+":return new Date(t+a);case"-":return new Date(t-a);case"*":return new Date(t*a);case"/":return new Date(t/a)}else if(a instanceof Date&&"number"==typeof t)switch(t=24*t*36e5,a=a.getTime(),e){case"+":return new Date(t+a);case"-":return new Date(t-a);case"*":return new Date(t*a);case"/":return new Date(t/a)}switch(e){case"+":return t+a;case"-":return t-a;case"*":return t*a;case"/":return t/a}}function O(e,t,a,r){var n=r.getAttribute(e,t);return null!=n&&1===a[t]?new Date(n):n}(J=b||(b={}))[J.Normal=0]="Normal",J[J.Escaped=1]="Escaped";var C={getAttribute:function(e,t){return(a=e,a&&"object"==typeof a.attributes?e.attributes:e)[t];var a}}}))}();
//# sourceMappingURL=CSVSourceWorker.917206f6.js.map
