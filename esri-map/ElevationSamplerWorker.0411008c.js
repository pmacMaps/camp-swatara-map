!function(){function r(r,e,n,t){Object.defineProperty(r,e,{get:n,set:t,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("4pnUn",(function(n,t){r(n.exports,"georeference",(function(){return v})),r(n.exports,"georeferenceApplyTransform",(function(){return T})),r(n.exports,"georeferenceByTransform",(function(){return P})),r(n.exports,"ungeoreference",(function(){return V})),r(n.exports,"ungeoreferenceByTransform",(function(){return d}));var o=e("7qybv"),i=e("5vzSQ"),a=e("gnwu9"),f=e("gEEzE"),u=e("89KCq"),c=e("j3x2p"),l=e("7RvA5"),s=e("7USIy"),p=e("17b31"),g=e("YI2am"),y=e("hhwnq"),h=e("gLl1O"),m=e("9r2zb");function v(r,e,n){return(0,h.isGeographicMesh)(e.spatialReference,n)?(t=r,i=n,a=(o=e).spatialReference,f=C(o,i,R),u=new Float64Array(t.position.length),l=function(r,e,n,t){(0,y.t)(g.BufferViewVec3f64.fromTypedArray(t),g.BufferViewVec3f64.fromTypedArray(r),e);var o=new Float64Array(r.length);return(0,m.projectFromPCPF)(t,o,n)}(t.position,f,a,u),s=(0,c.a)(_,f),{position:l,normal:A(l,u,t.normal,s,a),tangent:w(l,u,t.tangent,s,a)}):function(r,e,n){for(var t=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,u=M(n?n.unit:null,e.spatialReference),c=u.horizontal,l=u.vertical,s=0;s<o.length;s+=3)t[s+0]=o[s+0]*c+i,t[s+1]=o[s+1]*c+a,t[s+2]=o[s+2]*l+f;return{position:t,normal:r.normal,tangent:r.tangent}}(r,e,n);var t,o,i,a,f,u,l,s}function T(r,e,n){var t=r.position,i=r.normal,a=r.tangent;if((0,o.isNone)(e))return{position:t,normal:i,tangent:a};var f=e.localMatrix;return v({position:(0,m.transformPosition)(t,new Float64Array(t.length),f),normal:(0,o.isSome)(i)?(0,m.transformNormal)(i,new Float32Array(i.length),f):null,tangent:(0,o.isSome)(a)?(0,m.transformTangent)(a,new Float32Array(a.length),f):null},e.getOriginPoint(n),{geographic:e.geographic})}function P(r,e,n){var t;return null!=n&&n.useTransform?{vertexAttributes:{position:r.position,normal:r.normal,tangent:r.tangent},transform:new(0,p.default)({origin:[e.x,e.y,null!=(t=e.z)?t:0],geographic:(0,h.isGeographicMesh)(e.spatialReference,n)})}:{vertexAttributes:v(r,e,n),transform:null}}function V(r,e,n){return(0,h.isGeographicMesh)(e.spatialReference,n)?B(r,e,n):F(r,e,n)}function d(r,e,n,t){if((0,o.isNone)(e))return V(r,n,t);var i=T(r,e,n.spatialReference);return n.equals(e.getOriginPoint(n.spatialReference))?F(i,n,t):(0,h.isGeographicMesh)(n.spatialReference,t)?B(i,n,t):F(i,n,t)}function A(r,e,n,t,i){if((0,o.isNone)(n))return null;var a=new Float32Array(n.length);return(0,y.a)(g.BufferViewVec3f.fromTypedArray(a),g.BufferViewVec3f.fromTypedArray(n),t),(0,m.projectNormalFromPCPF)(a,r,e,i,a),a}function w(r,e,n,t,i){if((0,o.isNone)(n))return null;var a=new Float32Array(n.length);(0,y.a)(g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT),g.BufferViewVec3f.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT),t);for(var f=3;f<a.length;f+=4)a[f]=n[f];return(0,m.projectTangentFromPCPF)(a,r,e,i,a),a}function F(r,e,n){for(var t=new Float64Array(r.position.length),o=r.position,i=e.x,a=e.y,f=e.z||0,u=M(n?n.unit:null,e.spatialReference),c=u.horizontal,l=u.vertical,s=0;s<o.length;s+=3)t[s+0]=(o[s+0]-i)/c,t[s+1]=(o[s+1]-a)/c,t[s+2]=(o[s+2]-f)/l;return{position:t,normal:r.normal,tangent:r.tangent}}function B(r,e,n){var t=e.spatialReference;C(e,n,R);var o=(0,f.a)(N,R),i=new Float64Array(r.position.length),a=function(r,e,n,t){var o=(0,m.projectToPCPF)(r,e,t),i=g.BufferViewVec3f64.fromTypedArray(o),a=new Float64Array(o.length),f=g.BufferViewVec3f64.fromTypedArray(a);return(0,y.t)(f,i,n),a}(r.position,t,o,i),u=(0,c.a)(_,o);return{position:a,normal:x(r.normal,r.position,i,t,u),tangent:E(r.tangent,r.position,i,t,u)}}function C(r,e,n){(0,l.computeTranslationToOriginAndRotation)(r.spatialReference,[r.x,r.y,r.z||0],n,(0,s.getSphericalPCPF)(r.spatialReference));var t=M(e?e.unit:null,r.spatialReference),o=t.horizontal,i=t.vertical;return(0,f.h)(n,n,[o,o,i]),n}function x(r,e,n,t,i){if((0,o.isNone)(r))return null;var a=(0,m.projectNormalToPCPF)(r,e,n,t,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a);return(0,y.a)(f,f,i),a}function E(r,e,n,t,i){if((0,o.isNone)(r))return null;var a=(0,m.projectTangentToPCPF)(r,e,n,t,new Float32Array(r.length)),f=g.BufferViewVec3f.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT);return(0,y.a)(f,f,i),a}function M(r,e){if((0,o.isNone)(r))return b;var n=e.isGeographic?1:(0,i.getMetersPerUnit)(e),t=e.isGeographic?1:(0,i.getMetersPerVerticalUnitForSR)(e),a=(0,i.convertUnit)(1,r,"meters");return{horizontal:a*n,vertical:a*t}}var R=(0,u.c)(),N=(0,u.c)(),_=(0,a.c)(),b={horizontal:1,vertical:1}})),e.register("17b31",(function(n,t){r(n.exports,"default",(function(){return w}));var o=e("8TSCy"),i=e("7eJjO"),a=e("1XAcN"),f=e("7qybv"),u=e("iho5X");e("lNwWH"),e("2VlWd"),e("iJAIC");var c,l=e("fcwIv"),s=e("gEEzE"),p=e("89KCq"),g=e("e4Xv2"),y=e("5YMIf"),h=e("d1Fqh"),m=e("7RvA5"),v=e("7USIy"),T=e("glKuz"),P=e("YI2am"),V=e("hhwnq"),d=e("fxkX0"),A=c=function(r){"use strict";o.inherits(n,r);var e=o.createSuper(n);function n(r){var t;return o.classCallCheck(this,n),(t=e.call(this,r)).origin=(0,y.c)(),t.translation=(0,y.c)(),t.rotation=(0,T.create)(),t.scale=(0,y.f)(1,1,1),t.geographic=!0,o.possibleConstructorReturn(t)}return o.createClass(n,[{key:"localMatrix",get:function(){var r=(0,p.c)();return(0,s.u)(r,this.scale),(0,s.e)(r,r,(0,T.angleRad)(this.rotation),(0,T.axis)(this.rotation)),(0,s.j)(r,r,this.translation),r}},{key:"localMatrixInverse",get:function(){return(0,s.a)((0,p.c)(),this.localMatrix)}},{key:"applyLocal",value:function(r,e){return(0,g.m)(e,r,this.localMatrix)}},{key:"applyLocalInverse",value:function(r,e){return(0,g.m)(e,r,this.localMatrixInverse)}},{key:"project",value:function(r,e){var n=new Float64Array(r.length),t=P.BufferViewVec3f64.fromTypedArray(n),o=P.BufferViewVec3f64.fromTypedArray(r);if(this.geographic){var i=(0,v.getSphericalPCPF)(e),a=(0,p.c)();return(0,m.computeTranslationToOriginAndRotation)(e,this.origin,a,i),(0,s.m)(a,a,this.localMatrix),(0,V.t)(t,o,a),(0,m.projectBuffer)(n,i,0,n,e,0,n.length/3),n}var f=this.localMatrix,u=this.origin;(0,s.v)(f,p.I)?(0,d.c)(t,o):(0,V.t)(t,o,f);for(var c=0;c<n.length;c+=3)n[c+0]+=u[0],n[c+1]+=u[1],n[c+2]+=u[2];return n}},{key:"getOriginPoint",value:function(r){var e=o.slicedToArray(this.origin,3),n=e[0],t=e[1],i=e[2];return new(0,h.default)({x:n,y:t,z:i,spatialReference:r})}},{key:"equals",value:function(r){return(0,f.isSome)(r)&&this.geographic===r.geographic&&(0,g.k)(this.origin,r.origin)&&(0,s.w)(this.localMatrix,r.localMatrix)}},{key:"clone",value:function(){var r={origin:(0,y.a)(this.origin),translation:(0,y.a)(this.translation),rotation:(0,T.create)(this.rotation),scale:(0,y.a)(this.scale),geographic:this.geographic};return new c(r)}}]),n}(a.JSONSupport);(0,i._)([(0,u.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"origin",void 0),(0,i._)([(0,u.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"translation",void 0),(0,i._)([(0,u.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"rotation",void 0),(0,i._)([(0,u.property)({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,"scale",void 0),(0,i._)([(0,u.property)({type:Boolean,nonNullable:!0,json:{write:!0}})],A.prototype,"geographic",void 0),(0,i._)([(0,u.property)()],A.prototype,"localMatrix",null),(0,i._)([(0,u.property)()],A.prototype,"localMatrixInverse",null);var w=A=c=(0,i._)([(0,l.subclass)("esri.geometry.support.MeshTransform")],A)})),e.register("glKuz",(function(n,t){r(n.exports,"create",(function(){return u})),r(n.exports,"fromAxisAndAngle",(function(){return c})),r(n.exports,"axis",(function(){return s})),r(n.exports,"compose",(function(){return l})),r(n.exports,"angleRad",(function(){return p}));var o=e("iVfa0"),i=e("koyqq"),a=e("ksUrQ"),f=e("e4Xv2");function u(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return[r[0],r[1],r[2],r[3]]}function c(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,f.g)(n,r),n[3]=e,n}function l(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,i.s)(h,r,p(r)),(0,i.s)(m,e,p(e)),(0,i.m)(h,m,h),g(n,(0,o.rad2deg)((0,i.g)(n,h)))}function s(r){return r}function p(r){return(0,o.deg2rad)(r[3])}function g(r,e){return r[3]=e,r}var y=[0,0,1,0],h=(0,a.a)(),m=(0,a.a)();u()})),e.register("gLl1O",(function(e,n){function t(r,e){var n;return r.isGeographic||r.isWebMercator&&(null==(n=null==e?void 0:e.geographic)||n)}r(e.exports,"isGeographicMesh",(function(){return t}))})),e.register("9r2zb",(function(n,t){r(n.exports,"projectNormalToPCPF",(function(){return V})),r(n.exports,"projectNormalFromPCPF",(function(){return d})),r(n.exports,"projectToPCPF",(function(){return A})),r(n.exports,"projectFromPCPF",(function(){return w})),r(n.exports,"transformPosition",(function(){return F})),r(n.exports,"transformNormal",(function(){return B})),r(n.exports,"transformTangent",(function(){return C})),r(n.exports,"projectTangentToPCPF",(function(){return x})),r(n.exports,"projectTangentFromPCPF",(function(){return E}));var o,i,a=e("jHOLN"),f=e("7qybv"),u=e("j3x2p"),c=e("gnwu9"),l=e("89KCq"),s=e("e4Xv2"),p=e("5YMIf"),g=e("7RvA5"),y=e("7USIy"),h=e("eY5Yp"),m=e("eF88h"),v=e("YI2am"),T=e("hhwnq"),P=a.default.getLogger("esri.geometry.support.meshUtils.normalProjection");function V(r,e,n,t,i){return R(t)?(M(o.TO_PCPF,v.BufferViewVec3f.fromTypedArray(r),v.BufferViewVec3f64.fromTypedArray(e),v.BufferViewVec3f64.fromTypedArray(n),t,v.BufferViewVec3f.fromTypedArray(i)),i):(P.error("Cannot convert spatial reference to PCPF"),i)}function d(r,e,n,t,i){return R(t)?(M(o.FROM_PCPF,v.BufferViewVec3f.fromTypedArray(r),v.BufferViewVec3f64.fromTypedArray(e),v.BufferViewVec3f64.fromTypedArray(n),t,v.BufferViewVec3f.fromTypedArray(i)),i):(P.error("Cannot convert to spatial reference from PCPF"),i)}function A(r,e,n){return(0,g.projectBuffer)(r,e,0,n,(0,y.getSphericalPCPF)(e),0,r.length/3),n}function w(r,e,n){return(0,g.projectBuffer)(r,(0,y.getSphericalPCPF)(n),0,e,n,0,r.length/3),e}function F(r,e,n){if((0,f.isNone)(r))return e;var t=v.BufferViewVec3f64.fromTypedArray(r),o=v.BufferViewVec3f64.fromTypedArray(e);return(0,T.t)(o,t,n),e}function B(r,e,n){if((0,f.isNone)(r))return e;(0,u.a)(S,n);var t=v.BufferViewVec3f.fromTypedArray(r),o=v.BufferViewVec3f.fromTypedArray(e);return(0,T.a)(o,t,S),(0,u.i)(S)||(0,T.n)(o,o),e}function C(r,e,n){if((0,f.isNone)(r))return e;(0,u.a)(S,n);var t=v.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),o=v.BufferViewVec3f.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if((0,T.a)(o,t,S),(0,u.i)(S)||(0,T.n)(o,o),r!==e)for(var i=3;i<r.length;i+=4)e[i]=r[i];return e}function x(r,e,n,t,i){if(!R(t))return P.error("Cannot convert spatial reference to PCPF"),i;M(o.TO_PCPF,v.BufferViewVec3f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),v.BufferViewVec3f64.fromTypedArray(e),v.BufferViewVec3f64.fromTypedArray(n),t,v.BufferViewVec3f.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT));for(var a=3;a<r.length;a+=4)i[a]=r[a];return i}function E(r,e,n,t,i){if(!R(t))return P.error("Cannot convert to spatial reference from PCPF"),i;M(o.FROM_PCPF,v.BufferViewVec3f.fromTypedArray(r,16),v.BufferViewVec3f64.fromTypedArray(e),v.BufferViewVec3f64.fromTypedArray(n),t,v.BufferViewVec3f.fromTypedArray(i,16));for(var a=3;a<r.length;a+=4)i[a]=r[a];return i}function M(r,e,n,t,i,a){if(e){var f=n.count,c=(0,y.getSphericalPCPF)(i);if(N(i))for(var l=0;l<f;l++)t.getVec(l,_),e.getVec(l,b),(0,g.computeTranslationToOriginAndRotation)(c,_,j,c),(0,u.f)(S,j),r===o.FROM_PCPF&&(0,u.t)(S,S),(0,s.t)(b,b,S),a.setVec(l,b);else for(var p=0;p<f;p++){t.getVec(p,_),e.getVec(p,b),(0,g.computeTranslationToOriginAndRotation)(c,_,j,c),(0,u.f)(S,j);var h=(0,m.y2lat)(n.get(p,1)),v=Math.cos(h);r===o.TO_PCPF&&(v=1/v),S[0]*=v,S[1]*=v,S[2]*=v,S[3]*=v,S[4]*=v,S[5]*=v,r===o.FROM_PCPF&&(0,u.t)(S,S),(0,s.t)(b,b,S),(0,s.n)(b,b),a.setVec(p,b)}return a}}function R(r){return N(r)||r.isWebMercator}function N(r){return r.isWGS84||(0,h.isCGCS2000)(r)||(0,h.isMars)(r)||(0,h.isMoon)(r)}(i=o||(o={}))[i.TO_PCPF=0]="TO_PCPF",i[i.FROM_PCPF=1]="FROM_PCPF";var _=(0,p.c)(),b=(0,p.c)(),j=(0,l.c)(),S=(0,c.c)()}))}();
//# sourceMappingURL=ElevationSamplerWorker.0411008c.js.map
