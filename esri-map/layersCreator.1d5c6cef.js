function e(e,r,a,y){Object.defineProperty(e,r,{get:a,set:y,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("gAlR3",(function(a,y){e(a.exports,"populateOperationalLayers",(function(){return u}));var t=r("26zvD");r("5HTPH");var i=r("lHg4e"),n=r("kNV68"),o=r("h7Mrf"),L=r("bZI6I"),l=r("3tlM3"),c=r("4ycBe");async function u(e,r,a){if(!r)return;const y=[];for(const e of r){const r=g(e,a);"GroupLayer"===e.layerType?y.push(G(r,e,a)):y.push(r)}const t=await(0,i.eachAlways)(y);for(const r of t)!r.value||a.filter&&!a.filter(r.value)||e.add(r.value)}const p={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},d={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",SubtypeGroupLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},f={ArcGISFeatureLayer:"FeatureLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};async function g(e,r){return async function(e,r,a){const y=new e;return y.read(r,a.context),"group"===y.type&&M(r)&&await async function(e,r,a){const y=n.layerLookupMap.FeatureLayer,t=await y(),i=r.featureCollection,o=i.showLegend,L=i.layers.map(((y,i)=>{const n=new t;n.read(y,a);const L={...a,ignoreDefaults:!0};return n.read({id:`${e.id}-sublayer-${i}`,visibility:r.visibleLayers?.includes(i)??!0},L),null!=o&&n.read({showLegend:o},L),n}));e.layers.addMany(L)}(y,r,a.context),await(0,c.loadStyleRenderer)(y,a.context),y}(await async function(e,r){const a=r.context,y=function(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=s;break;default:r=p}else switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=f;break;default:r=d}return r}(a);let t=e.layerType||e.type;!t&&r&&r.defaultLayerType&&(t=r.defaultLayerType);const i=y[t];let c=i?n.layerLookupMap[i]:n.layerLookupMap.UnknownLayer;if(T(e)){const r=a?.portal;if(e.itemId){const a=new(0,o.default)({id:e.itemId,portal:r});await a.load();const y=(await(0,l.selectLayerClassPath)(a)).className||"UnknownLayer";c=n.layerLookupMap[y]}}else"ArcGISFeatureLayer"===t?(0,L.isMapNotesLayer)(e)?c=n.layerLookupMap.MapNotesLayer:(0,L.isRouteLayer)(e)?c=n.layerLookupMap.RouteLayer:M(e)&&(c=n.layerLookupMap.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?c=n.layerLookupMap.WMTSLayer:"WFS"===t&&"2.0.0"!==e.wfsInfo.version&&(c=n.layerLookupMap.UnsupportedLayer);return c()}(e,r),e,r)}function M(e){return"ArcGISFeatureLayer"===e.layerType&&!T(e)&&(e.featureCollection?.layers?.length??0)>1}function T(e){return"Feature Collection"===e.type}async function G(e,r,a){const y=new(0,t.default),i=u(y,Array.isArray(r.layers)?r.layers:[],a),n=await e;if(await i,"group"===n.type)return n.layers.addMany(y),n}})),r.register("bZI6I",(function(r,a){function y(e){return i(e,"notes")}function t(e){return i(e,"route")}function i(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}e(r.exports,"isMapNotesLayer",(function(){return y})),e(r.exports,"isRouteLayer",(function(){return t}))}));
//# sourceMappingURL=layersCreator.1d5c6cef.js.map
