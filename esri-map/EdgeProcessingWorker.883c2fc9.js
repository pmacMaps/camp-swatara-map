!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("gyhpX",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"EdgeProcessingWorker",(function(){return p})),e(r.exports,"extract",(function(){return g})),e(r.exports,"extractEdgeLocationsLayout",(function(){return m})),e(r.exports,"extractComponentsEdgeLocationsLayout",(function(){return O})),e(r.exports,"default",(function(){return B}));var o=t("gPnQi"),s=t("c8rlx"),u=t("8Z9U2"),f=t("En4uz"),a=t("7S12W"),c=t("k8a7B"),l=t("1VRLl"),d=t("6lzcr");class p{async extract(e){const t=h(e),r=g(t),n=[t.data.buffer];return{result:V(r,n),transferList:n}}async extractComponentsEdgeLocations(e){const t=h(e),r=A(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,d.extractEdges)(r,N,T),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}async extractEdgeLocations(e){const t=h(e),r=A(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,d.extractEdges)(r,E,T),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}}function g(e){const t=A(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return w.updateSettings(e.writerSettings),I.updateSettings(e.writerSettings),(0,d.extractEdges)(t,w,I)}function h(e){return{data:c.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function V(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,f.packInterleavedBuffer)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,f.packInterleavedBuffer)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function A(e,t,r,n){if(t)return{faces:r,facesLength:n,neighbors:(0,s.computeNeighbors)(r,n,e.count),vertices:e};const i=(0,o.deduplicate)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:n}),u=(0,s.computeNeighbors)(i.indices,n,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:u,vertices:c.EdgeInputBufferLayout.createView(i.buffer)}}const w=new(0,l.RegularEdgeBufferWriter),I=new(0,l.SilhouetteEdgeBufferWriter);const E=new class{allocate(e){return m.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}},N=new class{allocate(e){return O.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}},T={allocate:()=>null,write:()=>{},trim:()=>null},m=(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION0).vec3f(a.VertexAttribute.POSITION1),O=(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION0).vec3f(a.VertexAttribute.POSITION1).u16(a.VertexAttribute.COMPONENTINDEX).u16(a.VertexAttribute.U16PADDING,{glPadding:!0});function B(){return new p}})),t.register("gPnQi",(function(r,n){e(r.exports,"deduplicate",(function(){return o}));var i=t("iVfa0");function o(e,t,r){const n=e.byteLength/(4*t),o=new Uint32Array(e,0,n*t);let c=new Uint32Array(n);var l;const d=null!==(l=null==r?void 0:r.minReduction)&&void 0!==l?l:0,p=(null==r?void 0:r.originalIndices)||null,g=p?p.length:0,h=(null==r?void 0:r.componentOffsets)||null;let V=0;if(h)for(let e=0;e<h.length-1;e++){const t=h[e+1]-h[e];t>V&&(V=t)}else V=n;const A=Math.floor(1.1*V)+1;(null==a||a.length<2*A)&&(a=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*A)));for(let e=0;e<2*A;e++)a[e]=0;let w=0;const I=!!h&&!!p,E=I?g:n,N=I?new Uint32Array(g):null,T=1.96;let m=0!==d?Math.ceil(4*T*T/(d*d)*d*(1-d)):E,O=1,B=h?h[1]:E;for(let e=0;e<E;e++){if(e===m){const t=1-w/e;if(t+T*Math.sqrt(t*(1-t)/e)<d)return null;m*=2}if(e===B){for(let e=0;e<2*A;e++)a[e]=0;if(p)for(let e=h[O-1];e<h[O];e++)N[e]=c[p[e]];B=h[++O]}const r=I?p[e]:e,n=r*t,i=f(o,n,t);let u=i%A,l=w;for(;0!==a[2*u+1];){if(a[2*u]===i){const e=a[2*u+1]-1;if(s(o,n,e*t,t)){l=c[e];break}}u++,u>=A&&(u-=A)}l===w&&(a[2*u]=i,a[2*u+1]=r+1,w++),c[r]=l}if(0!==d&&1-w/n<d)return null;if(I){for(let e=h[O-1];e<N.length;e++)N[e]=c[p[e]];c=N}const y=new Uint32Array(t*w);w=0;for(let e=0;e<E;e++)c[e]===w&&(u(o,(I?p[e]:e)*t,y,w*t,t),w++);if(p&&!I){const e=new Uint32Array(g);for(let t=0;t<e.length;t++)e[t]=c[p[t]];c=e}return{buffer:y.buffer,indices:c,uniqueCount:w}}function s(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function u(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[t+o]}function f(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let a=null})),t.register("c8rlx",(function(t,r){function n(e,t,r){const n=t/3,i=new Uint32Array(r+1),o=new Uint32Array(r+1),s=(e,t)=>{e<t?i[e+1]++:o[t+1]++};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];s(r,n),s(n,i),s(i,r)}let u=0,f=0;for(let e=0;e<r;e++){const t=i[e+1],r=o[e+1];i[e+1]=u,o[e+1]=f,u+=t,f+=r}const a=new Uint32Array(6*n),c=i[r],l=(e,t,r)=>{if(e<t){const n=i[e+1]++;a[2*n]=t,a[2*n+1]=r}else{const n=o[t+1]++;a[2*c+2*n]=e,a[2*c+2*n+1]=r}};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];l(r,n,t),l(n,i,t),l(i,r,t)}const d=(e,t)=>{const r=2*e,n=t-e;for(let e=1;e<n;e++){const t=a[r+2*e],n=a[r+2*e+1];let i=e-1;for(;i>=0&&a[r+2*i]>t;i--)a[r+2*i+2]=a[r+2*i],a[r+2*i+3]=a[r+2*i+1];a[r+2*i+2]=t,a[r+2*i+3]=n}};for(let e=0;e<r;e++)d(i[e],i[e+1]),d(c+o[e],c+o[e+1]);const p=new Int32Array(3*n),g=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,h=(e,t)=>{const r=g(e,t);p[3*t+r]=-1},V=(e,t,r,n)=>{const i=g(e,t);p[3*t+i]=n;const o=g(r,n);p[3*n+o]=t};for(let e=0;e<r;e++){let t=i[e];const r=i[e+1];let n=o[e];const s=o[e+1];for(;t<r&&n<s;){const r=a[2*t],i=a[2*c+2*n];r===i?(V(e,a[2*t+1],i,a[2*c+2*n+1]),t++,n++):r<i?(h(e,a[2*t+1]),t++):(h(i,a[2*c+2*n+1]),n++)}for(;t<r;)h(e,a[2*t+1]),t++;for(;n<s;)h(a[2*c+2*n],a[2*c+2*n+1]),n++}return p}e(t.exports,"computeNeighbors",(function(){return n}))})),t.register("8Z9U2",(function(r,n){e(r.exports,"newLayout",(function(){return f}));var i=t("YI2am"),o=t("2TwbA");class s{get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,n){const i=this.stride;if(i%4==0){const o=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(o)}else{const o=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(o)}}constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fieldNames){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}}class u{vec2f(e,t){return this._appendField(e,i.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,i.BufferViewVec2f64,t),this}vec3f(e,t){return this._appendField(e,i.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,i.BufferViewVec3f64,t),this}vec4f(e,t){return this._appendField(e,i.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,i.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,i.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,i.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,i.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,i.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,i.BufferViewVec4u8,t),this}f32(e,t){return this._appendField(e,i.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,i.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,i.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,i.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,i.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,i.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,i.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,i.BufferViewVec2u8,t),this}vec4u16(e,t){return this._appendField(e,i.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,i.BufferViewUint32,t),this}_appendField(e,t,r){const n=t.ElementCount*(0,o.elementTypeSize)(t.ElementType),i=this.stride;this.fields.set(e,{size:n,constructor:t,offset:i,optional:r}),this.stride+=n,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.includes(e)}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new u;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,r)=>e.fields.set(r,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}}function f(){return new u}})),t.register("2TwbA",(function(r,n){function i(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function u(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}e(r.exports,"elementTypeSize",(function(){return i})),e(r.exports,"isSigned",(function(){return o})),e(r.exports,"isInteger",(function(){return s})),e(r.exports,"maximumValue",(function(){return u})),t("2VlWd")})),t.register("En4uz",(function(r,n){e(r.exports,"packInterleavedBuffer",(function(){return o}));var i=t("YI2am");t("8Z9U2");function o(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:s(e.layout)}}function s(e){const t=new Array;return e.fields.forEach(((e,r)=>{const n={...e,constructor:f(e.constructor)};t.push([r,n])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const u=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32];function f(e){return`${e.ElementType}_${e.ElementCount}`}const a=new Map;u.forEach((e=>a.set(f(e),e)))})),t.register("7S12W",(function(t,r){var n,i;e(t.exports,"VertexAttribute",(function(){return n})),(i=n||(n={})).POSITION="position",i.NORMAL="normal",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.MAPPOS="mapPos",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.NORMALCOMPRESSED="normalCompressed",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude"})),t.register("k8a7B",(function(r,n){e(r.exports,"EdgeInputBufferLayout",(function(){return u})),e(r.exports,"RegularEdgeInstancesLayout",(function(){return c})),e(r.exports,"SilhouetteEdgeInstancesLayout",(function(){return l}));var i=t("3h6Nu"),o=t("8Z9U2"),s=t("7S12W");const u=(0,o.newLayout)().vec3f(s.VertexAttribute.POSITION).u16(s.VertexAttribute.COMPONENTINDEX).u16(s.VertexAttribute.U16PADDING),f=(0,o.newLayout)().vec2u8(s.VertexAttribute.SIDENESS),a=((0,i.glLayout)(f),(0,o.newLayout)().vec3f(s.VertexAttribute.POSITION0).vec3f(s.VertexAttribute.POSITION1).u16(s.VertexAttribute.COMPONENTINDEX).u8(s.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(s.VertexAttribute.VARIANTSTROKE).u8(s.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).u8(s.VertexAttribute.U8PADDING,{glPadding:!0}).u16(s.VertexAttribute.U16PADDING,{glPadding:!0})),c=a.clone().vec3f(s.VertexAttribute.NORMAL),l=a.clone().vec3f(s.VertexAttribute.NORMALA).vec3f(s.VertexAttribute.NORMALB);new Map([[s.VertexAttribute.POSITION0,0],[s.VertexAttribute.POSITION1,1],[s.VertexAttribute.COMPONENTINDEX,2],[s.VertexAttribute.VARIANTOFFSET,3],[s.VertexAttribute.VARIANTSTROKE,4],[s.VertexAttribute.VARIANTEXTENSION,5],[s.VertexAttribute.NORMAL,6],[s.VertexAttribute.NORMALA,6],[s.VertexAttribute.NORMALB,7],[s.VertexAttribute.SIDENESS,8]])})),t.register("3h6Nu",(function(r,n){e(r.exports,"glLayout",(function(){return s}));var i=t("8JzMA"),o=t("LW1Aq");function s(e,t=0){const r=e.stride;return e.fieldNames.filter((t=>{const r=e.fields.get(t).optional;return!(r&&r.glPadding)})).map((n=>{const i=e.fields.get(n),s=i.constructor.ElementCount,f=function(e){const t=u[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}(i.constructor.ElementType),a=i.offset,c=!(!i.optional||!i.optional.glNormalized);return new(0,o.VertexElementDescriptor)(n,s,f,a,r,c,t)}))}const u={u8:i.DataType.UNSIGNED_BYTE,u16:i.DataType.UNSIGNED_SHORT,u32:i.DataType.UNSIGNED_INT,i8:i.DataType.BYTE,i16:i.DataType.SHORT,i32:i.DataType.INT,f32:i.DataType.FLOAT}})),t.register("1VRLl",(function(r,n){e(r.exports,"RegularEdgeBufferWriter",(function(){return V})),e(r.exports,"SilhouetteEdgeBufferWriter",(function(){return A}));var i=t("hvORu"),o=t("e4Xv2"),s=t("5YMIf"),u=t("3h6Nu"),f=t("k8a7B");class a{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?g:p}write(e,t,r){const n=this.edgeHashFunction(r);I.seed=n;const i=I.getIntRange(0,255),o=I.getIntRange(0,this.settings.variants-1),s=I.getFloat(),u=255*(.5*function(e,t){const r=e<0?-1:1;return Math.abs(e)**t*r}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,o),e.variantExtension.set(t,u)}trim(e,t){return e.slice(0,t)}}const c=new Float32Array(6),l=new Uint32Array(c.buffer),d=new Uint32Array(1);function p(e){const t=c;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],d[0]=5381;for(let e=0;e<l.length;e++)d[0]=31*d[0]+l[e];return d[0]}function g(e){const t=c;t[0]=h(e.position0[0]),t[1]=h(e.position0[1]),t[2]=h(e.position0[2]),t[3]=h(e.position1[0]),t[4]=h(e.position1[1]),t[5]=h(e.position1[2]),d[0]=5381;for(let e=0;e<l.length;e++)d[0]=31*d[0]+l[e];return d[0]}function h(e){return Math.round(1e4*e)/1e4}class V{updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return f.RegularEdgeInstancesLayout.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),(0,o.a)(w,r.faceNormal0,r.faceNormal1),(0,o.n)(w,w),e.normal.setVec(t,w)}trim(e,t){return this.commonWriter.trim(e,t)}constructor(){this.commonWriter=new a}}V.Layout=f.RegularEdgeInstancesLayout,V.glLayout=(0,u.glLayout)(f.RegularEdgeInstancesLayout,1);class A{updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return f.SilhouetteEdgeInstancesLayout.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}constructor(){this.commonWriter=new a}}A.Layout=f.SilhouetteEdgeInstancesLayout,A.glLayout=(0,u.glLayout)(f.SilhouetteEdgeInstancesLayout,1);const w=(0,s.c)(),I=new(0,i.default)})),t.register("6lzcr",(function(r,n){e(r.exports,"extractEdges",(function(){return d}));var i=t("lNwWH"),o=t("iVfa0"),s=t("kkxEC"),u=t("e4Xv2"),f=t("5YMIf");const a=-1;var c,l;function d(e,t,r,n=A){const f=e.vertices.position,c=e.vertices.componentIndex,l=(0,o.deg2rad)(n.anglePlanar),d=(0,o.deg2rad)(n.angleSignificantEdge),w=Math.cos(d),I=Math.cos(l),E=h.edge,N=E.position0,T=E.position1,m=E.faceNormal0,O=E.faceNormal1,B=function(e){const t=e.faces.length/3,r=e.vertices.position,n=e.faces,i=V.v0,o=V.v1,s=V.v2,f=new Float32Array(3*t);for(let e=0;e<t;e++){const t=n[3*e+0],a=n[3*e+1],c=n[3*e+2];r.getVec(t,i),r.getVec(a,o),r.getVec(c,s),(0,u.b)(o,o,i),(0,u.b)(s,s,i),(0,u.f)(i,o,s),(0,u.n)(i,i),f[3*e+0]=i[0],f[3*e+1]=i[1],f[3*e+2]=i[2]}return f}(e),y=function(e){const t=e.faces.length/3,r=e.faces,n=e.neighbors;let i=0;for(let e=0;e<t;e++){const t=n[3*e+0],o=n[3*e+1],s=n[3*e+2],u=r[3*e+0],f=r[3*e+1],c=r[3*e+2];i+=t===a||u<f?1:0,i+=o===a||f<c?1:0,i+=s===a||c<u?1:0}const o=new Int32Array(4*i);let s=0;for(let e=0;e<t;e++){const t=n[3*e+0],i=n[3*e+1],u=n[3*e+2],f=r[3*e+0],c=r[3*e+1],l=r[3*e+2];(t===a||f<c)&&(o[s++]=f,o[s++]=c,o[s++]=e,o[s++]=t),(i===a||c<l)&&(o[s++]=c,o[s++]=l,o[s++]=e,o[s++]=i),(u===a||l<f)&&(o[s++]=l,o[s++]=f,o[s++]=e,o[s++]=u)}return o}(e),L=y.length/4,S=t.allocate(L);let b=0;const x=L,v=r.allocate(x);let R=0,F=0,U=0;const D=(0,i.range)(0,L),M=new Float32Array(L);(0,s.forEach)(M,((e,t,r)=>{f.getVec(y[4*t+0],N),f.getVec(y[4*t+1],T),r[t]=(0,u.i)(N,T)})),D.sort(((e,t)=>M[t]-M[e]));const P=new Array,C=new Array;for(let e=0;e<L;e++){const n=D[e],i=M[n],o=y[4*n+0],s=y[4*n+1],d=y[4*n+2],h=y[4*n+3],V=h===a;if(f.getVec(o,N),f.getVec(s,T),V)(0,u.s)(m,B[3*d+0],B[3*d+1],B[3*d+2]),(0,u.c)(O,m),E.componentIndex=c.get(o),E.cosAngle=(0,u.e)(m,O);else{if((0,u.s)(m,B[3*d+0],B[3*d+1],B[3*d+2]),(0,u.s)(O,B[3*h+0],B[3*h+1],B[3*h+2]),E.componentIndex=c.get(o),E.cosAngle=(0,u.e)(m,O),_=I,E.cosAngle>_)continue;E.cosAngle<-.9999&&(0,u.c)(O,m)}F+=i,U++,V||p(E,w)?(t.write(S,b++,E),P.push(i)):g(E,l)&&(r.write(v,R++,E),C.push(i))}var _;const W=new Float32Array(P.reverse()),k=new Float32Array(C.reverse());return{regular:{instancesData:t.trim(S,b),lodInfo:{lengths:W}},silhouette:{instancesData:r.trim(v,R),lodInfo:{lengths:k}},averageEdgeLength:F/U}}function p(e,t){return e.cosAngle<t}function g(e,t){const r=(0,o.acosClamped)(e.cosAngle),n=h.fwd,i=h.ortho;return(0,u.r)(n,e.position1,e.position0),r*((0,u.e)((0,u.f)(i,e.faceNormal0,e.faceNormal1),n)>0?-1:1)>t}(l=c||(c={}))[l.SOLID=0]="SOLID",l[l.SKETCH=1]="SKETCH";const h={edge:{position0:(0,f.c)(),position1:(0,f.c)(),faceNormal0:(0,f.c)(),faceNormal1:(0,f.c)(),componentIndex:0,cosAngle:0},ortho:(0,f.c)(),fwd:(0,f.c)()},V={v0:(0,f.c)(),v1:(0,f.c)(),v2:(0,f.c)()},A={anglePlanar:4,angleSignificantEdge:35}}))}();
//# sourceMappingURL=EdgeProcessingWorker.883c2fc9.js.map
