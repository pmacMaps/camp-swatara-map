!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("1Qab8",(function(n,r){var i;i=n.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),t(n.exports,"SceneLayerSnappingSourceWorker",(function(){return g})),t(n.exports,"default",(function(){return _}));var o=e("7eJjO"),s=e("7qybv"),a=e("10vEZ");e("jHOLN"),e("iJAIC"),e("lNwWH"),e("2VlWd"),e("62edV");var u=e("fcwIv"),c=e("e4Xv2"),l=e("5YMIf"),f=e("cFPW4"),h=e("8hg3f"),d=e("3lcnv"),m=e("aeKPg"),p=e("gyhpX");let g=class{async fetchCandidates(t,e){await Promise.resolve(),(0,a.throwIfAborted)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>this._addCandidates(t,e,n)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if((0,s.isNone)(t.info)){const{id:e,uid:r}=t;n.push({id:e,uid:r})}}),t.bounds),!n.length)return;const r={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,(0,s.unwrapOr)(e,{}));for(const t of i.components)this._setFetchEdgeLocations(t)}async add(t){const e=new b(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>{n.component===e&&t.push(n)}),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if((0,s.isNone)(e)||t.uid!==e.uid)return;const n=p.extractComponentsEdgeLocationsLayout.createView(t.locations),r=new Array(n.count),i=(0,l.c)(),o=(0,l.c)();for(let s=0;s<n.count;s++){const a=(0,h.c)(),u=(0,h.g)(a);n.position0.getVec(s,i),n.position1.getVec(s,o),(0,c.C)(u,u,i,.5),(0,c.C)(u,u,o,.5),(0,c.a)(u,u,t.origin),a[3]=(0,c.i)(u,i);const l=new x(e,s,a);r[s]=l}this._edges.add(r);const{objectIds:a,origin:u}=t;e.info={locations:n,objectIds:a,origin:u}}_addCandidates(t,e,n){const{locations:r,origin:i,objectIds:o}=e.component.info,s=r.position0.getVec(e.index,this._tmpP1),a=r.position1.getVec(e.index,this._tmpP2);(0,c.a)(s,s,i),(0,c.a)(a,a,i);const u=o[r.componentIndex.get(e.index)];this._addEdgeCandidate(t,u,s,a,n),this._addVertexCandidate(t,u,s,n),this._addVertexCandidate(t,u,a,n)}_addEdgeCandidate(t,e,n,r,i){if(!(t.types&d.SnappingTypes.EDGE))return;const o=(0,h.g)(t.bounds),s=(0,f.fromPoints)(n,r,this._tmpLineSegment),a=(0,f.projectPoint)(s,o,this._tmpP3);if(!(0,h.m)(t.bounds,a))return null;i.push({type:"edge",objectId:e,target:(0,l.a)(a),distance:(0,c.i)(o,a),start:(0,l.a)(n),end:(0,l.a)(r)})}_addVertexCandidate(t,e,n,r){if(!(t.types&d.SnappingTypes.VERTEX))return;const i=(0,h.g)(t.bounds);if(!(0,h.m)(t.bounds,n))return null;r.push({type:"vertex",objectId:e,target:(0,l.a)(n),distance:(0,c.i)(i,n)})}constructor(){this._idToComponent=new Map,this._components=new(0,m.default)((t=>t.bounds)),this._edges=new(0,m.default)((t=>t.bounds)),this._tmpLineSegment=(0,f.create)(),this._tmpP1=(0,l.c)(),this._tmpP2=(0,l.c)(),this._tmpP3=(0,l.c)(),this.remoteClient=null}};function _(){return new g}g=(0,o._)([(0,u.subclass)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],g);class b{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++b.uid}}b.uid=0;class x{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}})),e.register("cFPW4",(function(n,r){t(n.exports,"create",(function(){return c})),t(n.exports,"fromValues",(function(){return l})),t(n.exports,"fromPoints",(function(){return f})),t(n.exports,"distance2",(function(){return h})),t(n.exports,"projectPoint",(function(){return d}));var i=e("iVfa0"),o=e("jubE1"),s=e("e4Xv2"),a=e("5YMIf"),u=e("4Tl7p");function c(t){return t?{origin:(0,a.a)(t.origin),vector:(0,a.a)(t.vector)}:{origin:(0,a.c)(),vector:(0,a.c)()}}function l(t,e,n=c()){return(0,s.c)(n.origin,t),(0,s.c)(n.vector,e),n}function f(t,e,n=c()){return(0,s.c)(n.origin,t),(0,s.b)(n.vector,e,t),n}function h(t,e){const n=(0,s.b)(u.sv3d.get(),e,t.origin),r=(0,s.e)(t.vector,n),o=(0,s.e)(t.vector,t.vector),a=(0,i.clamp)(r/o,0,1),c=(0,s.b)(u.sv3d.get(),(0,s.g)(u.sv3d.get(),t.vector,a),n);return(0,s.e)(c,c)}function d(t,e,n){return function(t,e,n,r,o){const{vector:a,origin:c}=t,l=(0,s.b)(u.sv3d.get(),e,c),f=(0,s.e)(a,l)/(0,s.p)(a);return(0,s.g)(o,a,(0,i.clamp)(f,n,r)),(0,s.a)(o,o,t.origin)}(t,e,0,1,n)}(0,a.c)(),(0,a.c)(),new(0,o.ObjectStack)((()=>({origin:null,vector:null})))})),e.register("jubE1",(function(n,r){t(n.exports,"ObjectStack",(function(){return o}));var i=e("e02MS");class o{get(){return 0===this._itemsPtr&&(0,i.nextTick)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this.allocator())}constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}}const s=1024})),e.register("4Tl7p",(function(n,r){t(n.exports,"sv3d",(function(){return o})),t(n.exports,"sv4d",(function(){return s})),t(n.exports,"sm4d",(function(){return a}));var i=e("61Wey");i.VectorStack.createVec2f64();const o=i.VectorStack.createVec3f64(),s=i.VectorStack.createVec4f64(),a=(i.VectorStack.createMat3f64(),i.VectorStack.createMat4f64());i.VectorStack.createQuatf64()})),e.register("61Wey",(function(n,r){t(n.exports,"VectorStack",(function(){return h}));var i=e("dbxRf"),o=e("e02MS"),s=e("gnwu9"),a=e("89KCq"),u=e("ksUrQ"),c=e("iE3Nt"),l=e("5YMIf"),f=e("iLaO9");class h{get(){0===this._itemsPtr&&(0,o.nextTick)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=d){return new h(16,c.c,t)}static createVec3f64(t=d){return new h(24,l.b,t)}static createVec4f64(t=d){return new h(32,f.a,t)}static createMat3f64(t=d){return new h(72,s.a,t)}static createMat4f64(t=d){return new h(128,a.a,t)}static createQuatf64(t=d){return new h(32,u.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}constructor(t,e,n){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}}const d=4*i.ByteSizeUnit.KILOBYTES})),e.register("gnwu9",(function(e,n){function r(){return[1,0,0,0,1,0,0,0,1]}function i(t,e){return new Float64Array(t,e,9)}t(e.exports,"c",(function(){return r})),t(e.exports,"a",(function(){return i}));Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,n,r,i,o,s,a,u){return[t,e,n,r,i,o,s,a,u]},createView:i},Symbol.toStringTag,{value:"Module"}))})),e.register("89KCq",(function(e,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,e){return new Float64Array(t,e,16)}t(e.exports,"c",(function(){return r})),t(e.exports,"b",(function(){return i})),t(e.exports,"a",(function(){return o})),t(e.exports,"I",(function(){return s}));const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(t,e,n,r,i,o,s,a,u,c,l,f,h,d,m,p){return[t,e,n,r,i,o,s,a,u,c,l,f,h,d,m,p]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))})),e.register("ksUrQ",(function(e,n){function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function o(t,e){return new Float64Array(t,e,4)}t(e.exports,"a",(function(){return r})),t(e.exports,"b",(function(){return i})),t(e.exports,"c",(function(){return o})),t(e.exports,"I",(function(){return s}));const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(t,e,n,r){return[t,e,n,r]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))})),e.register("8hg3f",(function(n,r){t(n.exports,"c",(function(){return _})),t(n.exports,"b",(function(){return b})),t(n.exports,"d",(function(){return x})),t(n.exports,"g",(function(){return T})),t(n.exports,"f",(function(){return y})),t(n.exports,"i",(function(){return N})),t(n.exports,"m",(function(){return V})),e("2VlWd");var i=e("jHOLN"),o=e("iVfa0"),s=e("7qybv"),a=e("gEEzE"),u=e("e4Xv2"),c=e("5YMIf"),l=e("hRPEZ"),f=e("iLaO9"),h=e("2BLER"),d=e("8lK3H"),m=e("ckIlK"),p=e("4Tl7p");const g=i.default.getLogger("esri.geometry.support.sphere");function _(){return(0,f.c)()}function b(t,e=_()){return(0,l.c)(e,t)}function x(t){return t[3]}function T(t){return t}function y(t,e,n,r){return(0,f.f)(t,e,n,r)}function v(t,e,n){if((0,s.isNone)(e))return!1;const{origin:r,direction:i}=e,o=M;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const a=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],u=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),c=u*u-4*a*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(c<0)return!1;const l=Math.sqrt(c);let f=(-u-l)/(2*a);const h=(-u+l)/(2*a);return(f<0||h<f&&h>0)&&(f=h),!(f<0||(n&&(n[0]=r[0]+i[0]*f,n[1]=r[1]+i[1]*f,n[2]=r[2]+i[2]*f),0))}const M=(0,c.c)();function N(t,e){return v(t,e,null)}function S(t,e,n){const r=p.sv3d.get(),i=p.sm4d.get();(0,u.f)(r,e.origin,e.direction);const o=x(t);(0,u.f)(n,r,e.origin),(0,u.g)(n,n,1/(0,u.l)(n)*o);const s=O(t,e.origin),c=(0,m.angle)(e.origin,n);return(0,a.d)(i,c+s,r),(0,u.m)(n,n,i),n}function I(t,e,n){const r=(0,u.b)(p.sv3d.get(),e,t),i=(0,u.g)(p.sv3d.get(),r,t[3]/(0,u.l)(r));return(0,u.a)(n,i,t)}function O(t,e){const n=(0,u.b)(p.sv3d.get(),e,t),r=(0,u.l)(n),i=x(t),s=i+Math.abs(i-r);return(0,o.acosClamped)(i/s)}const E=(0,c.c)();function P(t,e,n,r){const i=(0,u.b)(E,e,t);switch(n){case h.Axis.X:{const t=(0,o.cartesianToSpherical)(i,E)[2];return(0,u.s)(r,-Math.sin(t),Math.cos(t),0)}case h.Axis.Y:{const t=(0,o.cartesianToSpherical)(i,E),e=t[1],n=t[2],s=Math.sin(e);return(0,u.s)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(e))}case h.Axis.Z:return(0,u.n)(r,i);default:return}}function R(t,e){const n=(0,u.b)(F,e,t);return(0,u.l)(n)-t[3]}function V(t,e){const n=(0,u.d)(t,e),r=x(t);return n<=r*r}const F=(0,c.c)(),A=_();Object.freeze(Object.defineProperty({__proto__:null,create:_,copy:b,fromCenterAndRadius:function(t,e){return(0,f.f)(t[0],t[1],t[2],e)},wrap:function(t){return t},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},getRadius:x,getCenter:T,fromValues:y,elevate:function(t,e,n){return t!==n&&(0,u.c)(n,t),n[3]=t[3]+e,n},setExtent:function(t,e,n){return g.error("sphere.setExtent is not yet supported"),t===n?n:b(t,n)},intersectRay:v,intersectsRay:N,intersectRayClosestSilhouette:function(t,e,n){if(v(t,e,n))return n;const r=S(t,e,p.sv3d.get());return(0,u.a)(n,e.origin,(0,u.g)(p.sv3d.get(),e.direction,(0,u.i)(e.origin,r)/(0,u.l)(e.direction))),n},closestPointOnSilhouette:S,closestPoint:function(t,e,n){return v(t,e,n)?n:((0,d.closestPoint)(e,t,n),I(t,n,n))},projectPoint:I,distanceToSilhouette:function(t,e){const n=(0,u.b)(p.sv3d.get(),e,t),r=(0,u.p)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:O,axisAt:P,altitudeAt:R,setAltitudeAt:function(t,e,n,r){const i=R(t,e),o=P(t,e,h.Axis.Z,F),s=(0,u.g)(F,o,n-i);return(0,u.a)(r,e,s)},containsPoint:V,tmpSphere:A},Symbol.toStringTag,{value:"Module"}))})),e.register("2BLER",(function(e,n){var r,i;t(e.exports,"Axis",(function(){return r})),(i=r||(r={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z"})),e.register("8lK3H",(function(n,r){t(n.exports,"create",(function(){return a})),t(n.exports,"wrap",(function(){return u})),t(n.exports,"copy",(function(){return c})),t(n.exports,"fromValues",(function(){return l})),t(n.exports,"closestPoint",(function(){return f}));e("lNwWH");var i=e("jubE1"),o=e("e4Xv2"),s=e("5YMIf");e("4Tl7p");function a(t){return t?{origin:(0,s.a)(t.origin),direction:(0,s.a)(t.direction)}:{origin:(0,s.c)(),direction:(0,s.c)()}}function u(t,e){const n=h.get();return n.origin=t,n.direction=e,n}function c(t,e=a()){return l(t.origin,t.direction,e)}function l(t,e,n=a()){return(0,o.c)(n.origin,t),(0,o.c)(n.direction,e),n}function f(t,e,n){const r=(0,o.e)(t.direction,(0,o.b)(n,e,t.origin));return(0,o.a)(n,t.origin,(0,o.g)(n,t.direction,r)),n}const h=new(0,i.ObjectStack)((function(){return{origin:null,direction:null}}))})),e.register("ckIlK",(function(n,r){t(n.exports,"projectPointSignedLength",(function(){return a})),t(n.exports,"angle",(function(){return u}));var i=e("iVfa0"),o=e("e4Xv2"),s=e("5YMIf");function a(t,e){return(0,o.e)(t,e)/(0,o.l)(t)}function u(t,e){const n=(0,o.e)(t,e)/((0,o.l)(t)*(0,o.l)(e));return-(0,i.acosClamped)(n)}(0,s.c)(),(0,s.c)()})),e.register("aeKPg",(function(n,r){t(n.exports,"default",(function(){return k}));var i,o,s=e("7qybv"),a=e("7Pyz4"),u=e("6v7Z0"),c=e("e4Xv2"),l=e("5YMIf"),f=e("a2Ayb"),h=e("8lK3H"),d=e("8hg3f"),m=e("cWcfE");class p{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),g.clearPool(),O[0]=null,F.prune(),C.prune()}add(t,e=t.length){this._objectCount+=e,this._grow(t,e);const n=g.acquire();for(let r=0;r<e;r++){const e=t[r];this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n))}g.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=g.acquire();for(const r of t){const t=(0,s.isSome)(e)?e:(0,d.b)(this._objectToBoundingSphere(r),A);M(t[3])?(n.init(this._root),this._remove(r,t,n)):this._degenerateObjects.delete(r)}g.release(n),this._shrink()}update(t,e){if(!M(e[3])&&this._isDegenerate(t))return;const n=function(t){return O[0]=t,O}(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const r=(0,h.wrap)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNode(r,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,r){const i=(0,h.wrap)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNodeWithOffset(i,t,r))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&n(t)})),!0}))}forEach(t){this._forEachNode(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,r=(()=>!0),i=1/0){let o=1/0,s=1/0,a=null;const u=y(t,e),l=u=>{if(--i,!r(u))return;const c=this._objectToBoundingSphere(u);if(!(0,f.intersectsSphere)(n,c))return;const l=v(t,e,(0,d.g)(c)),h=l-c[3],m=l+c[3];h<o&&(o=h,s=m,a=u)};return this._forEachNodeDepthOrdered(this._root,(r=>{if(i<=0||!(0,f.intersectsSphere)(n,r.bounds))return!1;if((0,c.g)(P,u,r.halfSize),(0,c.a)(P,P,r.bounds),v(t,e,P)>s)return!1;const o=r.node;return o.terminals.forAll((t=>l(t))),null!==o.residents&&o.residents.forAll((t=>l(t))),!0}),t,e),a}forEachInDepthRange(t,e,n,r,i,o,s){let a=-1/0,u=1/0;const l={setRange:t=>{n===p.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,t.near),u=Math.min(u,t.far)):(a=Math.max(a,-t.far),u=Math.min(u,-t.near))}};l.setRange(r);const h=v(e,n,t),m=y(e,n),g=y(e,-n),_=t=>{if(!s(t))return;const r=this._objectToBoundingSphere(t),c=(0,d.g)(r),m=v(e,n,c)-h,p=m-r[3],g=m+r[3];p>u||g<a||!(0,f.intersectsSphere)(o,r)||i(t,l)};this._forEachNodeDepthOrdered(this._root,(t=>{if(!(0,f.intersectsSphere)(o,t.bounds))return!1;if((0,c.g)(P,m,t.halfSize),(0,c.a)(P,P,t.bounds),v(e,n,P)-h>u)return!1;if((0,c.g)(P,g,t.halfSize),(0,c.a)(P,P,t.bounds),v(e,n,P)-h<a)return!1;const r=t.node;return r.terminals.forAll((t=>_(t))),null!==r.residents&&r.residents.forAll((t=>_(t))),!0}),e,n)}forEachNode(t){this._forEachNode(this._root,(e=>t(e.node,e.bounds,e.halfSize)))}forEachNeighbor(t,e){const n=(0,d.d)(e),r=(0,d.g)(e),i=e=>{const i=this._objectToBoundingSphere(e),o=(0,d.d)(i),s=n+o;(0,c.d)((0,d.g)(i),r)-s*s<=0&&t(e)};this._forEachNode(this._root,(t=>{const e=(0,d.d)(t.bounds),o=n+e;if((0,c.d)((0,d.g)(t.bounds),r)-o*o>0)return!1;const s=t.node;return s.terminals.forAll((t=>i(t))),null!==s.residents&&s.residents.forAll((t=>i(t))),!0})),this.forEachDegenerateObject(i)}_intersectsNode(t,e){return x(e.bounds,2*-e.halfSize,R),x(e.bounds,2*e.halfSize,V),(0,m.rayBoxTest)(t.origin,t.direction,R,V)}_intersectsNodeWithOffset(t,e,n){return x(e.bounds,2*-e.halfSize,R),x(e.bounds,2*e.halfSize,V),n.applyToMinMax(R,V),(0,m.rayBoxTest)(t.origin,t.direction,R,V)}_intersectsObject(t,e){const n=this._objectToBoundingSphere(e);return!(n[3]>0)||(0,d.i)(n,t)}_intersectsObjectWithOffset(t,e,n){const r=this._objectToBoundingSphere(e);return!(r[3]>0)||(0,d.i)(n.applyToBoundingSphere(r),t)}_forEachNode(t,e){let n=g.acquire().init(t);const r=[n];for(;0!==r.length;){if(n=r.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++)n.node.children[t]&&r.push(g.acquire().init(n).advance(t));g.release(n)}}_forEachNodeDepthOrdered(t,e,n,r=p.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(t);const o=[i];for(function(t,e,n){if(!C.length)for(let t=0;t<8;++t)C.push({index:0,distance:0});for(let n=0;n<8;++n){const r=N[n];C.data[n].index=n,C.data[n].distance=v(t,e,r)}C.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)n[t]=C.data[t].index}(n,r,L);0!==o.length;){if(i=o.pop(),e(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const e=L[t];i.node.children[e]&&o.push(g.acquire().init(i).advance(e))}g.release(i)}}_remove(t,e,n){F.clear();const r=n.advanceTo(e,((t,e)=>{F.push(t.node),F.push(e)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(t),0===r.length)for(let t=F.length-2;t>=0;t-=2){const e=F.data[t],n=F.data[t+1];if(!this._purge(e,n))break}}_nodeIsEmpty(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}_purge(t,e){return e>=0&&(t.children[e]=null),!!this._nodeIsEmpty(t)&&(null===t.residents&&(t.residents=new(0,u.default)({shrink:!0})),!0)}_add(t,e){e.advanceTo(this._objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const r=g.acquire().init(t);this._add(e.getItemAt(n),r),g.release(r)}}_grow(t,e){if(0!==e&&(T(t,e,(t=>this._objectToBoundingSphere(t)),w),M(w[3])&&!this._fitsInsideTree(w)))if(this._nodeIsEmpty(this._root.node))(0,d.b)(w,this._root.bounds),this._root.halfSize=1.25*w[3];else{const t=this._rootBoundsForRootAsSubNode(w);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(w,t):this._growRootAsSubNode(t),g.release(t)}}_rebuildTree(t,e){(0,c.c)(z,e.bounds),z[3]=e.halfSize,T([t,z],2,(t=>t),j);const n=g.acquire().init(this._root);this._root.initFrom(null,j,1.25*j[3]),this._forEachNode(n,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),g.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let r=-1/0;const i=this._root.bounds,o=this._root.halfSize;for(let t=0;t<3;t++){const s=i[t]-o-(n[t]-e),a=n[t]+e-(i[t]+o),u=Math.max(0,Math.ceil(s/(2*o))),c=Math.max(0,Math.ceil(a/(2*o)))+1,l=2**Math.ceil(Math.log(u+c)*Math.LOG2E);r=Math.max(r,l),B[t].min=u,B[t].max=c}for(let t=0;t<3;t++){let e=B[t].min,n=B[t].max;const s=(r-(e+n))/2;e+=Math.ceil(s),n+=Math.floor(s);const a=i[t]-o-e*o*2;E[t]=a+(n+e)*o}return E[3]=r*o*I,g.acquire().initFrom(null,E,r*o,0)}_growRootAsSubNode(t){const e=this._root.node;(0,c.c)(w,this._root.bounds),w[3]=this._root.halfSize,this._root.init(t),t.advanceTo(w,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,r=0;for(;r<e.length&&null==t;)n=r++,t=e[n];for(;r<e.length;)if(e[r++])return-1;return n}_isDegenerate(t){return!M(this._objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}constructor(t,e){this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}}class g{init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,r=this.depth){return this.node=(0,s.isSome)(t)?t:g.createEmptyNode(),(0,s.isSome)(e)&&(0,d.b)(e,this.bounds),this.halfSize=n,this.depth=r,this}advance(t){let e=this.node.children[t];e||(e=g.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=N[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*I,this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);e&&e(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new(0,u.default)({shrink:!0}),residents:new(0,u.default)({shrink:!0})}}static acquire(){return g._pool.acquire()}static release(t){g._pool.release(t)}static clearPool(){g._pool.prune()}constructor(){this.bounds=(0,d.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}}function _(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function b(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function x(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function T(t,e,n,r){if(1===e){const e=n(t[0]);(0,d.b)(e,r)}else{R[0]=1/0,R[1]=1/0,R[2]=1/0,V[0]=-1/0,V[1]=-1/0,V[2]=-1/0;for(let r=0;r<e;r++){const e=n(t[r]);M(e[3])&&(_(R,e),b(V,e))}(0,c.h)(r,R,V,.5),r[3]=Math.max(V[0]-R[0],V[1]-R[1],V[2]-R[2])/2}}function y(t,e){let n=1/0,r=null;for(let i=0;i<8;++i){const o=v(t,e,S[i]);o<n&&(n=o,r=S[i])}return r}function v(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function M(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}g._pool=new(0,a.default)(g),i=p||(p={}),(o=i.DepthOrder||(i.DepthOrder={}))[o.FRONT_TO_BACK=1]="FRONT_TO_BACK",o[o.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const N=[(0,l.f)(-1,-1,-1),(0,l.f)(1,-1,-1),(0,l.f)(-1,1,-1),(0,l.f)(1,1,-1),(0,l.f)(-1,-1,1),(0,l.f)(1,-1,1),(0,l.f)(-1,1,1),(0,l.f)(1,1,1)],S=[(0,l.f)(-1,-1,-1),(0,l.f)(-1,-1,1),(0,l.f)(-1,1,-1),(0,l.f)(-1,1,1),(0,l.f)(1,-1,-1),(0,l.f)(1,-1,1),(0,l.f)(1,1,-1),(0,l.f)(1,1,1)],I=Math.sqrt(3),O=[null];const E=(0,d.c)(),P=(0,l.c)(),R=(0,l.c)(),V=(0,l.c)(),F=new(0,u.default),A=(0,d.c)(),w=(0,d.c)(),z=(0,d.c)(),j=(0,d.c)(),B=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],C=new(0,u.default),L=[0,0,0,0,0,0,0,0],k=p})),e.register("a2Ayb",(function(n,r){t(n.exports,"intersectsSphere",(function(){return f}));var i,o,s,a=e("jubE1"),u=(e("gEEzE"),e("e4Xv2"),e("5YMIf")),c=(e("hRPEZ"),e("iLaO9")),l=e("esVaH");e("kVWqM"),e("4Tl7p");function f(t,e){for(let n=0;n<h.NUM;n++){const r=t[n];if(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=e[3])return!1}return!0}(s=i||(i={}))[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT",s[s.BOTTOM=2]="BOTTOM",s[s.TOP=3]="TOP",s[s.NEAR=4]="NEAR",s[s.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(o||(o={}));o.FAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_LEFT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_BOTTOM_RIGHT,o.NEAR_TOP_RIGHT,o.NEAR_TOP_LEFT,o.FAR_BOTTOM_RIGHT,o.FAR_BOTTOM_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_RIGHT,o.NEAR_BOTTOM_RIGHT,o.FAR_BOTTOM_RIGHT,o.FAR_TOP_RIGHT,o.NEAR_TOP_RIGHT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_TOP_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_LEFT,o.NEAR_TOP_LEFT,o.NEAR_TOP_RIGHT,o.FAR_TOP_RIGHT;var h,d;!function(t){t[t.NUM=6]="NUM"}(h||(h={})),function(t){t[t.NUM=8]="NUM"}(d||(d={}));(0,c.f)(-1,-1,-1,1),(0,c.f)(1,-1,-1,1),(0,c.f)(1,1,-1,1),(0,c.f)(-1,1,-1,1),(0,c.f)(-1,-1,1,1),(0,c.f)(1,-1,1,1),(0,c.f)(1,1,1,1),(0,c.f)(-1,1,1,1),new(0,a.ObjectStack)(l.create),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)()})),e.register("esVaH",(function(n,r){t(n.exports,"create",(function(){return a})),t(n.exports,"fromRay",(function(){return u})),t(n.exports,"fromLineSegmentAndDirection",(function(){return c}));var i=e("jubE1"),o=e("e4Xv2"),s=e("8lK3H");e("4Tl7p");function a(t){return t?{ray:(0,s.create)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,s.create)(),c0:0,c1:Number.MAX_VALUE}}function u(t,e=a()){return(0,s.copy)(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function c(t,e,n=a()){const r=(0,o.l)(t.vector);return(0,s.fromValues)(t.origin,e,n.ray),n.c0=0,n.c1=r,n}new(0,i.ObjectStack)((()=>({c0:0,c1:0,ray:null})))})),e.register("kVWqM",(function(n,r){t(n.exports,"create",(function(){return s})),t(n.exports,"copy",(function(){return a})),t(n.exports,"fromPoints",(function(){return c})),t(n.exports,"signedDistance",(function(){return d})),t(n.exports,"isAABBFullyInside",(function(){return l})),t(n.exports,"clip",(function(){return f})),t(n.exports,"clipInfinite",(function(){return h}));e("iVfa0"),e("7qybv");var i=e("e4Xv2"),o=e("5YMIf");e("8hg3f"),e("ckIlK"),e("4Tl7p"),e("9EGCe");function s(t=m){return[t[0],t[1],t[2],t[3]]}function a(t,e){return u(e[0],e[1],e[2],e[3],t)}function u(t,e,n,r,i=s()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e,n,r=s()){const i=n[0]-e[0],o=n[1]-e[1],a=n[2]-e[2],u=t[0]-e[0],c=t[1]-e[1],l=t[2]-e[2],f=o*l-a*c,h=a*u-i*l,d=i*c-o*u,m=f*f+h*h+d*d,p=Math.abs(m-1)>1e-5&&m>1e-12?1/Math.sqrt(m):1;return r[0]=f*p,r[1]=h*p,r[2]=d*p,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)();function l(t,e){const n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5];return t[0]*(t[0]>0?n:o)+t[1]*(t[1]>0?r:s)+t[2]*(t[2]>0?i:a)+t[3]>=0}function f(t,e){const n=(0,i.e)(t,e.ray.direction),r=-d(t,e.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;const o=r/n;return n>0?o<e.c1&&(e.c1=o):o>e.c0&&(e.c0=o),e.c0<=e.c1}function h(t,e){const n=(0,i.e)(t,e.ray.direction),r=-d(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const o=r/n;return n>0?o<e.c1&&(e.c1=o):o>e.c0&&(e.c0=o),e.c0<=e.c1}function d(t,e){return(0,i.e)(t,e)+t[3]}const m=[0,0,1,0];var p,g;(g=p||(p={}))[g.NONE=0]="NONE",g[g.CLAMP=1]="CLAMP",g[g.INFINITE_MIN=4]="INFINITE_MIN",g[g.INFINITE_MAX=8]="INFINITE_MAX";p.INFINITE_MIN,p.INFINITE_MAX,p.INFINITE_MAX})),e.register("9EGCe",(function(n,r){t(n.exports,"tangentFrame",(function(){return s}));e("iVfa0");var i=e("e4Xv2"),o=e("5YMIf");function s(t,e,n){Math.abs(t[0])>Math.abs(t[1])?(0,i.s)(e,0,1,0):(0,i.s)(e,1,0,0),(0,i.f)(n,t,e),(0,i.n)(e,e),(0,i.f)(e,n,t),(0,i.n)(n,n)}(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)(),(0,o.c)()})),e.register("cWcfE",(function(n,r){t(n.exports,"assert",(function(){return o})),t(n.exports,"rayBoxTest",(function(){return s})),t(n.exports,"setMatrixTranslation3",(function(){return a}));e("iE3Nt"),e("hRPEZ");(0,e("iLaO9").c)();class i{toString(){return`AssertException: ${this.message}`}constructor(t){this.message=t}}function o(t,e){if(!t)throw e=e||"assert",console.log(new Error(e).stack),new i(e)}function s(t,e,n,r){let i,o=(n[0]-t[0])/e[0],s=(r[0]-t[0])/e[0];o>s&&(i=o,o=s,s=i);let a=(n[1]-t[1])/e[1],u=(r[1]-t[1])/e[1];if(a>u&&(i=a,a=u,u=i),o>u||a>s)return!1;a>o&&(o=a),u<s&&(s=u);let c=(n[2]-t[2])/e[2],l=(r[2]-t[2])/e[2];return c>l&&(i=c,c=l,l=i),!(o>l||c>s||(l<s&&(s=l),s<0))}function a(t,e,n,r){t[12]=e,t[13]=n,t[14]=r}})),e.register("ibKgR",(function(n,r){t(n.exports,"toQuantizationTransform",(function(){return c})),t(n.exports,"quantizePoint",(function(){return b})),t(n.exports,"quantizeGeometry",(function(){return y})),t(n.exports,"unquantizeMultipoint",(function(){return v})),t(n.exports,"unquantizePoint",(function(){return M})),t(n.exports,"unquantizePolygon",(function(){return N})),t(n.exports,"unquantizePolyline",(function(){return S}));var i=e("7qybv"),o=e("79LpT");const s=(t,e,n)=>[e,n],a=(t,e,n)=>[e,n,t[2]],u=(t,e,n)=>[e,n,t[2],t[3]];function c(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:(0,i.isSome)(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function l({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function f({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function h(t,e,n){const r=[];let i,o,s,a;for(let u=0;u<n.length;u++){const c=n[u];u>0?(s=l(t,c[0]),a=f(t,c[1]),s===i&&a===o||(r.push(e(c,s-i,a-o)),i=s,o=a)):(i=l(t,c[0]),o=f(t,c[1]),r.push(e(c,i,o)))}return r.length>0?r:null}function d({scale:t,translate:e},n){return n*t[0]+e[0]}function m({scale:t,translate:e},n){return e[1]-n*t[1]}function p(t,e,n){const r=new Array(n.length);if(!n.length)return r;const[i,o]=t.scale;let s=d(t,n[0][0]),a=m(t,n[0][1]);r[0]=e(n[0],s,a);for(let t=1;t<n.length;t++){const u=n[t];s+=u[0]*i,a-=u[1]*o,r[t]=e(u,s,a)}return r}function g(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=p(t,e,n[i]);return r}function _(t,e,n,r,i){return e.points=function(t,e,n,r){return h(t,n?r?u:a:r?a:s,e)}(t,n.points,r,i),e}function b(t,e,n,r,i){return e.x=l(t,n.x),e.y=f(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function x(t,e,n,r,i){const o=function(t,e,n,r){const i=[],o=n?r?u:a:r?a:s;for(let n=0;n<e.length;n++){const r=h(t,o,e[n]);r&&r.length>=3&&i.push(r)}return i.length?i:null}(t,n.rings,r,i);return o?(e.rings=o,e):null}function T(t,e,n,r,i){const o=function(t,e,n,r){const i=[],o=n?r?u:a:r?a:s;for(let n=0;n<e.length;n++){const r=h(t,o,e[n]);r&&r.length>=2&&i.push(r)}return i.length?i:null}(t,n.paths,r,i);return o?(e.paths=o,e):null}function y(t,e){return t&&e?(0,o.isPoint)(e)?b(t,{},e,!1,!1):(0,o.isPolyline)(e)?T(t,{},e,!1,!1):(0,o.isPolygon)(e)?x(t,{},e,!1,!1):(0,o.isMultipoint)(e)?_(t,{},e,!1,!1):(0,o.isExtent)(e)?function(t,e,n,r,i){return e.xmin=l(t,n.xmin),e.ymin=f(t,n.ymin),e.xmax=l(t,n.xmax),e.ymax=f(t,n.ymax),e!==n&&(r&&(e.zmin=n.zmin,e.zmax=n.zmax),i&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}(t,{},e,!1,!1):null:null}function v(t,e,n,r,o){return(0,i.isSome)(n)&&(e.points=function(t,e,n,r){return p(t,n?r?u:a:r?a:s,e)}(t,n.points,r,o)),e}function M(t,e,n,r,o){return(0,i.isNone)(n)||(e.x=d(t,n.x),e.y=m(t,n.y),e!==n&&(r&&(e.z=n.z),o&&(e.m=n.m))),e}function N(t,e,n,r,o){return(0,i.isSome)(n)&&(e.rings=function(t,e,n,r){return g(t,n?r?u:a:r?a:s,e)}(t,n.rings,r,o)),e}function S(t,e,n,r,o){return(0,i.isSome)(n)&&(e.paths=function(t,e,n,r){return g(t,n?r?u:a:r?a:s,e)}(t,n.paths,r,o)),e}})),e.register("hbg1x",(function(n,r){t(n.exports,"isNullCountSupported",(function(){return l})),t(n.exports,"calculateStringStatistics",(function(){return f})),t(n.exports,"calculatePercentile",(function(){return d})),t(n.exports,"calculateStatistics",(function(){return h})),t(n.exports,"getAttributeComparator",(function(){return m})),t(n.exports,"processSummaryStatisticsResult",(function(){return _})),t(n.exports,"calculateUniqueValuesCount",(function(){return b})),t(n.exports,"createUVResult",(function(){return x})),t(n.exports,"getNormalizedValue",(function(){return T})),t(n.exports,"calculateClassBreaks",(function(){return y})),t(n.exports,"resolveCBResult",(function(){return v})),t(n.exports,"calculateHistogram",(function(){return M}));var i=e("59jTx"),o=e("hxmJW");const s="equal-interval",a=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,u=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),c=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function l(t){const e=null!=t.normalizationField||null!=t.normalizationType,n=null!=t.minValue||null!=t.maxValue,r=!!t.sqlExpression&&t.supportsSQLExpression;return!e&&!n&&!r}function f(t){const e=t.returnDistinct?[...new Set(t.values)]:t.values,n=e.filter((t=>null!=t)).length,r={count:n};return t.supportsNullCount&&(r.nullcount=e.length-n),t.percentileParams&&(r.median=d(e,t.percentileParams)),r}function h(t){const{values:e,useSampleStdDev:n,supportsNullCount:r}=t;let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=null,a=null,u=null,c=null,l=0;const f=null==t.minValue?-1/0:t.minValue,h=null==t.maxValue?1/0:t.maxValue;for(const t of e)Number.isFinite(t)?t>=f&&t<=h&&(s+=t,i=Math.min(i,t),o=Math.max(o,t),l++):"string"==typeof t&&l++;if(l&&null!=s){a=s/l;let t=0;for(const n of e)Number.isFinite(n)&&n>=f&&n<=h&&(t+=(n-a)**2);c=n?l>1?t/(l-1):0:l>0?t/l:0,u=Math.sqrt(c)}else i=null,o=null;const m={avg:a,count:l,max:o,min:i,stddev:u,sum:s,variance:c};return r&&(m.nullcount=e.length-l),t.percentileParams&&(m.median=d(e,t.percentileParams)),m}function d(t,e){const{fieldType:n,value:r,orderBy:i,isDiscrete:o}=e,s=m(n,"desc"===i);if(0===(t=[...t].filter((t=>null!=t)).sort(((t,e)=>s(t,e)))).length)return null;if(r<=0)return t[0];if(r>=1)return t[t.length-1];const a=(t.length-1)*r,u=Math.floor(a),c=u+1,l=a%1,f=t[u],h=t[c];return c>=t.length||o||"string"==typeof f||"string"==typeof h?f:f*(1-l)+h*l}function m(t,e){const n=e?1:-1,r=function(t){return t?(t,e)=>e-t:(t,e)=>t-e}(e),i=p(e);if(!t||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...u].includes(t))return(t,e)=>"number"==typeof t&&"number"==typeof e?r(t,e):"string"==typeof t&&"string"==typeof e?i(t,e):n;if("esriFieldTypeDate"===t)return(t,e)=>{const i=new Date(t).getTime(),o=new Date(e).getTime();return isNaN(i)||isNaN(o)?n:r(i,o)};if(u.has(t))return(t,e)=>r(t,e);if("esriFieldTypeString"===t)return(t,e)=>i(t,e);if("esriFieldTypeGUID"===t||"esriFieldTypeGlobalID"===t){const t=p(e);return(e,n)=>t(g(e),g(n))}return e?(t,e)=>1:(t,e)=>-1}function p(t){return t?(t,e)=>(t=null==t?void 0:t.toUpperCase())>(e=null==e?void 0:e.toUpperCase())?-1:t<e?1:0:(t,e)=>(t=null==t?void 0:t.toUpperCase())<(e=null==e?void 0:e.toUpperCase())?-1:t>e?1:0}function g(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function _(t,e){let n;for(n in t)c.includes(n)&&(Number.isFinite(t[n])||(t[n]=null));return e?(["avg","stddev","variance"].forEach((e=>{null!=t[e]&&(t[e]=Math.ceil(t[e]))})),t):t}function b(t){const e={};for(let n of t)(null==n||"string"==typeof n&&""===n.trim())&&(n=null),null==e[n]?e[n]={count:1,data:n}:e[n].count++;return{count:e}}function x(t,e,n){const r=t.count,i=[];n&&e&&"coded-value"===e.type&&e.codedValues.forEach((t=>{const e=t.code;r.hasOwnProperty(e)||(r[e]={data:e,count:0})}));for(const t in r){const e=r[t];i.push({value:e.data,count:e.count,label:e.label})}return{uniqueValueInfos:i}}function T(t,e,n,r){let i=null;switch(e){case"log":0!==t&&(i=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&0!==r&&(i=t/r*100);break;case"field":Number.isFinite(n)&&0!==n&&(i=t/n);break;case"natural-log":t>0&&(i=Math.log(t));break;case"square-root":t>0&&(i=t**.5)}return i}function y(t,e){const n=function(t){const e=t.field,n=t.classificationMethod||s,r=t.normalizationType,o=t.normalizationField,a=new(0,i.default);return a.classificationField=e,a.breakCount=t.breakCount,a.classificationMethod=n,a.standardDeviationInterval="standard-deviation"===n?t.standardDeviationInterval||1:void 0,a.normalizationType=r,a.normalizationField="field"===r?o:void 0,a}({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||5});return t=function(t,e,n){return e=null==e?-1/0:e,n=null==n?1/0:n,t.filter((t=>Number.isFinite(t)&&t>=e&&t<=n))}(t,e.minValue,e.maxValue),(0,o.createGenerateRendererClassBreaks)({definition:n,values:t,normalizationTotal:e.normalizationTotal})}function v(t,e){let n=t.classBreaks;const r=n.length,i=n[0].minValue,o=n[r-1].maxValue,s="standard-deviation"===e,u=a;return n=n.map((t=>{const e=t.label,n={minValue:t.minValue,maxValue:t.maxValue,label:e};if(s&&e){const t=e.match(u).map((t=>+t.trim()));2===t.length?(n.minStdDev=t[0],n.maxStdDev=t[1],t[0]<0&&t[1]>0&&(n.hasAvg=!0)):1===t.length&&(e.includes("<")?(n.minStdDev=null,n.maxStdDev=t[0]):e.includes(">")&&(n.minStdDev=t[0],n.maxStdDev=null))}return n})),{minValue:i,maxValue:o,classBreakInfos:n,normalizationTotal:t.normalizationTotal}}function M(t,e){const{min:n,max:r,intervals:i}=function(t,e){const{field:n,classificationMethod:r,standardDeviationInterval:i,normalizationType:o,normalizationField:s,normalizationTotal:a,minValue:u,maxValue:c}=e,f=e.numBins||10;let d=null,m=null,p=null;if(r&&"equal-interval"!==r||o){const{classBreaks:e}=y(t,{field:n,normalizationType:o,normalizationField:s,normalizationTotal:a,classificationMethod:r,standardDeviationInterval:i,minValue:u,maxValue:c,numClasses:f});d=e[0].minValue,m=e[e.length-1].maxValue,p=e.map((t=>[t.minValue,t.maxValue]))}else{if(null!=u&&null!=c)d=u,m=c;else{const e=h({values:t,minValue:u,maxValue:c,useSampleStdDev:!o,supportsNullCount:l({normalizationType:o,normalizationField:s,minValue:u,maxValue:c})});d=e.min,m=e.max}p=function(t,e,n){const r=(e-t)/n,i=[];let o,s=t;for(let t=1;t<=n;t++)o=s+r,o=Number(o.toFixed(16)),i.push([s,t===n?e:o]),s=o;return i}(d,m,f)}return{min:d,max:m,intervals:p}}(t,e),o=i.map(((t,e)=>({minValue:i[e][0],maxValue:i[e][1],count:0})));for(const e of t)if(null!=e&&e>=n&&e<=r){const t=N(i,e);t>-1&&o[t].count++}return{bins:o,minValue:n,maxValue:r,normalizationTotal:e.normalizationTotal}}function N(t,e){let n=-1;for(let r=t.length-1;r>=0;r--)if(e>=t[r][0]){n=r;break}return n}})),e.register("59jTx",(function(n,r){t(n.exports,"default",(function(){return h}));var i=e("7eJjO"),o=e("79ASa"),s=e("iho5X");e("lNwWH"),e("2VlWd"),e("iJAIC");var a=e("fcwIv"),u=e("kt6hM");const c=new(0,o.JSONMap)({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),l=new(0,o.JSONMap)({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let f=class extends u.default{set standardDeviationInterval(t){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",t)}set definedInterval(t){"defined-interval"===this.classificationMethod&&this._set("definedInterval",t)}constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}};(0,i._)([(0,s.property)({json:{write:!0}})],f.prototype,"breakCount",void 0),(0,i._)([(0,s.property)({json:{write:!0}})],f.prototype,"classificationField",void 0),(0,i._)([(0,s.property)({type:String,json:{read:c.read,write:c.write}})],f.prototype,"classificationMethod",void 0),(0,i._)([(0,s.property)({json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,i._)([(0,s.property)({json:{read:l.read,write:l.write}})],f.prototype,"normalizationType",void 0),(0,i._)([(0,s.property)({value:null,json:{write:!0}})],f.prototype,"standardDeviationInterval",null),(0,i._)([(0,s.property)({value:null,json:{write:!0}})],f.prototype,"definedInterval",null),(0,i._)([(0,s.property)()],f.prototype,"type",void 0),f=(0,i._)([(0,a.subclass)("esri.rest.support.ClassBreaksDefinition")],f);const h=f})),e.register("kt6hM",(function(n,r){t(n.exports,"default",(function(){return d}));var i=e("7eJjO"),o=e("79ASa"),s=e("1XAcN"),a=e("iho5X");e("lNwWH"),e("2VlWd"),e("iJAIC");var u=e("fcwIv"),c=e("1DHtQ"),l=e("j9ZJv");const f=new(0,o.JSONMap)({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let h=class extends s.JSONSupport{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};(0,i._)([(0,a.property)({type:l.default,json:{write:!0}})],h.prototype,"baseSymbol",void 0),(0,i._)([(0,a.property)({types:c.types,json:{read:{reader:c.fromJSON},write:!0}})],h.prototype,"colorRamp",void 0),(0,i._)([(0,a.property)({json:{read:f.read,write:f.write}})],h.prototype,"type",void 0),h=(0,i._)([(0,u.subclass)("esri.rest.support.ClassificationDefinition")],h);const d=h})),e.register("hxmJW",(function(e,n){function r(t,e){return Number(t.toFixed(e))}function i(t){const{normalizationTotal:e}=t;return{classBreaks:o(t),normalizationTotal:e}}function o(t){const e=t.definition,{classificationMethod:n,breakCount:i,normalizationType:o,definedInterval:l}=e,f=[];let h=t.values;if(0===h.length)return[];h=h.sort(((t,e)=>t-e));const d=h[0],m=h[h.length-1];if("equal-interval"===n)if(h.length>=i){const t=(m-d)/i;let e=d;for(let n=1;n<i;n++){const i=r(d+n*t,6);f.push({minValue:e,maxValue:i,label:s(e,i,o)}),e=i}f.push({minValue:e,maxValue:m,label:s(e,m,o)})}else h.forEach((t=>{f.push({minValue:t,maxValue:t,label:s(t,t,o)})}));else if("natural-breaks"===n){const e=a(h),n=t.valueFrequency||e.valueFrequency,l=function(t,e,n){const r=t.length,i=[];n>r&&(n=r);for(let t=0;t<n;t++)i.push(Math.round(t*r/n-1));i.push(r-1);let o=u(i,t,e,n);return function(t,e,n,r,i,o){let s=0,a=0,u=0,l=0,f=!0;for(let h=0;h<2&&f;h++){0===h&&(f=!1);for(let h=0;h<o-1;h++)for(;n[h+1]+1!==n[h+2];){n[h+1]=n[h+1]+1;const o=c(h,n,r,i);u=o.sbMean,s=o.sbSdcm;const d=c(h+1,n,r,i);if(l=d.sbMean,a=d.sbSdcm,!(s+a<e[h]+e[h+1])){n[h+1]=n[h+1]-1;break}e[h]=s,e[h+1]=a,t[h]=u,t[h+1]=l,f=!0}for(let h=o-1;h>0;h--)for(;n[h]!==n[h-1]+1;){n[h]=n[h]-1;const o=c(h-1,n,r,i);u=o.sbMean,s=o.sbSdcm;const d=c(h,n,r,i);if(l=d.sbMean,a=d.sbSdcm,!(s+a<e[h-1]+e[h])){n[h]=n[h]+1;break}e[h-1]=s,e[h]=a,t[h-1]=u,t[h]=l,f=!0}}return f}(o.mean,o.sdcm,i,t,e,n)&&(o=u(i,t,e,n)),i}(e.uniqueValues,n,i);let p=d;for(let t=1;t<i;t++)if(e.uniqueValues.length>t){const n=r(e.uniqueValues[l[t]],6);f.push({minValue:p,maxValue:n,label:s(p,n,o)}),p=n}f.push({minValue:p,maxValue:m,label:s(p,m,o)})}else if("quantile"===n)if(h.length>=i&&d!==m){let t=d,e=Math.ceil(h.length/i),n=0;for(let r=1;r<i;r++){let a=e+n-1;a>h.length&&(a=h.length-1),a<0&&(a=0),f.push({minValue:t,maxValue:h[a],label:s(t,h[a],o)}),t=h[a],n+=e,e=Math.ceil((h.length-n)/(i-r))}f.push({minValue:t,maxValue:m,label:s(t,m,o)})}else{let t=-1;for(let e=0;e<h.length;e++){const n=h[e];n!==t&&(t=n,f.push({minValue:t,maxValue:n,label:s(t,n,o)}),t=n)}}else if("standard-deviation"===n){const t=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/=t.length,e}(h),e=function(t,e){let n=0;for(let r=0;r<t.length;r++){const i=t[r];n+=(i-e)*(i-e)}return n/=t.length,Math.sqrt(n)}(h,t);if(0===e)f.push({minValue:h[0],maxValue:h[0],label:s(h[0],h[0],o)});else{const n=function(t,e,n,r,i){let o=Math.max(r-t,e-r)/i/n;return o=o>=1?1:o>=.5?.5:.25,o}(d,m,i,t,e)*e;let a=0,u=d;for(let e=i;e>=1;e--){const i=r(t-(e-.5)*n,6);f.push({minValue:u,maxValue:i,label:s(u,i,o)}),u=i,a++}let c=r(t+.5*n,6);f.push({minValue:u,maxValue:c,label:s(u,c,o)}),u=c,a++;for(let e=1;e<=i;e++)c=a===2*i?m:r(t+(e+.5)*n,6),f.push({minValue:u,maxValue:c,label:s(u,c,o)}),u=c,a++}}else if("defined-interval"===n){if(!l)return f;const t=h[0],e=h[h.length-1],n=Math.ceil((e-t)/l);let i=t;for(let e=1;e<n;e++){const n=r(t+e*l,6);f.push({minValue:i,maxValue:n,label:s(i,n,o)}),i=n}f.push({minValue:i,maxValue:e,label:s(i,e,o)})}return f}function s(t,e,n){let r=null;return r=t===e?n&&"percent-of-total"===n?t+"%":t.toString():n&&"percent-of-total"===n?t+"% - "+e+"%":t+" - "+e,r}function a(t){const e=[],n=[];let r=Number.MIN_VALUE,i=1,o=-1;for(let s=0;s<t.length;s++){const a=t[s];a===r?(i++,n[o]=i):null!==a&&(e.push(a),r=a,i=1,n.push(i),o++)}return{uniqueValues:e,valueFrequency:n}}function u(t,e,n,r){let i=[],o=[],s=[],a=0;const u=[],l=[];for(let i=0;i<r;i++){const r=c(i,t,e,n);u.push(r.sbMean),l.push(r.sbSdcm),a+=l[i]}let f,h=a,d=!0;for(;d||a<h;){d=!1,i=[];for(let e=0;e<r;e++)i.push(t[e]);for(let n=0;n<r;n++)for(let i=t[n]+1;i<=t[n+1];i++)if(f=e[i],n>0&&i!==t[n+1]&&Math.abs(f-u[n])>Math.abs(f-u[n-1]))t[n]=i;else if(n<r-1&&t[n]!==i-1&&Math.abs(f-u[n])>Math.abs(f-u[n+1])){t[n+1]=i-1;break}h=a,a=0,o=[],s=[];for(let i=0;i<r;i++){o.push(u[i]),s.push(l[i]);const r=c(i,t,e,n);u[i]=r.sbMean,l[i]=r.sbSdcm,a+=l[i]}}if(a>h){for(let e=0;e<r;e++)t[e]=i[e],u[e]=o[e],l[e]=s[e];a=h}return{mean:u,sdcm:l}}function c(t,e,n,r){let i=0,o=0;for(let s=e[t]+1;s<=e[t+1];s++){const t=r[s];i+=n[s]*t,o+=t}o<=0&&console.log("Exception in Natural Breaks calculation");const s=i/o;let a=0;for(let i=e[t]+1;i<=e[t+1];i++)a+=r[i]*(n[i]-s)**2;return{sbMean:s,sbSdcm:a}}t(e.exports,"createGenerateRendererClassBreaks",(function(){return i}))})),e.register("jGyUI",(function(e,n){t(e.exports,"jsonAdapter",(function(){return r}));const r={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,n){const r=new i(t.getPointX(e),t.getPointY(e),n),o=t.hasZ(e),s=t.hasM(e);return o&&(r.z=t.getPointZ(e)),s&&(r.m=t.getPointM(e)),r},exportPolygon:function(t,e,n){return new o(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,n){return new s(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,n){return new a(t.exportPoints(e),n,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,n){const r=t.hasZ(e),i=t.hasM(e),o=new u(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),n);if(r){const n=t.getZExtent(e);o.zmin=n.vmin,o.zmax=n.vmax}if(i){const n=t.getMExtent(e);o.mmin=n.vmin,o.mmax=n.vmax}return o}};class i{constructor(t,e,n){this.x=t,this.y=e,this.spatialReference=n,this.z=void 0,this.m=void 0}}class o{constructor(t,e,n,r){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class s{constructor(t,e,n,r){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class a{constructor(t,e,n,r){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class u{constructor(t,e,n,r,i){this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}})),e.register("8mTF7",(function(n,r){t(n.exports,"getCentroidOptimizedGeometry",(function(){return s}));var i=e("7qybv");function o(t,e){return t?e?4:3:e?3:2}function s(t,e,n,r,s){if((0,i.isNone)(e)||!e.lengths.length)return null;const h="upperLeft"===(null==s?void 0:s.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const d=t.coords,m=[],p=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:g,coords:_}=e,b=o(n,r);let x=0;for(const t of g){const e=a(p,_,x,t,n,r,h);e&&m.push(e),x+=t*b}if(m.sort(((t,e)=>{let r=h*t[2]-h*e[2];return 0===r&&n&&(r=t[4]-e[4]),r})),m.length){let t=6*m[0][2];d[0]=m[0][0]/t,d[1]=m[0][1]/t,n&&(t=6*m[0][4],d[2]=0!==t?m[0][3]/t:0),(d[0]<p[0]||d[0]>p[1]||d[1]<p[2]||d[1]>p[3]||n&&(d[2]<p[4]||d[2]>p[5]))&&(d.length=0)}if(!d.length){const t=e.lengths[0]?function(t,e,n,r,i){const s=o(r,i);let a=e,h=e+s,d=0,m=0,p=0,g=0;for(let e=0,i=n-1;e<i;e++,a+=s,h+=s){const e=t[a],n=t[a+1],i=t[a+2],o=t[h],s=t[h+1],_=t[h+2],b=r?c(e,n,i,o,s,_):u(e,n,o,s);if(b)if(d+=b,r){const t=f(e,n,i,o,s,_);m+=b*t[0],p+=b*t[1],g+=b*t[2]}else{const t=l(e,n,o,s);m+=b*t[0],p+=b*t[1]}}return d>0?r?[m/d,p/d,g/d]:[m/d,p/d]:n>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}(_,0,g[0],n,r):null;if(!t)return null;d[0]=t[0],d[1]=t[1],n&&t.length>2&&(d[2]=t[2])}return t}function a(t,e,n,r,i,s,a=1){const u=o(i,s);let c=n,l=n+u,f=0,h=0,d=0,m=0,p=0;for(let n=0,o=r-1;n<o;n++,c+=u,l+=u){const n=e[c],r=e[c+1],o=e[c+2],s=e[l],a=e[l+1],u=e[l+2];let g=n*a-s*r;m+=g,f+=(n+s)*g,h+=(r+a)*g,i&&(g=n*u-s*o,d+=(o+u)*g,p+=g),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),i&&(o<t[4]&&(t[4]=o),o>t[5]&&(t[5]=o))}if(m*a>0&&(m*=-1),p*a>0&&(p*=-1),!m)return null;const g=[f,h,.5*m];return i&&(g[3]=d,g[4]=.5*p),g}function u(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function c(t,e,n,r,i,o){const s=r-t,a=i-e,u=o-n;return Math.sqrt(s*s+a*a+u*u)}function l(t,e,n,r){return[t+.5*(n-t),e+.5*(r-e)]}function f(t,e,n,r,i,o){return[t+.5*(r-t),e+.5*(i-e),n+.5*(o-n)]}})),e.register("fP7bp",(function(n,r){t(n.exports,"checkProjectionSupport",(function(){return d})),t(n.exports,"project",(function(){return g})),t(n.exports,"projectMany",(function(){return b}));var i=e("7qybv"),o=e("7RvA5"),s=e("jGyUI"),a=e("eY5Yp"),u=e("eF88h");const c=[0,0];function l(t,e){if(!e)return null;if("x"in e){const n={x:0,y:0};return[n.x,n.y]=t(e.x,e.y,c),null!=e.z&&(n.z=e.z),null!=e.m&&(n.m=e.m),n}if("xmin"in e){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=t(e.xmin,e.ymin,c),[n.xmax,n.ymax]=t(e.xmax,e.ymax,c),e.hasZ&&(n.zmin=e.zmin,n.zmax=e.zmax,n.hasZ=!0),e.hasM&&(n.mmin=e.mmin,n.mmax=e.mmax,n.hasM=!0),n}return"rings"in e?{rings:f(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:f(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:h(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function f(t,e){const n=[];for(const r of t)n.push(h(r,e));return n}function h(t,e){const n=[];for(const r of t){const t=e(r[0],r[1],[0,0]);n.push(t),r.length>2&&t.push(r[2]),r.length>3&&t.push(r[3])}return n}async function d(t,e){if(!e)return;const n=Array.isArray(t)?t.map((t=>(0,i.isSome)(t.geometry)&&t.geometry.spatialReference)):[t];await(0,o.initializeProjection)(n.map((t=>({source:t,dest:e}))))}const m=l.bind(null,u.lngLatToXY),p=l.bind(null,u.xyToLngLat);function g(t,e,n,r){if(!t)return t;if(n||(n=e,e=t.spatialReference),!(0,a.isValid)(e)||!(0,a.isValid)(n)||(0,a.equals)(e,n))return t;if((0,u.canProject)(e,n)){const e=(0,a.isWebMercator)(n)?m(t):p(t);return e.spatialReference=n,e}return(0,o.projectMany)(s.jsonAdapter,[t],e,n,null,r)[0]}const _=new class{async push(t,e,n){if(!t||!t.length||!e||!n||(0,a.equals)(e,n))return t;const r={geometries:t,inSpatialReference:e,outSpatialReference:n,resolve:null};return this._jobs.push(r),new Promise((t=>{r.resolve=t,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:n,outSpatialReference:r,resolve:i}=t;(0,u.canProject)(n,r)?(0,a.isWebMercator)(r)?i(e.map(m)):i(e.map(p)):i((0,o.projectMany)(s.jsonAdapter,e,n,r,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}};function b(t,e,n){return _.push(t,e,n)}})),e.register("emniL",(function(n,r){t(n.exports,"QUERY_ENGINE_EMPTY_RESULT",(function(){return p})),t(n.exports,"transformCentroid",(function(){return T})),t(n.exports,"getGeometry",(function(){return y})),t(n.exports,"normalizeQuery",(function(){return v})),t(n.exports,"normalizeQueryLike",(function(){return M})),t(n.exports,"cleanFromGeometryEngine",(function(){return N}));var i=e("79ASa"),o=e("7qybv"),s=e("5vzSQ"),a=e("jxYOa"),u=e("79LpT"),c=e("5On35"),l=e("eY5Yp"),f=(e("8mTF7"),e("akQYU")),h=e("awxBI"),d=e("fP7bp");const m=new(0,i.JSONMap)({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),p=Object.freeze({}),g=new(0,h.default),_=new(0,h.default),b=new(0,h.default),x={esriGeometryPoint:f.convertToPoint,esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint};function T(t,e,n,r=t.hasZ,i=t.hasM){if((0,o.isNone)(e))return null;const s=t.hasZ&&r,a=t.hasM&&i;if(n){const o=(0,f.quantizeOptimizedGeometry)(b,e,t.hasZ,t.hasM,"esriGeometryPoint",n,r,i);return(0,f.convertToPoint)(o,s,a)}return(0,f.convertToPoint)(e,s,a)}function y(t,e,n,r,i,s,a=e,u=n){const c=e&&a,l=n&&u,h=(0,o.isSome)(r)?"coords"in r?r:r.geometry:null;if((0,o.isNone)(h))return null;if(i){let r=(0,f.generalizeOptimizedGeometry)(_,h,e,n,t,i,a,u);return s&&(r=(0,f.quantizeOptimizedGeometry)(b,r,c,l,t,s)),x[t](r,c,l)}if(s){const r=(0,f.quantizeOptimizedGeometry)(b,h,e,n,t,s,a,u);return x[t](r,c,l)}return(0,f.removeZMValues)(g,h,e,n,a,u),x[t](g,c,l)}async function v(t,e,n){const{outFields:r,orderByFields:i,groupByFieldsForStatistics:o,outStatistics:s}=t;if(r)for(let t=0;t<r.length;t++)r[t]=r[t].trim();if(i)for(let t=0;t<i.length;t++)i[t]=i[t].trim();if(o)for(let t=0;t<o.length;t++)o[t]=o[t].trim();if(s)for(let t=0;t<s.length;t++)s[t].onStatisticField&&(s[t].onStatisticField=s[t].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),M(t,e,n)}async function M(t,n,r){if(!t)return null;let{where:i}=t;if(t.where=i=i&&i.trim(),(!i||/^1 *= *1$/.test(i)||n&&n===i)&&(t.where=null),!t.geometry)return t;let f=await async function(t){const{geometry:n,distance:r,units:i}=t;if(null==r||"vertexAttributes"in n)return n;const o=n.spatialReference,a=i?m.fromJSON(i):(0,s.getUnitString)(o),u=o&&((0,l.isGeographic)(o)||(0,l.isWebMercator)(o))?n:await(0,d.checkProjectionSupport)(o,l.WGS84).then((()=>(0,d.project)(n,l.WGS84)));return(await async function(){return(await e("jIsh9")).geodesicBuffer}())(u.spatialReference,u,r,a)}(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:e}=t.geometry;f=(0,a.getGeometryExtent)(f),f.spatialReference=e}t.geometry=f,await(0,d.checkProjectionSupport)(f.spatialReference,r);const h=(await(0,c.normalizeCentralMeridian)((0,u.fromJSON)(f)))[0];if((0,o.isNone)(h))throw p;const g=h.toJSON(),_=await(0,d.project)(g,g.spatialReference,r);if(!_)throw p;return _.spatialReference=r,t.geometry=_,t}function N(t){return t&&S in t?JSON.parse(JSON.stringify(t,I)):t}const S="_geVersion",I=(t,e)=>t!==S?e:void 0})),e.register("jIsh9",(function(t,n){t.exports=Promise.all([e("4WKyX")(e("aNJCr").getBundleURL("3THqs")+e("iE7OH").resolve("9ESom")),e("4WKyX")(e("aNJCr").getBundleURL("3THqs")+e("iE7OH").resolve("vg0wl"))]).then((()=>e("1n9JK")))}))}();
//# sourceMappingURL=SceneLayerSnappingSourceWorker.a846086e.js.map
