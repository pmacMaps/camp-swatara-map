!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("gyhpX",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return a}));var f=t("En4uz"),s=t("k8a7B"),u=t("6lzcr"),o=t("prRAE");class a{async extract(e){const t=c(e),r=(0,o.extract)(t),n=[t.data.buffer];return{result:l(r,n),transferList:n}}async extractComponentsEdgeLocations(e){const t=c(e),r=(0,o.extractEdgeInformation)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,u.extractEdges)(r,h,p),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}async extractEdgeLocations(e){const t=c(e),r=(0,o.extractEdgeInformation)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,u.extractEdges)(r,d,p),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}}function c(e){return{data:s.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function l(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,f.packInterleavedBuffer)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,f.packInterleavedBuffer)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}const d=new class{allocate(e){return o.extractEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}},h=new class{allocate(e){return o.extractComponentsEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}},p={allocate:()=>null,write:()=>{},trim:()=>null}})),t.register("En4uz",(function(r,n){e(r.exports,"packInterleavedBuffer",(function(){return f}));var i=t("8Z9U2");function f(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new(0,i.PackedLayout)(e.layout)}}})),t.register("8Z9U2",(function(r,n){e(r.exports,"InterleavedLayout",(function(){return o})),e(r.exports,"newLayout",(function(){return a})),e(r.exports,"PackedLayout",(function(){return c}));var i=t("YI2am"),f=t("2TwbA"),s=t("cWcfE");class u{get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new u(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,r=0,n=e.count){const i=this.stride;if(i%4==0){const f=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(f)}else{const f=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(f)}return this}constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fields.keys()){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}}class o{vec2f(e,t){return this._appendField(e,i.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,i.BufferViewVec2f64,t),this}vec3f(e,t){return this._appendField(e,i.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,i.BufferViewVec3f64,t),this}vec4f(e,t){return this._appendField(e,i.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,i.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,i.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,i.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,i.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,i.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,i.BufferViewVec4u8,t),this}f32(e,t){return this._appendField(e,i.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,i.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,i.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,i.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,i.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,i.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,i.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,i.BufferViewVec2u8,t),this}vec4u16(e,t){return this._appendField(e,i.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,i.BufferViewUint32,t),this}_appendField(e,t,r){if(this._fields.has(e))return void(0,s.assert)(!1,`${e} already added to vertex buffer layout`);const n=t.ElementCount*(0,f.elementTypeSize)(t.ElementType),i=this._stride;this._stride+=n,this._fields.set(e,{size:n,constructor:t,offset:i,optional:r})}createBuffer(e){return new u(this,e)}createView(e){return new u(this,e)}clone(){const e=new o;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,r)=>e._fields.set(r,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,(0,f.elementTypeSize)(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}constructor(e=null){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:h(e[1].constructor)}))))}}function a(){return new o}class c{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const r={...e,constructor:d(e.constructor)};this.fields.push([t,r])})),this.stride=e.stride}}const l=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32];function d(e){return`${e.ElementType}_${e.ElementCount}`}function h(e){return p.get(e)}const p=new Map;l.forEach((e=>p.set(d(e),e)))})),t.register("2TwbA",(function(t,r){function n(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}e(t.exports,"elementTypeSize",(function(){return n}))})),t.register("cWcfE",(function(r,n){e(r.exports,"assert",(function(){return f})),e(r.exports,"rayBoxTest",(function(){return s}));t("iE3Nt"),t("hRPEZ");(0,t("iLaO9").c)();class i{toString(){return`AssertException: ${this.message}`}constructor(e){this.message=e}}function f(e,t){if(!e){t=t||"Assertion";const e=new Error(t).stack;throw new i(`${t} at ${e}`)}}function s(e,t,r,n){let i,f=(r[0]-e[0])/t[0],s=(n[0]-e[0])/t[0];f>s&&(i=f,f=s,s=i);let u=(r[1]-e[1])/t[1],o=(n[1]-e[1])/t[1];if(u>o&&(i=u,u=o,o=i),f>o||u>s)return!1;u>f&&(f=u),o<s&&(s=o);let a=(r[2]-e[2])/t[2],c=(n[2]-e[2])/t[2];return a>c&&(i=a,a=c,c=i),!(f>c||a>s||(c<s&&(s=c),s<0))}})),t.register("7S12W",(function(t,r){var n,i;e(t.exports,"VertexAttribute",(function(){return n})),(i=n||(n={})).POSITION="position",i.NORMAL="normal",i.NORMALCOMPRESSED="normalCompressed",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude",i.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",i.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})),t.register("gPnQi",(function(r,n){e(r.exports,"deduplicate",(function(){return s}));var i=t("iVfa0"),f=t("2tD5D");function s(e,t,r){var n;const s=Array.isArray(e),l=s?e.length/t:e.byteLength/(4*t),d=s?e:new Uint32Array(e,0,l*t),h=null!==(n=null==r?void 0:r.minReduction)&&void 0!==n?n:0,p=(null==r?void 0:r.originalIndices)||null,A=p?p.length:0,w=(null==r?void 0:r.componentOffsets)||null;let V=0;if(w)for(let e=0;e<w.length-1;e++){const t=w[e+1]-w[e];t>V&&(V=t)}else V=l;const E=Math.floor(1.1*V)+1;(null==c||c.length<2*E)&&(c=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*E)));for(let e=0;e<2*E;e++)c[e]=0;let g=0;const y=!!w&&!!p,B=y?A:l;let I=(0,f.newIndexArray)(l);const T=new Uint32Array(A),O=1.96;let R=0!==h?Math.ceil(4*O*O/(h*h)*h*(1-h)):B,L=1,_=w?w[1]:B;for(let e=0;e<B;e++){if(e===R){const t=1-g/e;if(t+O*Math.sqrt(t*(1-t)/e)<h)return null;R*=2}if(e===_){for(let e=0;e<2*E;e++)c[e]=0;if(p)for(let e=w[L-1];e<w[L];e++)T[e]=I[p[e]];_=w[++L]}const r=y?p[e]:e,n=r*t,i=a(d,n,t);let f=i%E,s=g;for(;0!==c[2*f+1];){if(c[2*f]===i){const e=c[2*f+1]-1;if(u(d,n,e*t,t)){s=I[e];break}}f++,f>=E&&(f-=E)}s===g&&(c[2*f]=i,c[2*f+1]=r+1,g++),I[r]=s}if(0!==h&&1-g/l<h)return null;if(y){for(let e=w[L-1];e<T.length;e++)T[e]=I[p[e]];I=(0,f.compactIndices)(T)}const U=s?new Array(g):new Uint32Array(g*t);g=0;for(let e=0;e<B;e++)I[e]===g&&(o(d,(y?p[e]:e)*t,U,g*t,t),g++);if(p&&!y){const e=new Uint32Array(A);for(let t=0;t<e.length;t++)e[t]=I[p[t]];I=(0,f.compactIndices)(e)}return{buffer:Array.isArray(U)?U:U.buffer,indices:I,uniqueCount:g}}function u(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function o(e,t,r,n,i){for(let f=0;f<i;f++)r[n+f]=e[t+f]}function a(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let c=null})),t.register("2tD5D",(function(r,n){e(r.exports,"compactIndices",(function(){return f})),e(r.exports,"newIndexArray",(function(){return u})),e(r.exports,"getContinuousIndexArray",(function(){return l}));var i=t("kkxEC");function f(e){return(0,i.isArray)(e)?e.length<i.NATIVE_ARRAY_MAX_SIZE?e:s(e):e.length<i.NATIVE_ARRAY_MAX_SIZE?Array.from(e):e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?e:s(e)}function s(e){let t=!0;for(const r of e){if(r>=65536)return(0,i.isArray)(e)?new Uint32Array(e):e;r>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}function u(e){return e<=i.NATIVE_ARRAY_MAX_SIZE?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}let o=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const a=[0],c=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function l(e){if(1===e)return a;if(e<i.NATIVE_ARRAY_MAX_SIZE)return Array.from(new Uint16Array(c.buffer,0,e));if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>o.length){const t=Math.max(2*o.length,e);o=new Uint32Array(t);for(let e=0;e<o.length;e++)o[e]=e}return new Uint32Array(o.buffer,0,e)}new Uint8Array(65536)}))}();
//# sourceMappingURL=EdgeProcessingWorker.dfb2063d.js.map
