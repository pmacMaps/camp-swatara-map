function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("lJf0F",(function(r,n){var i;i=r.exports,Object.defineProperty(i,"__esModule",{value:!0,configurable:!0}),e(r.exports,"EdgeProcessingWorker",(function(){return p})),e(r.exports,"extract",(function(){return g})),e(r.exports,"extractEdgeLocationsLayout",(function(){return m})),e(r.exports,"extractComponentsEdgeLocationsLayout",(function(){return O})),e(r.exports,"default",(function(){return B}));var s=t("eN5rB"),o=t("02Vm5"),u=t("4kzzT"),f=t("knmSn"),a=t("44Q9I"),c=t("9CgjL"),l=t("g2hSq"),d=t("lJhVI");class p{async extract(e){const t=h(e),r=g(t),n=[t.data.buffer];return{result:V(r,n),transferList:n}}async extractComponentsEdgeLocations(e){const t=h(e),r=A(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,d.extractEdges)(r,T,N),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}async extractEdgeLocations(e){const t=h(e),r=A(t.data,t.skipDeduplicate,t.indices,t.indicesLength),n=(0,d.extractEdges)(r,E,N),i=[];return{result:(0,f.packInterleavedBuffer)(n.regular.instancesData,i),transferList:i}}}function g(e){const t=A(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return w.updateSettings(e.writerSettings),I.updateSettings(e.writerSettings),(0,d.extractEdges)(t,w,I)}function h(e){return{data:c.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function V(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,f.packInterleavedBuffer)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,f.packInterleavedBuffer)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function A(e,t,r,n){if(t)return{faces:r,facesLength:n,neighbors:(0,o.computeNeighbors)(r,n,e.count),vertices:e};const i=(0,s.deduplicate)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:n}),u=(0,o.computeNeighbors)(i.indices,n,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:u,vertices:c.EdgeInputBufferLayout.createView(i.buffer)}}const w=new(0,l.RegularEdgeBufferWriter),I=new(0,l.SilhouetteEdgeBufferWriter);const E=new class{allocate(e){return m.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}},T=new class{allocate(e){return O.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}},N={allocate:()=>null,write:()=>{},trim:()=>null},m=(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION0).vec3f(a.VertexAttribute.POSITION1),O=(0,u.newLayout)().vec3f(a.VertexAttribute.POSITION0).vec3f(a.VertexAttribute.POSITION1).u16(a.VertexAttribute.COMPONENTINDEX).u16(a.VertexAttribute.U16PADDING,{glPadding:!0});function B(){return new p}})),t.register("eN5rB",(function(r,n){e(r.exports,"deduplicate",(function(){return s}));var i=t("8TN87");function s(e,t,r){const n=e.byteLength/(4*t),s=new Uint32Array(e,0,n*t);let c=new Uint32Array(n);const l=r?.minReduction??0,d=r?.originalIndices||null,p=d?d.length:0,g=r?.componentOffsets||null;let h=0;if(g)for(let e=0;e<g.length-1;e++){const t=g[e+1]-g[e];t>h&&(h=t)}else h=n;const V=Math.floor(1.1*h)+1;(null==a||a.length<2*V)&&(a=new Uint32Array((0,i.nextHighestPowerOfTwo)(2*V)));for(let e=0;e<2*V;e++)a[e]=0;let A=0;const w=!!g&&!!d,I=w?p:n,E=w?new Uint32Array(p):null,T=1.96;let N=0!==l?Math.ceil(4*T*T/(l*l)*l*(1-l)):I,m=1,O=g?g[1]:I;for(let e=0;e<I;e++){if(e===N){const t=1-A/e;if(t+T*Math.sqrt(t*(1-t)/e)<l)return null;N*=2}if(e===O){for(let e=0;e<2*V;e++)a[e]=0;if(d)for(let e=g[m-1];e<g[m];e++)E[e]=c[d[e]];O=g[++m]}const r=w?d[e]:e,n=r*t,i=f(s,n,t);let u=i%V,p=A;for(;0!==a[2*u+1];){if(a[2*u]===i){const e=a[2*u+1]-1;if(o(s,n,e*t,t)){p=c[e];break}}u++,u>=V&&(u-=V)}p===A&&(a[2*u]=i,a[2*u+1]=r+1,A++),c[r]=p}if(0!==l&&1-A/n<l)return null;if(w){for(let e=g[m-1];e<E.length;e++)E[e]=c[d[e]];c=E}const B=new Uint32Array(t*A);A=0;for(let e=0;e<I;e++)c[e]===A&&(u(s,(w?d[e]:e)*t,B,A*t,t),A++);if(d&&!w){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=c[d[t]];c=e}return{buffer:B.buffer,indices:c,uniqueCount:A}}function o(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function u(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[t+s]}function f(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let a=null})),t.register("02Vm5",(function(t,r){function n(e,t,r){const n=t/3,i=new Uint32Array(r+1),s=new Uint32Array(r+1),o=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];o(r,n),o(n,i),o(i,r)}let u=0,f=0;for(let e=0;e<r;e++){const t=i[e+1],r=s[e+1];i[e+1]=u,s[e+1]=f,u+=t,f+=r}const a=new Uint32Array(6*n),c=i[r],l=(e,t,r)=>{if(e<t){const n=i[e+1]++;a[2*n]=t,a[2*n+1]=r}else{const n=s[t+1]++;a[2*c+2*n]=e,a[2*c+2*n+1]=r}};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];l(r,n,t),l(n,i,t),l(i,r,t)}const d=(e,t)=>{const r=2*e,n=t-e;for(let e=1;e<n;e++){const t=a[r+2*e],n=a[r+2*e+1];let i=e-1;for(;i>=0&&a[r+2*i]>t;i--)a[r+2*i+2]=a[r+2*i],a[r+2*i+3]=a[r+2*i+1];a[r+2*i+2]=t,a[r+2*i+3]=n}};for(let e=0;e<r;e++)d(i[e],i[e+1]),d(c+s[e],c+s[e+1]);const p=new Int32Array(3*n),g=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,h=(e,t)=>{const r=g(e,t);p[3*t+r]=-1},V=(e,t,r,n)=>{const i=g(e,t);p[3*t+i]=n;const s=g(r,n);p[3*n+s]=t};for(let e=0;e<r;e++){let t=i[e];const r=i[e+1];let n=s[e];const o=s[e+1];for(;t<r&&n<o;){const r=a[2*t],i=a[2*c+2*n];r===i?(V(e,a[2*t+1],i,a[2*c+2*n+1]),t++,n++):r<i?(h(e,a[2*t+1]),t++):(h(i,a[2*c+2*n+1]),n++)}for(;t<r;)h(e,a[2*t+1]),t++;for(;n<o;)h(a[2*c+2*n],a[2*c+2*n+1]),n++}return p}e(t.exports,"computeNeighbors",(function(){return n}))})),t.register("4kzzT",(function(r,n){e(r.exports,"newLayout",(function(){return f}));var i=t("k4Lc2"),s=t("2bApG");class o{get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new o(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fieldNames){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}}class u{vec2f(e,t){return this._appendField(e,i.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,i.BufferViewVec2f64,t),this}vec3f(e,t){return this._appendField(e,i.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,i.BufferViewVec3f64,t),this}vec4f(e,t){return this._appendField(e,i.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,i.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,i.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,i.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,i.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,i.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,i.BufferViewVec4u8,t),this}f32(e,t){return this._appendField(e,i.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,i.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,i.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,i.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,i.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,i.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,i.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,i.BufferViewVec2u8,t),this}vec4u16(e,t){return this._appendField(e,i.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,i.BufferViewUint32,t),this}_appendField(e,t,r){const n=t.ElementCount*(0,s.elementTypeSize)(t.ElementType),i=this.stride;this.fields.set(e,{size:n,constructor:t,offset:i,optional:r}),this.stride+=n,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.includes(e)}createBuffer(e){return new o(this,e)}createView(e){return new o(this,e)}clone(){const e=new u;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,r)=>e.fields.set(r,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}}function f(){return new u}})),t.register("2bApG",(function(r,n){function i(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function u(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}e(r.exports,"elementTypeSize",(function(){return i})),e(r.exports,"isSigned",(function(){return s})),e(r.exports,"isInteger",(function(){return o})),e(r.exports,"maximumValue",(function(){return u})),t("5HTPH")})),t.register("knmSn",(function(r,n){e(r.exports,"packInterleavedBuffer",(function(){return s}));var i=t("k4Lc2");t("4kzzT");function s(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:o(e.layout)}}function o(e){const t=new Array;return e.fields.forEach(((e,r)=>{const n={...e,constructor:f(e.constructor)};t.push([r,n])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const u=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32];function f(e){return`${e.ElementType}_${e.ElementCount}`}const a=new Map;u.forEach((e=>a.set(f(e),e)))})),t.register("44Q9I",(function(t,r){var n,i;e(t.exports,"VertexAttribute",(function(){return n})),(i=n||(n={})).POSITION="position",i.NORMAL="normal",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.MAPPOS="mapPos",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.NORMALCOMPRESSED="normalCompressed",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude"})),t.register("9CgjL",(function(r,n){e(r.exports,"EdgeInputBufferLayout",(function(){return u})),e(r.exports,"RegularEdgeInstancesLayout",(function(){return c})),e(r.exports,"SilhouetteEdgeInstancesLayout",(function(){return l}));var i=t("hgSTu"),s=t("4kzzT"),o=t("44Q9I");const u=(0,s.newLayout)().vec3f(o.VertexAttribute.POSITION).u16(o.VertexAttribute.COMPONENTINDEX).u16(o.VertexAttribute.U16PADDING),f=(0,s.newLayout)().vec2u8(o.VertexAttribute.SIDENESS),a=((0,i.glLayout)(f),(0,s.newLayout)().vec3f(o.VertexAttribute.POSITION0).vec3f(o.VertexAttribute.POSITION1).u16(o.VertexAttribute.COMPONENTINDEX).u8(o.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(o.VertexAttribute.VARIANTSTROKE).u8(o.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).u8(o.VertexAttribute.U8PADDING,{glPadding:!0}).u16(o.VertexAttribute.U16PADDING,{glPadding:!0})),c=a.clone().vec3f(o.VertexAttribute.NORMAL),l=a.clone().vec3f(o.VertexAttribute.NORMALA).vec3f(o.VertexAttribute.NORMALB);new Map([[o.VertexAttribute.POSITION0,0],[o.VertexAttribute.POSITION1,1],[o.VertexAttribute.COMPONENTINDEX,2],[o.VertexAttribute.VARIANTOFFSET,3],[o.VertexAttribute.VARIANTSTROKE,4],[o.VertexAttribute.VARIANTEXTENSION,5],[o.VertexAttribute.NORMAL,6],[o.VertexAttribute.NORMALA,6],[o.VertexAttribute.NORMALB,7],[o.VertexAttribute.SIDENESS,8]])})),t.register("hgSTu",(function(r,n){e(r.exports,"glLayout",(function(){return o}));var i=t("l3QXd"),s=t("hSAA2");function o(e,t=0){const r=e.stride;return e.fieldNames.filter((t=>{const r=e.fields.get(t).optional;return!(r&&r.glPadding)})).map((n=>{const i=e.fields.get(n),o=i.constructor.ElementCount,f=function(e){const t=u[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}(i.constructor.ElementType),a=i.offset,c=!(!i.optional||!i.optional.glNormalized);return new(0,s.VertexElementDescriptor)(n,o,f,a,r,c,t)}))}const u={u8:i.DataType.UNSIGNED_BYTE,u16:i.DataType.UNSIGNED_SHORT,u32:i.DataType.UNSIGNED_INT,i8:i.DataType.BYTE,i16:i.DataType.SHORT,i32:i.DataType.INT,f32:i.DataType.FLOAT}})),t.register("g2hSq",(function(r,n){e(r.exports,"RegularEdgeBufferWriter",(function(){return V})),e(r.exports,"SilhouetteEdgeBufferWriter",(function(){return A}));var i=t("lQo64"),s=t("8lcnQ"),o=t("iHxaG"),u=t("hgSTu"),f=t("9CgjL");class a{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?g:p}write(e,t,r){const n=this.edgeHashFunction(r);I.seed=n;const i=I.getIntRange(0,255),s=I.getIntRange(0,this.settings.variants-1),o=I.getFloat(),u=255*(.5*function(e,t){const r=e<0?-1:1;return Math.abs(e)**t*r}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,s),e.variantExtension.set(t,u)}trim(e,t){return e.slice(0,t)}}const c=new Float32Array(6),l=new Uint32Array(c.buffer),d=new Uint32Array(1);function p(e){const t=c;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],d[0]=5381;for(let e=0;e<l.length;e++)d[0]=31*d[0]+l[e];return d[0]}function g(e){const t=c;t[0]=h(e.position0[0]),t[1]=h(e.position0[1]),t[2]=h(e.position0[2]),t[3]=h(e.position1[0]),t[4]=h(e.position1[1]),t[5]=h(e.position1[2]),d[0]=5381;for(let e=0;e<l.length;e++)d[0]=31*d[0]+l[e];return d[0]}function h(e){return Math.round(1e4*e)/1e4}class V{updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return f.RegularEdgeInstancesLayout.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),(0,s.a)(w,r.faceNormal0,r.faceNormal1),(0,s.n)(w,w),e.normal.setVec(t,w)}trim(e,t){return this.commonWriter.trim(e,t)}constructor(){this.commonWriter=new a}}V.Layout=f.RegularEdgeInstancesLayout,V.glLayout=(0,u.glLayout)(f.RegularEdgeInstancesLayout,1);class A{updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return f.SilhouetteEdgeInstancesLayout.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}constructor(){this.commonWriter=new a}}A.Layout=f.SilhouetteEdgeInstancesLayout,A.glLayout=(0,u.glLayout)(f.SilhouetteEdgeInstancesLayout,1);const w=(0,o.c)(),I=new(0,i.default)})),t.register("lJhVI",(function(r,n){e(r.exports,"extractEdges",(function(){return d}));var i=t("aX9sh"),s=t("8TN87"),o=t("2DP3b"),u=t("8lcnQ"),f=t("iHxaG");const a=-1;var c,l;function d(e,t,r,n=A){const f=e.vertices.position,c=e.vertices.componentIndex,l=(0,s.deg2rad)(n.anglePlanar),d=(0,s.deg2rad)(n.angleSignificantEdge),w=Math.cos(d),I=Math.cos(l),E=h.edge,T=E.position0,N=E.position1,m=E.faceNormal0,O=E.faceNormal1,B=function(e){const t=e.faces.length/3,r=e.vertices.position,n=e.faces,i=V.v0,s=V.v1,o=V.v2,f=new Float32Array(3*t);for(let e=0;e<t;e++){const t=n[3*e+0],a=n[3*e+1],c=n[3*e+2];r.getVec(t,i),r.getVec(a,s),r.getVec(c,o),(0,u.b)(s,s,i),(0,u.b)(o,o,i),(0,u.f)(i,s,o),(0,u.n)(i,i),f[3*e+0]=i[0],f[3*e+1]=i[1],f[3*e+2]=i[2]}return f}(e),y=function(e){const t=e.faces.length/3,r=e.faces,n=e.neighbors;let i=0;for(let e=0;e<t;e++){const t=n[3*e+0],s=n[3*e+1],o=n[3*e+2],u=r[3*e+0],f=r[3*e+1],c=r[3*e+2];i+=t===a||u<f?1:0,i+=s===a||f<c?1:0,i+=o===a||c<u?1:0}const s=new Int32Array(4*i);let o=0;for(let e=0;e<t;e++){const t=n[3*e+0],i=n[3*e+1],u=n[3*e+2],f=r[3*e+0],c=r[3*e+1],l=r[3*e+2];(t===a||f<c)&&(s[o++]=f,s[o++]=c,s[o++]=e,s[o++]=t),(i===a||c<l)&&(s[o++]=c,s[o++]=l,s[o++]=e,s[o++]=i),(u===a||l<f)&&(s[o++]=l,s[o++]=f,s[o++]=e,s[o++]=u)}return s}(e),S=y.length/4,L=t.allocate(S);let b=0;const x=S,R=r.allocate(x);let v=0,F=0,D=0;const U=(0,i.range)(0,S),M=new Float32Array(S);(0,o.forEach)(M,((e,t,r)=>{f.getVec(y[4*t+0],T),f.getVec(y[4*t+1],N),r[t]=(0,u.i)(T,N)})),U.sort(((e,t)=>M[t]-M[e]));const P=new Array,C=new Array;for(let e=0;e<S;e++){const n=U[e],i=M[n],s=y[4*n+0],o=y[4*n+1],d=y[4*n+2],h=y[4*n+3],V=h===a;if(f.getVec(s,T),f.getVec(o,N),V)(0,u.s)(m,B[3*d+0],B[3*d+1],B[3*d+2]),(0,u.c)(O,m),E.componentIndex=c.get(s),E.cosAngle=(0,u.e)(m,O);else{if((0,u.s)(m,B[3*d+0],B[3*d+1],B[3*d+2]),(0,u.s)(O,B[3*h+0],B[3*h+1],B[3*h+2]),E.componentIndex=c.get(s),E.cosAngle=(0,u.e)(m,O),_=I,E.cosAngle>_)continue;E.cosAngle<-.9999&&(0,u.c)(O,m)}F+=i,D++,V||p(E,w)?(t.write(L,b++,E),P.push(i)):g(E,l)&&(r.write(R,v++,E),C.push(i))}var _;const G=new Float32Array(P.reverse()),k=new Float32Array(C.reverse());return{regular:{instancesData:t.trim(L,b),lodInfo:{lengths:G}},silhouette:{instancesData:r.trim(R,v),lodInfo:{lengths:k}},averageEdgeLength:F/D}}function p(e,t){return e.cosAngle<t}function g(e,t){const r=(0,s.acosClamped)(e.cosAngle),n=h.fwd,i=h.ortho;return(0,u.r)(n,e.position1,e.position0),r*((0,u.e)((0,u.f)(i,e.faceNormal0,e.faceNormal1),n)>0?-1:1)>t}(l=c||(c={}))[l.SOLID=0]="SOLID",l[l.SKETCH=1]="SKETCH";const h={edge:{position0:(0,f.c)(),position1:(0,f.c)(),faceNormal0:(0,f.c)(),faceNormal1:(0,f.c)(),componentIndex:0,cosAngle:0},ortho:(0,f.c)(),fwd:(0,f.c)()},V={v0:(0,f.c)(),v1:(0,f.c)(),v2:(0,f.c)()},A={anglePlanar:4,angleSignificantEdge:35}}));
//# sourceMappingURL=EdgeProcessingWorker.83925ef0.js.map
