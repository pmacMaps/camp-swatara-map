function e(e,r,t,s){Object.defineProperty(e,r,{get:t,set:s,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("iKthu",(function(t,s){var o;o=t.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",(function(){return c}));var i=r("j6uz9"),a=r("hTI69");r("aX9sh"),r("5HTPH"),r("gHCNy");var n=r("qA6zg"),p=r("HO6Gm"),l=r("5vbdy");let u=class extends l.default{solve(e,r){return(0,p.solve)(this.url,e,r)}constructor(e){super(e),this.url=null}};(0,i._)([(0,a.property)()],u.prototype,"url",void 0),u=(0,i._)([(0,n.subclass)("esri.tasks.ClosestFacilityTask")],u);const c=u})),r.register("HO6Gm",(function(t,s){e(t.exports,"solve",(function(){return c}));var o=r("bYA0c"),i=r("iABKu"),a=r("hq5aB"),n=r("fll9c"),p=r("dgLSf"),l=r("g8mhQ");const u=(0,i.createQueryParamsHelper)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});async function c(e,r,t){const s=[],i=[],c={},y={},d=(0,p.parseUrl)(e),{path:f}=d;r.incidents&&r.incidents.features&&(0,n.collectGeometries)(r.incidents.features,i,"incidents.features",c),r.facilities&&r.facilities.features&&(0,n.collectGeometries)(r.facilities.features,i,"facilities.features",c),r.pointBarriers&&r.pointBarriers.features&&(0,n.collectGeometries)(r.pointBarriers.features,i,"pointBarriers.features",c),r.polylineBarriers&&r.polylineBarriers.features&&(0,n.collectGeometries)(r.polylineBarriers.features,i,"polylineBarriers.features",c),r.polygonBarriers&&r.polygonBarriers.features&&(0,n.collectGeometries)(r.polygonBarriers.features,i,"polygonBarriers.features",c);const m=await(0,a.normalizeCentralMeridian)(i);for(const e in c){const r=c[e];s.push(e),y[e]=m.slice(r[0],r[1])}if((0,n.isInputGeometryZAware)(y,s)){let e=null;try{e=await(0,n.fetchServiceDescription)(f,r.apiKey,t)}catch{}e&&!e.hasZ&&(0,n.dropZValuesOffInputGeometry)(y,s)}for(const e in y)y[e].forEach(((t,s)=>{r.get(e)[s].geometry=t}));const g={...t,query:{...d.query,...u.toQueryParams(r),f:"json"}},{data:h}=await(0,o.default)(`${f}/solveClosestFacility`,g);return l.default.fromJSON(h)}})),r.register("g8mhQ",(function(t,s){e(t.exports,"default",(function(){return T}));var o=r("j6uz9");r("ixrNB");var i=r("EvxpF"),a=r("hO0an"),n=r("1CpCt"),p=r("hTI69");r("aX9sh"),r("5HTPH"),r("gHCNy");var l=r("bzBbJ"),u=r("qA6zg"),c=r("jaaCV"),y=r("6gwJM"),d=r("gEU1A"),f=r("49m8k"),m=r("dZxPT"),g=r("7blCc"),h=r("etknW");function v(e){return d.default.fromJSON(e).features.map((e=>e.geometry))}let b=class extends a.JSONSupport{readFacilities(e){return v(e)}readIncidents(e){return v(e)}readPointBarriers(e,r){return v(r.barriers)}readPolylineBarriers(e){return v(e)}readPolygonBarriers(e){return v(e)}readRoutes(e){return(r=e).features.map((e=>{const t=c.default.fromJSON(r.spatialReference),s=i.default.fromJSON(e);return(0,n.isSome)(s.geometry)&&(s.geometry.spatialReference=t),s}));var r}constructor(e){super(e),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}};(0,o._)([(0,p.property)({type:[y.default]})],b.prototype,"directions",void 0),(0,o._)([(0,p.property)({type:[m.default]})],b.prototype,"facilities",void 0),(0,o._)([(0,l.reader)("facilities")],b.prototype,"readFacilities",null),(0,o._)([(0,p.property)({type:[m.default]})],b.prototype,"incidents",void 0),(0,o._)([(0,l.reader)("incidents")],b.prototype,"readIncidents",null),(0,o._)([(0,p.property)({type:[f.default]})],b.prototype,"messages",void 0),(0,o._)([(0,p.property)({type:[m.default]})],b.prototype,"pointBarriers",void 0),(0,o._)([(0,l.reader)("pointBarriers",["barriers"])],b.prototype,"readPointBarriers",null),(0,o._)([(0,p.property)({type:[g.default]})],b.prototype,"polylineBarriers",void 0),(0,o._)([(0,l.reader)("polylineBarriers")],b.prototype,"readPolylineBarriers",null),(0,o._)([(0,p.property)({type:[h.default]})],b.prototype,"polygonBarriers",void 0),(0,o._)([(0,l.reader)("polygonBarriers")],b.prototype,"readPolygonBarriers",null),(0,o._)([(0,p.property)({type:[i.default]})],b.prototype,"routes",void 0),(0,o._)([(0,l.reader)("routes")],b.prototype,"readRoutes",null),b=(0,o._)([(0,u.subclass)("esri.rest.support.ClosestFacilitySolveResult")],b);const T=b})),r.register("6gwJM",(function(t,s){e(t.exports,"default",(function(){return g}));var o=r("j6uz9");r("ixrNB");var i=r("1CpCt"),a=r("hTI69");r("aX9sh"),r("5HTPH"),r("gHCNy");var n=r("bzBbJ"),p=r("qA6zg"),l=r("2iIEs"),u=r("gEU1A"),c=r("2WnyR"),y=r("jaaCV"),d=r("7blCc"),f=r("dZxPT");let m=class extends u.default{readFeatures(e,r){var t;if(!e)return[];const s=null!=(t=r.summary.envelope.spatialReference)?t:r.spatialReference,o=s&&y.default.fromJSON(s);return e.map((e=>{var r,t;const s=this._decompressGeometry(e.compressedGeometry),i=new(0,d.default)({...s,spatialReference:o}),a=null!=(r=null==(t=e.events)?void 0:t.map((e=>{const{arriveTimeUTC:r,ETA:t,point:{x:s,y:i,z:a},strings:n}=e;return new(0,l.default)({geometry:new(0,f.default)({x:s,y:i,z:a,hasZ:void 0!==a,spatialReference:o}),attributes:{ETA:t,arriveTimeUTC:r},strings:n})})))?r:[];return new(0,l.default)({attributes:e.attributes,events:a,geometry:i,strings:e.strings})}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>(0,i.unwrap)(e))),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressGeometry(e){let r=0,t=0,s=0,o=0;const i=[];let a,n,p,l,u,c,y,d,f=0,m=0,g=0;if(u=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),u||(u=[]),0===parseInt(u[f],32)){f=2;const e=parseInt(u[f],32);f++,c=parseInt(u[f],32),f++,1&e&&(m=u.indexOf("|")+1,y=parseInt(u[m],32),m++),2&e&&(g=u.indexOf("|",m)+1,d=parseInt(u[g],32),g++)}else c=parseInt(u[f],32),f++;for(;f<u.length&&"|"!==u[f];){a=parseInt(u[f],32)+r,f++,r=a,n=parseInt(u[f],32)+t,f++,t=n;const e=[a/c,n/c];m&&(l=parseInt(u[m],32)+s,m++,s=l,e.push(l/y)),g&&(p=parseInt(u[g],32)+o,g++,o=p,e.push(p/d)),i.push(e)}return{paths:[i],hasZ:m>0,hasM:g>0}}_mergePolylinesToSinglePath(e,r){if(0===e.length)return new(0,d.default)({spatialReference:r});const t=[];for(const r of e)for(const e of r.paths)t.push(...e);const s=[];t.forEach(((e,r)=>{0!==r&&e[0]===t[r-1][0]&&e[1]===t[r-1][1]||s.push(e)}));const{hasM:o,hasZ:i}=e[0];return new(0,d.default)({hasM:o,hasZ:i,paths:[s],spatialReference:r})}constructor(e){super(e),this.extent=null,this.features=null,this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}};(0,o._)([(0,a.property)({type:c.default,json:{read:{source:"summary.envelope"}}})],m.prototype,"extent",void 0),(0,o._)([(0,a.property)()],m.prototype,"features",void 0),(0,o._)([(0,n.reader)("features")],m.prototype,"readFeatures",null),(0,o._)([(0,a.property)()],m.prototype,"geometryType",void 0),(0,o._)([(0,a.property)({readOnly:!0})],m.prototype,"mergedGeometry",null),(0,o._)([(0,a.property)()],m.prototype,"routeId",void 0),(0,o._)([(0,a.property)()],m.prototype,"routeName",void 0),(0,o._)([(0,a.property)({value:null,readOnly:!0})],m.prototype,"strings",null),(0,o._)([(0,a.property)({json:{read:{source:"summary.totalDriveTime"}}})],m.prototype,"totalDriveTime",void 0),(0,o._)([(0,a.property)({json:{read:{source:"summary.totalLength"}}})],m.prototype,"totalLength",void 0),(0,o._)([(0,a.property)({json:{read:{source:"summary.totalTime"}}})],m.prototype,"totalTime",void 0),m=(0,o._)([(0,p.subclass)("esri.rest.support.DirectionsFeatureSet")],m);const g=m})),r.register("2iIEs",(function(t,s){e(t.exports,"default",(function(){return l}));var o=r("j6uz9"),i=r("EvxpF"),a=r("hTI69");r("aX9sh"),r("5HTPH"),r("gHCNy");var n=r("qA6zg");let p=class extends i.default{};(0,o._)([(0,a.property)()],p.prototype,"events",void 0),(0,o._)([(0,a.property)()],p.prototype,"strings",void 0),p=(0,o._)([(0,n.subclass)("esri.rest.support.DirectionsFeature")],p);const l=p})),r.register("bXHv4",(function(t,s){e(t.exports,"default",(function(){return c}));var o=r("j6uz9"),i=r("4jlRt"),a=r("hO0an"),n=r("hTI69");r("aX9sh"),r("5HTPH"),r("gHCNy");var p=r("qA6zg");const l=new(0,i.JSONMap)({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let u=class extends a.JSONSupport{constructor(e){super(e),this.description=null,this.type=null}};(0,o._)([(0,n.property)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,o._)([(0,n.property)({type:String,json:{read:l.read,write:l.write}})],u.prototype,"type",void 0),u=(0,o._)([(0,p.subclass)("esri.rest.support.GPMessage")],u);const c=u}));
//# sourceMappingURL=ClosestFacilityTask.c34cda26.js.map
