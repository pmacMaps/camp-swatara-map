!function(){function e(e,r,t,a){Object.defineProperty(e,r,{get:t,set:a,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("9l6gF",(function(r,a){var n;n=r.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(function(){return c}));var o=t("8TSCy"),i=t("7eJjO"),s=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("fcwIv"),l=t("lUdCb"),p=function(e){"use strict";o.inherits(t,e);var r=o.createSuper(t);function t(e){var a;return o.classCallCheck(this,t),(a=r.call(this,e)).url=null,o.possibleConstructorReturn(a)}return o.createClass(t,[{key:"solve",value:function(e,r){return(0,l.solve)(this.url,e,r)}}]),t}(t("hAlVw").default);(0,i._)([(0,s.property)()],p.prototype,"url",void 0);var c=p=(0,i._)([(0,u.subclass)("esri.tasks.ClosestFacilityTask")],p)})),t.register("lUdCb",(function(a,n){e(a.exports,"solve",(function(){return d}));var o=t("8TSCy"),i=t("2TvXO"),s=t("9pNSx"),u=t("eTzot"),l=t("5On35"),p=t("7aNbi"),c=t("dsJ7q"),f=t("3IfsV"),y=(0,u.createQueryParamsHelper)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});function d(e,r,t){return v.apply(this,arguments)}function v(){return(v=o.asyncToGenerator(r(i).mark((function e(t,a,n){var u,d,v,m,g,h,b,S,_,T,C,B,w,I;return r(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],d=[],v={},m={},g=(0,c.parseUrl)(t),h=g.path,a.incidents&&a.incidents.features&&(0,p.collectGeometries)(a.incidents.features,d,"incidents.features",v),a.facilities&&a.facilities.features&&(0,p.collectGeometries)(a.facilities.features,d,"facilities.features",v),a.pointBarriers&&a.pointBarriers.features&&(0,p.collectGeometries)(a.pointBarriers.features,d,"pointBarriers.features",v),a.polylineBarriers&&a.polylineBarriers.features&&(0,p.collectGeometries)(a.polylineBarriers.features,d,"polylineBarriers.features",v),a.polygonBarriers&&a.polygonBarriers.features&&(0,p.collectGeometries)(a.polygonBarriers.features,d,"polygonBarriers.features",v),e.next=4,(0,l.normalizeCentralMeridian)(d);case 4:for(S in b=e.sent,v)_=v[S],u.push(S),m[S]=b.slice(_[0],_[1]);if(!(0,p.isInputGeometryZAware)(m,u)){e.next=17;break}return T=null,e.prev=8,e.next=11,(0,p.fetchServiceDescription)(h,a.apiKey,n);case 11:T=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:T&&!T.hasZ&&(0,p.dropZValuesOffInputGeometry)(m,u);case 17:var r=function(e){m[e].forEach((function(r,t){a.get(e)[t].geometry=r}))};for(C in m)r(C);return B=o.objectSpread({},n,{query:o.objectSpread({},g.query,y.toQueryParams(a),{f:"json"})}),e.next=21,(0,s.default)("".concat(h,"/solveClosestFacility"),B);case 21:return w=e.sent,I=w.data,e.abrupt("return",f.default.fromJSON(I));case 24:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}})),t.register("3IfsV",(function(r,a){e(r.exports,"default",(function(){return _}));var n=t("8TSCy"),o=t("7eJjO");t("2ILM8");var i=t("bsvXr"),s=t("1XAcN"),u=t("7qybv"),l=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var p=t("eB8sj"),c=t("fcwIv"),f=t("j40xv"),y=t("gGEoS"),d=t("f4h86"),v=t("2sP7x"),m=t("d1Fqh"),g=t("95Tg0"),h=t("fTq43");function b(e){return d.default.fromJSON(e).features.map((function(e){return e.geometry}))}var S=function(e){"use strict";n.inherits(t,e);var r=n.createSuper(t);function t(e){var a;return n.classCallCheck(this,t),(a=r.call(this,e)).directions=null,a.facilities=null,a.incidents=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.routes=null,n.possibleConstructorReturn(a)}return n.createClass(t,[{key:"readFacilities",value:function(e){return b(e)}},{key:"readIncidents",value:function(e){return b(e)}},{key:"readPointBarriers",value:function(e,r){return b(r.barriers)}},{key:"readPolylineBarriers",value:function(e){return b(e)}},{key:"readPolygonBarriers",value:function(e){return b(e)}},{key:"readRoutes",value:function(e){return(r=e).features.map((function(e){var t=f.default.fromJSON(r.spatialReference),a=i.default.fromJSON(e);return(0,u.isSome)(a.geometry)&&(a.geometry.spatialReference=t),a}));var r}}]),t}(s.JSONSupport);(0,o._)([(0,l.property)({type:[y.default]})],S.prototype,"directions",void 0),(0,o._)([(0,l.property)({type:[m.default]})],S.prototype,"facilities",void 0),(0,o._)([(0,p.reader)("facilities")],S.prototype,"readFacilities",null),(0,o._)([(0,l.property)({type:[m.default]})],S.prototype,"incidents",void 0),(0,o._)([(0,p.reader)("incidents")],S.prototype,"readIncidents",null),(0,o._)([(0,l.property)({type:[v.default]})],S.prototype,"messages",void 0),(0,o._)([(0,l.property)({type:[m.default]})],S.prototype,"pointBarriers",void 0),(0,o._)([(0,p.reader)("pointBarriers",["barriers"])],S.prototype,"readPointBarriers",null),(0,o._)([(0,l.property)({type:[g.default]})],S.prototype,"polylineBarriers",void 0),(0,o._)([(0,p.reader)("polylineBarriers")],S.prototype,"readPolylineBarriers",null),(0,o._)([(0,l.property)({type:[h.default]})],S.prototype,"polygonBarriers",void 0),(0,o._)([(0,p.reader)("polygonBarriers")],S.prototype,"readPolygonBarriers",null),(0,o._)([(0,l.property)({type:[i.default]})],S.prototype,"routes",void 0),(0,o._)([(0,p.reader)("routes")],S.prototype,"readRoutes",null);var _=S=(0,o._)([(0,c.subclass)("esri.rest.support.ClosestFacilitySolveResult")],S)})),t.register("gGEoS",(function(r,a){e(r.exports,"default",(function(){return g}));var n=t("8TSCy"),o=t("7eJjO");t("2ILM8");var i=t("7qybv"),s=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("eB8sj"),l=t("fcwIv"),p=t("lmDbA"),c=t("f4h86"),f=t("gINRd"),y=t("j40xv"),d=t("95Tg0"),v=t("d1Fqh"),m=function(e){"use strict";n.inherits(t,e);var r=n.createSuper(t);function t(e){var a;return n.classCallCheck(this,t),(a=r.call(this,e)).extent=null,a.features=null,a.geometryType="polyline",a.routeId=null,a.routeName=null,a.totalDriveTime=null,a.totalLength=null,a.totalTime=null,n.possibleConstructorReturn(a)}return n.createClass(t,[{key:"readFeatures",value:function(e,r){var t,a=this;if(!e)return[];var o=null!=(t=r.summary.envelope.spatialReference)?t:r.spatialReference,i=o&&y.default.fromJSON(o);return e.map((function(e){var r,t,o=a._decompressGeometry(e.compressedGeometry),s=new(0,d.default)(n.objectSpread({},o,{spatialReference:i})),u=null!=(r=null==(t=e.events)?void 0:t.map((function(e){var r=e.arriveTimeUTC,t=e.ETA,a=e.point,n=a.x,o=a.y,s=a.z,u=e.strings;return new(0,p.default)({geometry:new(0,v.default)({x:n,y:o,z:s,hasZ:void 0!==s,spatialReference:i}),attributes:{ETA:t,arriveTimeUTC:r},strings:u})})))?r:[];return new(0,p.default)({attributes:e.attributes,events:u,geometry:s,strings:e.strings})}))}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var r=e.geometry;return(0,i.unwrap)(r)})),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}},{key:"_decompressGeometry",value:function(e){var r,t,a,n,o,i,s,u,l=0,p=0,c=0,f=0,y=[],d=0,v=0,m=0;if((o=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(o=[]),0===parseInt(o[d],32)){d=2;var g=parseInt(o[d],32);d++,i=parseInt(o[d],32),d++,1&g&&(v=o.indexOf("|")+1,s=parseInt(o[v],32),v++),2&g&&(m=o.indexOf("|",v)+1,u=parseInt(o[m],32),m++)}else i=parseInt(o[d],32),d++;for(;d<o.length&&"|"!==o[d];){r=parseInt(o[d],32)+l,d++,l=r,t=parseInt(o[d],32)+p,d++,p=t;var h=[r/i,t/i];v&&(n=parseInt(o[v],32)+c,v++,c=n,h.push(n/s)),m&&(a=parseInt(o[m],32)+f,m++,f=a,h.push(a/u)),y.push(h)}return{paths:[y],hasZ:v>0,hasM:m>0}}},{key:"_mergePolylinesToSinglePath",value:function(e,r){var t;if(0===e.length)return new(0,d.default)({spatialReference:r});var a=[],o=!0,i=!1,s=void 0,u=!0,l=!1,p=void 0;try{for(var c,f=e[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var y=c.value;try{for(var v,m=y.paths[Symbol.iterator]();!(o=(v=m.next()).done);o=!0){var g=v.value;(t=a).push.apply(t,n.toConsumableArray(g))}}catch(e){i=!0,s=e}finally{try{o||null==m.return||m.return()}finally{if(i)throw s}}}}catch(e){l=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw p}}var h=[];a.forEach((function(e,r){0!==r&&e[0]===a[r-1][0]&&e[1]===a[r-1][1]||h.push(e)}));var b=e[0],S=b.hasM,_=b.hasZ;return new(0,d.default)({hasM:S,hasZ:_,paths:[h],spatialReference:r})}}]),t}(c.default);(0,o._)([(0,s.property)({type:f.default,json:{read:{source:"summary.envelope"}}})],m.prototype,"extent",void 0),(0,o._)([(0,s.property)()],m.prototype,"features",void 0),(0,o._)([(0,u.reader)("features")],m.prototype,"readFeatures",null),(0,o._)([(0,s.property)()],m.prototype,"geometryType",void 0),(0,o._)([(0,s.property)({readOnly:!0})],m.prototype,"mergedGeometry",null),(0,o._)([(0,s.property)()],m.prototype,"routeId",void 0),(0,o._)([(0,s.property)()],m.prototype,"routeName",void 0),(0,o._)([(0,s.property)({value:null,readOnly:!0})],m.prototype,"strings",null),(0,o._)([(0,s.property)({json:{read:{source:"summary.totalDriveTime"}}})],m.prototype,"totalDriveTime",void 0),(0,o._)([(0,s.property)({json:{read:{source:"summary.totalLength"}}})],m.prototype,"totalLength",void 0),(0,o._)([(0,s.property)({json:{read:{source:"summary.totalTime"}}})],m.prototype,"totalTime",void 0);var g=m=(0,o._)([(0,l.subclass)("esri.rest.support.DirectionsFeatureSet")],m)})),t.register("lmDbA",(function(r,a){e(r.exports,"default",(function(){return p}));var n=t("8TSCy"),o=t("7eJjO"),i=t("bsvXr"),s=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var u=t("fcwIv"),l=function(e){"use strict";n.inherits(t,e);var r=n.createSuper(t);function t(){return n.classCallCheck(this,t),r.apply(this,arguments)}return t}(i.default);(0,o._)([(0,s.property)()],l.prototype,"events",void 0),(0,o._)([(0,s.property)()],l.prototype,"strings",void 0);var p=l=(0,o._)([(0,u.subclass)("esri.rest.support.DirectionsFeature")],l)})),t.register("gnh78",(function(r,a){e(r.exports,"default",(function(){return f}));var n=t("8TSCy"),o=t("7eJjO"),i=t("79ASa"),s=t("1XAcN"),u=t("iho5X");t("lNwWH"),t("2VlWd"),t("iJAIC");var l=t("fcwIv"),p=new(0,i.JSONMap)({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),c=function(e){"use strict";n.inherits(t,e);var r=n.createSuper(t);function t(e){var a;return n.classCallCheck(this,t),(a=r.call(this,e)).description=null,a.type=null,n.possibleConstructorReturn(a)}return t}(s.JSONSupport);(0,o._)([(0,u.property)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,o._)([(0,u.property)({type:String,json:{read:p.read,write:p.write}})],c.prototype,"type",void 0);var f=c=(0,o._)([(0,l.subclass)("esri.rest.support.GPMessage")],c)}))}();
//# sourceMappingURL=ClosestFacilityTask.8cd71e1a.js.map
