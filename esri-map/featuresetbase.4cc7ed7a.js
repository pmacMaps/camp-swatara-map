function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("4vCM3",(function(n,r){e(n.exports,"registerFunctions",(function(){return T}));var a=t("7e1Ja"),i=t("lz1nc"),l=t("2mxq8"),s=t("dkJvZ"),o=t("4kTC4"),u=t("8MibT"),c=t("gnHjs"),f=t("hyHkL"),d=t("wX5Cx"),p=t("bl77A"),m=t("6Ds9D"),h=t("7uexG"),y=t("ibJf1"),g=t("aF5xI"),F=t("fJDU4"),I=t("axKjD"),S=t("e4OKu"),w=t("lRAbM"),A=t("lHg4e"),E=t("jKVXg"),x=t("iaM5n"),D=t("4VorL");function b(e,t,n){const r=e.getVariables();if(r.length>0){const a=[];for(let e=0;e<r.length;e++){const i={name:r[e]};a.push(t.evaluateIdentifier(n,i))}return(0,A.all)(a).then((t=>{const n={};for(let e=0;e<r.length;e++)n[r[e]]=t[e];return e.parameters=n,e}))}return(0,A.resolve)(e)}function v(e,t,n=null){for(const n in e)if(n.toLowerCase()===t.toLowerCase())return e[n];return n}function N(e){if(null===e)return null;const t={type:v(e,"type",""),name:v(e,"name","")};if("range"===t.type)t.range=v(e,"range",[]);else{t.codedValues=[];for(const n of v(e,"codedValues",[]))t.codedValues.push({name:v(n,"name",""),code:v(n,"code",null)})}return t}function L(e){if(null===e)return null;const t={},n=v(e,"wkt",null);null!==n&&(t.wkt=n);const r=v(e,"wkid",null);return null!==r&&(t.wkid=r),t}function C(e){if(null===e)return null;const t={hasZ:v(e,"hasz",!1),hasM:v(e,"hasm",!1)},n=v(e,"spatialreference",null);n&&(t.spatialReference=L(n));const r=v(e,"x",null);if(null!==r)return t.x=r,t.y=v(e,"y",null),t;const a=v(e,"rings",null);if(null!==a)return t.rings=a,t;const i=v(e,"paths",null);if(null!==i)return t.paths=i,t;const l=v(e,"points",null);if(null!==l)return t.points=l,t;for(const n of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const r=v(e,n,null);null!==r&&(t[n]=r)}return t}function T(e){"async"===e.mode&&(e.functions.getuser=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{(0,f.p)(r,1,2);let l=(0,f.C)(r[1],""),s=!0===l;if(l=!0===l||!1===l?"":(0,f.d)(l),r[0]instanceof a.default){let e=null;return t.services&&t.services.portal&&(e=t.services.portal),e=(0,o.getPortal)(r[0],e),(0,o.lookupUser)(e,l,s).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of["lastLogin","created","modified"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return i.default.convertObjectToArcadeDictionary(t)}return null}))}let u=null;if((0,f.q)(r[0])&&(u=r[0]),u)return s=!1,l?null:u.load().then((()=>u.getOwningSystemUrl())).then((e=>{if(!e)return l?null:u.getIdentityUser().then((e=>e?i.default.convertObjectToArcadeDictionary({username:e}):null));let n=null;return t.services&&t.services.portal&&(n=t.services.portal),n=(0,o.getPortal)(new(0,a.default)(e),n),(0,o.lookupUser)(n,l,s).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of["lastLogin","created","modified"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return i.default.convertObjectToArcadeDictionary(t)}return null}))}));throw new Error("Invalid Parameter")}))},e.signatures.push({name:"getuser",min:"1",max:"2"}),e.functions.featuresetbyid=function(t,n){return e.standardFunctionAsync(t,n,((e,t,n)=>{if((0,f.p)(n,2,4),n[0]instanceof s.default){const e=(0,f.d)(n[1]);let t=(0,f.C)(n[2],null);const r=(0,f.z)((0,f.C)(n[3],!0));if(null===t&&(t=["*"]),!1===(0,f.a)(t))throw new Error("Invalid Parameter");return n[0].featureSetById(e,r,t)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"featuresetbyid",min:"2",max:"4"}),e.functions.getfeatureset=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{if((0,f.p)(r,1,2),(0,f.k)(r[0])){let e=(0,f.C)(r[1],"datasource");return null===e&&(e="datasource"),e=(0,f.d)(e).toLowerCase(),(0,o.convertToFeatureSet)(r[0].fullSchema(),e,t.lrucache,t.interceptor,t.spatialReference)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"getfeatureset",min:"1",max:"2"}),e.functions.featuresetbyportalitem=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{if((0,f.p)(r,2,5),null===r[0])throw new Error("Portal is required");if(r[0]instanceof a.default){const e=(0,f.d)(r[1]),n=(0,f.d)(r[2]);let a=(0,f.C)(r[3],null);const i=(0,f.z)((0,f.C)(r[4],!0));if(null===a&&(a=["*"]),!1===(0,f.a)(a))throw new Error("Invalid Parameter");let l=null;return t.services&&t.services.portal&&(l=t.services.portal),l=(0,o.getPortal)(r[0],l),(0,o.constructFeatureSetFromPortalItem)(e,n,t.spatialReference,a,i,l,t.lrucache,t.interceptor)}if(!1===(0,f.f)(r[0]))throw new Error("Portal is required");const i=(0,f.d)(r[0]),l=(0,f.d)(r[1]);let s=(0,f.C)(r[2],null);const u=(0,f.z)((0,f.C)(r[3],!0));if(null===s&&(s=["*"]),!1===(0,f.a)(s))throw new Error("Invalid Parameter");if(t.services&&t.services.portal)return(0,o.constructFeatureSetFromPortalItem)(i,l,t.spatialReference,s,u,t.services.portal,t.lrucache,t.interceptor);throw new Error("Portal is required")}))},e.signatures.push({name:"featuresetbyportalitem",min:"2",max:"5"}),e.functions.featuresetbyname=function(t,n){return e.standardFunctionAsync(t,n,((e,t,n)=>{if((0,f.p)(n,2,4),n[0]instanceof s.default){const e=(0,f.d)(n[1]);let t=(0,f.C)(n[2],null);const r=(0,f.z)((0,f.C)(n[3],!0));if(null===t&&(t=["*"]),!1===(0,f.a)(t))throw new Error("Invalid Parameter");return n[0].featureSetByName(e,r,t)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"featuresetbyname",min:"2",max:"4"}),e.functions.featureset=function(t,n){return e.standardFunction(t,n,((e,n,r)=>{(0,f.p)(r,1,1);let a=r[0];const l={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,f.f)(a))a=JSON.parse(a),void 0!==a.layerDefinition?(l.layerDefinition=a.layerDefinition,l.featureSet=a.featureSet,a.layerDefinition.spatialReference&&(l.layerDefinition.spatialReference=a.layerDefinition.spatialReference)):(l.featureSet.features=a.features,l.featureSet.geometryType=a.geometryType,l.layerDefinition.geometryType=l.featureSet.geometryType,l.layerDefinition.objectIdField=a.objectIdFieldName,l.layerDefinition.typeIdField=a.typeIdFieldName,l.layerDefinition.globalIdField=a.globalIdFieldName,l.layerDefinition.fields=a.fields,a.spatialReference&&(l.layerDefinition.spatialReference=a.spatialReference));else{if(!(r[0]instanceof i.default))throw new Error("Invalid Parameter");{a=JSON.parse(r[0].castToText());const e=v(a,"layerdefinition");if(null!==e){l.layerDefinition.geometryType=v(e,"geometrytype",""),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.globalIdField=v(e,"globalidfield",""),l.layerDefinition.objectIdField=v(e,"objectidfield",""),l.layerDefinition.typeIdField=v(e,"typeidfield","");const t=v(e,"spatialreference",null);t&&(l.layerDefinition.spatialReference=L(t));for(const t of v(e,"fields",[])){const e={name:v(t,"name",""),alias:v(t,"alias",""),type:v(t,"type",""),nullable:v(t,"nullable",!0),editable:v(t,"editable",!0),length:v(t,"length",null),domain:N(v(t,"domain"))};l.layerDefinition.fields.push(e)}const n=v(a,"featureset",null);if(n){const e={};for(const t of l.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of v(n,"features",[])){const n={},r=v(t,"attributes",{});for(const t in r)n[e[t.toLowerCase()]]=r[t];l.featureSet.features.push({attributes:n,geometry:C(v(t,"geometry",null))})}}}else{l.layerDefinition.geometryType=v(a,"geometrytype",""),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.objectIdField=v(a,"objectidfieldname",""),l.layerDefinition.typeIdField=v(a,"typeidfieldname","");const e=v(a,"spatialreference",null);e&&(l.layerDefinition.spatialReference=L(e));for(const e of v(a,"fields",[])){const t={name:v(e,"name",""),alias:v(e,"alias",""),type:v(e,"type",""),nullable:v(e,"nullable",!0),editable:v(e,"editable",!0),length:v(e,"length",null),domain:N(v(e,"domain"))};l.layerDefinition.fields.push(t)}const t={};for(const e of l.layerDefinition.fields)t[e.name.toLowerCase()]=e.name;for(const e of v(a,"features",[])){const n={},r=v(e,"attributes",{});for(const e in r)n[t[e.toLowerCase()]]=r[e];l.featureSet.features.push({attributes:n,geometry:C(v(e,"geometry",null))})}}}}if(!1==(!!(s=l).layerDefinition&&!!s.featureSet&&!1!==function(e,t){for(const n of t)if(n===e)return!0;return!1}(s.layerDefinition.geometryType,["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&null!==s.layerDefinition.objectIdField&&""!==s.layerDefinition.objectIdField&&!1!==(0,f.a)(s.layerDefinition.fields)&&!1!==(0,f.a)(s.featureSet.features)))throw new Error("Invalid Parameter");var s;return g.default.create(l,t.spatialReference)}))},e.signatures.push({name:"featureset",min:"1",max:"1"}),e.functions.filter=function(t,n){return e.standardFunctionAsync(t,n,((n,r,a)=>{if((0,f.p)(a,2,2),(0,f.a)(a[0])||(0,f.b)(a[0])){const n=[];let r=a[0];r instanceof c.default&&(r=r.toArray());let i=null;if(a[1]instanceof u.default)i=e.arcadeCustomFunctionHandler(a[1]);else if(a[1]instanceof f.N)i=(...e)=>a[1].fn(t,{preparsed:!0,arguments:e});else{if(!(a[1]instanceof f.S))throw new Error("Invalid Parameter");i=(...e)=>{if(e.length!==a[1].paramCount)throw new Error("Invalid parameters");return a[1].fn(...e)}}return r.reduce(((e,t,a)=>e.then((e=>{a>0&&!0===e&&n.push(r[a-1]);const l=i(t);return(0,A.isPromiseLike)(l)?l:(0,A.resolve)(l)}))),Promise.resolve(!1)).then((e=>(!0===e&&r.length>0&&n.push(r[r.length-1]),n)))}return(0,f.q)(a[0])?a[0].load().then((n=>{const r=E.WhereClause.create(a[1],n.getFieldsIndex()),i=r.getVariables();if(i.length>0){const n=[];for(let r=0;r<i.length;r++){const a={name:i[r]};n.push(e.evaluateIdentifier(t,a))}return(0,A.all)(n).then((e=>{const t={};for(let n=0;n<i.length;n++)t[i[n]]=e[n];return r.parameters=t,new(0,p.default)({parentfeatureset:a[0],whereclause:r})}))}return(0,A.resolve)(new(0,p.default)({parentfeatureset:a[0],whereclause:r}))})):e.failDefferred("Filter cannot accept this parameter type")}))},e.signatures.push({name:"filter",min:"2",max:"2"}),e.functions.orderby=function(t,n){return e.standardFunctionAsync(t,n,((t,n,r)=>{if((0,f.p)(r,2,2),(0,f.q)(r[0])){const e=new(0,F.default)(r[1]);return(0,A.resolve)(new(0,m.default)({parentfeatureset:r[0],orderbyclause:e}))}return e.failDefferred("Order cannot accept this parameter type")}))},e.signatures.push({name:"orderby",min:"2",max:"2"}),e.functions.top=function(t,n){return e.standardFunctionAsync(t,n,((t,n,r)=>((0,f.p)(r,2,2),(0,f.q)(r[0])?(0,A.resolve)(new(0,h.default)({parentfeatureset:r[0],topnum:r[1]})):(0,f.a)(r[0])?(0,f.t)(r[1])>=r[0].length?r[0].slice(0):r[0].slice(0,(0,f.t)(r[1])):(0,f.b)(r[0])?(0,f.t)(r[1])>=r[0].length()?r[0].slice(0):r[0].slice(0,(0,f.t)(r[1])):e.failDefferred("Top cannot accept this parameter type"))))},e.signatures.push({name:"top",min:"2",max:"2"}),e.functions.first=function(t,n){return e.standardFunctionAsync(t,n,((e,t,n)=>((0,f.p)(n,1,1),(0,f.q)(n[0])?n[0].first(e.abortSignal).then((e=>{if(null!==e){const t=l.default.createFromGraphicLikeObject(e.geometry,e.attributes,n[0]);t._underlyingGraphic=e,e=t}return e})):(0,f.a)(n[0])?0===n[0].length?(0,A.resolve)(null):(0,A.resolve)(n[0][0]):(0,f.b)(n[0])?0===n[0].length()?(0,A.resolve)(null):(0,A.resolve)(n[0].get(0)):null)))},e.signatures.push({name:"first",min:"1",max:"1"}),e.functions.attachments=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{(0,f.p)(r,1,2);const a={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(r.length>1)if(r[1]instanceof i.default){if(r[1].hasField("minsize")&&(a.minsize=(0,f.t)(r[1].field("minsize"))),r[1].hasField("metadata")&&(a.returnMetadata=(0,f.z)(r[1].field("metadata"))),r[1].hasField("maxsize")&&(a.maxsize=(0,f.t)(r[1].field("maxsize"))),r[1].hasField("types")){const e=(0,f.Y)(r[1].field("types"),!1);e.length>0&&(a.types=e)}}else if(null!==r[1])throw new Error("Invalid Parameter");if((0,f.k)(r[0])){let e=r[0]._layer;return e instanceof x.default&&(e=(0,o.constructFeatureSet)(e,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)),null===e||!1===(0,f.q)(e)?[]:e.load().then((()=>e.queryAttachments(r[0].field(e.objectIdField),a.minsize,a.maxsize,a.types,a.returnMetadata)))}if(null===r[0])return[];throw new Error("Invalid Parameter")}))},e.signatures.push({name:"attachments",min:"1",max:"2"}),e.functions.featuresetbyrelationshipname=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{(0,f.p)(r,2,4);const a=r[0],i=(0,f.d)(r[1]);let l=(0,f.C)(r[2],null);const s=(0,f.z)((0,f.C)(r[3],!0));if(null===l&&(l=["*"]),!1===(0,f.a)(l))throw new Error("Invalid Parameter");if(null===r[0])return null;if(!(0,f.k)(r[0]))throw new Error("Invalid Parameter");let u=a._layer;return u instanceof x.default&&(u=(0,o.constructFeatureSet)(u,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)),null===u||!1===(0,f.q)(u)?null:u.load().then((e=>{const n=e.relationshipMetaData().filter((e=>e.name===i));if(0===n.length)return null;if(void 0!==n[0].relationshipTableId&&null!==n[0].relationshipTableId&&n[0].relationshipTableId>-1)return(0,o.constructFeatureSetFromRelationship)(e,n[0],a.field(e.objectIdField),e.spatialReference,l,s,t.lrucache,t.interceptor);let r=e.serviceUrl();return r?(r="/"===r.charAt(r.length-1)?r+n[0].relatedTableId.toString():r+"/"+n[0].relatedTableId.toString(),(0,o.constructFeatureSetFromUrl)(r,e.spatialReference,l,s,t.lrucache,t.interceptor).then((t=>t.load().then((()=>t.relationshipMetaData())).then((r=>{if(r=r.filter((e=>e.id===n[0].id)),!1===a.hasField(n[0].keyField)||null===a.field(n[0].keyField))return e.getFeatureByObjectId(a.field(e.objectIdField),[n[0].keyField]).then((e=>{if(e){const a=E.WhereClause.create(r[0].keyField+"= @id",t.getFieldsIndex());return a.parameters={id:e.attributes[n[0].keyField]},t.filter(a)}return new(0,y.default)({parentfeatureset:t})}));const i=E.WhereClause.create(r[0].keyField+"= @id",t.getFieldsIndex());return i.parameters={id:a.field(n[0].keyField)},t.filter(i)}))))):null}))}))},e.signatures.push({name:"featuresetbyrelationshipname",min:"2",max:"4"}),e.functions.featuresetbyassociation=function(t,n){return e.standardFunctionAsync(t,n,((e,n,r)=>{(0,f.p)(r,2,3);const a=r[0],i=(0,f.d)((0,f.C)(r[1],"")).toLowerCase(),l=(0,f.f)(r[2])?(0,f.d)(r[2]):null;if(null===r[0])return null;if(!(0,f.k)(r[0]))throw new Error("Invalid Parameter");let s=a._layer;return s instanceof x.default&&(s=(0,o.constructFeatureSet)(s,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)),null===s||!1===(0,f.q)(s)?null:s.load().then((()=>{const e=s.serviceUrl();return(0,o.constructAssociationMetaDataFeatureSetFromUrl)(e,t.spatialReference)})).then((e=>{let t=null,n=null,r=!1;if(null!==l&&""!==l&&void 0!==l){for(const t of e.terminals)t.terminalName===l&&(n=t.terminalId);null===n&&(r=!0)}const o=e.associations.getFieldsIndex(),u=o.get("TOGLOBALID").name,c=o.get("FROMGLOBALID").name,p=o.get("TOTERMINALID").name,m=o.get("FROMTERMINALID").name,h=o.get("FROMNETWORKSOURCEID").name,y=o.get("TONETWORKSOURCEID").name,g=o.get("ASSOCIATIONTYPE").name,F=o.get("ISCONTENTVISIBLE").name,S=o.get("OBJECTID").name;for(const e of s.fields)if("global-id"===e.type){t=a.field(e.name);break}let w=null,A=new(0,d.SqlExpressionAdapted)(new(0,D.default)({name:"percentalong",alias:"percentalong",type:"double"}),E.WhereClause.create("0",e.associations.getFieldsIndex())),x=new(0,d.SqlExpressionAdapted)(new(0,D.default)({name:"side",alias:"side",type:"string"}),E.WhereClause.create("''",e.associations.getFieldsIndex()));const b="globalid",v="globalId",N={};for(const t in e.lkp)N[t]=e.lkp[t].sourceId;const L=new(0,d.StringToCodeAdapted)(new(0,D.default)({name:"classname",alias:"classname",type:"string"}),null,N);let C="";switch(i){case"midspan":{C=`((${u}='${t}') OR ( ${c}='${t}')) AND (${g} IN (5))`,L.codefield=E.WhereClause.create(`CASE WHEN (${u}='${t}') THEN ${h} ELSE ${y} END`,e.associations.getFieldsIndex());const n=(0,I.cloneField)(d.AdaptedFeatureSet.findField(e.associations.fields,c));n.name=b,n.alias=b,w=new(0,d.SqlExpressionAdapted)(n,E.WhereClause.create(`CASE WHEN (${c}='${t}') THEN ${u} ELSE ${c} END`,e.associations.getFieldsIndex())),A=e.unVersion>=4?new(0,d.OriginalField)(d.AdaptedFeatureSet.findField(e.associations.fields,o.get("PERCENTALONG").name)):new(0,d.SqlExpressionAdapted)(new(0,D.default)({name:"percentalong",alias:"percentalong",type:"double"}),E.WhereClause.create("0",e.associations.getFieldsIndex()));break}case"junctionedge":{C=`((${u}='${t}') OR ( ${c}='${t}')) AND (${g} IN (4,6))`,L.codefield=E.WhereClause.create(`CASE WHEN (${u}='${t}') THEN ${h} ELSE ${y} END`,e.associations.getFieldsIndex());const n=(0,I.cloneField)(d.AdaptedFeatureSet.findField(e.associations.fields,c));n.name=b,n.alias=b,w=new(0,d.SqlExpressionAdapted)(n,E.WhereClause.create(`CASE WHEN (${c}='${t}') THEN ${u} ELSE ${c} END`,e.associations.getFieldsIndex())),x=new(0,d.SqlExpressionAdapted)(new(0,D.default)({name:"side",alias:"side",type:"string"}),E.WhereClause.create(`CASE WHEN (${g}=4) THEN 'from' ELSE 'to' END`,e.associations.getFieldsIndex()));break}case"connected":{let r=`${u}='@T'`,a=`${c}='@T'`;null!==n&&(r+=` AND ${p}=@A`,a+=` AND ${m}=@A`),C="(("+r+") OR ("+a+"))",C=(0,f.M)(C,"@T",t),r=(0,f.M)(r,"@T",t),null!==n&&(r=(0,f.M)(r,"@A",n.toString()),C=(0,f.M)(C,"@A",n.toString())),L.codefield=E.WhereClause.create("CASE WHEN "+r+` THEN ${h} ELSE ${y} END`,e.associations.getFieldsIndex());const i=(0,I.cloneField)(d.AdaptedFeatureSet.findField(e.associations.fields,c));i.name=b,i.alias=b,w=new(0,d.SqlExpressionAdapted)(i,E.WhereClause.create("CASE WHEN "+r+` THEN ${c} ELSE ${u} END`,e.associations.getFieldsIndex()));break}case"container":C=`${u}='${t}' AND ${g} = 2`,null!==n&&(C+=` AND ${p} = `+n.toString()),L.codefield=h,C="( "+C+" )",w=new(0,d.FieldRename)(d.AdaptedFeatureSet.findField(e.associations.fields,c),b,b);case"content":C=`(${c}='${t}' AND ${g} = 2)`,null!==n&&(C+=` AND ${m} = `+n.toString()),L.codefield=y,C="( "+C+" )",w=new(0,d.FieldRename)(d.AdaptedFeatureSet.findField(e.associations.fields,u),b,b);break;case"structure":C=`(${u}='${t}' AND ${g} = 3)`,null!==n&&(C+=` AND ${p} = `+n.toString()),L.codefield=h,C="( "+C+" )",w=new(0,d.FieldRename)(d.AdaptedFeatureSet.findField(e.associations.fields,c),b,v);break;case"attached":C=`(${c}='${t}' AND ${g} = 3)`,null!==n&&(C+=` AND ${m} = `+n.toString()),L.codefield=y,C="( "+C+" )",w=new(0,d.FieldRename)(d.AdaptedFeatureSet.findField(e.associations.fields,u),b,v);break;default:throw new Error("Invalid Parameter")}return r&&(C="1 <> 1"),new(0,d.AdaptedFeatureSet)({parentfeatureset:e.associations,adaptedFields:[new(0,d.OriginalField)(d.AdaptedFeatureSet.findField(e.associations.fields,S)),new(0,d.OriginalField)(d.AdaptedFeatureSet.findField(e.associations.fields,F)),w,x,L,A],extraFilter:C?E.WhereClause.create(C,e.associations.getFieldsIndex()):null})}))}))},e.signatures.push({name:"featuresetbyassociation",min:"2",max:"6"}),e.functions.groupby=function(t,n){return e.standardFunctionAsync(t,n,((n,r,a)=>((0,f.p)(a,3,3),(0,f.q)(a[0])?a[0].load().then((n=>{const r=[],l=[];let s=!1,o=[];if((0,f.f)(a[1]))o.push(a[1]);else if(a[1]instanceof i.default)o.push(a[1]);else if((0,f.a)(a[1]))o=a[1];else{if(!(0,f.b)(a[1]))return e.failDefferred("Illegal Value: GroupBy");o=a[1].toArray()}for(const t of o)if((0,f.f)(t)){const e=E.WhereClause.create((0,f.d)(t),n.getFieldsIndex()),a=!0===(0,S.isSingleField)(e)?(0,f.d)(t):"%%%%FIELDNAME";r.push({name:a,expression:e}),"%%%%FIELDNAME"===a&&(s=!0)}else{if(!(t instanceof i.default))return e.failDefferred("Illegal Value: GroupBy");{const a=t.hasField("name")?t.field("name"):"%%%%FIELDNAME",i=t.hasField("expression")?t.field("expression"):"";if("%%%%FIELDNAME"===a&&(s=!0),!a)return e.failDefferred("Illegal Value: GroupBy");r.push({name:a,expression:E.WhereClause.create(i||a,n.getFieldsIndex())})}}if(o=[],(0,f.f)(a[2]))o.push(a[2]);else if((0,f.a)(a[2]))o=a[2];else if((0,f.b)(a[2]))o=a[2].toArray();else{if(!(a[2]instanceof i.default))return e.failDefferred("Illegal Value: GroupBy");o.push(a[2])}for(const t of o){if(!(t instanceof i.default))return e.failDefferred("Illegal Value: GroupBy");{const r=t.hasField("name")?t.field("name"):"",a=t.hasField("statistic")?t.field("statistic"):"",i=t.hasField("expression")?t.field("expression"):"";if(!r||!a||!i)return e.failDefferred("Illegal Value: GroupBy");l.push({name:r,statistic:a.toLowerCase(),expression:E.WhereClause.create(i,n.getFieldsIndex())})}}if(s){const e={};for(const t of n.fields)e[t.name.toLowerCase()]=1;for(const t of r)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);for(const t of l)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);let t=0;for(const n of r)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}const u=[];for(const n of r)u.push(b(n.expression,e,t));for(const n of l)u.push(b(n.expression,e,t));return u.length>0?(0,A.all)(u).then((()=>(0,A.resolve)(a[0].groupby(r,l)))):(0,A.resolve)(a[0].groupby(r,l))})):e.failDefferred("Illegal Value: GroupBy"))))},e.signatures.push({name:"groupby",min:"3",max:"3"}),e.functions.distinct=function(t,n){return e.standardFunctionAsync(t,n,((n,r,a)=>(0,f.q)(a[0])?((0,f.p)(a,2,2),a[0].load().then((n=>{const r=[];let l=[];if((0,f.f)(a[1]))l.push(a[1]);else if(a[1]instanceof i.default)l.push(a[1]);else if((0,f.a)(a[1]))l=a[1];else{if(!(0,f.b)(a[1]))return e.failDefferred("Illegal Value: GroupBy");l=a[1].toArray()}let s=!1;for(const t of l)if((0,f.f)(t)){const e=E.WhereClause.create((0,f.d)(t),n.getFieldsIndex()),a=!0===(0,S.isSingleField)(e)?(0,f.d)(t):"%%%%FIELDNAME";r.push({name:a,expression:e}),"%%%%FIELDNAME"===a&&(s=!0)}else{if(!(t instanceof i.default))return e.failDefferred("Illegal Value: GroupBy");{const a=t.hasField("name")?t.field("name"):"%%%%FIELDNAME",i=t.hasField("expression")?t.field("expression"):"";if("%%%%FIELDNAME"===a&&(s=!0),!a)return e.failDefferred("Illegal Value: GroupBy");r.push({name:a,expression:E.WhereClause.create(i||a,n.getFieldsIndex())})}}if(s){const e={};for(const t of n.fields)e[t.name.toLowerCase()]=1;for(const t of r)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);let t=0;for(const n of r)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}const o=[];for(const n of r)o.push(b(n.expression,e,t));return o.length>0?(0,A.all)(o).then((()=>(0,A.resolve)(a[0].groupby(r,[])))):(0,A.resolve)(a[0].groupby(r,[]))}))):function(e,t,n,r){if(1===r.length){if((0,f.a)(r[0]))return(0,w.calculateStat)(e,r[0],-1);if((0,f.b)(r[0]))return(0,w.calculateStat)(e,r[0].toArray(),-1)}return(0,w.calculateStat)(e,r,-1)}("distinct",0,0,a)))})}})),t.register("4kTC4",(function(n,r){e(n.exports,"initialiseMetaDataCache",(function(){return E})),e(n.exports,"constructFeatureSetFromUrl",(function(){return D})),e(n.exports,"constructFeatureSet",(function(){return b})),e(n.exports,"constructAssociationMetaDataFeatureSetFromUrl",(function(){return N})),e(n.exports,"constructFeatureSetFromRelationship",(function(){return L})),e(n.exports,"createFeatureSetCollectionFromMap",(function(){return O})),e(n.exports,"createFeatureSetCollectionFromService",(function(){return _})),e(n.exports,"getPortal",(function(){return k})),e(n.exports,"lookupUser",(function(){return R})),e(n.exports,"convertToFeatureSet",(function(){return P})),e(n.exports,"constructFeatureSetFromPortalItem",(function(){return M}));var a=t("1mmm2"),i=t("bYA0c"),l=t("dkJvZ"),s=t("bl77A"),o=t("lAjWQ"),u=t("6Ds9D"),c=t("cGW1b"),f=t("7uexG"),d=t("2ILwD"),p=t("aF5xI"),m=t("kQBIy"),h=t("64FI1"),y=t("4wBmj"),g=t("axKjD"),F=t("lHg4e"),I=t("jKVXg"),S=t("iaM5n"),w=t("39WmQ"),A=t("h7Mrf");function E(){null===h.default.applicationCache&&(h.default.applicationCache=new(0,h.default))}function x(e,t){if(h.default.applicationCache){const n=h.default.applicationCache.getLayerInfo(e);if(n)return n.then((n=>(0,F.resolve)(new(0,S.default)({url:e,outFields:t,sourceJSON:n}))));const r=new(0,S.default)({url:e,outFields:t});let a=(0,F.create)(((e,t)=>{r.load().then((()=>{e(r.sourceJSON)}),(e=>{t(e)}))}));return h.default.applicationCache&&(h.default.applicationCache.setLayerInfo(e,a),a=a.catch((t=>{throw h.default.applicationCache.clearLayerInfo(e),t}))),a.then((()=>(0,F.resolve)(r)))}return(0,F.resolve)(new(0,S.default)({url:e,outFields:t}))}function D(e,t,n,r,a,i=null){return x(e,["*"]).then((e=>(0,F.resolve)(b(e,t,n,r,a,i))))}function b(e,t=null,n=null,r=!0,a=null,i=null){return!0===e._hasMemorySource()?new(0,p.default)({layer:e,spatialReference:t,outFields:n,includeGeometry:r,lrucache:a,interceptor:i}):new(0,d.default)({layer:e,spatialReference:t,outFields:n,includeGeometry:r,lrucache:a,interceptor:i})}function v(e){if(null!==h.default.applicationCache){const t=h.default.applicationCache.getLayerInfo(e);if(null!==t)return t}let t=(0,i.default)(e,{responseType:"json",query:{f:"json"}}).then((e=>{if(e.data){const t=e.data;return t.layers||(t.layers=[]),t.tables||(t.tables=[]),(0,F.resolve)(t)}return(0,F.resolve)({layers:[],tables:[]})}));return null!==h.default.applicationCache&&(h.default.applicationCache.setLayerInfo(e,t),t=t.catch((t=>{throw h.default.applicationCache.clearLayerInfo(e),t}))),t}function N(e,t){const n={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null};return v(e).then((r=>{if(n.metadata=r,r.controllerDatasetLayers&&void 0!==r.controllerDatasetLayers.utilityNetworkLayerId&&null!==r.controllerDatasetLayers.utilityNetworkLayerId){if(r.layers)for(const e of r.layers)n.layerNameLkp[e.id]=e.name;if(r.tables)for(const e of r.tables)n.layerNameLkp[e.id]=e.name;const a=r.controllerDatasetLayers.utilityNetworkLayerId;return n.networkId=a,function(e,t){const n="QUERYDATAELEMTS:"+t.toString()+":"+e;if(null!==h.default.applicationCache){const e=h.default.applicationCache.getLayerInfo(n);if(null!==e)return e}let r=(0,i.default)(e+"/queryDataElements",{method:"post",responseType:"json",query:{layers:JSON.stringify([t.toString()]),f:"json"}}).then((e=>{if(e.data){const t=e.data;if(t.layerDataElements&&t.layerDataElements[0])return t.layerDataElements[0]}throw new Error("Not Found")}));return null!==h.default.applicationCache&&(h.default.applicationCache.setLayerInfo(n,r),r=r.catch((e=>{throw h.default.applicationCache.clearLayerInfo(n),e}))),r}(e,a).then((r=>{if(r){n.queryelem=r,n.queryelem&&n.queryelem.dataElement&&void 0!==n.queryelem.dataElement.schemaGeneration&&(n.unVersion=n.queryelem.dataElement.schemaGeneration),n.lkp={},n.queryelem.dataElement.domainNetworks||(n.queryelem.dataElement.domainNetworks=[]);for(const e of n.queryelem.dataElement.domainNetworks){for(const t of e.edgeSources?e.edgeSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:n.layerNameLkp[t.layerId]?n.layerNameLkp[t.layerId]:null};e.className&&(n.lkp[e.className]=e)}for(const t of e.junctionSources?e.junctionSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:n.layerNameLkp[t.layerId]?n.layerNameLkp[t.layerId]:null};e.className&&(n.lkp[e.className]=e)}}if(n.queryelem.dataElement.terminalConfigurations)for(const e of n.queryelem.dataElement.terminalConfigurations)for(const t of e.terminals)n.terminals.push({terminalId:t.terminalId,terminalName:t.terminalName});return function(e){if(null!==h.default.applicationCache){const t=h.default.applicationCache.getLayerInfo(e);if(null!==t)return t}let t=(0,i.default)(e,{responseType:"json",query:{f:"json"}}).then((e=>{if(e.data){const t=e.data;return(0,F.resolve)(t)}return(0,F.resolve)(null)}));return null!==h.default.applicationCache&&(h.default.applicationCache.setLayerInfo(e,t),t=t.catch((t=>{throw h.default.applicationCache.clearLayerInfo(e),t}))),t}(e+"/"+a).then((r=>{if(r.systemLayers&&void 0!==r.systemLayers.associationsTableId&&null!==r.systemLayers.associationsTableId){const a=[];return n.unVersion>=4&&(a.push("STATUS"),a.push("PERCENTALONG")),D(e+"/"+r.systemLayers.associationsTableId.toString(),t,["OBJECTID","FROMNETWORKSOURCEID","TONETWORKSOURCEID","FROMGLOBALID","TOGLOBALID","TOTERMINALID","FROMTERMINALID","ASSOCIATIONTYPE","ISCONTENTVISIBLE","GLOBALID",...a],!1,null,null).then((e=>e.load())).then((e=>n.unVersion>=4?(e=e.filter(I.WhereClause.create("STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)",e.getFieldsIndex()))).load():e)).then((e=>({lkp:n.lkp,associations:e,unVersion:n.unVersion,terminals:n.terminals})))}return{associations:null,unVersion:n.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:n.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:n.unVersion,lkp:null,terminals:[]}}))}function L(e,t,n,r=null,a=null,i=!0,l=null,s=null){let o=e.serviceUrl();return o?(o="/"===o.charAt(o.length-1)?o+t.relatedTableId.toString():o+"/"+t.relatedTableId.toString(),D(o,r,a,i,l,s).then((o=>new(0,m.default)({layer:e,relatedLayer:o,relationship:t,objectId:n,spatialReference:r,outFields:a,includeGeometry:i,lrucache:l,interceptor:s})))):null}s.default.registerAction(),o.default.registerAction(),u.default.registerAction(),c.default.registerAction(),f.default.registerAction();class C extends l.default{_makeAndAddFeatureSet(e,t=!0,n=null){const r=b(e,this._overridespref,null===n?["*"]:n,t,this.lrucache,this.interceptor);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(n)}),r}featureSetByName(e,t=!0,n=null){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((()=>{try{return this.featureSetByName(e,t,n)}catch(e){return(0,F.reject)(e)}}));null===n&&(n=["*"]),n=(n=n.slice(0)).sort();const r=JSON.stringify(n);for(let n=0;n<this._instantLayers.length;n++){const a=this._instantLayers[n];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this.resolvePromise(this._instantLayers[n].featureset)}const a=this._map.allLayers.find((t=>t instanceof S.default&&t.title===e));if(a)return this.resolvePromise(this._makeAndAddFeatureSet(a,t,n));if(this._map.tables){const r=this._map.tables.find((t=>!!(t.title&&t.title===e||t.title&&t.title===e)));if(r){if(r instanceof S.default)return this.resolvePromise(this._makeAndAddFeatureSet(r,t,n));if(r._materializedTable);else{const e=r.outFields?r:{...r,outFields:["*"]};r._materializedTable=new(0,S.default)(e)}return r._materializedTable.load().then((()=>this.resolvePromise(this._makeAndAddFeatureSet(r._materializedTable,t,n))))}}return this.resolvePromise(null)}featureSetById(e,t=!0,n=["*"]){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((()=>{try{return this.featureSetById(e,t,n)}catch(e){return(0,F.reject)(e)}}));null===n&&(n=["*"]),n=(n=n.slice(0)).sort();const r=JSON.stringify(n);for(let n=0;n<this._instantLayers.length;n++){const a=this._instantLayers[n];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this.resolvePromise(this._instantLayers[n].featureset)}const a=this._map.allLayers.find((t=>t instanceof S.default&&t.id===e));if(a)return this.resolvePromise(this._makeAndAddFeatureSet(a,t,n));if(this._map.tables){const r=this._map.tables.find((t=>t.id===e));if(r){if(r instanceof S.default)return this.resolvePromise(this._makeAndAddFeatureSet(r,t,n));if(r._materializedTable);else{const e={...r,outFields:["*"]};r._materializedTable=new(0,S.default)(e)}return r._materializedTable.load().then((()=>this.resolvePromise(this._makeAndAddFeatureSet(r._materializedTable,t,n))))}}return this.resolvePromise(null)}constructor(e,t=null,n=null,r=null){super(),this._map=e,this._overridespref=t,this.lrucache=n,this.interceptor=r,this._instantLayers=[]}}class T extends l.default{get url(){return this._url}_makeAndAddFeatureSet(e,t=!0,n=null){const r=b(e,this._overridespref,null===n?["*"]:n,t,this.lrucache);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(n)}),r}_loadMetaData(){return v(this._url).then((e=>(this.metadata=e,e)))}load(){return this._loadMetaData()}clone(){return new T(this._url,this._overridespref,this.lrucache,this.interceptor)}featureSetByName(e,t=!0,n=null){null===n&&(n=["*"]),n=(n=n.slice(0)).sort();const r=JSON.stringify(n);for(let n=0;n<this._instantLayers.length;n++){const a=this._instantLayers[n];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this.resolvePromise(this._instantLayers[n].featureset)}return this._loadMetaData().then((r=>{let a=null;for(const t of r.layers?r.layers:[])t.name===e&&(a=t);if(!a)for(const t of r.tables?r.tables:[])t.name===e&&(a=t);return a?x(this._url+"/"+a.id,["*"]).then((e=>this._makeAndAddFeatureSet(e,t,n))):this.resolvePromise(null)}))}featureSetById(e,t=!0,n=["*"]){null===n&&(n=["*"]),n=(n=n.slice(0)).sort();const r=JSON.stringify(n);e=null!=e?e.toString():"";for(let n=0;n<this._instantLayers.length;n++){const a=this._instantLayers[n];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this.resolvePromise(this._instantLayers[n].featureset)}return this._loadMetaData().then((r=>{let a=null;for(const t of r.layers?r.layers:[])null!==t.id&&void 0!==t.id&&t.id.toString()===e&&(a=t);if(!a)for(const t of r.tables?r.tables:[])null!==t.id&&void 0!==t.id&&t.id.toString()===e&&(a=t);return a?x(this._url+"/"+a.id,["*"]).then((e=>this._makeAndAddFeatureSet(e,t,n))):this.resolvePromise(null)}))}constructor(e,t=null,n=null,r=null){super(),this._url=e,this._overridespref=t,this.lrucache=n,this.interceptor=r,this.metadata=null,this._instantLayers=[]}}function O(e,t,n=null,r=null){return new C(e,t,n,r)}function _(e,t,n=null,r=null){return new T(e,t,n,r)}function k(e,t){return null===e?t:new(0,w.default)({url:e.field("url")})}function R(e,t,n){return a.id.findCredential(e.restUrl)?"loaded"===e.loadStatus&&""===t&&e.user&&e.user.sourceJSON&&!1===n?(0,F.resolve)(e.user.sourceJSON):""===t?(0,i.default)(e.restUrl+"/community/self",{responseType:"json",query:{f:"json",...!1===n?{}:{returnUserLicenseTypeExtensions:!0}}}).then((e=>{if(e.data){const t=e.data;if(t&&t.username)return(0,F.resolve)(t)}return(0,F.resolve)(null)})):(0,i.default)(e.restUrl+"/community/users/"+t,{responseType:"json",query:{f:"json"}}).then((e=>{if(e.data){const t=e.data;return t.error?null:(0,F.resolve)(t)}return(0,F.resolve)(null)})):(0,F.resolve)(null)}function P(e,t,n,r,a){if(null===e)return null;if(e instanceof S.default){switch(t){case"datasource":return b(e,a,e.outFields,!0,n,r).getDataSourceFeatureSet();case"parent":case"root":return b(e,a,e.outFields,!0,n,r)}return null}if(e instanceof y.default)switch(t){case"datasource":return e.getDataSourceFeatureSet();case"parent":return e;case"root":return e.getRootFeatureSet()}return null}function M(e,t,n,r,a,i,l,s=null){if(h.default.applicationCache){const o=h.default.applicationCache.getLayerInfo(e+":"+i.url);if(o)return o.then((e=>{try{const i=new(0,S.default)({url:(0,g.extractServiceUrl)(e.url)+"/"+t,outFields:["*"]});return(0,F.resolve)(b(i,n,r,a,l,s))}catch(e){return(0,F.reject)(e)}}),(e=>(0,F.reject)(e)))}return(0,F.create)(((o,u)=>{const c=new(0,A.default)({id:e,portal:i}).load();h.default.applicationCache&&h.default.applicationCache.setLayerInfo(e+":"+i.url,c),c.then((e=>{try{const i=new(0,S.default)({url:(0,g.extractServiceUrl)(e.url)+"/"+t,outFields:["*"]});o(b(i,n,r,a,l,s))}catch(e){u(e)}}),(t=>{h.default.applicationCache&&h.default.applicationCache.clearLayerInfo(e+":"+i.url),u(t)}))}))}})),t.register("jVdcX",(function(n,r){e(n.exports,"clip",(function(){return f})),e(n.exports,"cut",(function(){return d})),e(n.exports,"contains",(function(){return p})),e(n.exports,"crosses",(function(){return m})),e(n.exports,"distance",(function(){return h})),e(n.exports,"equals",(function(){return y})),e(n.exports,"intersects",(function(){return g})),e(n.exports,"touches",(function(){return F})),e(n.exports,"within",(function(){return I})),e(n.exports,"disjoint",(function(){return S})),e(n.exports,"overlaps",(function(){return w})),e(n.exports,"relate",(function(){return A})),e(n.exports,"isSimple",(function(){return E})),e(n.exports,"simplify",(function(){return x})),e(n.exports,"difference",(function(){return D})),e(n.exports,"symmetricDifference",(function(){return b})),e(n.exports,"intersect",(function(){return v})),e(n.exports,"union",(function(){return N})),e(n.exports,"offset",(function(){return L})),e(n.exports,"buffer",(function(){return C})),e(n.exports,"geodesicBuffer",(function(){return T})),e(n.exports,"rotate",(function(){return _})),e(n.exports,"generalize",(function(){return k})),e(n.exports,"densify",(function(){return R})),e(n.exports,"geodesicDensify",(function(){return P})),e(n.exports,"planarArea",(function(){return M})),e(n.exports,"planarLength",(function(){return j})),e(n.exports,"geodesicArea",(function(){return $})),e(n.exports,"geodesicLength",(function(){return q})),t("ixrNB");var a=t("lHDjA"),i=(t("dZxPT"),t("86d4E"));function l(e){var t;return Array.isArray(e)?null==(t=e[0])?void 0:t.spatialReference:null==e?void 0:e.spatialReference}function s(e){return e?Array.isArray(e)?e.map(s):e.toJSON?e.toJSON():e:e}function o(e){return Array.isArray(e)?e.map((e=>(0,i.fromJSON)(e))):(0,i.fromJSON)(e)}let u;async function c(e,t){return(await async function(){return u||(u=(0,a.open)("geometryEngineWorker",{strategy:"distributed"})),u}()).invoke("executeGEOperation",{operation:e,parameters:s(t)})}async function f(e,t){return o(await c("clip",[l(e),e,t]))}async function d(e,t){return o(await c("cut",[l(e),e,t]))}function p(e,t){return c("contains",[l(e),e,t])}function m(e,t){return c("crosses",[l(e),e,t])}function h(e,t,n){return c("distance",[l(e),e,t,n])}function y(e,t){return c("equals",[l(e),e,t])}function g(e,t){return c("intersects",[l(e),e,t])}function F(e,t){return c("touches",[l(e),e,t])}function I(e,t){return c("within",[l(e),e,t])}function S(e,t){return c("disjoint",[l(e),e,t])}function w(e,t){return c("overlaps",[l(e),e,t])}function A(e,t,n){return c("relate",[l(e),e,t,n])}function E(e){return c("isSimple",[l(e),e])}async function x(e){return o(await c("simplify",[l(e),e]))}async function D(e,t){return o(await c("difference",[l(e),e,t]))}async function b(e,t){return o(await c("symmetricDifference",[l(e),e,t]))}async function v(e,t){return o(await c("intersect",[l(e),e,t]))}async function N(e,t=null){const n=function(e,t){let n;return Array.isArray(e)?n=e:(n=[],n.push(e),null!=t&&n.push(t)),n}(e,t);return o(await c("union",[l(n),n]))}async function L(e,t,n,r,a,i){return o(await c("offset",[l(e),e,t,n,r,a,i]))}async function C(e,t,n,r=!1){const a=[l(e),e,t,n,r];return o(await c("buffer",a))}async function T(e,t,n,r,a,i){const s=[l(e),e,t,n,r,a,i];return o(await c("geodesicBuffer",s))}function O(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}async function _(e,t,n){var r;if(null==e)throw new Error("Illegal Argument Exception");const a=e.spatialReference;n=null!=(r=n)?r:O(e);const i=e.constructor.fromJSON(await c("rotate",[a,e,t,n]));return i.spatialReference=a,i}async function k(e,t,n,r){return o(await c("generalize",[l(e),e,t,n,r]))}async function R(e,t,n){return o(await c("densify",[l(e),e,t,n]))}async function P(e,t,n,r=0){return o(await c("geodesicDensify",[l(e),e,t,n,r]))}function M(e,t){return c("planarArea",[l(e),e,t])}function j(e,t){return c("planarLength",[l(e),e,t])}function $(e,t,n){return c("geodesicArea",[l(e),e,t,n])}function q(e,t,n){return c("geodesicLength",[l(e),e,t,n])}})),t.register("4TsVR",(function(t,n){e(t.exports,"outputTypes",(function(){return r})),e(t.exports,"createMD5Hash",(function(){return c}));const r={Base64:0,Hex:1,String:2,Raw:3};function a(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,r,i,l){return a((s=a(a(t,e),a(r,l)))<<(o=i)|s>>>32-o,n);var s,o}function l(e,t,n,r,a,l,s){return i(t&n|~t&r,e,t,a,l,s)}function s(e,t,n,r,a,l,s){return i(t&r|n&~r,e,t,a,l,s)}function o(e,t,n,r,a,l,s){return i(t^n^r,e,t,a,l,s)}function u(e,t,n,r,a,l,s){return i(n^(t|~r),e,t,a,l,s)}function c(e,t=r.Hex){const n=t||r.Base64,i=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let n=1732584193,r=-271733879,i=-1732584194,c=271733878;for(let t=0;t<e.length;t+=16){const f=n,d=r,p=i,m=c;n=l(n,r,i,c,e[t+0],7,-680876936),c=l(c,n,r,i,e[t+1],12,-389564586),i=l(i,c,n,r,e[t+2],17,606105819),r=l(r,i,c,n,e[t+3],22,-1044525330),n=l(n,r,i,c,e[t+4],7,-176418897),c=l(c,n,r,i,e[t+5],12,1200080426),i=l(i,c,n,r,e[t+6],17,-1473231341),r=l(r,i,c,n,e[t+7],22,-45705983),n=l(n,r,i,c,e[t+8],7,1770035416),c=l(c,n,r,i,e[t+9],12,-1958414417),i=l(i,c,n,r,e[t+10],17,-42063),r=l(r,i,c,n,e[t+11],22,-1990404162),n=l(n,r,i,c,e[t+12],7,1804603682),c=l(c,n,r,i,e[t+13],12,-40341101),i=l(i,c,n,r,e[t+14],17,-1502002290),r=l(r,i,c,n,e[t+15],22,1236535329),n=s(n,r,i,c,e[t+1],5,-165796510),c=s(c,n,r,i,e[t+6],9,-1069501632),i=s(i,c,n,r,e[t+11],14,643717713),r=s(r,i,c,n,e[t+0],20,-373897302),n=s(n,r,i,c,e[t+5],5,-701558691),c=s(c,n,r,i,e[t+10],9,38016083),i=s(i,c,n,r,e[t+15],14,-660478335),r=s(r,i,c,n,e[t+4],20,-405537848),n=s(n,r,i,c,e[t+9],5,568446438),c=s(c,n,r,i,e[t+14],9,-1019803690),i=s(i,c,n,r,e[t+3],14,-187363961),r=s(r,i,c,n,e[t+8],20,1163531501),n=s(n,r,i,c,e[t+13],5,-1444681467),c=s(c,n,r,i,e[t+2],9,-51403784),i=s(i,c,n,r,e[t+7],14,1735328473),r=s(r,i,c,n,e[t+12],20,-1926607734),n=o(n,r,i,c,e[t+5],4,-378558),c=o(c,n,r,i,e[t+8],11,-2022574463),i=o(i,c,n,r,e[t+11],16,1839030562),r=o(r,i,c,n,e[t+14],23,-35309556),n=o(n,r,i,c,e[t+1],4,-1530992060),c=o(c,n,r,i,e[t+4],11,1272893353),i=o(i,c,n,r,e[t+7],16,-155497632),r=o(r,i,c,n,e[t+10],23,-1094730640),n=o(n,r,i,c,e[t+13],4,681279174),c=o(c,n,r,i,e[t+0],11,-358537222),i=o(i,c,n,r,e[t+3],16,-722521979),r=o(r,i,c,n,e[t+6],23,76029189),n=o(n,r,i,c,e[t+9],4,-640364487),c=o(c,n,r,i,e[t+12],11,-421815835),i=o(i,c,n,r,e[t+15],16,530742520),r=o(r,i,c,n,e[t+2],23,-995338651),n=u(n,r,i,c,e[t+0],6,-198630844),c=u(c,n,r,i,e[t+7],10,1126891415),i=u(i,c,n,r,e[t+14],15,-1416354905),r=u(r,i,c,n,e[t+5],21,-57434055),n=u(n,r,i,c,e[t+12],6,1700485571),c=u(c,n,r,i,e[t+3],10,-1894986606),i=u(i,c,n,r,e[t+10],15,-1051523),r=u(r,i,c,n,e[t+1],21,-2054922799),n=u(n,r,i,c,e[t+8],6,1873313359),c=u(c,n,r,i,e[t+15],10,-30611744),i=u(i,c,n,r,e[t+6],15,-1560198380),r=u(r,i,c,n,e[t+13],21,1309151649),n=u(n,r,i,c,e[t+4],6,-145523070),c=u(c,n,r,i,e[t+11],10,-1120210379),i=u(i,c,n,r,e[t+2],15,718787259),r=u(r,i,c,n,e[t+9],21,-343485551),n=a(n,f),r=a(r,d),i=a(i,p),c=a(c,m)}return[n,r,i,c]}(function(e){const t=[];for(let n=0,r=8*e.length;n<r;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length);switch(n){case r.Raw:return i;case r.Hex:return function(e){const t="0123456789abcdef",n=[];for(let r=0,a=4*e.length;r<a;r++)n.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return n.join("")}(i);case r.String:return function(e){const t=[];for(let n=0,r=32*e.length;n<r;n+=8)t.push(String.fromCharCode(e[n>>5]>>>n%32&255));return t.join("")}(i);case r.Base64:return function(e){const t=[];for(let n=0,r=4*e.length;n<r;n+=3){const r=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-a)&63))}return t.join("")}(i)}}}));
//# sourceMappingURL=featuresetbase.4cc7ed7a.js.map
