{"mappings":"yVAIA,IAAAA,EAAAC,EAAA,S,kVAA+qDC,eAAeC,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE,IAAID,EAAEE,aAAaF,GAAGE,eAAc,GAAIC,EAAE,IAAI,EAAAC,EAAAC,uBAAktB,SAAWP,GAAG,MAAME,EAAEF,GAAGQ,YAAY,OAAON,EAAE,CAACO,MAAK,EAAGC,QAAQZ,MAAME,EAAEG,EAAEE,KAAK,MAAMM,EAAET,EAAEF,GAAGY,EAAE,UAAUT,EAAE,QAAQ,WAAWA,EAAE,eAAe,OAAO,aAAa,EAAAU,EAAAC,SAAEH,EAAE,CAACI,aAAaH,EAAEI,OAAO,MAAMX,EAAEA,EAAEW,OAAO,QAAQC,IAAI,GAAG,I,CAA56BC,CAAEf,IAAIQ,SAAS,EAAAQ,EAAAC,UAAEf,EAAEJ,EAAEE,GAAE,IAAKkB,MAAMT,EAAED,EAAEW,KAAKC,QAAQC,EAAE,IAAIC,IAAIC,EAAE,IAAID,IAAId,EAAEgB,SAASC,SAAS,CAAC5B,EAAEC,IAAIuB,EAAEK,IAAI5B,EAAksD,SAAWD,GAAG,OAAO,IAAI,EAAA8B,EAAAhB,SAAE,CAACG,OAAM,EAAAc,EAAAC,sBAAEhC,EAAEiB,MAAMjB,EAAEiB,MAAMgB,KAAKC,EAAElC,EAAEmC,WAAWF,O,CAAxwDG,CAAEpC,MAAMW,EAAE0B,UAAUT,SAAS,CAAC5B,EAAEC,IAAIyB,EAAEG,IAAI5B,EAAsuD,SAAWA,EAAEC,GAAG,MAAMC,EAAE,IAAI,EAAAP,EAAAkB,SAA86E,SAAYd,EAAEC,GAAG,OAAO,EAAAqC,EAAAC,GAAEC,EAAGxC,EAAE,IAAIwC,EAAGxC,EAAE,IAAIwC,EAAGxC,EAAE,IAAIC,E,CAAj+EwC,CAAGxC,EAAEyC,MAAMzC,EAAE0C,UAAUhC,EAAEV,EAAE2C,eAAe,IAAI,EAAAhD,EAAAkB,SAAs7E,SAAYd,GAAG,OAAO,EAAA6C,EAAAN,GAAEC,EAAGxC,EAAE,IAAIwC,EAAGxC,EAAE,IAAIwC,EAAGxC,EAAE,I,CAAn+E8C,CAAG7C,EAAE2C,iBAAiB,KAAKhC,EAAEZ,GAAGA,EAAE,IAAI,EAAA+C,EAAAjC,SAAE,CAACkC,MAAMhD,EAAEgD,MAAM,CAAChD,EAAEgD,MAAM,GAAGhD,EAAEgD,MAAM,IAAI,CAAC,EAAE,GAAGC,UAAS,EAAAC,EAAAC,SAAEnD,EAAEiD,UAAU,GAAGG,OAAOpD,EAAEoD,OAAO,CAACpD,EAAEoD,OAAO,GAAGpD,EAAEoD,OAAO,IAAI,CAAC,EAAE,KAAK,KAAK,OAAO,IAAI,EAAAC,EAAAvC,SAAE,CAAC4B,MAAMvC,EAAEmD,aAAapD,EAAEqD,IAAItD,EAAEuD,cAAcC,cAAcvD,EAAEqD,IAAItD,EAAEyD,eAAeC,cAAchD,EAAEiD,gBAAgB1D,EAAEqD,IAAItD,EAAE4D,iBAAiBC,iBAAiB5D,EAAEqD,IAAItD,EAAE8D,kBAAkBC,UAAUC,EAAEhE,EAAE+D,WAAWE,YAAYjE,EAAEiE,YAAYC,YAAYlE,EAAEkE,YAAYC,SAASnE,EAAEoE,eAAeC,UAAUrE,EAAEsE,gBAAgBC,yBAAyBtE,EAAEqD,IAAItD,EAAEwE,0BAA0BC,sBAAsB9D,EAAEX,EAAEyE,uBAAuBC,uBAAuB/D,EAAEX,EAAE0E,wBAAwBC,0BAA0BhE,EAAEX,EAAE2E,2BAA2BC,yBAAyBjE,EAAEX,EAAE4E,0BAA0BC,kCAAkClE,EAAEX,EAAE6E,oC,CAAllFC,CAAE/E,EAAEwB,MAAM,MAAMwD,EAA07B,SAAWhF,GAAG,IAAIC,EAAE,EAAE,MAAMgF,EAAI,CAACvC,OAAM,EAAGwC,SAAQ,EAAGC,QAAO,EAAGC,WAAU,GAAIjF,EAAE,IAAIsB,IAAIpB,EAAE,IAAIoB,IAAId,EAAE,GAAG,IAAI,MAAMC,KAAKZ,EAAEqF,MAAM,CAAC,MAAMC,YAAYC,SAASC,EAAEL,OAAO3D,EAAEkB,MAAMhB,EAAEwD,QAAQF,EAAEI,UAAUK,IAAI7E,EAAE2B,EAAE,WAAWmD,EAAEF,EAAErF,cAAcuF,EAAElE,EAAErB,cAAcuF,EAAEhE,EAAEvB,cAAcuF,EAAEV,EAAE7E,cAAcuF,EAAED,EAAEtF,cAAcwF,EAAE/E,EAAEgF,mBAAmB,IAAIC,GAAE,EAAG,MAAMC,GAAE,EAAAC,EAAAC,qBAAE3F,EAAEkC,GAAG,KAAKsD,GAAE,EAAG,CAACI,MAAMhG,EAAEiG,OAAOV,EAAEW,UAAUN,IAAI5F,GAAGuF,EAAEW,OAAO3E,IAAIyD,EAAIE,QAAO,GAAIzD,IAAIuD,EAAIvC,OAAM,GAAIsC,IAAIC,EAAIC,SAAQ,GAAIO,IAAIR,EAAIG,WAAU,GAAIzE,EAAEyF,KAAK,CAACC,KAAKzF,EAAE0F,cAAcT,EAAEU,OAAOT,G,CAAI,MAAM,CAACU,iBAAiB,CAACjB,UAAS,EAAAkB,EAAAC,cAAEC,EAAAC,kBAAE3G,GAAGkF,OAAOF,EAAIE,QAAO,EAAAsB,EAAAC,cAAEC,EAAAE,gBAAE5G,GAAG,KAAKiF,QAAQD,EAAIC,SAAQ,EAAAuB,EAAAC,cAAEC,EAAAG,gBAAE7G,GAAG,KAAKyC,MAAMuC,EAAIvC,OAAM,EAAA+D,EAAAC,cAAEC,EAAAI,iBAAE9G,GAAG,KAAKmF,UAAUH,EAAIG,WAAU,EAAAqB,EAAAC,cAAEC,EAAAK,gBAAE/G,GAAG,MAAMoF,MAAM1E,EAAEsG,WAAW,G,CAA9nDC,CAAEtG,GAAG,IAAI,MAAMuG,KAAKnC,EAAEK,MAAM+B,EAAEpC,EAAEmC,EAAEzF,GAAG,MAAM6D,SAASE,EAAEN,OAAO5C,EAAE2C,QAAQW,EAAEnD,MAAM2E,EAAEjC,UAAUkC,GAAGtC,EAAEwB,iBAAiBe,EAAE,CAAChC,SAASE,EAAE+B,YAAYrC,OAAO,MAAM5C,EAAEA,EAAEiF,YAAY,KAAKtC,QAAQ,MAAMW,EAAEA,EAAE2B,YAAY,KAAKC,GAAG,MAAMH,EAAEA,EAAEE,YAAY,KAAK9E,MAAM,MAAM2E,EAAEA,EAAEG,YAAY,MAAME,GAAE,EAAAC,EAAAC,yBAAEL,EAAEvH,EAAEG,GAAG,MAAM,CAACyF,UAAU8B,EAAE9B,UAAUiC,YAAYH,EAAEG,YAAYZ,WAAWjC,EAAEiC,WAAWa,iBAAiB9H,EAAE8H,iBAAiBtB,iBAAiB,IAAI,EAAAuB,EAAAC,sBAAE,CAACzC,SAASmC,EAAElB,iBAAiBjB,SAASJ,OAAOuC,EAAElB,iBAAiBrB,OAAOD,QAAQwC,EAAElB,iBAAiBtB,QAAQxC,MAAM6E,EAAE7E,MAAM+E,GAAGF,EAAEE,K,CAAuO,SAAS/B,EAAE1F,EAAEC,GAAG,GAAG,MAAMD,EAAE,MAAM,IAAI,MAAMG,EAAEH,EAAEwH,YAAY,MAAM,IAAG,EAAAzB,EAAAC,qBAAE/F,EAAEE,EAAE8H,QAAQ,IAAIhI,EAAEiI,UAAU/H,EAAEgI,cAAchI,EAAEiI,Y,CAAa,SAASzC,EAAE3F,GAAG,OAAO,MAAMA,EAAEA,EAAEqI,WAAW,G,CAAirD,SAASjB,EAAEpH,EAAEC,EAAEC,GAAGD,EAAEqG,eAAiU,SAAWtG,EAAEC,GAAG,MAAMsF,SAASrF,EAAEiF,OAAO9E,EAAE6E,QAAQ1D,EAAEkB,MAAMhB,EAAE0D,UAAUJ,GAAGhF,EAAEwG,iBAAiBf,EAAExF,EAAEsG,OAAON,OAAOX,WAAW/C,EAAEqD,UAAUC,GAAG5F,EAAEoG,KAAKP,EAAEvD,EAAEgD,SAASY,MAAM,IAAG,EAAAmC,EAAA7C,GAAEvF,EAAEqI,MAAM9C,EAAEK,GAAGvD,EAAEgD,SAASM,GAAG,MAAMtD,EAAE4C,QAAQ,MAAM9E,EAAE,CAAC,MAAMmF,GAAE,EAAAgD,EAAAC,IAAE,EAAAC,EAAAjD,KAAII,GAAG8C,EAAEtI,EAAEkI,MAAM9C,EAAEK,IAAG,EAAAwC,EAAAG,GAAEE,EAAEpG,EAAE4C,OAAOK,IAAG,EAAAtC,EAAA0F,YAAEpD,KAAI,EAAA8C,EAAAjB,GAAEsB,EAAEA,E,MAAQ,MAAMtI,IAAG,EAAAwI,EAAAtG,GAAElC,EAAE,EAAE,EAAE,EAAE,CAACyI,SAASrD,EAAEU,MAAML,IAAI,GAAG,MAAMvD,EAAE2C,SAAS,MAAM1D,EAAE,CAAC,MAAMuH,GAAE,EAAAP,EAAAC,IAAE,EAAAC,EAAAjD,KAAII,GAAGmD,EAAExH,EAAE+G,MAAM9C,EAAEK,IAAG,EAAAmD,EAAArI,GAAEoI,EAAEzG,EAAE2C,QAAQ6D,IAAG,EAAA7F,EAAA0F,YAAEG,KAAI,EAAAE,EAAA5I,GAAE2I,EAAEA,E,MAAQ,MAAMxH,IAAG,EAAA0H,EAAA3G,GAAEf,EAAE,EAAE,EAAE,EAAE,EAAE,CAACsH,SAASrD,EAAEU,MAAML,IAAI,GAAG,MAAMvD,EAAE6C,WAAW,MAAMJ,GAAE,EAAAmE,EAAAvI,GAAEoE,EAAEuD,MAAM9C,EAAEK,GAAGvD,EAAE6C,WAAW,MAAMJ,IAAG,EAAAmE,EAAA5G,GAAEyC,EAAE,EAAE,EAAE,CAAC8D,SAASrD,EAAEU,MAAML,IAAI,MAAMvD,EAAEG,OAAO,MAAMhB,EAAE,CAAC,MAAM0H,EAAE7G,EAAEG,MAAM2G,EAAE3H,EAAE6G,MAAM9C,EAAEK,GAAG,GAAG,IAAIsD,EAAEE,aAAaF,aAAazC,EAAAG,iBAAE,EAAAmC,EAAAR,GAAEY,EAAED,EAAE,KAAKA,aAAazC,EAAAI,kBAAE,EAAAmC,EAAAtI,GAAEyI,EAAED,GAAGA,aAAazC,EAAA4C,oBAAG,EAAAN,EAAAR,GAAEY,EAAED,EAAE,EAAE,SAAS,EAAC,EAAAF,EAAA3G,GAAE8G,EAAE,IAAI,IAAI,IAAI,KAAK,MAAMG,EAAE7C,EAAA8C,iBAAEC,eAAeL,EAAE7B,YAAY6B,EAAEM,mBAAmBP,aAAazC,EAAAE,iBAAE,EAAAyB,EAAAtI,GAAEwJ,EAAEJ,EAAE,KAAKA,aAAazC,EAAA8C,kBAAE,EAAAZ,EAAAjI,GAAE4I,EAAEJ,GAAGA,aAAazC,EAAAiD,oBAAG,EAAAtB,EAAAtI,GAAEwJ,EAAEJ,EAAE,EAAE,I,OAAW,MAAM1H,IAAG,EAAAwH,EAAA3G,GAAEb,EAAE6G,MAAM9C,EAAEK,GAAG,IAAI,IAAI,IAAI,I,CAA3sC+D,CAAE7J,EAAEC,GAAG,MAAM6J,QAAQ3J,EAAEmF,WAAWjF,EAAE0J,cAAcpJ,EAAEqJ,SAASpJ,GAAGX,EAAEoG,KAAK,IAAI7E,GAAE,EAAAyI,EAAAC,6BAAE/J,GAAGE,EAAEkF,SAASY,MAAMxF,GAAG,MAAMe,EAAEzB,EAAEsG,OAAON,MAAM,GAAGvE,EAAE,CAAC,MAAM8D,EAAE,IAAI2E,YAAY3I,GAAG,IAAI,IAAImH,EAAE,EAAEA,EAAEnH,EAAE0E,OAAOyC,IAAInD,EAAEmD,IAAIjH,EAAEF,EAAEgE,C,CAAExF,EAAEiH,WAAWb,KAAK,IAAI,EAAAgE,EAAAtJ,SAAE,CAACuJ,MAAM7I,EAAEwI,SAAS9J,EAAEqD,IAAI3C,GAAG0J,QAAQjK,EAAE8E,OAAO,SAAS,OAAOoF,oBAAmB,I,CAAo6B,SAAStG,EAAEjE,GAAG,OAAOA,GAAG,IAAI,SAAS,MAAM,SAAS,IAAI,OAAO,MAAM,OAAO,IAAI,QAAQ,MAAM,Q,CAAS,SAASkC,EAAElC,GAAG,MAAM,CAACwK,WAAWC,EAAGzK,EAAEW,GAAG+J,SAASD,EAAGzK,EAAEC,G,CAAI,SAASwK,EAAGzK,GAAG,OAAOA,GAAG,KAAK2K,EAAAC,gBAAEC,cAAc,MAAM,QAAQ,KAAKF,EAAAC,gBAAEE,gBAAgB,MAAM,SAAS,KAAKH,EAAAC,gBAAEG,OAAO,MAAM,S,CAAU,SAASvI,EAAGxC,GAAG,OAAOA,IAAI,EAAEgL,EAAAC,aAAG,G,0FCA/jM,IAAAC,EAAArL,EAAA,S,kEAAgV,SAASsL,EAAExK,EAAET,GAAG,OAAO,IAAIS,EAAE,IAAIyK,YAAYlL,EAAES,EAAE0K,cAAa,EAAAH,EAAAI,iBAAE3K,EAAE4K,c,uCCAlZ,SAASC,EAAExL,GAAG,OAAOA,GAAG,IAAI,KAAK,IAAI,KAAK,OAAO,EAAE,IAAI,MAAM,IAAI,MAAM,OAAO,EAAE,IAAI,MAAM,IAAI,MAAM,IAAI,MAAM,OAAO,EAAE,IAAI,MAAM,OAAO,E,4FCAgIyL,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,KAA5T,SAAW7L,EAAEC,EAAEC,GAAG,MAAMC,EAAEH,EAAEwH,YAAYH,EAAErH,EAAE2J,kBAAkBpH,EAAEtC,EAAEuH,YAAYnH,EAAEJ,EAAE0J,kBAAkBlE,EAAEvF,EAAEA,EAAEiG,MAAMlG,EAAEkG,MAAM,IAAInB,GAAG9E,GAAGA,EAAE4I,SAAS5I,EAAE4I,SAAS,GAAGzB,EAAE7F,GAAGtB,GAAGA,EAAE4L,SAAS5L,EAAE4L,SAAS,GAAGzL,EAAE,IAAI,IAAIyF,EAAE,EAAEA,EAAEL,IAAIK,EAAE,CAAC,IAAI,IAAIN,EAAE,EAAEA,EAAE,IAAIA,EAAErF,EAAE6E,EAAEQ,GAAGjD,EAAEf,EAAEgE,GAAGR,GAAGqC,EAAE7F,GAAGnB,C,IAAuE0L,OAAOC,YAAY,CAACC,MAAM,W,sCCArFR,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,KAA7T,SAAW7L,EAAEC,EAAEC,GAAG,MAAMC,EAAEH,EAAEwH,YAAYH,EAAErH,EAAE2J,kBAAkBpH,EAAEtC,EAAEuH,YAAYnH,EAAEJ,EAAE0J,kBAAkBlE,EAAEvF,EAAEA,EAAEiG,MAAMlG,EAAEkG,MAAM,IAAInB,GAAG9E,GAAGA,EAAE4I,SAAS5I,EAAE4I,SAAS,GAAGzB,EAAE7F,GAAGtB,GAAGA,EAAE4L,SAAS5L,EAAE4L,SAAS,GAAGzL,EAAE,IAAI,IAAIyF,EAAE,EAAEA,EAAEL,IAAIK,EAAE,CAAC,IAAI,IAAIN,EAAE,EAAEA,EAAE,KAAKA,EAAErF,EAAE6E,EAAEQ,GAAGjD,EAAEf,EAAEgE,GAAGR,GAAGqC,EAAE7F,GAAGnB,C,IAAuE0L,OAAOC,YAAY,CAACC,MAAM,W,6QCA/V,IAAAC,EAAArM,EAAA,SAAoF,MAAMsM,EAAEC,YAAY/L,GAAGgM,KAAKpL,KAAKZ,EAAEgM,KAAKC,KAAK,uBAAuBD,KAAKE,SAASL,EAAAM,wBAAEC,a,EAAe,SAASC,EAAE1M,GAAG,MAAM,yBAAyBA,GAAGsM,I,CAAKxM,eAAe6M,EAAE3M,GAAG,OAAO,IAAI4M,SAAS,CAACvM,EAAEJ,KAAK,MAAMC,EAAE,IAAI2M,KAAK,CAAC7M,IAAIG,EAAE,IAAI2M,WAAW3M,EAAE4M,OAAO,KAAK,MAAM/M,EAAEG,EAAE6M,OAAO3M,EAAE4M,KAAKC,MAAMlN,GAAG,EAAEG,EAAEgN,QAAQnN,IAAIC,EAAED,EAAE,EAAEG,EAAEiN,WAAWlN,EAAE,G,CAAIJ,eAAeuN,EAAEpN,EAAEC,GAAG,OAAOA,IAAIgM,EAAAM,wBAAEC,cAAc,IAAIN,EAAElM,GAAG,IAAI2M,SAAS,CAAC5M,EAAEK,KAAK,MAAMF,EAAE,IAAI0M,KAAK,CAAC5M,GAAG,CAACqM,KAAKpM,IAAIS,EAAE2M,IAAIC,gBAAgBpN,GAAGsF,EAAE,IAAI+H,MAAMnG,EAAE,KAAKiG,IAAIG,gBAAgB9M,GAAG,WAAW8E,EAAEA,EAAEiI,SAASC,MAAM,IAAI3N,EAAEyF,KAAK,IAAIzF,EAAEyF,KAAKkI,KAAK/M,IAAIZ,EAAEyF,GAAG7E,IAAG,EAAGc,EAAE1B,IAAIsN,IAAIG,gBAAgB9M,GAAGN,EAAEL,GAAGY,GAAG,EAAEA,EAAE,KAAK6E,EAAEmI,oBAAoB,OAAOvG,GAAG5B,EAAEmI,oBAAoB,QAAQlM,EAAE,EAAE+D,EAAEoI,iBAAiB,OAAOxG,GAAG5B,EAAEoI,iBAAiB,QAAQnM,GAAG+D,EAAEqI,IAAInN,CAAC,G,uCCAt0B,IAAIoN,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAYnO,E,obAAAA,EAAoF0N,IAAIA,EAAE,KAArF1N,EAAEoO,KAAK,GAAG,OAAOpO,EAAEA,EAAEqO,MAAM,GAAG,QAAQrO,EAAEA,EAAEsO,KAAK,GAAG,OAAOtO,EAAEA,EAAEuO,MAAM,GAAG,QAAoB,SAASvO,GAAGA,EAAEA,EAAEwO,KAAK,GAAG,OAAOxO,EAAEA,EAAEyO,OAAO,GAAG,SAASzO,EAAEA,EAAEuO,MAAM,GAAG,O,CAAnE,CAA4EZ,IAAIA,EAAE,KAAK,SAAS3N,GAAGA,EAAEA,EAAE0O,WAAW,GAAG,aAAa1O,EAAEA,EAAE2O,OAAO,GAAG,Q,CAAzD,CAAmEf,IAAIA,EAAE,KAAK,SAAS5N,GAAGA,EAAEA,EAAE4O,WAAW,GAAG,aAAa5O,EAAEA,EAAE6O,QAAQ,GAAG,UAAU7O,EAAEA,EAAE8O,OAAO,GAAG,Q,CAAlF,CAA4FjB,IAAIA,EAAE,KAAK,SAAS7N,GAAGA,EAAEA,EAAE+O,2BAA2B,GAAG,6BAA6B/O,EAAEA,EAAEgP,yBAAyB,GAAG,0B,CAA3G,CAAuIlB,IAAIA,EAAE,KAAK,SAAS9N,GAAGA,EAAEA,EAAEiP,UAAU,GAAG,YAAYjP,EAAEA,EAAEkP,aAAa,GAAG,eAAelP,EAAEA,EAAEuO,MAAM,GAAG,O,CAAzF,CAAkGR,IAAIA,EAAE,KAAK,SAAS/N,GAAGA,EAAEA,EAAEmP,QAAQ,GAAG,UAAUnP,EAAEA,EAAEoP,UAAU,GAAG,W,CAAtD,CAAmEpB,IAAIA,EAAE,KAAK,SAAShO,GAAGA,EAAEA,EAAEqP,MAAM,GAAG,QAAQrP,EAAEA,EAAEsP,OAAO,GAAG,SAAStP,EAAEA,EAAEuP,KAAK,GAAG,OAAOvP,EAAEA,EAAEwP,UAAU,GAAG,YAAYxP,EAAEA,EAAEuO,MAAM,GAAG,O,CAArH,CAA8HN,IAAIA,EAAE,KAAK,SAASjO,GAAGA,EAAEA,EAAEyP,IAAI,GAAG,MAAMzP,EAAEA,EAAE0P,GAAG,GAAG,I,CAAvC,CAA6CxB,IAAIA,EAAE,KAAK,SAASlO,GAAGA,EAAE2P,aAAa,mBAAmB3P,EAAEoM,cAAc,aAAapM,EAAE4P,eAAe,e,CAA5F,CAA6GzB,IAAIA,EAAE,I","sources":["node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js","node_modules/@arcgis/core/geometry/support/buffer/utils.js","node_modules/@arcgis/core/geometry/support/buffer/types.js","node_modules/@arcgis/core/chunks/mat32.js","node_modules/@arcgis/core/chunks/mat42.js","node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js","node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import t from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{hasScaling as o,rad2deg as n}from\"../../../core/mathUtils.js\";import{b as s}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f64.js\";import{f as l}from\"../../../chunks/vec3f64.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import u from\"../MeshComponent.js\";import c from\"../MeshMaterialMetallicRoughness.js\";import f from\"../MeshTexture.js\";import m from\"../MeshTextureTransform.js\";import{MeshVertexAttributes as p}from\"../MeshVertexAttributes.js\";import{BufferViewVec4f as d,BufferViewVec4u8 as g,BufferViewVec4u16 as x,BufferViewVec3u8 as T,BufferViewVec3f as h,BufferViewVec3u16 as v,BufferViewVec3f64 as w,BufferViewVec2f as j}from\"../buffer/BufferView.js\";import{c as b,b as y,d as M,e as C}from\"../../../chunks/vec32.js\";import{a as A,n as R,b as E}from\"../../../chunks/vec42.js\";import{createBuffer as k}from\"../buffer/utils.js\";import{georeferenceByTransform as B}from\"./georeference.js\";import{DefaultLoadingContext as F}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{loadGLTF as $}from\"../../../views/3d/glTF/loader.js\";import{convertPrimitiveToTriangles as S}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as O}from\"../../../views/3d/glTF/internal/resourceUtils.js\";import{COLOR_GAMMA as U}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{TextureWrapMode as D}from\"../../../views/webgl/enums.js\";import{f as L,a as _}from\"../../../chunks/vec33.js\";import{f as I,a as P}from\"../../../chunks/vec43.js\";import{a as V,f as q}from\"../../../chunks/vec22.js\";async function N(e,t,r){const o={...r,useTransform:r?.useTransform??!0},n=new F(z(o)),s=(await $(n,t,o,!0)).model,a=s.lods.shift(),l=new Map,i=new Map;s.textures.forEach(((e,t)=>l.set(t,H(e)))),s.materials.forEach(((e,t)=>i.set(t,J(e,l))));const u=Q(a);for(const p of u.parts)W(u,p,i);const{position:c,normal:f,tangent:m,color:d,texCoord0:g}=u.vertexAttributes,x={position:c.typedBuffer,normal:null!=f?f.typedBuffer:null,tangent:null!=m?m.typedBuffer:null,uv:null!=g?g.typedBuffer:null,color:null!=d?d.typedBuffer:null},T=B(x,e,o);return{transform:T.transform,vertexSpace:T.vertexSpace,components:u.components,spatialReference:e.spatialReference,vertexAttributes:new p({position:T.vertexAttributes.position,normal:T.vertexAttributes.normal,tangent:T.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function z(e){const r=e?.resolveFile;return r?{busy:!1,request:async(e,o,n)=>{const s=r(e),a=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await t(s,{responseType:a,signal:null!=n?n.signal:null})).data}}:null}function G(e,t){if(null==e)return\"-\";const o=e.typedBuffer;return`${r(t,o.buffer,(()=>t.size))}/${o.byteOffset}/${o.byteLength}`}function K(e){return null!=e?e.toString():\"-\"}function Q(e){let t=0;const has={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,n=new Map,s=[];for(const a of e.parts){const{attributes:{position:e,normal:l,color:i,tangent:u,texCoord0:c}}=a,f=`\\n      ${G(e,o)}/\\n      ${G(l,o)}/\\n      ${G(i,o)}/\\n      ${G(u,o)}/\\n      ${G(c,o)}/\\n      ${K(a.transform)}\\n    `;let m=!1;const p=r(n,f,(()=>(m=!0,{start:t,length:e.count})));m&&(t+=e.count),l&&(has.normal=!0),i&&(has.color=!0),u&&(has.tangent=!0),c&&(has.texCoord0=!0),s.push({gltf:a,writeVertices:m,region:p})}return{vertexAttributes:{position:k(w,t),normal:has.normal?k(h,t):null,tangent:has.tangent?k(d,t):null,color:has.color?k(g,t):null,texCoord0:has.texCoord0?k(j,t):null},parts:s,components:[]}}function H(e){return new f({data:(O(e.data),e.data),wrap:Z(e.parameters.wrap)})}function J(t,r){const o=new e(re(t.color,t.opacity)),s=t.emissiveFactor?new e(oe(t.emissiveFactor)):null,a=e=>e?new m({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:n(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new c({color:o,colorTexture:r.get(t.textureColor),normalTexture:r.get(t.textureNormal),emissiveColor:s,emissiveTexture:r.get(t.textureEmissive),occlusionTexture:r.get(t.textureOcclusion),alphaMode:Y(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:r.get(t.textureMetallicRoughness),colorTextureTransform:a(t.colorTextureTransform),normalTextureTransform:a(t.normalTextureTransform),occlusionTextureTransform:a(t.occlusionTextureTransform),emissiveTextureTransform:a(t.emissiveTextureTransform),metallicRoughnessTextureTransform:a(t.metallicRoughnessTextureTransform)})}function W(e,t,r){t.writeVertices&&X(e,t);const{indices:o,attributes:n,primitiveType:s,material:a}=t.gltf;let l=S(o||n.position.count,s);const i=t.region.start;if(i){const e=new Uint32Array(l);for(let t=0;t<l.length;t++)e[t]+=i;l=e}e.components.push(new u({faces:l,material:r.get(a),shading:n.normal?\"source\":\"flat\",trustSourceNormals:!0}))}function X(e,t){const{position:r,normal:n,tangent:l,color:i,texCoord0:u}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:m}=t.gltf,p=f.position.count;if(b(r.slice(c,p),f.position,m),null!=f.normal&&null!=n){const e=s(a(),m),t=n.slice(c,p);y(t,f.normal,e),o(e)&&M(t,t)}else null!=n&&L(n,0,0,1,{dstIndex:c,count:p});if(null!=f.tangent&&null!=l){const e=s(a(),m),t=l.slice(c,p);A(t,f.tangent,e),o(e)&&R(t,t)}else null!=l&&I(l,0,0,1,1,{dstIndex:c,count:p});if(null!=f.texCoord0&&null!=u?V(u.slice(c,p),f.texCoord0):null!=u&&q(u,0,0,{dstIndex:c,count:p}),null!=f.color&&null!=i){const e=f.color,t=i.slice(c,p);if(4===e.elementCount)e instanceof d?E(t,e,255):e instanceof g?P(t,e):e instanceof x&&E(t,e,1/256);else{I(t,255,255,255,255);const r=T.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof h?C(r,e,255):e instanceof T?_(r,e):e instanceof v&&C(r,e,1/256)}}else null!=i&&I(i.slice(c,p),255,255,255,255)}function Y(e){switch(e){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function Z(e){return{horizontal:ee(e.s),vertical:ee(e.t)}}function ee(e){switch(e){case D.CLAMP_TO_EDGE:return\"clamp\";case D.MIRRORED_REPEAT:return\"mirror\";case D.REPEAT:return\"repeat\"}}function te(e){return e**(1/U)*255}function re(e,t){return i(te(e[0]),te(e[1]),te(e[2]),t)}function oe(e){return l(te(e[0]),te(e[1]),te(e[2]))}export{N as loadGLTFMesh};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{elementTypeSize as e}from\"./types.js\";export{m as mat3}from\"../../../chunks/mat32.js\";export{m as mat4}from\"../../../chunks/mat42.js\";export{s as scalar}from\"../../../chunks/scalar.js\";export{v as vec2}from\"../../../chunks/vec22.js\";export{v as vec3}from\"../../../chunks/vec33.js\";export{v as vec4}from\"../../../chunks/vec43.js\";function r(s,r){return new s(new ArrayBuffer(r*s.ElementCount*e(s.ElementType)))}export{r as createBuffer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"u8\":case\"i8\":return 1;case\"u16\":case\"i16\":return 2;case\"u32\":case\"i32\":case\"f32\":return 4;case\"f64\":return 8}}function c(e){switch(e){case\"u8\":case\"u16\":case\"u32\":return!1;case\"i8\":case\"i16\":case\"i32\":case\"f32\":case\"f64\":return!0}}function s(e){switch(e){case\"u8\":case\"u16\":case\"u32\":case\"i8\":case\"i16\":case\"i32\":return!0;case\"f32\":case\"f64\":return!1}}function r(e){switch(e){case\"u8\":return 255;case\"u16\":return 65535;case\"u32\":return 4294967295;case\"i8\":return 127;case\"i16\":return 32767;case\"i32\":return 2147483647;case\"f32\":return 3402823e32;case\"f64\":return 179769e303}}export{e as elementTypeSize,s as isInteger,c as isSigned,r as maximumValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction e(e,t,r){const o=e.typedBuffer,d=e.typedBufferStride,f=t.typedBuffer,n=t.typedBufferStride,c=r?r.count:t.count;let u=(r&&r.dstIndex?r.dstIndex:0)*d,l=(r&&r.srcIndex?r.srcIndex:0)*n;for(let p=0;p<c;++p){for(let e=0;e<9;++e)o[u+e]=f[l+e];u+=d,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction e(e,t,r){const o=e.typedBuffer,d=e.typedBufferStride,f=t.typedBuffer,n=t.typedBufferStride,c=r?r.count:t.count;let u=(r&&r.dstIndex?r.dstIndex:0)*d,l=(r&&r.srcIndex?r.srcIndex:0)*n;for(let p=0;p<c;++p){for(let e=0;e<16;++e)o[u+e]=f[l+e];u+=d,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{TextureEncodingMimeType as e}from\"../../webgl-engine/lib/basicInterfaces.js\";class n{constructor(n){this.data=n,this.type=\"encoded-mesh-texture\",this.encoding=e.KTX2_ENCODING}}function t(e){return\"encoded-mesh-texture\"===e?.type}async function r(e){return new Promise(((n,t)=>{const r=new Blob([e]),o=new FileReader;o.onload=()=>{const e=o.result;n(JSON.parse(e))},o.onerror=e=>{t(e)},o.readAsText(r)}))}async function o(t,r){return r===e.KTX2_ENCODING?new n(t):new Promise(((e,n)=>{const o=new Blob([t],{type:r}),s=URL.createObjectURL(o),c=new Image,d=()=>{URL.revokeObjectURL(s),\"decode\"in c?c.decode().then((()=>e(c)),(()=>e(c))).then(a):(e(c),a())},i=e=>{URL.revokeObjectURL(s),n(e),a()},a=()=>{c.removeEventListener(\"load\",d),c.removeEventListener(\"error\",i)};c.addEventListener(\"load\",d),c.addEventListener(\"error\",i),c.src=s}))}export{n as EncodedMeshTexture,o as imageFromBinaryData,t as isEncodedMeshTexture,r as jsonFromBinaryData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nvar n,e,O,N,a,t,D,i,s,u;!function(n){n[n.None=0]=\"None\",n[n.Front=1]=\"Front\",n[n.Back=2]=\"Back\",n[n.COUNT=3]=\"COUNT\"}(n||(n={})),function(n){n[n.Less=0]=\"Less\",n[n.Lequal=1]=\"Lequal\",n[n.COUNT=2]=\"COUNT\"}(e||(e={})),function(n){n[n.BACKGROUND=0]=\"BACKGROUND\",n[n.UPDATE=1]=\"UPDATE\"}(O||(O={})),function(n){n[n.NOT_LOADED=0]=\"NOT_LOADED\",n[n.LOADING=1]=\"LOADING\",n[n.LOADED=2]=\"LOADED\"}(N||(N={})),function(n){n[n.IntegratedMeshMaskExcluded=1]=\"IntegratedMeshMaskExcluded\",n[n.OutlineVisualElementMask=2]=\"OutlineVisualElementMask\"}(a||(a={})),function(n){n[n.Highlight=0]=\"Highlight\",n[n.MaskOccludee=1]=\"MaskOccludee\",n[n.COUNT=2]=\"COUNT\"}(t||(t={})),function(n){n[n.CHANGED=0]=\"CHANGED\",n[n.UNCHANGED=1]=\"UNCHANGED\"}(D||(D={})),function(n){n[n.Blend=0]=\"Blend\",n[n.Opaque=1]=\"Opaque\",n[n.Mask=2]=\"Mask\",n[n.MaskBlend=3]=\"MaskBlend\",n[n.COUNT=4]=\"COUNT\"}(i||(i={})),function(n){n[n.OFF=0]=\"OFF\",n[n.ON=1]=\"ON\"}(s||(s={})),function(n){n.DDS_ENCODING=\"image/vnd-ms.dds\",n.KTX2_ENCODING=\"image/ktx2\",n.BASIS_ENCODING=\"image/x.basis\"}(u||(u={}));export{i as AlphaDiscardMode,n as CullFaceOptions,s as Decorations,e as DepthTestFunction,t as Object3DState,O as RenderRequestType,N as ResourceState,a as StencilBits,u as TextureEncodingMimeType,D as ValidationState};\n"],"names":["$hJt7u","parcelRequire","async","$937f4d75b887db0e$export$d3fb9c705f65cc77","e","t","r","o","useTransform","n","$5cRuQ","DefaultLoadingContext","resolveFile","busy","request","s","a","$bYA0c","default","responseType","signal","data","$937f4d75b887db0e$var$z","$iXVKm","loadGLTF","model","lods","shift","l","Map","i","textures","forEach","set","$44zDp","$5NoUL","isEncodedMeshTexture","wrap","$937f4d75b887db0e$var$Z","parameters","$937f4d75b887db0e$var$H","materials","$64ROT","f","$937f4d75b887db0e$var$te","$937f4d75b887db0e$var$re","color","opacity","emissiveFactor","$iHxaG","$937f4d75b887db0e$var$oe","$2lq8N","scale","rotation","$8TN87","rad2deg","offset","$9CdsJ","colorTexture","get","textureColor","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","$937f4d75b887db0e$var$Y","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","colorTextureTransform","normalTextureTransform","occlusionTextureTransform","emissiveTextureTransform","metallicRoughnessTextureTransform","$937f4d75b887db0e$var$J","u","has","tangent","normal","texCoord0","parts","attributes","position","e1","c","$937f4d75b887db0e$var$G","$937f4d75b887db0e$var$K","transform","m","p","$035lZ","getOrCreateMapValue","start","length","count","push","gltf","writeVertices","region","vertexAttributes","$6Jhbg","createBuffer","$k4Lc2","BufferViewVec3f64","BufferViewVec3f","BufferViewVec4f","BufferViewVec4u8","BufferViewVec2f","components","$937f4d75b887db0e$var$Q","p1","$937f4d75b887db0e$var$W","d","g","x","typedBuffer","uv","T","$cjn8Z","georeferenceByTransform","vertexSpace","spatialReference","$7uKdD","MeshVertexAttributes","buffer","size","byteOffset","byteLength","toString","$3Bcds","slice","$52822","b","$4vUOo","t1","hasScaling","$5gcCk","dstIndex","e2","t2","$7vBMy","$7JiCL","$lLtQf","e3","t3","elementCount","BufferViewVec4u16","r1","BufferViewVec3u8","fromTypedArray","typedBufferStride","BufferViewVec3u16","$937f4d75b887db0e$var$X","indices","primitiveType","material","$jQTCa","convertPrimitiveToTriangles","Uint32Array","$lnPqT","faces","shading","trustSourceNormals","horizontal","$937f4d75b887db0e$var$ee","vertical","$l3QXd","TextureWrapMode","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","$amFar","COLOR_GAMMA","$2bApG","$4e6445c127ef7054$export$7e0ee79024a844e1","ArrayBuffer","ElementCount","elementTypeSize","ElementType","$1978dac8f2e7ab20$export$1ec4aabe1b9ae11d","Object","freeze","defineProperty","__proto__","copy","srcIndex","Symbol","toStringTag","value","$kp9RZ","$4384dada69fe3fa7$export$a2b63cbeccb53bfa","constructor","this","type","encoding","TextureEncodingMimeType","KTX2_ENCODING","$4384dada69fe3fa7$export$6416212609729888","$4384dada69fe3fa7$export$88757a5cee22f04c","Promise","Blob","FileReader","onload","result","JSON","parse","onerror","readAsText","$4384dada69fe3fa7$export$2acda7915a81f81c","URL","createObjectURL","Image","revokeObjectURL","decode","then","removeEventListener","addEventListener","src","$edadcc631b66447a$export$27d64769259f6864","$edadcc631b66447a$export$24d783aa355023ea","$edadcc631b66447a$export$9a2e85d113672df3","$edadcc631b66447a$export$d0eb0afab1a889e1","$edadcc631b66447a$export$1f368585738320ab","$edadcc631b66447a$export$16fcb3c2564f2451","$edadcc631b66447a$export$2a27dae48bac82b3","$edadcc631b66447a$export$860ce1bbd4cab1c6","$edadcc631b66447a$export$70826c92249a489","$edadcc631b66447a$export$39893ea5d6605b54","None","Front","Back","COUNT","Less","Lequal","BACKGROUND","UPDATE","NOT_LOADED","LOADING","LOADED","IntegratedMeshMaskExcluded","OutlineVisualElementMask","Highlight","MaskOccludee","CHANGED","UNCHANGED","Blend","Opaque","Mask","MaskBlend","OFF","ON","DDS_ENCODING","BASIS_ENCODING"],"version":3,"file":"loadGLTFMesh.eb5ebe5e.js.map"}