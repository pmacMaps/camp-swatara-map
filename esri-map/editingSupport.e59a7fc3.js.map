{"mappings":"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","sources":["node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import{isSome as i}from\"../../core/maybe.js\";import{dataComponents as s}from\"../../core/urlUtils.js\";import{normalizeCentralMeridian as d}from\"../../geometry/support/normalizeUtils.js\";function n(e){return e&&null!=e.applyEdits}async function l(e,t,a,i={}){let s,d;const n={edits:a,result:new Promise(((e,t)=>{s=e,d=t}))};e.emit(\"apply-edits\",n);try{var l;const{results:d,edits:n}=await o(e,t,a,i),u=e=>e.filter((e=>!e.error)).map(r),p={edits:n,addedFeatures:u(d.addFeatureResults),updatedFeatures:u(d.updateFeatureResults),deletedFeatures:u(d.deleteFeatureResults),addedAttachments:u(d.addAttachmentResults),updatedAttachments:u(d.updateAttachmentResults),deletedAttachments:u(d.deleteAttachmentResults)};return null!=(l=d.editedFeatureResults)&&l.length&&(p.editedFeatures=d.editedFeatureResults),(p.addedFeatures.length||p.updatedFeatures.length||p.deletedFeatures.length||p.addedAttachments.length||p.updatedAttachments.length||p.deletedAttachments.length)&&e.emit(\"edits\",p),s(p),d}catch(u){throw d(u),u}}async function o(e,t,r,i){if(await e.load(),!n(t))return Promise.reject(new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e}));if(!e.editingEnabled)throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:s,options:d}=await u(e,r,i);return s.addFeatures.length||s.updateFeatures.length||s.deleteFeatures.length||s.addAttachments.length||s.updateAttachments.length||s.deleteAttachments.length?{edits:s,results:await t.applyEdits(s,d)}:{edits:s,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function u(e,r,i){const s=r&&(r.addFeatures||r.updateFeatures||r.deleteFeatures),d=r&&(r.addAttachments||r.updateAttachments||r.deleteAttachments);if(!r||!s&&!d)throw new a(`${e.type}-layer:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!e.capabilities.data.isVersioned&&i&&i.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!e.capabilities.editing.supportsRollbackOnFailure&&i&&i.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");if(!e.capabilities.editing.supportsGlobalId&&i&&i.globalIdUsed)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!e.capabilities.editing.supportsGlobalId&&d)throw new a(`${e.type}-layer:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if((!i||!i.globalIdUsed)&&d)throw new a(`${e.type}-layer:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");const n={...i};if(null!=n.rollbackOnFailureEnabled||e.capabilities.editing.supportsRollbackOnFailure||(n.rollbackOnFailureEnabled=!0),!1===n.rollbackOnFailureEnabled&&\"original-and-current-features\"===n.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.\");if(!e.capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference&&n.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(n.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==n.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const l={...r};if(l.addFeatures=r&&t.isCollection(r.addFeatures)?r.addFeatures.toArray():l.addFeatures||[],l.updateFeatures=r&&t.isCollection(r.updateFeatures)?r.updateFeatures.toArray():l.updateFeatures||[],l.deleteFeatures=r&&t.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():l.deleteFeatures||[],l.addFeatures.length&&!e.capabilities.operations.supportsAdd)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support adding features.\");if(l.updateFeatures.length&&!e.capabilities.operations.supportsUpdate)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support updating features.\");if(l.deleteFeatures.length&&!e.capabilities.operations.supportsDelete)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support deleting features.\");l.addAttachments=l.addAttachments||[],l.updateAttachments=l.updateAttachments||[],l.deleteAttachments=l.deleteAttachments||[],l.addFeatures=l.addFeatures.map(g),l.updateFeatures=l.updateFeatures.map(g);const o=i&&i.globalIdUsed;l.addFeatures.forEach((t=>c(t,e,o))),l.updateFeatures.forEach((t=>m(t,e,o))),l.deleteFeatures.forEach((t=>h(t,e,o))),l.addAttachments.forEach((t=>y(t,e))),l.updateAttachments.forEach((t=>y(t,e)));return{edits:await f(l),options:n}}function p(e,t,r){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Feature should have 'globalId' when 'globalIdUsed' is true\");if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(\"geometry\"in e&&i(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function c(e,t,a){p(e,t,a)}function h(e,t,a){p(e,t,a)}function m(e,t,r){if(p(e,t,r),\"geometry\"in e&&i(e.geometry)&&!t.capabilities.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function y(e,t){const{feature:r,attachment:i}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!i.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!i.data&&!i.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(i.data instanceof File&&!!i.data.name)&&!i.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities.editing.supportsUploadWithItemId&&i.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof i.data){const e=s(i.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}async function f(e){const t=e.addFeatures,a=e.updateFeatures,r=t.concat(a).map((e=>e.geometry)),i=await d(r),s=t.length,n=a.length;return i.slice(0,s).forEach(((t,a)=>e.addFeatures[a].geometry=t)),i.slice(s,s+n).forEach(((t,a)=>e.updateFeatures[a].geometry=t)),e}function g(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}export{l as applyEdits};\n"],"names":["$8TSCy","parcelRequire","$5722edd8ec620a72$var$n","e1","applyEdits","$5722edd8ec620a72$export$e4d6f33e09e1fc33","e2","t1","a1","$5722edd8ec620a72$var$_l","apply","this","arguments","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","i1","s1","d2","n2","l1","ref","d1","n1","u1","p1","_args","length","edits","result","Promise","e3","t2","emit","$5722edd8ec620a72$var$o","_ctx","sent","results","addedFeatures","e4","filter","e5","error","map","$flPLJ","clone","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","editedFeatureResults","editedFeatures","t0","e6","t3","r1","i2","$5722edd8ec620a72$var$_o","s2","d3","load","reject","$kyj08","default","concat","type","layer","editingEnabled","$5722edd8ec620a72$var$u","options","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","e7","r2","i3","$5722edd8ec620a72$var$_u","s3","d4","n3","l2","o1","capabilities","data","isVersioned","gdbVersion","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsGlobalId","globalIdUsed","objectSpread","returnServiceEditsOption","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","$d2yMj","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","$5722edd8ec620a72$var$g","forEach","t4","$5722edd8ec620a72$var$c","t5","$5722edd8ec620a72$var$m","t6","$5722edd8ec620a72$var$h","t7","$5722edd8ec620a72$var$y","t8","$5722edd8ec620a72$var$f","$5722edd8ec620a72$var$p","e8","t9","r3","attributes","globalIdField","globalId","$7qybv","isSome","geometry","hasZ","supportsZ","hasM","supportsM","e9","t10","a2","e10","t11","a3","e11","t12","r4","supportsGeometryUpdate","e12","t13","r5","feature","i4","attachment","uploadId","File","name","supportsUploadWithItemId","_$e","$kYueh","dataComponents","isBase64","e13","$5722edd8ec620a72$var$_f","t14","a4","r6","i5","s4","n4","e14","$5On35","normalizeCentralMeridian","slice","t15","a5","t16","a6","t17","a7","$bsvXr"],"version":3,"file":"editingSupport.e59a7fc3.js.map"}