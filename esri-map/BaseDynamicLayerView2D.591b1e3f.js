function e(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("9PPB2",(function(i,r){var s;s=i.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(i.exports,"default",(function(){return g}));var n=t("j6uz9"),a=t("6TszD"),o=t("lHg4e"),h=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var l=t("qA6zg"),u=t("jHR2e"),c=t("35vaU"),d=t("b4rqw"),p=t("YRjSC"),v=t("aDxLR");const f=a.default.getLogger("esri.views.2d.layers.BaseDynamicLayerView2D");let x=class extends((0,v.RefreshableLayerView)((0,c.LayerView2DMixin)(p.default))){update(e){this.strategy.update(e).catch((e=>{(0,o.isAbortError)(e)||f.error(e)})),this.notifyChange("updating")}attach(){this._bitmapContainer=new(0,u.BitmapContainer),this.container.addChild(this._bitmapContainer),this.strategy=new(0,d.default)({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}detach(){this.strategy.destroy(),this.strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}fetchBitmapData(e,t,i){return this.layer.fetchImage(e,t,i)}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}};(0,n._)([(0,h.property)()],x.prototype,"strategy",void 0),(0,n._)([(0,h.property)()],x.prototype,"updating",void 0),x=(0,n._)([(0,l.subclass)("esri.views.2d.layers.BaseDynamicLayerView2D")],x);const g=x})),t.register("jHR2e",(function(i,r){e(i.exports,"BitmapContainer",(function(){return o}));var s=t("4ZNdX"),n=t("eyQUy"),a=t("eqJSJ");class o extends a.default{get requiresDedicatedFBO(){return this.children.some((e=>"additive"===e.blendFunction))}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[s.brushes.bitmap],target:()=>this.children,drawPhase:n.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(e),t]}}})),t.register("b4rqw",(function(i,r){e(i.exports,"default",(function(){return w}));var s=t("j6uz9"),n=t("27btt"),a=t("lHg4e"),o=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var h=t("qA6zg"),l=t("2WnyR"),u=t("19dbe"),c=t("fau59"),d=t("hCr3P"),p=t("gZfhh"),v=t("e4M5Q"),f=t("9foJ7"),x=t("fdGvv");const g=(0,u.create)(),y=[0,0],m=new(0,x.default)(0,0,0,0),_=2048,S=2048,b=!1,V=!1,R=!1;let T=class extends n.default{destroy(){this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t),t.invalidateTexture(),t.requestRender()}}async _export(e,t,i,r,s,n){const a=await this.fetchSource(e,Math.floor(t*s),Math.floor(i*s),{rotation:r,pixelRatio:s,signal:n}),o=new(0,v.Bitmap)(a,"additive");return o.x=e.xmin,o.y=e.ymax,o.resolution=e.width/t,o.rotation=r,o.pixelRatio=s,o}async _singleExport(e,t,i,r,s,n,a){(0,p.getBBox)(g,i,r,t);const o=new(0,l.default)(g[0],g[1],g[2],g[3],e.spatialReference);return[await this._export(o,t[0],t[1],s,n,a)]}_tiledExport(e,t,i,r,s){const n=d.default.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),a=new(0,f.default)(n),o=a.getTileCoverage(e);if(!o)return null;const h=[];return o.forEach(((n,o,u,c)=>{m.set(n,o,u,c),a.getTileBounds(g,m);const d=new(0,l.default)(g[0],g[1],g[2],g[3],e.spatialReference);h.push(this._export(d,t,t,i,r,s))})),Promise.all(h)}constructor(e){super(e),this._imagePromise=null,this.bitmaps=[],this.hidpi=R,this.imageMaxWidth=_,this.imageMaxHeight=S,this.imageRotationSupported=b,this.imageNormalizationSupported=V,this.update=(0,a.debounce)((async(e,t)=>{if(!e.stationary||this.destroyed)return null;const i=e.state,r=(0,c.getInfo)(i.spatialReference),s=this.hidpi?e.pixelRatio:1,n=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0];n?(y[0]=i.worldScreenWidth,y[1]=i.size[1]):this.imageRotationSupported?(y[0]=i.size[0],y[1]=i.size[1]):(0,p.getOuterSize)(y,i);const a=Math.floor(y[0]*s)>this.imageMaxWidth||Math.floor(y[1]*s)>this.imageMaxHeight,o=r&&(i.extent.xmin<r.valid[0]||i.extent.xmax>r.valid[1]),h=!this.imageNormalizationSupported&&o,l=!a&&!h,u=this.imageRotationSupported?i.rotation:0;if(l){const e=n?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,y,e,i.resolution,u,s,t)}else{let e=Math.min(this.imageMaxWidth,this.imageMaxHeight);h&&(e=Math.min(i.worldScreenWidth,e)),this._imagePromise=this._tiledExport(i,e,u,s,t)}return this._imagePromise.then((async e=>{if(this._imagePromise=null,!this.destroyed){this.bitmaps=null!=e?e:[];for(const t of this.container.children)e.includes(t)||t.fadeOut().then((()=>{t.remove()}));for(const t of e)this.container.addChild(t),t.fadeIn()}})).catch((e=>{throw this._imagePromise=null,e}))}),5e3)}};(0,s._)([(0,o.property)()],T.prototype,"_imagePromise",void 0),(0,s._)([(0,o.property)()],T.prototype,"bitmaps",void 0),(0,s._)([(0,o.property)()],T.prototype,"container",void 0),(0,s._)([(0,o.property)()],T.prototype,"fetchSource",void 0),(0,s._)([(0,o.property)()],T.prototype,"hidpi",void 0),(0,s._)([(0,o.property)()],T.prototype,"imageMaxWidth",void 0),(0,s._)([(0,o.property)()],T.prototype,"imageMaxHeight",void 0),(0,s._)([(0,o.property)()],T.prototype,"imageRotationSupported",void 0),(0,s._)([(0,o.property)()],T.prototype,"imageNormalizationSupported",void 0),(0,s._)([(0,o.property)()],T.prototype,"requestUpdate",void 0),(0,s._)([(0,o.property)()],T.prototype,"updating",null),T=(0,s._)([(0,h.subclass)("esri.views.2d.layers.support.ExportStrategy")],T);const w=T})),t.register("gZfhh",(function(t,i){e(t.exports,"getOuterSize",(function(){return s})),e(t.exports,"getBBox",(function(){return n}));const r=Math.PI/180;function s(e,t){const i=t.rotation*r,s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),[a,o]=t.size;return e[0]=Math.round(o*n+a*s),e[1]=Math.round(o*s+a*n),e}function n(e,t,i,r){const[s,n]=t,[a,o]=r,h=.5*i;return e[0]=s-h*a,e[1]=n-h*o,e[2]=s+h*a,e[3]=n+h*o,e}})),t.register("e4M5Q",(function(i,r){e(i.exports,"Bitmap",(function(){return p}));var s=t("1CpCt"),n=t("52822"),a=t("jsolS"),o=t("gLni9"),h=t("5aS5k"),l=t("gOLoq"),u=t("l3QXd"),c=t("2HKUi");function d(e,t,i){const r={target:u.TextureType.TEXTURE_2D,pixelFormat:u.PixelFormat.RGBA,internalFormat:u.PixelFormat.RGBA,dataType:u.PixelType.UNSIGNED_BYTE,wrapMode:u.TextureWrapMode.CLAMP_TO_EDGE};return t&&i&&(r.width=t,r.height=i),new(0,c.Texture)(e,r)}class p extends h.DisplayObject{destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,a.c)()}}setTransform(e){const t=(0,n.b)(this.transforms.dvs),[i,r]=e.toScreenNoRotation([0,0],[this.x,this.y]),s=this.resolution/this.pixelRatio/e.resolution,a=s*this.width,h=s*this.height,l=Math.PI*this.rotation/180;(0,n.c)(t,t,(0,o.f)(i,r)),(0,n.c)(t,t,(0,o.f)(a/2,h/2)),(0,n.r)(t,t,-l),(0,n.c)(t,t,(0,o.f)(-a/2,-h/2)),(0,n.j)(t,t,(0,o.f)(a,h)),(0,n.m)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,t){this._texture&&e.bindTexture(this._texture,t)}updateTexture(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=d(e,this.sourceWidth,this.sourceHeight):this._texture=d(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(n=i)&&"render"in n)if(i instanceof l.default){const e=i.getRenderedRasterPixels();this._texture.setData((0,s.isSome)(e)?e.renderedRasterPixels:null)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(i));else(r=i)&&!("render"in r)&&this._texture.setData(i);this.ready()}else this._texture.setData(null);var r,n}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}constructor(e=null,t,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}}})),t.register("5aS5k",(function(i,r){e(i.exports,"DisplayObject",(function(){return l}));var s=t("cS4u3"),n=t("5HTPH"),a=t("1CpCt"),o=t("lHg4e");const h=1/(0,n.default)("mapview-transitions-duration");class l extends s.default{get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,a.isNone)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,o.createResolver)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,o.createResolver)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const r=e*h;this.computedOpacity=i>t?Math.max(t,i-r):Math.min(t,i+r),this.computedVisible=this.computedOpacity>0;const s=t===this.computedOpacity;this.inFadeTransition=!s,s||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}}})),t.register("gOLoq",(function(i,r){e(i.exports,"default",(function(){return n}));var s=t("1CpCt");class n{get width(){return(0,s.isSome)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,s.isSome)(this.pixelBlock)?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if((0,s.isNone)(t))return;const i=this.filter({pixelBlock:t});if((0,s.isNone)(i.pixelBlock))return;const r=i.pixelBlock.getAsRGBA(),n=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);n.data.set(r),e.putImageData(n,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return(0,s.isNone)(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}}})),t.register("aDxLR",(function(i,r){e(i.exports,"RefreshableLayerView",(function(){return u}));var s=t("j6uz9"),n=t("6TszD"),a=t("lHg4e"),o=t("cc23H"),h=t("hTI69");t("aX9sh"),t("5HTPH"),t("gHCNy");var l=t("qA6zg");const u=e=>{let t=class extends e{initialize(){this.handles.add((0,o.on)((()=>this.layer),"refresh",(e=>{this.doRefresh(e.dataChanged).catch((e=>{(0,a.isAbortError)(e)||n.default.getLogger(this.declaredClass).error(e)}))})),"RefreshableLayerView")}};return(0,s._)([(0,h.property)()],t.prototype,"layer",void 0),t=(0,s._)([(0,l.subclass)("esri.layers.mixins.RefreshableLayerView")],t),t}})),t.register("3mbeV",(function(t,i){e(t.exports,"u32to4Xu8",(function(){return s})),e(t.exports,"i1616to32",(function(){return n})),e(t.exports,"i8888to32",(function(){return a}));const r=new Float32Array(1);new Uint32Array(r.buffer);function s(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function n(e,t){return 65535&e|t<<16}function a(e,t,i,r){return 255&e|(255&t)<<8|(255&i)<<16|r<<24}})),t.register("bVIMy",(function(t,i){var r,s,n,a;function o(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function h(e){switch(e){case"top":return s.Top;case"middle":return s.Center;case"baseline":return s.Baseline;case"bottom":return s.Bottom}}function l(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,s.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,s.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,s.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,s.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,s.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,s.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,s.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,s.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,s.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,s.Center]}}function u(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function c(e){switch(e){case s.Top:return 1;case s.Center:return 0;case s.Bottom:case s.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function d(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function p(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}e(t.exports,"HAlign",(function(){return r})),e(t.exports,"VAlign",(function(){return s})),e(t.exports,"getXAnchorDirection",(function(){return o})),e(t.exports,"getYAnchorDirection",(function(){return h})),e(t.exports,"getAlignmentFromPlacement",(function(){return l})),e(t.exports,"getXDirection",(function(){return u})),e(t.exports,"getYDirection",(function(){return c})),e(t.exports,"getJustification",(function(){return d})),e(t.exports,"isMapAligned",(function(){return p})),(a=r||(r={}))[a.Left=-1]="Left",a[a.Center=0]="Center",a[a.Right=1]="Right",(n=s||(s={}))[n.Top=1]="Top",n[n.Center=0]="Center",n[n.Bottom=-1]="Bottom",n[n.Baseline=2]="Baseline"})),t.register("eDdav",(function(i,r){e(i.exports,"createMaterialKey",(function(){return o})),e(i.exports,"FillMaterialKey",(function(){return p})),e(i.exports,"LineMaterialKey",(function(){return f})),e(i.exports,"MarkerMaterialKey",(function(){return v})),e(i.exports,"TextMaterialKey",(function(){return x})),e(i.exports,"LabelMaterialKey",(function(){return g})),e(i.exports,"MaterialKeyBase",(function(){return h}));var s=t("bPmsI"),n=t("bVIMy"),a=t("eyQUy");function o(e,t){switch(e){case a.WGLGeometryType.FILL:return p.from(t);case a.WGLGeometryType.LINE:return f.from(t);case a.WGLGeometryType.MARKER:return v.from(t);case a.WGLGeometryType.TEXT:return x.from(t);case a.WGLGeometryType.LABEL:return g.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}class h{static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get geometryTypeString(){switch(this.geometryType){case a.WGLGeometryType.FILL:return"fill";case a.WGLGeometryType.MARKER:return"marker";case a.WGLGeometryType.LINE:return"line";case a.WGLGeometryType.TEXT:return"text";case a.WGLGeometryType.LABEL:return"label";default:throw new(0,s.default)(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let r=t,s=0;r<i;r++,s++)this.setBit(r,0!=(e&1<<s))}bits(e,t){let i=0;for(let r=e,s=0;r<t;r++,s++)i|=this.bit(r)<<s;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}constructor(e){this._data=0,this._data=e}}h.shared=new h(0);const l=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=function(e,t){const i=a.WGLVVFlag.SIZE_FIELD_STOPS|a.WGLVVFlag.SIZE_MINMAX_VALUE|a.WGLVVFlag.SIZE_SCALE_STOPS|a.WGLVVFlag.SIZE_UNIT_VALUE,r=(e&(a.WGLVVTarget.FIELD_TARGETS_OUTLINE|a.WGLVVTarget.MINMAX_TARGETS_OUTLINE|a.WGLVVTarget.SCALE_TARGETS_OUTLINE|a.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?i&r:i&~r}(e,t)&e;this.vvSizeMinMaxValue=!!(i&a.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&a.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&a.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&a.WGLVVFlag.SIZE_SCALE_STOPS)}},u=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&a.WGLVVFlag.ROTATION)}},c=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&a.WGLVVFlag.COLOR)}},d=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&a.WGLVVFlag.OPACITY)}};class p extends(c(d(l(h)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(15)}set dotDensity(e){this.setBit(15,e)}get simple(){return!!this.bit(22)}set simple(e){this.setBit(22,e)}get outlinedFill(){return!!this.bit(21)}set outlinedFill(e){this.setBit(21,e)}}p.shared=new p(0);class v extends(c(d(u(l(h))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}v.shared=new v(0);class f extends(c(d(l(h)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}f.shared=new f(0);class x extends(c(d(u(l(h))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}x.shared=new x(0);class g extends(l(h)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.WGLGeometryType.LABEL,t.setVV(e.vvFlags,e),t.mapAligned=(0,n.isMapAligned)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0)})),t.register("c4cvq",(function(t,i){e(t.exports,"radToByte",(function(){return o})),e(t.exports,"degToByte",(function(){return h})),e(t.exports,"log2",(function(){return l})),e(t.exports,"between",(function(){return u}));Number.POSITIVE_INFINITY;const r=Math.PI,s=128/r,n=1/Math.LN2;function a(e,t){return(e%=t)>=0?e:e+t}function o(e){return a(e*s,256)}function h(e){return a(.7111111111111111*e,256)}function l(e){return Math.log(e)*n}function u(e,t,i){return e>=t&&e<=i||e>=i&&e<=t}})),t.register("3Icya",(function(t,i){e(t.exports,"e",(function(){return a}));var r,s,n={exports:{}};r=n,void 0!==(s=function(){function e(e,s,n){n=n||2;var a,o,l,c,d,v,f,x=s&&s.length,g=x?s[0]*n:e.length,y=t(e,0,g,n,!0),m=[];if(!y||y.next===y.prev)return m;if(x&&(y=function(e,r,s,n){var a,o,l,c=[];for(a=0,o=r.length;a<o;a++)(l=t(e,r[a]*n,a<o-1?r[a+1]*n:e.length,n,!1))===l.next&&(l.steiner=!0),c.push(p(l));for(c.sort(h),a=0;a<c.length;a++)s=i(s=u(c[a],s),s.next);return s}(e,s,y,n)),e.length>80*n){a=l=e[0],o=c=e[1];for(var _=n;_<g;_+=n)(d=e[_])<a&&(a=d),(v=e[_+1])<o&&(o=v),d>l&&(l=d),v>c&&(c=v);f=0!==(f=Math.max(l-a,c-o))?1/f:0}return r(y,m,n,a,o,f),m}function t(e,t,i,r,s){var n,a;if(s===T(e,t,i,r)>0)for(n=t;n<i;n+=r)a=b(n,e[n],e[n+1],a);else for(n=i-r;n>=t;n-=r)a=b(n,e[n],e[n+1],a);if(a&&x(a,a.next)){var o=a.next;V(a),a=o}return a}function i(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!x(r,r.next)&&0!==f(r.prev,r,r.next))r=r.next;else{var s=r.prev;if(V(r),(r=t=s)===r.next)break;i=!0}}while(i||r!==t);return t}function r(e,t,h,l,u,c,p){if(e){!p&&c&&function(e,t,i,r){var s=e;do{null===s.z&&(s.z=d(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,i,r,s,n,a,o,h,l=1;do{for(i=e,e=null,n=null,a=0;i;){for(a++,r=i,o=0,t=0;t<l&&(o++,r=r.nextZ);t++);for(h=l;o>0||h>0&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,h--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;i=r}n.nextZ=null,l*=2}while(a>1)}(s)}(e,l,u,c);for(var v,f,x=e;e.prev!==e.next;)if(v=e.prev,f=e.next,c?n(e,l,u,c):s(e))t.push(v.i/h),t.push(e.i/h),t.push(f.i/h),V(e),e=f.next,x=f.next;else if((e=f)===x){p?1===p?r(e=a(i(e),t,h),t,h,l,u,c,2):2===p&&o(e,t,h,l,u,c):r(i(e),t,h,l,u,c,1);break}}}function s(e){var t=e.prev,i=e,r=e.next;if(f(t,i,r)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(v(t.x,t.y,i.x,i.y,r.x,r.y,s.x,s.y)&&f(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function n(e,t,i,r){var s=e.prev,n=e,a=e.next;if(f(s,n,a)>=0)return!1;for(var o=s.x<n.x?s.x<a.x?s.x:a.x:n.x<a.x?n.x:a.x,h=s.y<n.y?s.y<a.y?s.y:a.y:n.y<a.y?n.y:a.y,l=s.x>n.x?s.x>a.x?s.x:a.x:n.x>a.x?n.x:a.x,u=s.y>n.y?s.y>a.y?s.y:a.y:n.y>a.y?n.y:a.y,c=d(o,h,t,i,r),p=d(l,u,t,i,r),x=e.prevZ,g=e.nextZ;x&&x.z>=c&&g&&g.z<=p;){if(x!==e.prev&&x!==e.next&&v(s.x,s.y,n.x,n.y,a.x,a.y,x.x,x.y)&&f(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,g!==e.prev&&g!==e.next&&v(s.x,s.y,n.x,n.y,a.x,a.y,g.x,g.y)&&f(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;x&&x.z>=c;){if(x!==e.prev&&x!==e.next&&v(s.x,s.y,n.x,n.y,a.x,a.y,x.x,x.y)&&f(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;g&&g.z<=p;){if(g!==e.prev&&g!==e.next&&v(s.x,s.y,n.x,n.y,a.x,a.y,g.x,g.y)&&f(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function a(e,t,r){var s=e;do{var n=s.prev,a=s.next.next;!x(n,a)&&g(n,s,s.next,a)&&_(n,a)&&_(a,n)&&(t.push(n.i/r),t.push(s.i/r),t.push(a.i/r),V(s),V(s.next),s=e=a),s=s.next}while(s!==e);return i(s)}function o(e,t,s,n,a,o){var h,l,u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&(l=c,(h=u).next.i!==l.i&&h.prev.i!==l.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&g(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(h,l)&&(_(h,l)&&_(l,h)&&function(e,t){var i=e,r=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(h,l)&&(f(h.prev,h,l.prev)||f(h,l.prev,l))||x(h,l)&&f(h.prev,h,h.next)>0&&f(l.prev,l,l.next)>0))){var d=S(u,c);return u=i(u,u.next),d=i(d,d.next),r(u,t,s,n,a,o),void r(d,t,s,n,a,o)}c=c.next}u=u.next}while(u!==e)}function h(e,t){return e.x-t.x}function l(e){if(e.next.prev===e)return e;let t=e;for(;;){const i=t.next;if(i.prev===t||i===t||i===e)break;t=i}return t}function u(e,t){var r=function(e,t){var i,r=t,s=e.x,n=e.y,a=-1/0;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var o=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=s&&o>a){if(a=o,o===s){if(n===r.y)return r;if(n===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(s===a)return i;var h,l=i,u=i.x,d=i.y,p=1/0;r=i;do{s>=r.x&&r.x>=u&&s!==r.x&&v(n<d?s:a,n,u,d,n<d?a:s,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(s-r.x),_(r,e)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,p=h)),r=r.next}while(r!==l);return i}(e,t);if(!r)return t;var s=S(r,e),n=i(r,r.next);let a=l(s);return i(a,a.next),n=l(n),l(t===r?n:t)}function c(e,t){return f(e.prev,e,t.prev)<0&&f(t.next,e,e.next)<0}function d(e,t,i,r,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function v(e,t,i,r,s,n,a,o){return(s-a)*(t-o)-(e-a)*(n-o)>=0&&(e-a)*(r-o)-(i-a)*(t-o)>=0&&(i-a)*(n-o)-(s-a)*(r-o)>=0}function f(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,i,r){var s=m(f(e,t,i)),n=m(f(e,t,r)),a=m(f(i,r,e)),o=m(f(i,r,t));return s!==n&&a!==o||!(0!==s||!y(e,i,t))||!(0!==n||!y(e,r,t))||!(0!==a||!y(i,e,r))||!(0!==o||!y(i,t,r))}function y(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function m(e){return e>0?1:e<0?-1:0}function _(e,t){return f(e.prev,e,e.next)<0?f(e,t,e.next)>=0&&f(e,e.prev,t)>=0:f(e,t,e.prev)<0||f(e,e.next,t)<0}function S(e,t){var i=new R(e.i,e.x,e.y),r=new R(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function b(e,t,i,r){var s=new R(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function V(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,i,r){for(var s=0,n=t,a=i-r;n<i;n+=r)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}return e.deviation=function(e,t,i,r){var s=t&&t.length,n=s?t[0]*i:e.length,a=Math.abs(T(e,0,n,i));if(s)for(var o=0,h=t.length;o<h;o++){var l=t[o]*i,u=o<h-1?t[o+1]*i:e.length;a-=Math.abs(T(e,l,u,i))}var c=0;for(o=0;o<r.length;o+=3){var d=r[o]*i,p=r[o+1]*i,v=r[o+2]*i;c+=Math.abs((e[d]-e[v])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[v+1]-e[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)i.vertices.push(e[s][n][a]);s>0&&(r+=e[s-1].length,i.holes.push(r))}return i},e}())&&(r.exports=s);const a=n.exports})),t.register("iqtPh",(function(t,i){e(t.exports,"DECLUTTER_TILES",(function(){return r})),e(t.exports,"COLLISION_GRID_CELL_SIZE",(function(){return s})),e(t.exports,"DECLUTTER_BUDGET",(function(){return n})),e(t.exports,"FADE_DURATION",(function(){return a}));const r=!0,s=32,n=1.5,a=200})),t.register("jrPhy",(function(i,r){e(i.exports,"Container",(function(){return o}));var s=t("jsolS"),n=t("coJUt"),a=t("5aS5k");class o extends a.DisplayObject{get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new(0,n.EffectView)),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:(0,s.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}}}));
//# sourceMappingURL=BaseDynamicLayerView2D.591b1e3f.js.map
