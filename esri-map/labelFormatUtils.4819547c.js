function e(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("9koH3",(function(t,n){e(t.exports,"createLabelFunction",(function(){return g})),e(t.exports,"formatField",(function(){return b}));var a=r("bPmsI"),o=r("6TszD"),i=r("eTz6p"),l=r("39Czw"),u=r("15IfA"),s=r("3BOKS"),c=r("QiKdE");const f=o.default.getLogger("esri.layers.support.labelFormatUtils"),d={type:"simple",evaluate:()=>null},p={getAttribute:(e,r)=>e.field(r)};async function g(e,t,n){if(!e||!e.symbol)return d;const o=e.where,i=(0,s.getLabelExpression)(e),l=o?await r("h8EXn"):null;let u;if("arcade"===i.type){const e=await(0,c.createLabelExpression)(i.expression,n,t);u={type:"arcade",evaluate(r){try{const t=e.evaluate({$feature:"attributes"in r?e.repurposeFeature(r):r});if(null!=t)return t.toString()}catch(e){f.error(new(0,a.default)("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:r,expression:i}))}return null},needsHydrationToEvaluate:()=>null==(0,s.getSingleFieldArcadeExpression)(i.expression)}}else u={type:"simple",evaluate:e=>i.expression.replace(/{[^}]*}/g,(r=>{const n=r.slice(1,-1),a=t.get(n);if(!a)return r;let o=null;return"attributes"in e?e&&e.attributes&&(o=e.attributes[a.name]):o=e.field(a.name),null==o?"":b(o,a)}))};if(o){let e;try{e=l.WhereClause.create(o,t)}catch(e){return f.error(new(0,a.default)("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:o,error:e})),d}const r=u.evaluate;u.evaluate=t=>{const n="attributes"in t?void 0:p;try{if(e.testFeature(t,n))return r(t)}catch(e){f.error(new(0,a.default)("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:o,feature:t,error:e}))}return null}}return u}function b(e,r){if(null==e)return"";const t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if("range"===t.type){const r=+e,n="range"in t?t.range[0]:t.minValue,a="range"in t?t.range[1]:t.maxValue;if(n<=r&&r<=a)return t.name}let n=e;return"date"===r.type||"esriFieldTypeDate"===r.type?n=(0,i.formatDate)(n,(0,i.convertDateFormatToIntlOptions)("short-date")):(0,u.isNumericField)(r)&&(n=(0,l.formatNumber)(+n)),n||""}})),r.register("h8EXn",(function(e,t){e.exports=import("./"+r("kyEFX").resolve("k1oiq")).then((()=>r("jKVXg")))}));
//# sourceMappingURL=labelFormatUtils.4819547c.js.map
