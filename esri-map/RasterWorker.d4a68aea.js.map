{"mappings":"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","sources":["node_modules/@arcgis/core/layers/support/RasterWorker.js","node_modules/@arcgis/core/renderers/support/rasterRendererChecks.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import r from\"../../geometry/support/GeographicTransformation.js\";import e from\"./PixelBlock.js\";import{decode as t}from\"./rasterFormats/RasterCodec.js\";import{split as s,mosaic as o,approximateTransform as i,getLocalArithmeticNorthRotations as n}from\"./rasterFunctions/pixelUtils.js\";import{create as a}from\"./rasterFunctions/rasterFunctionHelper.js\";import{requirePE as l,load as m,getProjectionOffsetGrid as c}from\"./rasterFunctions/rasterProjectionHelper.js\";import{computeStatisticsHistograms as f,estimateStatisticsHistograms as p}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as u,convertToLocalDirections as S}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as d}from\"./rasterTransforms/utils.js\";import y from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as x}from\"../../views/2d/engine/flow/dataUtils.js\";import h from\"../../geometry/Extent.js\";import O from\"../../geometry/Point.js\";class N{convertVectorFieldData(r){const t=e.fromJSON(r.pixelBlock),s=u(t,r.type);return Promise.resolve(null!=s?s.toJSON():null)}computeStatisticsHistograms(r){const t=e.fromJSON(r.pixelBlock),s=f(t);return Promise.resolve(s)}async decode(r){const e=await t(r.data,r.options);return e&&e.toJSON()}symbolize(r){r.pixelBlock=e.fromJSON(r.pixelBlock),r.extent=r.extent?h.fromJSON(r.extent):null;const t=this.symbolizer.symbolize(r);return Promise.resolve(null!=t?t.toJSON():null)}async updateSymbolizer(r){this.symbolizer=y.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)}async updateRasterFunction(r){this.rasterFunction=a(r.rasterFunctionJSON)}async process(r){const t=this.rasterFunction.process({extent:h.fromJSON(r.extent),primaryPixelBlocks:r.primaryPixelBlocks.map((r=>null!=r?e.fromJSON(r):null)),primaryPixelSizes:r.primaryPixelSizes?.map((r=>null!=r?O.fromJSON(r):null)),primaryRasterIds:r.primaryRasterIds});return null!=t?t.toJSON():null}stretch(r){const t=this.symbolizer.simpleStretch(e.fromJSON(r.srcPixelBlock),r.stretchParams);return Promise.resolve(null!=t&&t.toJSON())}estimateStatisticsHistograms(r){const t=p(e.fromJSON(r.srcPixelBlock));return Promise.resolve(t)}split(r){const t=s(e.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel);return t&&t.forEach(((r,e)=>{t.set(e,r?.toJSON())})),Promise.resolve(t)}async mosaicAndTransform(r){const t=r.srcPixelBlocks.map((r=>r?new e(r):null)),s=o(t,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});let a,l=s;return r.coefs&&(l=i(s,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(a=n(r.destDimension,r.gcsGrid),l=S(l,r.isUV?\"vector-uv\":\"vector-magdir\",a)),{pixelBlock:l?.toJSON(),localNorthDirections:a}}async createFlowMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:s,indexData:o}=await x(r.meshType,r.simulationSettings,t,e.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(e){const t=h.fromJSON(e.projectedExtent),s=h.fromJSON(e.srcBufferExtent);let o=null;e.datumTransformationSteps&&(o=new r({steps:e.datumTransformationSteps})),(e.includeGCSGrid||l(t.spatialReference,s.spatialReference,o))&&await m();const i=e.rasterTransform?d(e.rasterTransform):null;return c({...e,projectedExtent:t,srcBufferExtent:s,datumTransformation:o,rasterTransform:i})}}export{N as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction n(n){return[\"u8\",\"s8\"].includes(n.pixelType)&&null!=n.statistics?.[0]?.min&&null!=n.statistics[0]?.max&&1===n.bandCount}function t(t,e){const{attributeTable:u,bandCount:r}=t;if(null==u&&n(t))return!0;if(null==u||r>1)return!1;if(e){if(null==u.fields.find((n=>n.name.toLowerCase()===e.toLowerCase())))return!1}return!0}function e(n){const{bandCount:t,dataType:e,pixelType:u}=n;return\"elevation\"===e||\"generic\"===e&&1===t&&(\"s16\"===u||\"s32\"===u||\"f32\"===u||\"f64\"===u)}function u(n,t=!1){const{bandCount:e,colormap:u,pixelType:r}=n;return 1===e&&(!!u?.length||!t&&\"u8\"===r)}function r(n,t=!1){const{attributeTable:e,bandCount:u}=n;return 1===u&&(!t||null!=e||null!=n.histograms)}function o(n){const{dataType:t}=n;return\"vector-uv\"===t||\"vector-magdir\"===t}function i(n){const{dataType:t}=n;return\"vector-uv\"===t||\"vector-magdir\"===t}export{r as isClassBreaksSupported,u as isColormapRendererSupported,i as isFlowRendererSupported,e as isShadedReliefRendererSupported,n as isSingleBand8BitRasterWithStats,t as isUVRendererSupported,o as isVectorFieldRendererSupported};\n"],"names":["parcelRequire","$32d683f72e045efd$export$2e2bcd8739ae039","convertVectorFieldData","r","t","$idX6c","default","fromJSON","pixelBlock","s","$2hwKJ","type","Promise","resolve","toJSON","computeStatisticsHistograms","$zMMQr","async","e","$2G55A","decode","data","options","symbolize","extent","$gINRd","this","symbolizer","ref","$frUQM","symbolizerJSON","histograms","rendererJSON","rasterFunction","$3KY4t","create","rasterFunctionJSON","process","primaryPixelBlocks","map","primaryPixelSizes","$d1Fqh","primaryRasterIds","stretch","simpleStretch","srcPixelBlock","stretchParams","estimateStatisticsHistograms","split","$alctY","tileSize","maximumPyramidLevel","forEach","set","srcPixelBlocks","mosaic","srcMosaicSize","blockWidths","alignmentInfo","clipOffset","clipSize","a","l","coefs","approximateTransform","destDimension","sampleSpacing","interpolation","projectDirections","gcsGrid","getLocalArithmeticNorthRotations","convertToLocalDirections","isUV","localNorthDirections","Float32Array","flowData","buffer","mask","Uint8Array","maskBuffer","width","height","vertexData","indexData","o","$k8DEI","createFlowMesh","meshType","simulationSettings","signal","result","vertexBuffer","indexBuffer","transferList","projectedExtent","srcBufferExtent","datumTransformationSteps","$8fZmy","steps","includeGCSGrid","$jxAFe","requirePE","spatialReference","load","i","rasterTransform","$gzPy2","readTransform","getProjectionOffsetGrid","datumTransformation","$b16510e42ad164b4$export$7ae2335564cbc5a5","attributeTable","u","bandCount","n","includes","pixelType","statistics","ref1","min","ref2","max","fields","find","name","toLowerCase","$b16510e42ad164b4$export$e584c8e089975b22","dataType","$b16510e42ad164b4$export$9786ab074126fe06","colormap","length","$b16510e42ad164b4$export$a36eab7c09a04daf","$b16510e42ad164b4$export$a6ba38da0f460a97","$b16510e42ad164b4$export$bf76c8362673879d"],"version":3,"file":"RasterWorker.d4a68aea.js.map"}