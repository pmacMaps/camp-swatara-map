function e(e,r,a,t){Object.defineProperty(e,r,{get:a,set:t,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;r.register("gAlR3",(function(a,t){e(a.exports,"populateOperationalLayers",(function(){return u}));var n=r("26zvD");r("5HTPH");var o=r("lHg4e"),i=r("kNV68"),l=r("h7Mrf"),s=r("bZI6I"),y=r("3tlM3"),c=r("4ycBe");async function u(e,r,a){if(!r)return;const t=[];for(const e of r){const r=v(e,a);"GroupLayer"===e.layerType?t.push(T(r,e,a)):t.push(r)}const n=await(0,o.eachAlways)(t);for(const r of n)!r.value||a.filter&&!a.filter(r.value)||e.add(r.value)}const p={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer"},L={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},f={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",SubtypeGroupLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};async function v(e,r){return async function(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&g(r)&&await async function(e,r,a){const t=i.layerLookupMap.FeatureLayer,n=await t(),o=r.featureCollection,l=o.showLegend,s=o.layers.map(((t,o)=>{var i,s;const y=new n;y.read(t,a);const c={...a,ignoreDefaults:!0};return y.read({id:`${e.id}-sublayer-${o}`,visibility:null==(i=null==(s=r.visibleLayers)?void 0:s.includes(o))||i},c),null!=l&&y.read({showLegend:l},c),y}));e.layers.addMany(s)}(t,r,a.context),await(0,c.loadStyleRenderer)(t,a.context),t}(await async function(e,r){const a=r.context,t=function(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=d;break;case"ground":r=L;break;default:r=p}else switch(e.layerContainerType){case"basemap":r=S;break;case"tables":r=m;break;default:r=f}return r}(a);let n=e.layerType||e.type;!n&&r&&r.defaultLayerType&&(n=r.defaultLayerType);const o=t[n];let c=o?i.layerLookupMap[o]:i.layerLookupMap.UnknownLayer;if(I(e)){const r=null==a?void 0:a.portal;if(e.itemId){const a=new(0,l.default)({id:e.itemId,portal:r});await a.load();const t=(await(0,y.selectLayerClassPath)(a)).className||"UnknownLayer";c=i.layerLookupMap[t]}}else"ArcGISFeatureLayer"===n?(0,s.isMapNotesLayer)(e)?c=i.layerLookupMap.MapNotesLayer:(0,s.isRouteLayer)(e)?c=i.layerLookupMap.RouteLayer:g(e)&&(c=i.layerLookupMap.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?c=i.layerLookupMap.WMTSLayer:"WFS"===n&&"2.0.0"!==e.wfsInfo.version&&(c=i.layerLookupMap.UnsupportedLayer);return c()}(e,r),e,r)}function g(e){var r,a,t;return"ArcGISFeatureLayer"===e.layerType&&!I(e)&&(null!=(r=null==(a=e.featureCollection)||null==(t=a.layers)?void 0:t.length)?r:0)>1}function I(e){return"Feature Collection"===e.type}async function T(e,r,a){const t=new(0,n.default),o=u(t,Array.isArray(r.layers)?r.layers:[],a),i=await e;if(await o,"group"===i.type)return i.layers.addMany(t),i}})),r.register("kNV68",(function(a,t){e(a.exports,"layerLookupMap",(function(){return n}));const n={BingMapsLayer:async()=>(await r("bnPwL")).default,BuildingSceneLayer:async()=>(await r("9qw7n")).default,CSVLayer:async()=>(await r("cSSNo")).default,ElevationLayer:async()=>(await r("jVT1T")).default,FeatureLayer:async()=>(await r("aJz6v")).default,GroupLayer:async()=>(await r("jiLKM")).default,GeoRSSLayer:async()=>(await r("iJKsl")).default,GeoJSONLayer:async()=>(await r("cmds9")).default,ImageryLayer:async()=>(await r("6yTUN")).default,ImageryTileLayer:async()=>(await r("7Yqat")).default,IntegratedMeshLayer:async()=>(await r("fUU5a")).default,KMLLayer:async()=>(await r("eItwz")).default,MapImageLayer:async()=>(await r("2TOrI")).default,MapNotesLayer:async()=>(await r("12y9u")).default,OGCFeatureLayer:async()=>(await r("5YUGe")).default,OpenStreetMapLayer:async()=>(await r("a50gD")).default,PointCloudLayer:async()=>(await r("31oeA")).default,RouteLayer:async()=>(await r("4P330")).default,SceneLayer:async()=>(await r("34h1L")).default,StreamLayer:async()=>(await r("kWivs")).default,TileLayer:async()=>(await r("inxkO")).default,UnknownLayer:async()=>(await r("dZOHT")).default,UnsupportedLayer:async()=>(await r("dkCj2")).default,VectorTileLayer:async()=>(await r("10gGh")).default,VoxelLayer:async()=>(await r("esFMs")).default,WebTileLayer:async()=>(await r("jbcP5")).default,WFSLayer:async()=>(await r("aSi9V")).default,WMSLayer:async()=>(await r("c8WG0")).default,WMTSLayer:async()=>(await r("lbtBG")).default}})),r.register("bnPwL",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("b9hr7")).then((()=>r("3pzPG")))})),r.register("9qw7n",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("ek5ZZ")),import("./"+r("kyEFX").resolve("7MCPh"))]).then((()=>r("ymhNq")))})),r.register("cSSNo",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("bsXpj")).then((()=>r("crn3X")))})),r.register("jVT1T",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("dFa5l")).then((()=>r("lnTHI")))})),r.register("aJz6v",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("cpDMK")).then((()=>r("iaM5n")))})),r.register("jiLKM",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("jf0AH")).then((()=>r("juqKi")))})),r.register("iJKsl",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("8EeGG")).then((()=>r("9RJUc")))})),r.register("cmds9",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("iLaYo")).then((()=>r("6lALK")))})),r.register("6yTUN",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("gMekQ")),import("./"+r("kyEFX").resolve("lVU1e")),import("./"+r("kyEFX").resolve("cT1yD")),import("./"+r("kyEFX").resolve("em1F7")),import("./"+r("kyEFX").resolve("2QaHH"))]).then((()=>r("fgnlN")))})),r.register("7Yqat",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("gMekQ")),import("./"+r("kyEFX").resolve("lVU1e")),import("./"+r("kyEFX").resolve("cT1yD")),import("./"+r("kyEFX").resolve("em1F7")),import("./"+r("kyEFX").resolve("7wjLF")),import("./"+r("kyEFX").resolve("7icZl"))]).then((()=>r("bkuWn")))})),r.register("fUU5a",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("ek5ZZ")),import("./"+r("kyEFX").resolve("ffUTp"))]).then((()=>r("3o6zT")))})),r.register("eItwz",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("7isub")).then((()=>r("iQ0Vp")))})),r.register("2TOrI",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("kdwC4")).then((()=>r("8aVVa")))})),r.register("12y9u",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("2gcYg")).then((()=>r("9aIgb")))})),r.register("5YUGe",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("jQKJK")).then((()=>r("d4pGn")))})),r.register("a50gD",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("igXf8")).then((()=>r("8T7JM")))})),r.register("31oeA",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("ek5ZZ")),import("./"+r("kyEFX").resolve("kU2iF")),import("./"+r("kyEFX").resolve("d2da2"))]).then((()=>r("9qqTC")))})),r.register("4P330",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("iWJ3Q")),import("./"+r("kyEFX").resolve("fm839"))]).then((()=>r("3e6QC")))})),r.register("34h1L",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("ek5ZZ")),import("./"+r("kyEFX").resolve("hr3FR"))]).then((()=>r("lnDdW")))})),r.register("kWivs",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("3eC3d")).then((()=>r("icBo2")))})),r.register("inxkO",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("bnaj9")).then((()=>r("3E5zb")))})),r.register("dZOHT",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("6HSJT")).then((()=>r("9JOXz")))})),r.register("dkCj2",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("gRtb9")).then((()=>r("5Ul18")))})),r.register("10gGh",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("dXnrw")).then((()=>r("bidwN")))})),r.register("esFMs",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("ek5ZZ")),import("./"+r("kyEFX").resolve("iQYCI"))]).then((()=>r("95Vho")))})),r.register("jbcP5",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("f9Mdh")).then((()=>r("fPeKH")))})),r.register("aSi9V",(function(e,a){e.exports=Promise.all([import("./"+r("kyEFX").resolve("7G5Xn")),import("./"+r("kyEFX").resolve("ddebE"))]).then((()=>r("9xHtw")))})),r.register("c8WG0",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("2HlCV")).then((()=>r("g8shS")))})),r.register("lbtBG",(function(e,a){e.exports=import("./"+r("kyEFX").resolve("jvH1l")).then((()=>r("k4wVx")))})),r.register("bZI6I",(function(r,a){function t(e){return o(e,"notes")}function n(e){return o(e,"route")}function o(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}e(r.exports,"isMapNotesLayer",(function(){return t})),e(r.exports,"isRouteLayer",(function(){return n}))})),r.register("3tlM3",(function(a,t){e(a.exports,"fromItem",(function(){return c})),e(a.exports,"selectLayerClassPath",(function(){return u}));var n=r("bPmsI"),o=r("kNV68"),i=r("h7Mrf"),l=r("g5jKg"),s=r("g0k3L"),y=r("7TC5p");function c(e){return!e.portalItem||e.portalItem instanceof i.default||(e={...e,portalItem:new(0,i.default)(e.portalItem)}),(r=e.portalItem,r.load().then(u).then(p)).then((r=>{const a={portalItem:e.portalItem,...r.properties},t=r.constructor;return Promise.resolve(new t(a))}));var r}function u(e){switch(e.type){case"Map Service":return(a=e,(0,y.requestArcGISServiceJSON)(a.url).then((e=>e.tileInfo))).then((e=>e?{className:"TileLayer"}:{className:"MapImageLayer"}));case"Feature Service":return L(e).then((e=>{if("object"==typeof e){const r={};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}}));case"Feature Collection":return async function(e){if(await e.load(),(0,s.hasTypeKeyword)(e,"Map Notes"))return{className:"MapNotesLayer"};if((0,s.hasTypeKeyword)(e,"Route Layer"))return{className:"RouteLayer"};const r=await e.fetchData();return 1===(0,l.getNumLayersAndTables)(r)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return L(r=e).then((e=>{if("object"==typeof e){const a={};let t;if(null!=e.id?(a.layerId=e.id,t=`${r.url}/layers/${e.id}`):t=r.url,Array.isArray(r.typeKeywords)&&r.typeKeywords.length>0){const e={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const a of Object.keys(e))if(-1!==r.typeKeywords.indexOf(a))return{className:e[a]}}return(0,y.requestArcGISServiceJSON)(t).then((e=>{let r="SceneLayer";const t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&t[e.layerType]&&(r=t[e.layerType]),{className:r,properties:a}}))}return!1===e?(0,y.requestArcGISServiceJSON)(r.url).then((e=>"Voxel"===(null==e?void 0:e.layerType)?{className:"VoxelLayer"}:{className:"GroupLayer"})):{className:"GroupLayer"}}));case"Image Service":return async function(e){var r,a,t;await e.load();const n=null!=(r=null==(a=e.typeKeywords)?void 0:a.map((e=>e.toLowerCase())))?r:[];if(n.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(n.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const o=await e.fetchData(),i=null==o?void 0:o.layerType;return"ArcGISTiledImageServiceLayer"===i?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===i?{className:"ImageryLayer"}:"map"===(null==(t=(await(0,y.requestArcGISServiceJSON)(e.url)).cacheType)?void 0:t.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new(0,n.default)("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}var r,a}function p(e){return(0,o.layerLookupMap[e.className])().then((r=>({constructor:r,properties:e.properties})))}function L(e){return!e.url||e.url.match(/\/\d+$/)?Promise.resolve({}):e.load().then((()=>e.fetchData())).then((async r=>"Feature Service"===e.type?d(r=await(0,l.preprocessFSItemData)(r,e.url)):(0,l.getNumLayersAndTables)(r)>0?d(r):(0,y.requestArcGISServiceJSON)(e.url).then(d)))}function d(e){return 1===(0,l.getNumLayersAndTables)(e)&&{id:(0,l.getFirstLayerOrTableId)(e)}}})),r.register("g5jKg",(function(a,t){e(a.exports,"load",(function(){return c})),e(a.exports,"preprocessFSItemData",(function(){return d})),e(a.exports,"getNumLayersAndTables",(function(){return m})),e(a.exports,"getFirstLayerOrTableId",(function(){return f}));var n=r("bPmsI"),o=r("kNV68"),i=r("39WmQ"),l=r("7zHk6"),s=r("4ycBe"),y=r("7TC5p");async function c(e,r){const a=e.instance.portalItem;return a&&a.id?(await a.load(r),function(e){const r=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(r.type))throw new(0,n.default)("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r.type,expectedType:e.supportedTypes.join(", ")})}(e),async function(e,r){const a=e.instance,t=a.portalItem,{url:i,title:c}=t,p=(0,l.createForItem)(t);if("group"===a.type)return a.read({title:c},p),function(e,r){let a;const t=e.portalItem.type;switch(t){case"Feature Service":case"Feature Collection":a=o.layerLookupMap.FeatureLayer;break;case"Stream Service":a=o.layerLookupMap.StreamLayer;break;case"Scene Service":a=o.layerLookupMap.SceneLayer;break;default:throw new(0,n.default)("portal:unsupported-item-type-as-group",`The item type '${t}' is not supported as a 'IGroupLayer'`)}let i;return a().then((e=>(i=e,L(r)))).then((async r=>{return"Feature Service"===t?(r=await d(r,e.portalItem.url),u(e,i,r)):m(r)>0?u(e,i,r):(n=i,(a=e).portalItem.url?(0,y.requestArcGISServiceJSON)(a.portalItem.url).then((e=>{var r,t;function o(e){return{id:e.id,name:e.name}}e&&u(a,n,{layers:null==(r=e.layers)?void 0:r.map(o),tables:null==(t=e.tables)?void 0:t.map(o)})})):Promise.resolve());var a,n}))}(a,e);i&&a.read({url:i},p);const f=await L(e,r);return f&&a.read(f,p),a.resourceReferences={portalItem:t,paths:p.readResourcePaths},a.read({title:c},p),(0,s.loadStyleRenderer)(a,p)}(e,r)):Promise.resolve()}function u(e,r,a){let t=a.layers||[];const n=a.tables||[];"Feature Collection"===e.portalItem.type&&(t.forEach((e=>{var r;"Table"===(null==e||null==(r=e.layerDefinition)?void 0:r.type)&&n.push(e)})),t=t.filter((e=>{var r;return"Table"!==(null==e||null==(r=e.layerDefinition)?void 0:r.type)}))),t.reverse().forEach((t=>{const n=p(e,r,a,t);e.add(n)})),n.reverse().forEach((t=>{const n=p(e,r,a,t);e.tables.add(n)}))}function p(e,r,a,t){const n=new r({portalItem:e.portalItem.clone(),layerId:t.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){const r={origin:"portal-item",portal:e.portalItem.portal||i.default.getDefault()};n.read(t,r);const o=a.showLegend;null!=o&&n.read({showLegend:o},r)}return n}function L(e,r){if(!1===e.supportsData)return Promise.resolve(void 0);const a=e.instance;return a.portalItem.fetchData("json",r).catch((()=>null)).then((async e=>{if("stream"!==(r=a).type&&"layerId"in r){let r,t=!0;return e&&m(e)>0&&(null==a.layerId&&(a.layerId=f(e)),r=function(e,r){const a=e.layers;if(a)for(let e=0;e<a.length;e++)if(a[e].id===r)return a[e];const t=e.tables;if(t)for(let e=0;e<t.length;e++)if(t[e].id===r)return t[e];return null}(e,a.layerId),r&&(1===m(e)&&(t=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))),t&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),r}var r;return e}))}async function d(e,r){var a,t;if(null==(null==(a=e)?void 0:a.layers)||null==(null==(t=e)?void 0:t.tables)){const a=await(0,y.requestArcGISServiceJSON)(r);(e=e||{}).layers=e.layers||(null==a?void 0:a.layers),e.tables=e.tables||(null==a?void 0:a.tables)}return e}function f(e){const r=e.layers;if(r&&r.length)return r[0].id;const a=e.tables;return a&&a.length?a[0].id:null}function m(e){var r,a,t,n;return(null!=(r=null==e||null==(a=e.layers)?void 0:a.length)?r:0)+(null!=(t=null==e||null==(n=e.tables)?void 0:n.length)?t:0)}})),r.register("7TC5p",(function(a,t){e(a.exports,"requestArcGISServiceJSON",(function(){return o}));var n=r("bYA0c");async function o(e){const{data:r}=await(0,n.default)(e,{responseType:"json",query:{f:"json"}});return r}})),r.register("g0k3L",(function(r,a){function t(e,r){return!!e.typeKeywords&&e.typeKeywords.indexOf(r)>-1}e(r.exports,"hasTypeKeyword",(function(){return t}))}));
//# sourceMappingURL=layersCreator.d1a47adf.js.map
