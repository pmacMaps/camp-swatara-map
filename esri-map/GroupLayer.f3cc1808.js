!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;e.register("eBpzH",(function(i,t){var r,s,l,n,o;r=i.exports,Object.defineProperty(r,"__esModule",{value:!0,configurable:!0}),s=i.exports,l="default",n=function(){return x},Object.defineProperty(s,l,{get:n,set:o,enumerable:!0,configurable:!0});var a=e("8TSCy"),y=e("7eJjO"),u=e("9MlGz"),v=e("7qybv"),c=e("8NioF"),d=e("iho5X");e("lNwWH"),e("2VlWd");var h=e("5h4Y4");e("iJAIC");var p=e("fcwIv"),b=e("kced1"),f=e("4LDxK"),_=e("gIXJ2"),g=e("5N5S1"),L=e("9bAYR"),w=e("3GzOb"),O=e("flvKv"),k=e("4oitb"),m=e("eJLrr"),M=function(e){"use strict";a.inherits(t,e);var i=a.createSuper(t);function t(e){var r;return a.classCallCheck(this,t),(r=i.call(this,e))._visibilityHandles={},r.fullExtent=void 0,r.operationalLayerType="GroupLayer",r.spatialReference=void 0,r.type="group",r._visibilityWatcher=r._visibilityWatcher.bind(a.assertThisInitialized(r)),a.possibleConstructorReturn(r)}return a.createClass(t,[{key:"initialize",value:function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}},{key:"_writeLayers",value:function(e,i,t,r){var s=[];if(!e)return s;e.forEach((function(e){var i=(0,m.getLayerJSON)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);(0,v.isSome)(i)&&i.layerType&&s.push(i)})),i.layers=s}},{key:"portalItem",set:function(e){this._set("portalItem",e)}},{key:"visibilityMode",set:function(e){var i=this._get("visibilityMode")!==e;this._set("visibilityMode",e),i&&this._enforceVisibility(e,this.visible)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return(0,u.loadAll)(this,(function(i){i(e.layers,e.tables)}))}},{key:"layerAdded",value:function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}},{key:"layerRemoved",value:function(e){var i=this._visibilityHandles[e.uid];i&&(i.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}},{key:"_turnOffOtherLayers",value:function(e){this.layers.forEach((function(i){i!==e&&(i.visible=!1)}))}},{key:"_enforceVisibility",value:function(e,i){if((0,h.getProperties)(this).initialized){var t=this.layers,r=t.find((function(e){return e.visible}));switch(e){case"exclusive":t.length&&!r&&((r=t.getItemAt(0)).visible=!0),this._turnOffOtherLayers(r);break;case"inherited":t.forEach((function(e){e.visible=i}))}}}},{key:"_visibleWatcher",value:function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(i){i.visible=e}))}},{key:"_visibilityWatcher",value:function(e,i,t,r){var s=r;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(s):this._isAnyLayerVisible()||(s.visible=!0);break;case"inherited":s.visible=this.visible}}},{key:"_isAnyLayerVisible",value:function(){return this.layers.some((function(e){return e.visible}))}}]),t}((0,_.BlendLayer)((0,w.ScaleRangeLayer)((0,g.OperationalLayer)((0,L.PortalLayer)((0,k.TablesMixin)((0,O.LayersMixin)((0,c.MultiOriginJSONMixin)(f.default))))))));(0,y._)([(0,d.property)()],M.prototype,"fullExtent",void 0),(0,y._)([(0,d.property)({json:{read:!1,write:{ignoreOrigin:!0}}})],M.prototype,"layers",void 0),(0,y._)([(0,b.writer)("layers")],M.prototype,"_writeLayers",null),(0,y._)([(0,d.property)({type:["GroupLayer"]})],M.prototype,"operationalLayerType",void 0),(0,y._)([(0,d.property)({json:{origins:{"web-document":{read:!1,write:!1}}}})],M.prototype,"portalItem",null),(0,y._)([(0,d.property)()],M.prototype,"spatialReference",void 0),(0,y._)([(0,d.property)({json:{read:!1},readOnly:!0,value:"group"})],M.prototype,"type",void 0),(0,y._)([(0,d.property)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],M.prototype,"visibilityMode",null);var x=M=(0,y._)([(0,p.subclass)("esri.layers.GroupLayer")],M)}))}();
//# sourceMappingURL=GroupLayer.f3cc1808.js.map
