function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("7a1V1",(function(a,n){e(a.exports,"previewSymbol2D",(function(){return x}));var l=t("hJt7u"),o=t("bPmsI"),i=t("jCR4P"),s=t("1B2ZX"),r=t("3DOhA"),c=t("1dJvi"),u=t("iUbOe");const m="picture-fill",p=r.SymbolSizeDefaults.size,h=r.SymbolSizeDefaults.maxSize,d=r.SymbolSizeDefaults.maxOutlineSize,f=r.SymbolSizeDefaults.lineWidth,y=225,g=document.createElement("canvas");function b(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,i.pt2px)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,i.pt2px)(t.height):null}}function v(e,t){return e>t?"dark":"light"}function w(e,t){const a="number"==typeof t?.size?t?.size:null,n=null!=a?(0,i.pt2px)(a):null,o=null!=t?.maxSize?(0,i.pt2px)(t.maxSize):null,c=null!=t?.rotation?t.rotation:"angle"in e?e.angle:null,w=(0,s.getFill)(e);let x=(0,s.getStroke)(e);"dark"!==function(e,t=225){const a=(0,s.getFill)(e),n=(0,s.getStroke)(e),o=!a||"type"in a?null:new(0,l.default)(a),i=n?.color?new(0,l.default)(n?.color):null,r=o?v((0,u.getColorLuminance)(o),t):null,c=i?v((0,u.getColorLuminance)(i),t):null;return c?r?r===c?r:t>=y?"light":"dark":c:r}(e,245)||t?.ignoreWhiteSymbols||(x={width:.75,...x,color:"#bdc3c7"});const M={shape:null,fill:w,stroke:x,offset:[0,0]};x?.width&&(x.width=Math.min(x.width,d));const k=x?.width||0;let z=null!=t?.size&&(null==t?.scale||t?.scale),L=0,S=0,C=!1;switch(e.type){case"simple-marker":{const t=e.style,a=Math.min(null!=n?n:(0,i.pt2px)(e.size),o||h);switch(L=a,S=a,t){case"circle":M.shape={type:"circle",cx:0,cy:0,r:.5*a},z||(L+=k,S+=k);break;case"cross":M.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[L,.5*S]},{command:"M",values:[.5*L,0]},{command:"L",values:[.5*L,S]}]};break;case"diamond":M.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[.5*L,0]},{command:"L",values:[L,.5*S]},{command:"L",values:[.5*L,S]},{command:"Z",values:[]}]},z||(L+=k,S+=k);break;case"square":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,0]},{command:"L",values:[L,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},z||(L+=k,S+=k),c&&(C=!0);break;case"triangle":M.shape={type:"path",path:[{command:"M",values:[.5*L,0]},{command:"L",values:[L,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},z||(L+=k,S+=k),c&&(C=!0);break;case"x":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,S]},{command:"M",values:[L,0]},{command:"L",values:[0,S]}]},c&&(C=!0);break;case"path":M.shape={type:"path",path:e.path||""},z||(L+=k,S+=k),c&&(C=!0),z=!0}break}case"simple-line":{const{width:e,height:a}=b(t),l=null!=a?a:Math.min(null!=n?n:k,o||d),i=null!=e?e:f;x.width=l,L=i,S=l;const s=M?.stroke?.cap||"butt",r="round"===s;z=!0,M.stroke.cap="butt"===s?"square":s,M.shape={type:"path",path:[{command:"M",values:[r?l/2:0,S/2]},{command:"L",values:[r?L-l/2:L,S/2]}]};break}case m:case"simple-fill":{const e="object"==typeof t?.symbolConfig&&t?.symbolConfig.isSquareFill,{width:a,height:l}=b(t);L=e&&null!=a?a:null!=n?n:p,S=e&&null!=l?l:L,z||(L+=k,S+=k),z=!0,M.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[L,0]},{command:"L",values:[L,S]},{command:"L",values:[0,S]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:r.shapes.fill[0];break}case"picture-marker":{let t=(0,i.pt2px)(e.width),a=(0,i.pt2px)(e.height);const l=null!=n?n:Math.max(t,a),s=t/a;t=s<=1?Math.ceil(l*s):l,a=s<=1?l:Math.ceil(l/s),L=Math.min(t,o||h),S=Math.min(a,o||h),M.shape={type:"image",x:-Math.round(L/2),y:-Math.round(S/2),width:L,height:S,src:e.url||""},c&&(C=!0);break}case"text":{const t=e,a=t.text||"Aa",l=t.font,s=Math.min(null!=n?n:(0,i.pt2px)(l.size),o||h),r=function(e,t){const a=g.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),a.font=n.join(" "),a.measureText(e).width}(a,{weight:l.weight,size:s,family:l.family}),c=/[\uE600-\uE6FF]/.test(a);L=c?s:r,S=s;let u=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=(0,i.px2pt)(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}((l?s:0).toString());c&&(u+=5),M.shape={type:"text",text:a,x:t.xoffset||0,y:t.yoffset||u,align:"middle",alignBaseline:t.verticalAlignment,decoration:l&&l.decoration,rotated:t.rotated,kerning:t.kerning},M.font=l&&{size:s,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}return{shapeDescriptor:M,size:[L,S],renderOptions:{node:t?.node,scale:z,opacity:t?.opacity,rotation:c,useRotationSize:C,effectView:t?.effectView}}}async function x(e,t){const{shapeDescriptor:a,size:n,renderOptions:l}=w(e,t);if(!a.shape)throw new(0,o.default)("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const a=t.fill,n=e.color;if("pattern"===a?.type&&n&&e.type!==m){const e=await(0,s.getPatternUrlWithColor)(a.src,n.toCss(!0));a.src=e,t.fill=a}}(e,a);const i=[[a]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig.applyColorModulation){const e=.6*n[0];i.unshift([{...a,offset:[-e,0],fill:(0,r.adjustColorBrightness)(a.fill,-.3)}]),i.push([{...a,offset:[e,0],fill:(0,r.adjustColorBrightness)(a.fill,.3)}]),n[0]+=2*e,l.scale=!1}return(0,c.renderSymbol)(i,n,l)}})),t.register("iUbOe",(function(a,n){e(a.exports,"getColorLuminance",(function(){return i}));var l=t("hJt7u");t("1CpCt");function o(e){let{r:t,g:a,b:n,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),a=Math.round(o*a+255*(1-o)),n=Math.round(o*n+255*(1-o))),new(0,l.default)({r:t,g:a,b:n})}function i(e){const{r:t,g:a,b:n}=o(e);return.2126*t+.7152*a+.0722*n}}));
//# sourceMappingURL=previewSymbol2D.857f0e4a.js.map
