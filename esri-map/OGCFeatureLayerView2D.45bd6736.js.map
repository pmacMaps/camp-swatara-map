{"mappings":"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","sources":["node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import r from\"../../../core/Collection.js\";import s from\"../../../core/Error.js\";import a from\"../../../core/has.js\";import{clone as n}from\"../../../core/lang.js\";import l from\"../../../core/Logger.js\";import{applySome as o,isSome as h,unwrap as u,isNone as d}from\"../../../core/maybe.js\";import{debounce as p,isAbortError as y}from\"../../../core/promiseUtils.js\";import{watch as c,whenOnce as f,initial as g}from\"../../../core/reactiveUtils.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../core/accessorSupport/decorators/subclass.js\";import v from\"../../../layers/effects/FeatureEffectView.js\";import b from\"../../../layers/support/FeatureFilter.js\";import R from\"../../../rest/support/FeatureSet.js\";import x from\"../../../rest/support/Query.js\";import{MAX_FILTERS as S}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as w}from\"./LayerView2D.js\";import{createSchema as U}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as F}from\"./features/tileRenderers.js\";import{findSizeVV as C,createClusterCountSizeVariable as I,isClusterCompatibleRenderer as E,createClusterRenderer as O}from\"./support/clusterUtils.js\";import T from\"./support/FeatureCommandQueue.js\";import q from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as V}from\"./support/util.js\";import{TileManager as j}from\"../tiling/TileManager.js\";import{FeatureLayerView as N}from\"../../layers/FeatureLayerView.js\";import L from\"../../layers/LayerView.js\";import{RefreshableLayerView as P}from\"../../layers/RefreshableLayerView.js\";import{getWebGL1Capabilities as k}from\"../../webgl/capabilities.js\";import z from\"../../../geometry/Extent.js\";function H(e){return e&&\"openPorts\"in e}const J=l.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Q=class extends(N(P(w(L)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new T({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh(e.dataChanged);case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._highlightIds=new Map,this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.featureEffectView=new v,this._lastDefinitionExpression=null}destroy(){var e;o(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),c((()=>this.featureEffect),(e=>{this.featureEffectView.featureEffect=e}),{initial:!0,sync:!0})])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new s(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new q({client:e})),this._proxy.when()}async _initServiceOptions(){return this._set(\"_serviceOptions\",await this._createServiceOptions()),this._serviceOptions}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,u=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,d=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,y=JSON.stringify(this.clips),c=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:h(this.filter)&&this.filter.toJSON(),effectHash:h(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:y,featureReduction:c,customParameters:u,apiKey:d})}highlight(e){var t;let s;return e instanceof i?s=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?s=[e]:Array.isArray(e)&&e.length>0?s=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>null==e?void 0:e.getObjectId())):r.isCollection(e)&&e.length>0&&(s=e.map((e=>null==e?void 0:e.getObjectId())).toArray()),s=null==(t=s)?void 0:t.filter((e=>null!=e)),s&&s.length?(this._addHighlight(s),{remove:()=>this._removeHighlight(s)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}async hitTest(e,r){if(!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(r);if(0===s.length)return null;const{features:a,aggregates:n}=await this._proxy.getFeatures(s);return[...n.map((e=>this._createHittestResult(t.fromJSON(e)))),...a.map((e=>this._createHittestResult(i.fromJSON(e))))]}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}async queryUniqueValues(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),r,i)}async queryClassBreaks(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),r,i)}async queryHistogram(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=R.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryVisibleFeatures(e,t){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e),t).then((e=>{const t=R.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:z.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new j({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(c((()=>this.renderingConfigHash),(()=>this._update()),g),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){var e;this._commandsQueue.clear(),null==(e=this._proxy)||e.stop(),this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,n=this._pipelineIsUpdating,l=null==this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||n||l);return a(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${n}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){var t;const i=\"path\"in e,r=\"editingInfo\"in this.layer&&(null==(t=this.layer.editingInfo)?void 0:t.lastEditDate),s=!!this.layer.refreshInterval,n=!r&&s;if(i&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&!n&&a(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=a(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=a(\"featurelayer-snapshot-point-max-threshold\"),i=a(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=u(this.layer.fullExtent),n=null==s?void 0:s.clone().intersection(r),l=h(n)?n.width*n.height:0,o=(null==s?void 0:s.width)*(null==s?void 0:s.height),d=0===o?0:l/o;if(e<=t&&d>=i)return{mode:\"snapshot\",featureCount:e}}catch(l){J.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:l})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=h(t.fullExtent)&&t.fullExtent.toJSON(),l=V(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,u=t.spatialReference?t.spatialReference.toJSON():null,d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():H(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=n(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const y=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,c=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&h(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:y,subtypeField:c,featureCount:g,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:l,objectIdField:r,source:p,timeInfo:o,spatialReference:u,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=x.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this.suspended)return void this._clearTiles();return this._validateEdit(e)?this._commandsQueue.push({type:\"edit\",edits:e}):void 0}async doRefresh(e){if(this._tileStrategy.tileKeys().length)return this.suspended&&e?void this._clearTiles():this._commandsQueue.push({type:\"refresh\",dataChanged:e})}_clearTiles(){this._tileStrategy.tileKeys().length&&(this._proxy.updateTiles({added:[],removed:this._tileStrategy.tileKeys()}),this._tileStrategy.clear(),this.requestUpdate(),this._commandsQueue.clear(),this._update())}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(J.error(new s(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{featureEffectView:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=this._createConfiguration(s,i,t.filter),n=this._lastDefinitionExpression!==a.definitionExpression;this._lastDefinitionExpression=a.definitionExpression;const l=this._createTileRendererHash(r);if(\"snapshot\"===this._serviceOptions.type&&(a.schema.source.featureCount=this._serviceOptions.featureCount),l!==this._tileRendererHash){await this._initTileRenderer(r);const e=this.layer,t=\"stream\"===e.type?await this._initServiceOptions():this._serviceOptions;this.tileRenderer.onConfigUpdate(r),\"stream\"!==e.type&&H(e.source)&&(t.source=await e.source.openPorts());const i={added:this._tileStrategy.tileKeys(),removed:[]};await this._proxy.startup(this.view.featuresTilingScheme,a,t,i),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{\"snapshot\"===this._serviceOptions.type&&n&&(a.schema.source.featureCount=await this.layer.queryFeatureCount());const t=await this._proxy.update(a);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||J.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=l,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(e){var t;this._lockGPUUploads();try{await this._proxy.refresh(e)}catch(i){y(i),0}this._unlockGPUUploads(),null!=(t=this.layer)&&t.featureReduction&&this._updateClusterSizeVariable()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=C(e.visualVariables);if(h(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=I(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(h(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&E(e)){const i=t,r=[],s=O(r,e,i,this._aggregateValueRanges);return o(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await F(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=h(e)?e.timeExtent:null,i=h(this.timeExtent)&&h(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=h(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return h(e)?e.toJSON():null;(e=h(e)&&e.clone()||new b).timeExtent=i,r&&(e.where=r);const a=e.toJSON();return a.hiddenIds=Array.from(this._visibilityOverrides),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),h(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(S),n=this._injectOverrides(t);a[0]=n,a[1]=h(i)?i.toJSON():null;const l=U(e);if(d(l))return null;const o=k();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!k().supportsTextureFloat)||(J.error(new s(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),f((()=>!this._pipelineIsUpdating))}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||J.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||J.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),h(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}};e([m()],Q.prototype,\"_serviceOptions\",void 0),e([m()],Q.prototype,\"_proxy\",void 0),e([m()],Q.prototype,\"_pipelineIsUpdating\",void 0),e([m()],Q.prototype,\"_effectiveRenderer\",void 0),e([m()],Q.prototype,\"_aggregateValueRanges\",void 0),e([m()],Q.prototype,\"_commandsQueue\",void 0),e([m()],Q.prototype,\"featureEffectView\",void 0),e([m()],Q.prototype,\"labelsVisible\",null),e([m({readOnly:!0})],Q.prototype,\"queryMode\",null),e([m()],Q.prototype,\"renderingConfigHash\",null),e([m()],Q.prototype,\"tileRenderer\",void 0),e([m()],Q.prototype,\"updating\",void 0),Q=e([_(\"esri.views.2d.layers.FeatureLayerView2D\")],Q);const A=Q;export{A as default};\n"],"names":["$8TSCy","parcelRequire","$72c13acb15e9fab7$var$H","e1","$72c13acb15e9fab7$var$J","$jHOLN","default","getLogger","$72c13acb15e9fab7$var$Q","_superClass","_this","_super","call","apply","Array","prototype","slice","arguments","_pipelineIsUpdating","_commandsQueue","$bTKCC","process","e2","type","_doEdit","_doRefresh","dataChanged","_doUpdate","_visibilityOverrides","Set","_highlightIds","Map","_updateHighlight","$10vEZ","debounce","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","_this1","_proxy","setHighlight","from","keys","_uploadsLocked","_needsClusterSizeUpdate","featureEffectView","$9B1Fz","_lastDefinitionExpression","key","_$e","$7qybv","applySome","this","_updateClusterSizeTask","e3","remove","destroy","addResolvingPromise","Promise","all","_initProxy","_initServiceOptions","handles","add","on","e4","_set","valueRanges","$lKPaD","watch","featureEffect","e5","initial","sync","layer","isTable","$kyj08","_createClientOptions","$iDjnF","client","when","_createServiceOptions","_ctx","t0","t1","_serviceOptions","orderByFields","sublayers","items","suspended","some","e6","labelingInfo","labelsVisible","availableFields","i1","view","floors","r1","definitionExpression","s1","a1","renderer","n1","gdbVersion","_$l","historicMoment","getTime","o1","timeExtent","u1","JSON","stringify","customParameters","d1","apiKey","p1","concat","geometryDefinition","y1","clips","c1","featureReduction","toJSON","f1","orderBy","g1","reduce","e7","t2","visible","sublayerHash","filterHash","isSome","filter","effectHash","streamFilter","clipsHash","e8","t3","s2","$bsvXr","getObjectId","isArray","length","map","e9","$d2yMj","isCollection","e10","toArray","e11","_addHighlight","_removeHighlight","size","e12","r2","s3","ref","a2","n2","tileRenderer","hitTest","sent","getFeatures","features","aggregates","toConsumableArray","e13","_createHittestResult","$34Eys","fromJSON","e14","getAggregates","e15","queryStatistics","e16","t4","i2","r3","objectSpread","scale","querySummaryStatistics","_cleanUpQuery","e17","t5","i3","r4","queryUniqueValues","e18","t6","i4","r5","queryClassBreaks","e19","t7","i5","r6","queryHistogram","e20","t8","queryFeaturesJSON","then","e21","_$t","$f4h86","forEach","e22","_this2","_setLayersForFeature","e23","t9","queryVisibleFeatures","e24","e25","_this3","e26","t10","queryFeatures","e27","t11","queryObjectIds","e28","t12","queryFeatureCount","e29","t13","queryExtent","e30","count","extent","$gINRd","e31","t14","delete","_update","e32","_tileStrategy","update","t15","hasMissingTiles","i6","added","r7","removed","updateTiles","requestUpdate","notifyChange","timeline","record","title","$kvL9S","TileManager","acquireTile","e33","_acquireTile","releaseTile","e34","_releaseTile","tileInfoView","featuresTilingScheme","buffer","renderingConfigHash","e35","_edit","clear","stop","container","removeAllChildren","uninstall","_tileRendererHash","t16","i7","updating","r8","_updatingRequiredFieldsPromise","s4","isReady","n3","o2","$2VlWd","console","log","setUpdating","e36","emitEvent","e37","emit","name","event","e38","t18","i9","r10","s6","n5","t17","i8","r9","s5","n4","o3","d2","editingInfo","lastEditDate","refreshInterval","geometryType","capabilities","query","supportsPagination","operations","supportsEditing","mode","featureCount","unwrap","fullExtent","clone","intersection","width","height","warn","error","t19","i10","r11","s7","a3","o4","u2","d3","p2","y2","c2","f2","g2","_$m","_$e1","objectIdField","fields","e39","$9M3e1","toJSONGeometryType","timeInfo","spatialReference","globalIdField","source","getFeatureDefinition","openPorts","parsedUrl","$flPLJ","dynamicDataSource","datesInUnknownTimezone","subtypeField","_detectQueryMode","valueExpression","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","e40","t20","e41","t21","$cRlei","createQuery","outSpatialReference","push","e42","_clearTiles","_validateEdit","edits","e43","tileKeys","e44","t22","i11","deletedFeatures","e45","objectId","r12","includes","t25","i13","r13","s8","a4","n6","t23","i12","t24","destroyed","_hasRequiredSupport","_updateRequiredFields","_getEffectiveRenderer","_createSchemaConfig","_createConfiguration","_createTileRendererHash","schema","_initTileRenderer","onConfigUpdate","startup","hasHighlight","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","isAbortError","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","e46","onEdits","e47","t26","refresh","_effectiveRenderer","e48","t27","i14","_updateClusterEffectiveRendererSizeVariable","e49","t28","i15","r14","s9","a5","dynamicClusterSize","visualVariables","$bPKxZ","findSizeVV","indexOf","createClusterCountSizeVariable","t29","isClusterCompatibleRenderer","i16","r15","s10","createClusterRenderer","_aggregateValueRanges","e50","_createUpdateClusterSizeTask","aggregateFields","e51","t30","once","e52","e53","t31","$rIUZZ","createOrReuseTileRenderer","layerView","install","e54","floorInfo","e55","t33","i17","r16","s11","t32","where","_addFloorFilterClause","$krMu9","a6","hiddenIds","e56","t34","i18","r17","viewAllLevelIds","s12","e57","e58","a7","floorField","n7","replace","join","_$e2","RegExp","trim","e59","t35","i19","r18","s13","a8","$4WoSm","MAX_FILTERS","n8","_injectOverrides","$li6vg","createSchema","isNone","o5","$3NAox","getWebGL1Capabilities","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","e60","t36","whenOnce","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","t37","pixelBuffer","token","e61","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","t38","value","has","get","set","err","return","catch","e62","e63","t39","e64","e65","t40","sourceLayer","e66","geometry","$7HdkW","FeatureLayerView","$hfthk","RefreshableLayerView","$dIFqf","LayerView2DMixin","$30vBn","$7eJjO","_","$iho5X","property","readOnly","$72c13acb15e9fab7$export$2e2bcd8739ae039","$fcwIv","subclass"],"version":3,"file":"OGCFeatureLayerView2D.45bd6736.js.map"}