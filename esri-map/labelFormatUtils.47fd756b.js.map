{"mappings":"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","sources":["node_modules/@arcgis/core/layers/support/labelFormatUtils.js","node_modules/@parcel/runtime-js/lib/runtime-e655c159c52e3148.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import t from\"../../core/Logger.js\";import{formatDate as r,convertDateFormatToIntlOptions as a}from\"../../intl/date.js\";import{formatNumber as n}from\"../../intl/number.js\";import{isNumericField as l}from\"./fieldUtils.js\";import{getLabelExpression as o,getSingleFieldArcadeExpression as i}from\"./labelUtils.js\";import{createLabelExpression as s}from\"../../support/arcadeOnDemand.js\";const u=t.getLogger(\"esri.layers.support.labelFormatUtils\"),p={type:\"simple\",evaluate:()=>null},c={getAttribute:(e,t)=>e.field(t)};async function f(t,r,a){if(!t||!t.symbol)return p;const n=t.where,l=o(t),f=n?await import(\"../../core/sql/WhereClause.js\"):null;let d;if(\"arcade\"===l.type){const t=await s(l.expression,a,r);d={type:\"arcade\",evaluate(r){try{const e=t.evaluate({$feature:\"attributes\"in r?t.repurposeFeature(r):r});if(null!=e)return e.toString()}catch(a){u.error(new e(\"bad-arcade-expression\",\"Encountered an error when evaluating label expression for feature\",{feature:r,expression:l}))}return null},needsHydrationToEvaluate:()=>null==i(l.expression)}}else d={type:\"simple\",evaluate:e=>l.expression.replace(/{[^}]*}/g,(t=>{const a=t.slice(1,-1),n=r.get(a);if(!n)return t;let l=null;if(\"attributes\"in e){e&&e.attributes&&(l=e.attributes[n.name])}else l=e.field(n.name);return null==l?\"\":m(l,n)}))};if(n){let e;try{e=f.WhereClause.create(n,r)}catch(y){return p}const t=d.evaluate;d.evaluate=r=>{const a=\"attributes\"in r?void 0:c;return e.testFeature(r,a)?t(r):null}}return d}function m(e,t){if(null==e)return\"\";const o=t.domain;if(o)if(\"codedValue\"===o.type||\"coded-value\"===o.type){const t=e;for(const e of o.codedValues)if(e.code===t)return e.name}else if(\"range\"===o.type){const t=+e,r=\"range\"in o?o.range[0]:o.minValue,a=\"range\"in o?o.range[1]:o.maxValue;if(r<=t&&t<=a)return o.name}let i=e;return\"date\"===t.type||\"esriFieldTypeDate\"===t.type?i=r(i,a(\"short-date\")):l(t)&&(i=n(+i)),i||\"\"}export{f as createLabelFunction,m as formatField};\n","module.exports = Promise.all([require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('eeyk4') + require('./helpers/bundle-manifest').resolve(\"j5U2t\")), require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('eeyk4') + require('./helpers/bundle-manifest').resolve(\"cgD2M\"))]).then(() => parcelRequire('9AqbE'));"],"names":["$8TSCy","parcelRequire","$c5dbb632b6849428$var$u","$jHOLN","default","getLogger","$c5dbb632b6849428$var$p","type","evaluate","$c5dbb632b6849428$var$c","getAttribute","e1","t1","field","$c5dbb632b6849428$export$1cfb6b35b4562369","t2","r1","a1","$c5dbb632b6849428$var$_f","apply","this","arguments","asyncToGenerator","$parcel$interopDefault","$2TvXO","mark","_callee","n1","l1","f1","d","_$t","e2","_$t1","symbol","where","$7OJpl","getLabelExpression","_ctx","t0","$3nnTb","createLabelExpression","expression","sent","r2","_$e","$feature","repurposeFeature","toString","a","error","$kyj08","feature","needsHydrationToEvaluate","getSingleFieldArcadeExpression","e3","replace","t3","_$a","slice","n2","get","l2","attributes","name","$c5dbb632b6849428$export$f80f50209b9f6b44","WhereClause","create","r3","testFeature","e4","t4","o1","domain","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","codedValues","Symbol","iterator","next","done","value","code","err","return","_$t2","_$r","range","minValue","maxValue","i1","$8lxrq","formatDate","convertDateFormatToIntlOptions","$7vTUY","isNumericField","$1RkqB","formatNumber","module","exports","Promise","all","getBundleURL","resolve","then"],"version":3,"file":"labelFormatUtils.47fd756b.js.map"}