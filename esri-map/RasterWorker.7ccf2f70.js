function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire594f;t.register("2WfpR",(function(n,o){e(n.exports,"requirePE",(function(){return m})),e(n.exports,"load",(function(){return P})),e(n.exports,"getDefaultDatumTransformationForDataset",(function(){return S})),e(n.exports,"projectResolution",(function(){return b})),e(n.exports,"getWorldWidth",(function(){return O})),e(n.exports,"projectPoint",(function(){return E})),e(n.exports,"projectExtent",(function(){return _})),e(n.exports,"getWorldWrapCount",(function(){return A})),e(n.exports,"projectPolygon",(function(){return z})),e(n.exports,"getRasterDatasetAlignmentInfo",(function(){return B})),e(n.exports,"getProjectionOffsetGrid",(function(){return q})),e(n.exports,"snapExtent",(function(){return D})),e(n.exports,"snapPyramid",(function(){return X})),e(n.exports,"computeProjectedScales",(function(){return J})),t("ixrNB");var i,r,s=t("aX9sh"),a=t("bPmsI"),l=t("zPXCh"),f=t("cPlTx"),c=t("5cP7j"),u=t("2WnyR"),x=t("dZxPT"),h=t("etknW"),p=t("jaaCV");function m(e,t,n){return!(0,c.canProjectWithoutEngine)(e,t,n)}function g(e,t,n){const o=m(e,t,n);if(o&&!(0,c.isLoaded)())throw new(0,a.default)("rasterprojectionhelper-project","projection engine is not loaded");return o}(r=i||(i={}))[r.None=0]="None",r[r.North=1]="North",r[r.South=2]="South",r[r.Both=3]="Both";const d=(e,t,n,o=0)=>{if(1===n[0])return[0,0];let i=1,r=-1,s=1,a=-1;for(let t=0;t<e.length;t+=2)isNaN(e[t])||(i=i>e[t]?e[t]:i,r=r>e[t]?r:e[t],s=s>e[t+1]?e[t+1]:s,a=a>e[t+1]?a:e[t+1]);const{cols:l,rows:f}=t,c=(r-i)/l/n[0],u=(a-s)/f/n[1],x=2*o;let h=0,p=!1,m=[0,0];for(let t=0;t<l-3;t++){for(let n=0;n<f-3;n++){const o=t*f*2+2*n,i=(e[o]+e[o+4]+e[o+4*f]+e[o+4*f+4])/4,r=(e[o+1]+e[o+5]+e[o+4*f+1]+e[o+4*f+5])/4,s=Math.abs((i-e[o+2*f+2])/c),a=Math.abs((r-e[o+2*f+3])/u);if(s+a>h&&(h=s+a,m=[s,a]),x&&h>x){p=!0;break}}if(p)break}return m},y={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},M=new Map,R=new Map,w=500;async function P(){(0,c.isLoaded)()||await(0,c.load)()}function S(e,t,n){return g(e.spatialReference,t),n?(0,c.getTransformation)(t,e.spatialReference,e):(0,c.getTransformation)(e.spatialReference,t,e)}function b(e,t,n,o=null){const i=e.spatialReference;if(i.equals(t))return e;g(i,t,o);const r=n.center,s=new(0,u.default)({xmin:r.x-e.x/2,xmax:r.x+e.x/2,ymin:r.y-e.y/2,ymax:r.y+e.y/2,spatialReference:i}),a=(0,c.project)(s,t,o),f=O(t);let x;if(null==a||null!=f&&a.width>=f){const n=(0,l.getMetersPerUnitForSR)(i)/(0,l.getMetersPerUnitForSR)(t);x={x:e.x*n,y:e.y*n}}else x={x:a.width,y:a.height};return x}function G(e,t=.01){return(0,l.getMetersPerUnitForSR)(e)?t/(0,l.getMetersPerUnitForSR)(e):0}function E(e,t,n=null,o=!0){const i=e.spatialReference;if(i.equals(t))return e;g(i,t,n);const r=(0,c.project)(e,t,n);return o&&r?(N([e],[r],i,t),r):r}function N(e,t,n,o){const i=I(n,!0),r=I(o,!0),s=G(n,w),a=G(o,w);if(s&&null!=i&&null!=r)for(let n=0;n<e.length;n++){const o=t[n];if(!o)continue;const{x:l}=e[n],{x:f}=o;f>=r[1]-a&&Math.abs(l-i[0])<s?o.x-=r[1]-r[0]:f<=r[0]+a&&Math.abs(l-i[1])<s&&(o.x+=r[1]-r[0])}}function T(e){const{inSR:t,outSR:n,datumTransformation:o,preferPE:i}=e;if(t.equals(n)){const{points:t}=v(e,null);return t}if(t.isWebMercator&&n.isWGS84||t.isWGS84&&n.isWebMercator)return function(e){const{cols:t,rows:n,xres:o,yres:i,usePixelCenter:r,inSR:s,outSR:a}=e;let{xmin:l,ymax:f}=e;r&&(l+=o/2,f-=i/2);const u=[],h=[],p=Math.max(t,n);for(let e=0;e<p;e++){const r=l+o*Math.min(t,e),p=f-i*Math.min(n,e),m=(0,c.project)(new(0,x.default)({x:r,y:p,spatialReference:s}),a);e<=t&&u.push(m.x),e<=n&&h.push(m.y)}const m=[];for(let e=0;e<t;e++)for(let t=0;t<n;t++)m.push([u[e],h[t]]);return m}(e);if(g(t,n,o)&&i){if(t.isGeographic)return k(e);if(null!=C(t))return k(e)}return function(e){const{points:t}=v(e,null),{inSR:n,outSR:o,datumTransformation:i}=e,r=t.map((e=>new(0,x.default)(e[0],e[1],n))),s=(0,c.project)(r,o,i);return i&&N(r,s,n,o),s.map((e=>e?[e.x,e.y]:[NaN,NaN]))}(e)}function k(e){const{inSR:t,outSR:n,datumTransformation:o}=e,i=C(t),{points:r,mask:s}=v(e,i);if(!t.isGeographic){const e=t.wkid?f.e.coordsys(t.wkid):f.e.fromString(t.isGeographic?f.f.PE_TYPE_GEOGCS:f.f.PE_TYPE_PROJCS,t.wkt);f.g.projToGeog(e,r.length,r)}if(null!=o&&o.steps.length){let e;const t=179.9955;if(n.isGeographic&&(e=r.map((([e])=>e>t?1:e<-t?-1:0))),o.steps.forEach((e=>{const t=e.wkid?f.e.geogtran(e.wkid):f.e.fromString(f.f.PE_TYPE_GEOGTRAN,e.wkt);f.h.geogToGeog(t,r.length,r,null,e.isInverse?f.f.PE_TRANSFORM_2_TO_1:f.f.PE_TRANSFORM_1_TO_2)})),e)for(let n=0;n<r.length;n++){const o=e[n],i=r[n][0],s=i>t?1:i<-t?-1:0;o&&s&&o!==s&&(r[n][0]=o>0?i+360:i-360)}}if(!n.isGeographic){const e=C(n,!0),t=null!=e&&e.isEnvelope?[e.bbox[1],e.bbox[3]]:[-90,90];!function(e,t){const[n,o]=t;for(let t=0;t<e.length;t++){const i=e[t][1];(i<n||i>o)&&(e[t]=[NaN,NaN])}}(r,t);const o=n.wkid?f.e.coordsys(n.wkid):f.e.fromString(n.isGeographic?f.f.PE_TYPE_GEOGCS:f.f.PE_TYPE_PROJCS,n.wkt);f.g.geogToProj(o,r.length,r)}let a=r;if(s&&r.length!==s.length){a=[];for(let e=0,t=0;e<s.length;e++)s[e]?a.push(r[t++]):a.push([NaN,NaN])}return a}function C(e,t=!1){let n=e.wkid||e.wkt;if(!n||e.isGeographic)return null;if(n=String(n),M.has(n)){const e=M.get(n);return t?e?.gcs:e?.pcs}const o=e.wkid?f.e.coordsys(e.wkid):f.e.fromString(e.isGeographic?f.f.PE_TYPE_GEOGCS:f.f.PE_TYPE_PROJCS,e.wkt),i=j(o,G(e,1e-4)),r=j(o,0,!0);return M.set(n,{pcs:i,gcs:r}),t?r:i}function j(e,t=0,n=!1){const o=f.j.generate(e),i=n?e.horizonGcsGenerate():e.horizonPcsGenerate();if(!o||!i?.length)return null;let r=!1,s=i.find((e=>1===e.getInclusive()&&1===e.getKind()));if(!s){if(s=i.find((e=>1===e.getInclusive()&&0===e.getKind())),!s)return null;r=!0}const a=n?0:(2===o.getNorthPoleLocation()?1:0)|(2===o.getSouthPoleLocation()?2:0),l=o.isPannableRectangle(),c=s.getCoord();if(r)return{isEnvelope:r,isPannable:l,vertices:c,coef:null,bbox:[c[0][0]-t,c[0][1]-t,c[1][0]+t,c[1][1]+t],poleLocation:a};let u=0;const x=[];let[h,p]=c[0],[m,g]=c[0];for(let e=0,t=c.length;e<t;e++){u++,u===t&&(u=0);const[n,o]=c[e],[i,r]=c[u];if(r===o)x.push([n,i,o,r,2]);else{const e=(i-n)/(r-o||1e-4),t=n-e*o;o<r?x.push([e,t,o,r,0]):x.push([e,t,r,o,1])}h=h<n?h:n,p=p<o?p:o,m=m>n?m:n,g=g>o?g:o}return{isEnvelope:!1,isPannable:l,vertices:c,coef:x,bbox:[h,p,m,g],poleLocation:a}}function v(e,t){const n=[],{cols:o,rows:i,xres:r,yres:s,usePixelCenter:a}=e;let{xmin:l,ymax:f}=e;if(a&&(l+=r/2,f-=s/2),null==t){for(let e=0;e<o;e++)for(let t=0;t<i;t++)n.push([l+r*e,f-s*t]);return{points:n}}const c=new Uint8Array(o*i);if(t.isEnvelope){const{bbox:[e,a,u,x]}=t;for(let h=0,p=0;h<o;h++){const o=l+r*h,m=t.isPannable||o>=e&&o<=u;for(let e=0;e<i;e++,p++){const t=f-s*e;m&&t>=a&&t<=x&&(n.push([o,t]),c[p]=1)}}return{points:n,mask:c}}const u=t.coef,x=[];for(let e=0;e<i;e++){const t=f-s*e,n=[],o=[];for(let e=0;e<u.length;e++){const[i,r,s,a,l]=u[e];if(t===s&&s===a)n.push(i),n.push(r),o.push(2),o.push(2);else if(t>=s&&t<=a){const e=i*t+r;n.push(e),o.push(l)}}let i=n;if(n.length>2){let e=2===o[0]?0:o[0],t=n[0];i=[];for(let r=1;r<o.length;r++)2===o[r]&&r!==o.length-1||(o[r]!==e&&(i.push(0===e?Math.min(t,n[r-1]):Math.max(t,n[r-1])),e=o[r],t=n[r]),r===o.length-1&&i.push(0===o[r]?Math.min(t,n[r]):Math.max(t,n[r])));i.sort(((e,t)=>e-t))}else n[0]>n[1]&&(i=[n[1],n[0]]);x.push(i)}for(let e=0,t=0;e<o;e++){const o=l+r*e;for(let e=0;e<i;e++,t++){const i=f-s*e,r=x[e];if(2===r.length)o>=r[0]&&o<=r[1]&&(n.push([o,i]),c[t]=1);else if(r.length>2){let e=!1;for(let t=0;t<r.length;t+=2)if(o>=r[t]&&o<=r[t+1]){e=!0;break}e&&(n.push([o,i]),c[t]=1)}}}return{points:n,mask:c}}function W(e){const t=O(e[0].spatialReference);if(e.length<2||null==t)return e[0];const n=G(e[0].spatialReference);if(1===(e=e.filter((e=>e.width>n))).length)return e[0];let{xmin:o,xmax:i,ymin:r,ymax:s}=e[0];for(let n=1;n<e.length;n++){const o=e[n];i=o.xmax+t*n,r=Math.min(r,o.ymin),s=Math.max(s,o.ymax)}return new(0,u.default)({xmin:o,xmax:i,ymin:r,ymax:s,spatialReference:e[0].spatialReference})}function _(e,t,n=null,o=!0){const r=e.spatialReference;if(r.equals(t))return e;const a=A(e),l=O(r,!0),f=O(t);if(0===a||null==l||null==f){const s=L(e,t,n,o);if(null==l&&null!=f&&Math.abs(s.width-f)<G(t)&&(0,c.isLoaded)()){const n=C(r);if(null!=n&&n.poleLocation===i.None&&e.width<(n.bbox[2]-n.bbox[0])/2)return function(e,t){const n=O(t);if(null==n)return null;let{xmin:o,ymin:i,xmax:r,ymax:s}=e;const a=e.spatialReference,l=new(0,h.default)({spatialReference:a,rings:[[[o,i],[r,i],[r,s],[o,s],[o,i]]]}),f=(0,c.project)(l,t);if(2!==f.rings.length||!f.rings[0].length||!f.rings[1].length)return null;const{rings:x}=f,p=G(a),m=new(0,u.default)({spatialReference:t});for(let e=0;e<2;e++){o=r=x[e][0][0],i=s=x[e][0][1];for(let t=0;t<x[e].length;t++)o=o>x[e][t][0]?x[e][t][0]:o,r=r<x[e][t][0]?x[e][t][0]:r,i=i>x[e][t][1]?x[e][t][1]:i,s=s<x[e][t][1]?x[e][t][1]:s;if(0===e)m.ymin=i,m.ymax=s,m.xmin=o,m.xmax=r;else if(m.ymin=Math.min(m.ymin,i),m.ymax=Math.max(m.ymax,s),Math.abs(r-n/2)<p)m.xmin=o,m.xmax=m.xmax+n;else{if(!(Math.abs(o+n/2)<p))return null;m.xmax=r+n}}return m}(e,t)||s}return s}const x=e.clone().normalize();if(1===x.length&&e.xmax<l&&e.xmax-l/2>G(r)){const{xmin:t,xmax:n}=e;for(let o=0;o<=a;o++){const i=0===o?t:-l/2,s=o===a?n-l*o:l/2;x[o]=new(0,u.default)({xmin:i,xmax:s,ymin:e.ymin,ymax:e.ymax,spatialReference:r})}}return W(x.map((e=>L(e,t,n,o))).filter(s.isSome))}function z(e,t,n){if("extent"===e.type){const{xmin:t,ymin:n,xmax:o,ymax:i,spatialReference:r}=e;e=new(0,h.default)({rings:[[[t,i],[o,i],[o,n],[t,n],[t,i]]],spatialReference:r})}return e.spatialReference.equals(t)?e:(g(e.spatialReference,t,n),(0,c.project)(e,t,n))}function L(e,t,n=null,o=!0,i=!0){const r=e.spatialReference;if(r.equals(t)||!t)return e;g(r,t,n);const s=(0,c.project)(e,t,n);if(i&&t.isWebMercator&&s&&(s.ymax=Math.min(20037508.342787,s.ymax),s.ymin=Math.max(-20037508.342787,s.ymin),s.ymin>=s.ymax))return null;if(!o||!s)return s;const a=I(r,!0),l=I(t,!0);if(null==a||null==l)return s;const f=G(r,.001),u=G(r,w),h=G(t,.001);if(Math.abs(s.xmin-l[0])<h&&Math.abs(s.xmax-l[1])<h){const o=Math.abs(e.xmin-a[0]),i=Math.abs(a[1]-e.xmax);if(o<f&&i>u){s.xmin=l[0];const o=[];o.push(new(0,x.default)(e.xmax,e.ymin,r)),o.push(new(0,x.default)(e.xmax,(e.ymin+e.ymax)/2,r)),o.push(new(0,x.default)(e.xmax,e.ymax,r));const i=o.map((e=>E(e,t,n))).filter((e=>!isNaN(e?.x))).map((e=>e.x));s.xmax=Math.max.apply(null,i)}if(i<f&&o>u){s.xmax=l[1];const o=[];o.push(new(0,x.default)(e.xmin,e.ymin,r)),o.push(new(0,x.default)(e.xmin,(e.ymin+e.ymax)/2,r)),o.push(new(0,x.default)(e.xmin,e.ymax,r));const i=o.map((e=>E(e,t,n))).filter((e=>!isNaN(e?.x))).map((e=>e.x));s.xmin=Math.min.apply(null,i)}}else{const e=G(t,.001);Math.abs(s.xmin-l[0])<e&&(s.xmin=l[0]),Math.abs(s.xmax-l[1])<e&&(s.xmax=l[1])}return s}function O(e,t=!1){if(!e)return null;const n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*y[e.wkid]||null}function I(e,t=!1){if(e.isGeographic)return[-180,180];const n=O(e,t);return null!=n?[-n/2,n/2]:null}function F(e,t,n,o){let i=(e-t)/n;return i-Math.floor(i)!=0?i=Math.floor(i):o&&(i-=1),i}function A(e,t=!1){const n=O(e.spatialReference);if(null==n)return 0;const o=t?0:-n/2,i=G(e.spatialReference),r=!t&&Math.abs(e.xmax-n/2)<i?n/2:e.xmax,s=!t&&Math.abs(e.xmin+n/2)<i?-n/2:e.xmin;return F(r,o,n,!0)-F(s,o,n,!1)}function B(e){const t=e.storageInfo.origin.x,n=O(e.spatialReference,!0);if(null==n)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const o=n/2,{nativePixelSize:i,storageInfo:r,extent:s}=e,{maximumPyramidLevel:a,blockWidth:l,pyramidScalingFactor:f}=r;let c=i.x;const u=[],x=null!=e.transform&&"gcs-shift"===e.transform.type,h=t+(x?0:o),p=x?n-t:o-t;for(let e=0;e<=a;e++){const e=(s.xmax-t)/c/l,n=e-Math.floor(e)==0?e:Math.ceil(e),o=p/c/l,i=o-Math.floor(o)==0?o:Math.ceil(o),r=Math.floor(h/c/l),a=Math.round(h/c)%l,x=(l-Math.round(p/c)%l)%l;u.push({resolutionX:c,blockWidth:l,datsetColumnCount:n,worldColumnCountFromOrigin:i,leftMargin:a,rightPadding:x,originColumnOffset:r}),c*=f}return{originX:t,halfWorldWidth:o,pyramidsInfo:u,hasGCSSShiftTransform:x}}function q(e){const t=e.isAdaptive&&null==e.spacing;let n=e.spacing||[32,32],o=Y(e),i={cols:o.size[0]+1,rows:o.size[1]+1};const r=o.outofBoundPointCount>0&&o.outofBoundPointCount<o.offsets.length/2;let s=o.outofBoundPointCount===o.offsets.length/2||t&&r?[0,0]:d(o.offsets,i,n,4);const a=(s[0]+s[1])/2,l=e.projectedExtent.spatialReference,c=e.srcBufferExtent.spatialReference;if(t&&(r||a>4)&&(m(l,c,e.datumTransformation)&&(l.isGeographic||C(l)),n=[4,4],o=Y({...e,spacing:n}),i={cols:o.size[0]+1,rows:o.size[1]+1},s=d(o.offsets,i,n,4)),o.error=s,n[0]>1&&(o.coefficients=U(o.offsets,i,r)),e.includeGCSGrid&&!l.isGeographic&&!l.isWebMercator)if(c.isGeographic)o.gcsGrid={offsets:o.offsets,coefficients:o.coefficients,spacing:n};else{const t=C(l);if(null!=t&&!t.isEnvelope){const t=function(e){if(!e||e.isGeographic)return e;const t=String(e.wkid||e.wkt);let n;return R.has(t)?n=R.get(t):(n=(e.wkid?f.e.coordsys(e.wkid):f.e.fromString(f.f.PE_TYPE_PROJCS,e.wkt)).getGeogcs().getCode(),R.set(t,n)),new(0,p.default)({wkid:n})}(l),s=_(e.projectedExtent,t),{offsets:a}=Y({...e,srcBufferExtent:s,spacing:n}),c=U(a,i,r);o.gcsGrid={offsets:a,coefficients:c,spacing:n}}}return o}function Y(e){const{projectedExtent:t,srcBufferExtent:n,pixelSize:o,datumTransformation:i,rasterTransform:r}=e,s=t.spatialReference,a=n.spatialReference,l=g(s,a),{xmin:f,ymin:c,xmax:u,ymax:h}=t,p=O(a),m=null!=p&&(e.hasWrapAround||"gcs-shift"===r?.type),d=e.spacing||[32,32],y=d[0]*o.x,M=d[1]*o.y,R=1===d[0],P=Math.ceil((u-f)/y-.1/d[0])+(R?0:1),S=Math.ceil((h-c)/M-.1/d[1])+(R?0:1),b=T({cols:P,rows:S,xmin:f,ymax:h,xres:y,yres:M,inSR:s,outSR:a,datumTransformation:i,preferPE:d[0]<=4,usePixelCenter:R}),E=[];let N,k=0;const j=R?-1:NaN,{xmin:v,xmax:W,ymax:_,width:z,height:L}=n,I=G(a,w),F=null!=p&&v>0&&W>p/2;let A=!1;if(l){const e=C(s);A=null!=e&&e.poleLocation>0}for(let e=0;e<P;e++){const t=[];for(let n=0;n<S;n++){let o=b[e*S+n];if(m&&o[0]>W&&o[0]>p/2-I?o[0]-=p:m&&0===e&&o[0]<0&&F&&!r&&(o[0]+=p),!o||isNaN(o[0])||isNaN(o[1]))E.push(j),E.push(j),t.push(null),k++;else{if(r){const e=r.inverseTransform(new(0,x.default)({x:o[0],y:o[1],spatialReference:a}));o=[e.x,e.y]}t.push(o),e>0&&m&&N[n]&&o[0]<N[n][0]&&(o[0]+=p,A&&o[0]>W&&o[0]>p&&(o[0]-=p)),E.push((o[0]-v)/z),E.push((_-o[1])/L)}}N=t}return{offsets:E,error:null,coefficients:null,outofBoundPointCount:k,spacing:d,size:R?[P,S]:[P-1,S-1]}}function U(e,t,n){const{cols:o,rows:i}=t,r=new Float32Array((o-1)*(i-1)*12),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let t=0;t<o-1;t++){for(let n=0;n<i-1;n++){let l=t*i*2+2*n;const f=e[l],c=e[l+1],u=e[l+2],x=e[l+3];l+=2*i;const h=e[l],p=e[l+1],m=e[l+2],g=e[l+3];let d=0,y=12*(n*(o-1)+t);for(let e=0;e<3;e++)r[y++]=s[d++]*f+s[d++]*u+s[d++]*m;d=0;for(let e=0;e<3;e++)r[y++]=s[d++]*c+s[d++]*x+s[d++]*g;d=0;for(let e=0;e<3;e++)r[y++]=a[d++]*f+a[d++]*h+a[d++]*m;d=0;for(let e=0;e<3;e++)r[y++]=a[d++]*c+a[d++]*p+a[d++]*g}if(n)for(let e=0;e<r.length;e++)isNaN(r[e])&&(r[e]=-1)}return r}function D(e){const t=e.clone().normalize();return 1===t.length?t[0]:W(t)}function X(e,t,n){const{storageInfo:o,pixelSize:i}=t;let r=0,s=!1;const{pyramidResolutions:a}=o,f="mixed"===o.tileInfo.format?.toLowerCase()?Math.max(1,Math.min(3,o.tileInfo.dpi/96)):1,c=(e.x+e.y)/2/f;if(null!=a&&a.length){const e=a[a.length-1],o=(e.x+e.y)/2,f=(i.x+i.y)/2;if(c<=f)r=0;else if(c>=o)r=a.length,s=c/o>8;else{let e,t=f;for(let o=1;o<=a.length;o++){if(e=(a[o-1].x+a[o-1].y)/2,c<=e){c===e?r=o:"down"===n?(r=o-1,s=c/t>8):r="up"===n||c-t>e-c||c/t>2?o:o-1;break}t=e}}const u=0===r?i:a[r-1];return s&&Math.min(u.x,u.y)*(0,l.getMetersPerUnitForSR)(t.spatialReference)>19567&&(s=!1),{pyramidLevel:r,pyramidResolution:new(0,x.default)({x:u.x,y:u.y,spatialReference:t.spatialReference}),excessiveReading:s}}const u=Math.log(e.x/i.x)/Math.LN2,h=Math.log(e.y/i.y)/Math.LN2,p=t.storageInfo.maximumPyramidLevel||0;r="down"===n?Math.floor(Math.min(u,h)):"up"===n?Math.ceil(Math.max(u,h)):Math.round((u+h)/2),r<0?r=0:r>p&&(s=r>p+3,r=p);const m=2**r;return{pyramidLevel:r,pyramidResolution:new(0,x.default)({x:m*t.nativePixelSize.x,y:m*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function J(e,t,n){const o=n?.tileSize??512,i=n?.alignGlobalDatasetWithAGOL??!0,r=!!n?.limitToSrcResolution,{extent:s,spatialReference:a,pixelSize:f}=e,c=b(new(0,x.default)({x:f.x,y:f.y,spatialReference:a}),t,s);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(c.x+c.y)/2,h=(0,l.getMetersPerUnitForSR)(t),p=u*h*96*39.37,m=t.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let g="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const d=_(s,t),y=Math.min(Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),Math.ceil(Math.log(m/2/p)/Math.LN2));if(!g&&i&&(t.isGeographic||t.isWebMercator)&&(g=d.xmin*d.xmax<0,!g&&y<3)){const e=O(t);if(null!=e){const t=2**y*u*o,n=Math.ceil(e/t);g=1===n||2===n&&e/2-d.xmax<t}}let M,R=p;const w=1.001,P=Math.min(2,Math.max(1.414,e.storageInfo?.pyramidScalingFactor||2));if(g){R=m;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,n=e*(96*h*39.37),o=t.isGeographic?4326:3857;M=b(new(0,x.default)({x:e,y:e,spatialReference:{wkid:o}}),a,d),M.x*=R/n,M.y*=R/n}else{M={x:f.x,y:f.y};let e=0;for(;R<m*(w/2)&&e<y;)e++,R*=P,M.x*=P,M.y*=P;Math.max(R,m)/Math.min(R,m)<=w&&(R=m)}const S=[R],G=[{x:M.x,y:M.y}],E=Math.min(70.5310735,p)/w;for(;R>=E;)R/=P,M.x/=P,M.y/=P,S.push(R),G.push({x:M.x,y:M.y});if(r){const e=.001*f.x;let t=G.findIndex((t=>t.x>=f.x-e&&t.x<=f.x+e));t>-1?(G.length=t+1,S.length=t+1):(t=G.findIndex((t=>t.x<=f.x+e)),t>0&&(G.length=t,S.length=t))}return{projectedPixelSize:c,scales:S,srcResolutions:G,isCustomTilingScheme:!g}}}));
//# sourceMappingURL=RasterWorker.7ccf2f70.js.map
